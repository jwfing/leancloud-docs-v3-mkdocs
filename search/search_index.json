{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"LeanCloud \u6587\u6863 \u4ea7\u54c1\u4e0e\u670d\u52a1 \u6309\u8bed\u8a00\u67e5\u770b \u6570\u636e\u5b58\u50a8 \u670d\u52a1\u603b\u89c8 \u5bf9\u8c61\u5b58\u50a8\u4e0e\u67e5\u8be2 \u7528\u6237\u7ba1\u7406 \u5b9e\u65f6\u6570\u636e\u540c\u6b65 \u6570\u636e\u5b89\u5168\u8be6\u89e3 \u5173\u7cfb\u5efa\u6a21 REST API \u5373\u65f6\u901a\u8baf \u670d\u52a1\u603b\u89c8 \u5ba2\u6237\u7aef\u5f00\u53d1\u6307\u5357 \u57fa\u7840\u5165\u95e8 \u8fdb\u9636\u529f\u80fd \u9ad8\u9636\u6280\u5de7 UIKit \u4f7f\u7528\u6307\u5357\uff08 iOS \u7248 / Android \u7248 \uff09 REST API \u4e91\u5f15\u64ce+\u4e91\u7f13\u5b58 \u670d\u52a1\u603b\u89c8 \u5feb\u901f\u5165\u95e8 \u4e91\u51fd\u6570 \u6570\u636e\u5b58\u50a8 Hook \u5373\u65f6\u901a\u8baf Hook \u81ea\u5b9a\u4e49\u4e91\u51fd\u6570 REST API \u4e91\u7f13\u5b58\u4f7f\u7528\u6307\u5357 \u7f51\u7ad9\u6258\u7ba1\uff08 NodeJS \u7248 / Java \u7248 / Python \u7248 / .NET \u7248 \uff09 \u6e38\u620f+\u4e91\u7aef \u591a\u4eba\u5b9e\u65f6\u5bf9\u6218 \u670d\u52a1\u603b\u89c8 \u5ba2\u6237\u7aef\u5f00\u53d1\u6307\u5357(JavaScript & Unity) Client Engine \u670d\u52a1\u603b\u89c8 \u5f00\u53d1\u6307\u5357(JavaScript) \u6392\u884c\u699c \u670d\u52a1\u603b\u89c8 \u5f00\u53d1\u6307\u5357(JavaScript) \u6d88\u606f\u63a8\u9001 \u670d\u52a1\u603b\u89c8 APNS \u8bc1\u4e66\u914d\u7f6e Android \u6df7\u5408\u63a8\u9001 REST API \u77ed\u4fe1 \u9a8c\u8bc1\u77ed\u4fe1 \u901a\u77e5\u77ed\u4fe1 \u8425\u9500\u77ed\u4fe1 REST API \u63a7\u5236\u53f0\u4f7f\u7528\u8bf4\u660e \u5e38\u89c1\u529f\u80fd\u63d0\u793a \u63a7\u5236\u53f0\u4f7f\u7528\u8bf4\u660e \u8d22\u52a1\u5145\u503c \u652f\u4ed8\u5b9d\u5145\u503c PayPal \u5145\u503c \u94f6\u884c\u5bf9\u516c\u8f6c\u8d26 \u5e38\u89c1\u95ee\u9898(\u53d1\u7968/\u5408\u540c\u7b7e\u7f72/\u9000\u6b3e\u7b49) \u5e38\u89c1\u95ee\u9898 \u9519\u8bef\u7801\u8be6\u89e3 \u5e38\u89c1\u95ee\u9898","title":"\u6587\u6863\u9996\u9875"},{"location":"#leancloud","text":"","title":"LeanCloud \u6587\u6863"},{"location":"#_1","text":"\u6570\u636e\u5b58\u50a8 \u670d\u52a1\u603b\u89c8 \u5bf9\u8c61\u5b58\u50a8\u4e0e\u67e5\u8be2 \u7528\u6237\u7ba1\u7406 \u5b9e\u65f6\u6570\u636e\u540c\u6b65 \u6570\u636e\u5b89\u5168\u8be6\u89e3 \u5173\u7cfb\u5efa\u6a21 REST API \u5373\u65f6\u901a\u8baf \u670d\u52a1\u603b\u89c8 \u5ba2\u6237\u7aef\u5f00\u53d1\u6307\u5357 \u57fa\u7840\u5165\u95e8 \u8fdb\u9636\u529f\u80fd \u9ad8\u9636\u6280\u5de7 UIKit \u4f7f\u7528\u6307\u5357\uff08 iOS \u7248 / Android \u7248 \uff09 REST API \u4e91\u5f15\u64ce+\u4e91\u7f13\u5b58 \u670d\u52a1\u603b\u89c8 \u5feb\u901f\u5165\u95e8 \u4e91\u51fd\u6570 \u6570\u636e\u5b58\u50a8 Hook \u5373\u65f6\u901a\u8baf Hook \u81ea\u5b9a\u4e49\u4e91\u51fd\u6570 REST API \u4e91\u7f13\u5b58\u4f7f\u7528\u6307\u5357 \u7f51\u7ad9\u6258\u7ba1\uff08 NodeJS \u7248 / Java \u7248 / Python \u7248 / .NET \u7248 \uff09 \u6e38\u620f+\u4e91\u7aef \u591a\u4eba\u5b9e\u65f6\u5bf9\u6218 \u670d\u52a1\u603b\u89c8 \u5ba2\u6237\u7aef\u5f00\u53d1\u6307\u5357(JavaScript & Unity) Client Engine \u670d\u52a1\u603b\u89c8 \u5f00\u53d1\u6307\u5357(JavaScript) \u6392\u884c\u699c \u670d\u52a1\u603b\u89c8 \u5f00\u53d1\u6307\u5357(JavaScript) \u6d88\u606f\u63a8\u9001 \u670d\u52a1\u603b\u89c8 APNS \u8bc1\u4e66\u914d\u7f6e Android \u6df7\u5408\u63a8\u9001 REST API \u77ed\u4fe1 \u9a8c\u8bc1\u77ed\u4fe1 \u901a\u77e5\u77ed\u4fe1 \u8425\u9500\u77ed\u4fe1 REST API \u63a7\u5236\u53f0\u4f7f\u7528\u8bf4\u660e \u5e38\u89c1\u529f\u80fd\u63d0\u793a \u63a7\u5236\u53f0\u4f7f\u7528\u8bf4\u660e \u8d22\u52a1\u5145\u503c \u652f\u4ed8\u5b9d\u5145\u503c PayPal \u5145\u503c \u94f6\u884c\u5bf9\u516c\u8f6c\u8d26 \u5e38\u89c1\u95ee\u9898(\u53d1\u7968/\u5408\u540c\u7b7e\u7f72/\u9000\u6b3e\u7b49) \u5e38\u89c1\u95ee\u9898 \u9519\u8bef\u7801\u8be6\u89e3 \u5e38\u89c1\u95ee\u9898","title":"\u4ea7\u54c1\u4e0e\u670d\u52a1 \u6309\u8bed\u8a00\u67e5\u770b"},{"location":"index-lang/","text":"LeanCloud \u6587\u6863 \u5e73\u53f0\u4e0e\u8bed\u8a00 JavaScript(Web & NodeJS) \u6570\u636e\u5b58\u50a8 \u5373\u65f6\u901a\u8baf \u5b9e\u65f6\u5bf9\u6218 \u6392\u884c\u699c \u63a8\u9001 \u77ed\u4fe1 \u6570\u636e\u5b89\u5168 \u5173\u7cfb\u5efa\u6a21 \u7f51\u7ad9\u6258\u7ba1 \u5c0f\u7a0b\u5e8f+\u5c0f\u6e38\u620f SDK \u5b89\u88c5 \u6570\u636e\u5b58\u50a8 SDK API \u5373\u65f6\u901a\u8baf SDK API iOS(Objective-C & Swift) \u6570\u636e\u5b58\u50a8 \u5373\u65f6\u901a\u8baf \u63a8\u9001 \u77ed\u4fe1 \u6570\u636e\u5b89\u5168 \u5173\u7cfb\u5efa\u6a21 SDK \u5b89\u88c5 Objective-C SDK API Swift SDK API Java(Android & Web) \u6570\u636e\u5b58\u50a8 \u5373\u65f6\u901a\u8baf \u63a8\u9001 \u77ed\u4fe1 \u6570\u636e\u5b89\u5168 \u5173\u7cfb\u5efa\u6a21 \u7f51\u7ad9\u6258\u7ba1 \u4e91\u51fd\u6570 \u6570\u636e\u5b58\u50a8 Hook \u4e91\u51fd\u6570 \u5373\u65f6\u901a\u8baf Hook SDK \u5b89\u88c5 Android SDK API Java SDK API C# & Unity \u6570\u636e\u5b58\u50a8 \u5373\u65f6\u901a\u8baf \u5b9e\u65f6\u5bf9\u6218 \u63a8\u9001 \u77ed\u4fe1 \u6570\u636e\u5b89\u5168 \u5173\u7cfb\u5efa\u6a21 \u7f51\u7ad9\u6258\u7ba1 \u4e91\u51fd\u6570 \u6570\u636e\u5b58\u50a8 Hook \u4e91\u51fd\u6570 \u5373\u65f6\u901a\u8baf Hook SDK \u5b89\u88c5 SDK API Python \u7f51\u7ad9\u6258\u7ba1 \u4e91\u51fd\u6570 \u6570\u636e\u5b58\u50a8 Hook \u4e91\u51fd\u6570 \u5373\u65f6\u901a\u8baf Hook SDK \u5b89\u88c5 SDK API PHP \u7f51\u7ad9\u6258\u7ba1 \u4e91\u51fd\u6570 \u6570\u636e\u5b58\u50a8 Hook \u4e91\u51fd\u6570 \u5373\u65f6\u901a\u8baf Hook SDK \u5b89\u88c5 SDK API","title":"LeanCloud \u6587\u6863"},{"location":"index-lang/#leancloud","text":"","title":"LeanCloud \u6587\u6863"},{"location":"index-lang/#_1","text":"JavaScript(Web & NodeJS) \u6570\u636e\u5b58\u50a8 \u5373\u65f6\u901a\u8baf \u5b9e\u65f6\u5bf9\u6218 \u6392\u884c\u699c \u63a8\u9001 \u77ed\u4fe1 \u6570\u636e\u5b89\u5168 \u5173\u7cfb\u5efa\u6a21 \u7f51\u7ad9\u6258\u7ba1 \u5c0f\u7a0b\u5e8f+\u5c0f\u6e38\u620f SDK \u5b89\u88c5 \u6570\u636e\u5b58\u50a8 SDK API \u5373\u65f6\u901a\u8baf SDK API iOS(Objective-C & Swift) \u6570\u636e\u5b58\u50a8 \u5373\u65f6\u901a\u8baf \u63a8\u9001 \u77ed\u4fe1 \u6570\u636e\u5b89\u5168 \u5173\u7cfb\u5efa\u6a21 SDK \u5b89\u88c5 Objective-C SDK API Swift SDK API Java(Android & Web) \u6570\u636e\u5b58\u50a8 \u5373\u65f6\u901a\u8baf \u63a8\u9001 \u77ed\u4fe1 \u6570\u636e\u5b89\u5168 \u5173\u7cfb\u5efa\u6a21 \u7f51\u7ad9\u6258\u7ba1 \u4e91\u51fd\u6570 \u6570\u636e\u5b58\u50a8 Hook \u4e91\u51fd\u6570 \u5373\u65f6\u901a\u8baf Hook SDK \u5b89\u88c5 Android SDK API Java SDK API C# & Unity \u6570\u636e\u5b58\u50a8 \u5373\u65f6\u901a\u8baf \u5b9e\u65f6\u5bf9\u6218 \u63a8\u9001 \u77ed\u4fe1 \u6570\u636e\u5b89\u5168 \u5173\u7cfb\u5efa\u6a21 \u7f51\u7ad9\u6258\u7ba1 \u4e91\u51fd\u6570 \u6570\u636e\u5b58\u50a8 Hook \u4e91\u51fd\u6570 \u5373\u65f6\u901a\u8baf Hook SDK \u5b89\u88c5 SDK API Python \u7f51\u7ad9\u6258\u7ba1 \u4e91\u51fd\u6570 \u6570\u636e\u5b58\u50a8 Hook \u4e91\u51fd\u6570 \u5373\u65f6\u901a\u8baf Hook SDK \u5b89\u88c5 SDK API PHP \u7f51\u7ad9\u6258\u7ba1 \u4e91\u51fd\u6570 \u6570\u636e\u5b58\u50a8 Hook \u4e91\u51fd\u6570 \u5373\u65f6\u901a\u8baf Hook SDK \u5b89\u88c5 SDK API","title":"\u5e73\u53f0\u4e0e\u8bed\u8a00"},{"location":"engine/engine-im-hook/","text":"","title":"Engine im hook"},{"location":"engine/engine-overview/","text":"","title":"\u670d\u52a1\u603b\u89c8"},{"location":"engine/engine-storage-hook/","text":"","title":"Engine storage hook"},{"location":"engine/web-hosting-nodejs/","text":"","title":"Web hosting nodejs"},{"location":"game/play/multiplayer/","text":"Play \u5f00\u53d1\u6307\u5357 Unity \u524d\u8a00 Play \u662f\u4e00\u4e2a\u57fa\u4e8e C# \u7f16\u5199\u7684 Unity \u7684\u7ec4\u4ef6\uff0c\u5b83\u5177\u5907\u5982\u4e0b\u51e0\u9879\u4e3b\u8981\u7684\u529f\u80fd\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff09\uff1a \u4f7f\u7528 UserID \u5efa\u7acb\u4e0e\u670d\u52a1\u7aef\u7684\u901a\u4fe1 \u521b\u5efa\u5bf9\u6218\u623f\u95f4(PlayRoom) \u83b7\u53d6\u623f\u95f4\u5217\u8868 \u52a0\u5165\u623f\u95f4 \u968f\u673a\u52a0\u5165\u623f\u95f4 \u6839\u636e\u5339\u914d\u6761\u4ef6\u52a0\u5165\u623f\u95f4 \u5bfb\u627e\u597d\u53cb\u6240\u5728\u7684\u623f\u95f4 \u8bbe\u7f6e\u623f\u95f4\u5c5e\u6027 \u83b7\u53d6\u623f\u95f4\u73a9\u5bb6\uff08Player\uff09\u5217\u8868 \u4fee\u6539\u73a9\u5bb6\u7684\u5c5e\u6027 \u53d1\u9001\u548c\u63a5\u6536 RPC \u6d88\u606f \u79bb\u5f00\u623f\u95f4 Play \u89e3\u51b3\u4e86\u5982\u4e0b\u51e0\u79cd\u6e38\u620f\u573a\u666f\u7684\u670d\u52a1\u7aef\u9700\u6c42\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff09\uff1a MOBA \u591a\u4eba\u5728\u7ebf\u5b9e\u65f6\u5bf9\u6218 \u5361\u724c\u68cb\u724c\u684c\u6e38 \u6218\u68cb Play \u4e3a\u6709\u5f3a\u8054\u7f51\u9700\u6c42\u7684\u7f51\u7edc\u6e38\u620f\u63d0\u4f9b\u4e86\u4e00\u6574\u5957\u7684\u5ba2\u6237\u7aef SDK \u89e3\u51b3\u65b9\u6848\uff0c\u56e0\u6b64\u5f00\u53d1\u56e2\u961f\u4e0d\u518d\u9700\u8981\u81ea\u5efa\u670d\u52a1\u7aef\uff0c\u4ece\u800c\u8282\u7701\u5927\u90e8\u5206\u5f00\u53d1\u548c\u8fd0\u7ef4\u6210\u672c\u3002 \u5fc5\u5907\u7684\u57fa\u7840\u77e5\u8bc6 Play \u662f\u57fa\u4e8e C# \u5f00\u53d1\u8fd0\u884c\u5728 Unity \u7684 Mono .NET \u4e0b\u7684 SDK\uff0c\u56e0\u6b64\u5f00\u53d1\u8005\u9700\u8981\u638c\u63e1\u5982\u4e0b\u57fa\u7840\u77e5\u8bc6\uff1a C# \u7684\u7f16\u7a0b\u57fa\u7840\u77e5\u8bc6\uff0c\u7279\u522b\u662f Attribute\u3001Event \u7b49\u6982\u5ff5\u3002 \u5e27\u540c\u6b65\u548c\u72b6\u6001\u540c\u6b65\u7684\u4e24\u79cd\u7f51\u6e38\u7c7b\u578b\u5206\u522b\u662f\u5982\u4f55\u5b9e\u73b0\u7684\uff1f \u4ee5\u4e0a\u95ee\u9898\u7b54\u6848\u8bf7\u5f00\u53d1\u8005\u81ea\u884c\u5b66\u4e60\u638c\u63e1\u3002 SDK \u5bfc\u5165\u548c\u521d\u59cb\u5316 \u8bf7\u9605\u8bfb \u5b89\u88c5\u548c\u521d\u59cb\u5316 \uff0c\u83b7\u53d6\u52a8\u6001\u94fe\u63a5\u5e93\u3002 \u6253\u5f00\u5ba2\u6237\u7aef\u65e5\u5fd7 \u5982\u4e0b\u4ee3\u7801\u5c06\u6253\u5f00\u5ba2\u6237\u7aef\u7684\u65e5\u5fd7\uff0c\u53ef\u4ee5\u5e2e\u52a9\u8c03\u8bd5\u548c\u8fdb\u884c\u95ee\u9898\u53cd\u9988\uff1a // \u65e5\u5fd7\u90fd\u4f1a\u4f7f\u7528 Unity.Debug \u6253\u5370\u5728\u63a7\u5236\u53f0 Play.ToggleLog(); \u4f7f\u7528 UserID \u5efa\u7acb\u4e0e\u670d\u52a1\u7aef\u7684\u901a\u4fe1 Play \u76ee\u524d\u53ea\u9700\u8981\u5ba2\u6237\u7aef\u8bbe\u7f6e\u4e00\u4e2a UserID \u5c31\u53ef\u4ee5\u76f4\u63a5\u8fde\u63a5\u4e91\u7aef\uff0c\u8fd9\u4e2a UserID \u62e5\u6709\u5982\u4e0b\u9650\u5236\uff1a \u4e0d\u652f\u6301\u4e2d\u6587\u548c\u7279\u6b8a\u5b57\u7b26\uff08\u5305\u62ec \uff0c\uff01@#\uffe5%\u2026\u2026 *\uff08\uff09 \u7b49\uff09\uff0c\u4f46\u53ef\u4ee5\u662f\u4e0b\u5212\u7ebf _ \u3002 \u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7 64 \u5b57\u7b26 \u4e00\u4e2a\u5e94\u7528\u5185\u5168\u5c40\u552f\u4e00 \u4e0b\u9762\u6211\u4eec\u4f7f\u7528 Mario \u4f5c\u4e3a UserID \u8fde\u63a5\u4e91\u7aef\u670d\u52a1\u5668\uff0c\u6210\u529f\u4e4b\u540e\u670d\u52a1\u7aef\u4f1a\u56de\u8c03 OnAuthenticated \uff1a using LeanCloud; namespace PlayDocSample { /// summary /// \u6ce8\u518c\u56de\u8c03\u7684\u7c7b\u578b\uff0c\u5fc5\u987b\u7ee7\u627f\u81ea PlayMonoBehaviour /// /summary public class SampleConnect : PlayMonoBehaviour { void start() { // \u6253\u5f00\u8c03\u8bd5\u65e5\u5fd7 Play.ToggleLog(true); // \u8bbe\u7f6e UserID Play.UserID = Mario ; // \u58f0\u660e\u6e38\u620f\u7248\u672c\uff0c\u4e0d\u540c\u7248\u672c\u7684\u73a9\u5bb6\u662f\u4e0d\u4f1a\u5339\u914d\u5230\u540c\u4e00\u4e2a\u623f\u95f4 Play.Connect( 0.0.1 ); // \u5982\u679c\u6210\u529f\u5219\u4f1a\u56de\u8c03 OnAuthenticated } [PlayEvent] public override void OnAuthenticated() { Play.Log( OnAuthenticated ); } protected override void Awake() { base.Awake(); } protected override void OnDestroy() { base.OnDestroy(); } } } \u91cd\u8981\u7684\u6ce8\u610f\u4e8b\u9879 \u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\u53ef\u4ee5\u770b\u89c1\uff0c\u4ee3\u7801\u58f0\u660e\u4e86\u4e00\u4e2a ConnectSample \u7c7b\uff0c\u5b83\u7ee7\u627f\u81ea PlayMonoBehaviour \uff0c\u6240\u6709\u7684\u4e8b\u4ef6\u56de\u8c03\u90fd\u52a0\u4e0a\u4e86 [PlayEvent] \u5c5e\u6027\u6807\u8bb0\uff0c\u8fd9\u4e9b\u90fd\u662f \u5fc5\u987b\u7684 \u3002\u540e\u9762\u7684\u793a\u4f8b\u4ee3\u7801\u90fd\u4f1a\u5982\u6b64\uff0c\u5f00\u53d1\u8005\u7684\u4ee3\u7801\u4e5f\u9700\u8981\u9075\u5b88\u8fd9\u4e00\u7ea6\u5b9a\uff0c\u5c11\u4e86\u4e00\u9879\uff0c\u4e8b\u4ef6\u56de\u8c03\u5c31\u4e0d\u4f1a\u751f\u6548\u3002 \u56e0\u6b64\u4efb\u4f55\u4e00\u4e2a\u4f7f\u7528 Play \u8fdb\u884c\u6e38\u620f\u5f00\u53d1\u7684 PlayMonoBehaviour \u5b50\u7c7b\u5fc5\u987b\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\uff1a \u7ee7\u627f\u81ea PlayMonoBehaviour \u4e8b\u4ef6\u56de\u8c03\u5fc5\u987b\u5e26\u6709 [PlayEvent] \u6807\u8bb0 \u5c24\u5176\u91cd\u8981\u7684\u662f\uff0c \u5982\u679c\u9700\u8981 new\uff08\u91cd\u5199\uff09\u6216\u8005 override\uff08\u8986\u76d6\uff09 Awake \u548c OnDestroy \u65b9\u6cd5\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u8c03\u7528\u7236\u7c7b\u7684\u65b9\u6cd5 base.Awake() \u6216\u8005 base.OnDestroy \u3002 \u623f\u95f4\u5339\u914d \u6ce8\u610f\uff0c\u5728\u6e38\u620f\u5f53\u4e2d\u90fd\u6709 Lobby(\u6e38\u620f\u5927\u5385)\u7684\u6982\u5ff5\uff0c\u800c\u623f\u95f4\u90fd\u4f1a\u5c5e\u4e8e\u4e00\u4e2a Lobby\uff0c\u5f53\u524d Play \u9ed8\u8ba4\u4e00\u4e2a\u5e94\u7528\u4e0b\u6240\u6709\u7684\u623f\u95f4\u90fd\u5904\u5728\u540c\u4e00\u4e2a Lobby \u4e0b\uff0c\u8fd9\u4e2a\u5c31\u662f\u5168\u5c40\u7684\u5927\u5385\uff08\u5728\u4e4b\u540e\u7684\u8fed\u4ee3\u7248\u672c\u4e2d\u4f1a\u6839\u636e\u7528\u6237\u7684\u9700\u6c42\u9010\u6e10\u5f00\u653e\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u6e38\u620f\u5927\u5385\uff0c\u656c\u8bf7\u671f\u5f85\uff09\u3002 \u521b\u5efa\u623f\u95f4 PlayRoom \u521b\u5efa\u623f\u95f4\u662f\u6e38\u620f\u5f00\u59cb\u7684\u524d\u63d0\uff0c\u53ea\u6709\u540c\u5728\u4e00\u4e2a\u623f\u95f4\u5185\u7684\u73a9\u5bb6\u624d\u53ef\u4ee5\u4e00\u8d77\u73a9\u6e38\u620f\u3002 \u623f\u95f4\u7684\u540d\u79f0\u662f\u5168\u5c40\u552f\u4e00\u7684\u6807\u8bc6\uff0c\u8fd9\u4e2a\u6807\u8bc6\u53ef\u4ee5\u7531\u5f00\u53d1\u8005\u81ea\u5df1\u6307\u5b9a\u4e5f\u53ef\u4ee5\u7531 SDK \u5185\u90e8\u968f\u673a\u751f\u6210\uff0c\u5e76\u4e14\u5728\u521b\u5efa\u623f\u95f4\u7684\u540c\u65f6\u6307\u5b9a\u4e00\u4e9b\u914d\u7f6e\u9879\uff0c\u6bd4\u5982\u623f\u95f4\u6700\u5927\u73a9\u5bb6\u6570\u91cf\u4e4b\u7c7b\u7684\u3002 \u4e0b\u9762\u901a\u8fc7\u51e0\u4e2a\u5c0f\u8282\u6765\u4ecb\u7ecd\u521b\u5efa\u623f\u95f4\u7684\u65b9\u5f0f\u4ee5\u53ca\u5982\u4f55\u8bbe\u7f6e\u5404\u79cd\u914d\u7f6e\u9879\uff1a \u6307\u5b9a\u623f\u95f4\u540d using LeanCloud; namespace TestUnit.NetFx46.Docs { public class SampleCreateRoom : PlayMonoBehaviour { void start() { // \u6253\u5f00\u8c03\u8bd5\u65e5\u5fd7 Play.ToggleLog(true); // \u8bbe\u7f6e UserID Play.UserID = Mario ; // \u58f0\u660e\u6e38\u620f\u7248\u672c\uff0c\u4e0d\u540c\u6e38\u620f\u7248\u672c\u7684\u73a9\u5bb6\u4f1a\u88ab\u5206\u914d\u5728\u4e0d\u540c\u7684\u9694\u79bb\u533a\u57df\u4e2d Play.Connect( 0.0.1 ); // \u5982\u679c\u6210\u529f\u5219\u4f1a\u56de\u8c03 OnAuthenticated } [PlayEvent] public override void OnAuthenticated() { Play.Log( OnAuthenticated ); // \u8bbe\u7f6e\u623f\u95f4\u5168\u5c40\u552f\u4e00\u7684\u540d\u79f0\u4e3a \u300ctest-game-001\u300d Play.CreateRoom( test-game-001 ); } /// summary /// \u5982\u679c\u6210\u529f\u521b\u5efa\uff0c\u5219\u4f1a\u56de\u8c03\u5230 OnCreatedRoom /// /summary [PlayEvent] public override void OnCreatedRoom() { // \u6253\u5370\u623f\u95f4\u540d\u79f0 Play.Log( OnCreatedRoom , Play.Room.Name); } /// summary /// \u5982\u679c\u521b\u5efa\u5931\u8d25\uff0c\u5219\u4f1a\u56de\u8c03 OnCreateRoomFailed /// /summary /// param name= errorCode /param /// param name= reason /param [PlayEvent] public override void OnCreateRoomFailed(int errorCode, string reason) { Play.LogError(errorCode, reason); } } } \u6ce8\uff1a\u56e0\u4e3a\u521b\u5efa\u623f\u95f4\u7684\u903b\u8f91\u548c\u987a\u5e8f\u90fd\u4e00\u81f4\uff0c\u56e0\u6b64\u672c\u5c0f\u8282\u4e4b\u540e\u4ecb\u7ecd\u521b\u5efa\u623f\u95f4\u65f6\uff0c\u4e3a\u4e86\u7a81\u51fa\u91cd\u70b9\u53ca\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c\uff0c\u6211\u4eec\u5c06\u4e0d\u518d\u7ed9\u51fa\u6bcf\u4e00\u79cd\u56de\u8c03\u7684\u5b9e\u4f8b\u4ee3\u7801\uff0c\u8bf7\u53c2\u7167\u4e0a\u8ff0\u4ee3\u7801\u5373\u53ef\u3002 \u9002\u7528\u573a\u666f \uff1a\u6839\u636e\u7528\u6237\u8f93\u5165\u540d\u79f0\u521b\u5efa\u623f\u95f4\u3002 var roomName = inputLable.text; Play.CreateRoom(roomName); \u968f\u673a\u623f\u95f4\u540d \u5982\u679c\u4e0d\u4f20\u5165\u4efb\u4f55\u53c2\u6570\u521b\u5efa\u623f\u95f4\uff0c \u5ba2\u6237\u7aef\u4f1a\u968f\u673a\u751f\u6210\u4e00\u4e2a\u540d\u79f0 \u3002\u8fd9\u4e2a\u4e0d\u7528\u5f00\u53d1\u8005\u62c5\u5fc3\uff0c\u7b97\u6cd5\u662f\u7ecf\u8fc7\u6d4b\u8bd5\uff0c\u540d\u5b57\u91cd\u590d\u7684\u6982\u7387\u7ea6\u7b49\u4e8e GUID \u91cd\u590d\u7684\u6982\u7387\uff0c\u6240\u4ee5\u51e0\u4e4e\u4e0d\u53ef\u80fd\u3002 Play.CreateRoom(); \u6307\u5b9a\u73a9\u5bb6 ID \u8fd9\u4e2a\u529f\u80fd\u7684\u89e3\u51b3\u7684\u9700\u6c42\u662f\uff1a\u53ea\u5141\u8bb8\u4e00\u4e9b\u7279\u5b9a\u7684 ID \u73a9\u5bb6\u53ef\u4ee5\u52a0\u5165\u5230\u623f\u95f4\u6216\u8005\u5f53\u524d\u73a9\u5bb6\u5f00\u597d\u623f\u95f4\uff0c\u7b49\u5f85\u4e00\u4e9b\u7279\u5b9a\u7684\u670b\u53cb\u6765\u52a0\u5165\u3002\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a \u4e0b\u9762\u662f Play.CreateRoom(string roomName = null, IEnumerable string expectedUsers = null) \u7684\u4e24\u79cd\u91cd\u8f7d\u7684\u5b9e\u4f8b\u4ee3\u7801\uff1a // \u6307\u5b9a bill \u548c steve \u624d\u53ef\u4ee5\u52a0\u5165\u8fd9\u4e2a\u623f\u95f4 Play . CreateRoom ( expectedUsers : new string [] { bill , steve } ); // \u6216\u8005\u987a\u4fbf\u8bbe\u7f6e\u4e00\u4e0b Room Name Play . CreateRoom ( RichMen , new string [] { bill , steve } ); \u6ce8\u610f\uff0c\u8fd9\u79cd\u65b9\u5f0f\u521b\u5efa\u6210\u529f\u4e4b\u540e\uff0c\u88ab\u6307\u5b9a\u7684\u73a9\u5bb6\uff08\u4f8b\u5982\u4e0a\u8ff0\u4ee3\u7801\u4e2d\u7684 steve\uff09\u4e5f\u8fd8\u9700\u8981\u8c03\u7528\u4e00\u6b21 JoinRoom( RichMen ) \u4e3b\u52a8\u52a0\u5165\u5230\u8fd9\u4e2a\u623f\u95f4\u3002 Play.CreateRoom(new string[] { bill , steve }); \u53ea\u662f\u8868\u793a bill \u548c steve \u5df2\u7ecf\u628a\u623f\u95f4\u4f4d\u7f6e\u7ed9\u300c\u5360\u4f4d\u300d\u4e86\uff0c\u4f46\u662f\u7b49\u5230\u4ed6\u4eec\u81ea\u5df1\u4e0a\u7ebf\u4e4b\u540e\uff0c\u8fd8\u9700\u8981\u4e3b\u52a8\u52a0\u5165\u624d\u80fd\u771f\u6b63\u8fdb\u5165\u623f\u95f4\u3002 \u9002\u7528\u573a\u666f \uff1a\u597d\u53cb\u7ec4\u5c40\u4e00\u8d77\u73a9\u6e38\u620f\uff08\u4ee3\u7801\u53c2\u7167\u57fa\u7840\u7528\u6cd5\u91cc\u9762\u7684\u793a\u4f8b\uff09\u3002 \u9650\u5236\u73a9\u5bb6\u4eba\u6570 \u76ee\u524d Play \u6240\u6709\u7684\u623f\u95f4\u6700\u591a\u5141\u8bb8 10 \u4eba\u540c\u65f6\u5728\u4e00\u4e2a\u623f\u95f4\u8fdb\u884c\u6e38\u620f\u5bf9\u6218\uff0c\u6709\u4e00\u4e9b\u6e38\u620f\u751a\u81f3\u9700\u8981\u8bbe\u7f6e\u623f\u95f4\u6700\u591a\u4eba\u6570\u8981\u66f4\u5c11\uff0c\u6bd4\u5982\u6597\u5730\u4e3b\u53ea\u5141\u8bb8 3 \u4e2a\u4eba\u52a0\u5165\uff0c\u4e00\u65e6\u4eba\u6ee1\u4e86\uff0c\u5176\u4ed6\u7684\u4eba\u662f\u4e0d\u53ef\u4ee5\u52a0\u5165\u7684\uff0c\u56e0\u6b64\u5728\u521b\u5efa\u623f\u95f4\u7684\u65f6\u5019\u53ef\u4ee5\u8bbe\u7f6e\u623f\u95f4\u7684 MaxPlayerCount\uff1a var roomConfig = PlayRoom.RoomConfig.Default; roomConfig.MaxPlayerCount = 4; Play.CreateRoom(roomConfig); // \u4e5f\u53ef\u4ee5\u987a\u4fbf\u8bbe\u7f6e\u4e00\u4e0b room name Play.CreateRoom(roomConfig, max4-room ); \u9002\u7528\u573a\u666f \uff1a\u6e38\u620f\u672c\u8eab\u6709\u4e25\u683c\u7684\u4eba\u6570\u8981\u6c42\uff0c\u6bd4\u5982\u4e09\u56fd\u6740\u533a\u5206 1v1 \u4e24\u4eba\u5c40\u3001\u4e94\u4eba\u5c40\u30013v3 \u516d\u4eba\u5c40\u548c\u6807\u51c6\u516b\u4eba\u5c40\u3002\u4e0b\u9762\u793a\u4f8b\u5c06\u4f1a\u521b\u5efa\u4e00\u4e2a 3v3 \u516d\u4eba\u5c40\u7684\u4e09\u56fd\u6740\u623f\u95f4\uff1a var roomConfig = PlayRoom.RoomConfig.Default; roomConfig.MaxPlayerCount = 6; // \u623f\u95f4\u540d\u968f\u673a\u5373\u53ef\uff0c\u56e0\u4e3a room name \u6ca1\u6709\u5fc5\u8981\u4e00\u5b9a\u8981\u663e\u793a\u51fa\u6765 Play.CreateRoom(roomConfig); \u73a9\u5bb6\u6389\u7ebf\u4e4b\u540e\u88ab\u4fdd\u7559\u7684\u65f6\u95f4 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u73a9\u5bb6\u5728\u6389\u7ebf\u4e4b\u540e\uff0c\u4f1a \u7acb\u5373\u79bb\u5f00\u623f\u95f4 \uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u8fd9\u4e2a\u4fdd\u7559\u65f6\u95f4\uff0c\u6765\u907f\u514d\u73a9\u5bb6\u4e00\u6389\u7ebf\u5c31\u9ed8\u8ba4\u88ab\u8e22\u51fa\u623f\u95f4\u3002 \u4fdd\u7559\u65f6\u95f4\u6700\u957f\u53ef\u8bbe\u7f6e 300 \u79d2\uff08 5 \u5206\u949f\uff09 \uff0c300 \u79d2\u8fc7\u540e\u7528\u6237\u5728\u623f\u95f4\u5185\u7684\u4fe1\u606f\u5c06\u4f1a\u88ab\u9500\u6bc1\u3002 \u6bd4\u5982\u5982\u4e0b\u4ee3\u7801\u6307\u5b9a\u73a9\u5bb6\u6389\u7ebf\u4e4b\u540e\u7684\u4fdd\u7559\u65f6\u95f4\u662f 2 \u5206\u949f\uff1a var roomConfig = PlayRoom.RoomConfig.Default; // \u5355\u4f4d\u662f\u79d2 roomConfig.PlayerTimeToKeep = 120;// \u8bbe\u7f6e\u6210 120 \u79d2 Play.CreateRoom(roomConfig); \u8bbe\u7f6e\u623f\u95f4\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027 \u623f\u95f4\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u6307\u7684\u662f\u4e00\u4e9b key-value \u7684\u952e\u503c\u5bf9\uff0c\u5728\u521b\u5efa\u6210\u529f\u4e4b\u540e\uff0c\u4e91\u7aef\u4e5f\u4f1a\u4fdd\u7559\u4e00\u4efd\u62f7\u8d1d\uff08\u6ce8\u610f\u8fd9\u91cc\u4e0d\u662f\u6301\u4e45\u5316\u5b58\u50a8\uff0c\u5f53\u8be5\u623f\u95f4\u5931\u6548\u4e4b\u540e\u6240\u6709\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u90fd\u4f1a\u88ab\u9500\u6bc1\uff09\u3002 var roomConfig = PlayRoom.RoomConfig.Default; roomConfig.CustomRoomProperties = new Hashtable() { { level , 1000 }, { rankPoints , 3011 } }; roomConfig.LobbyMatchKeys = new string[] { rankPoints }; Play.CreateRoom(roomConfig); \u6b64\u5904\u9700\u8981\u914d\u5408 \u6839\u636e\u6761\u4ef6\u968f\u673a\u52a0\u5165 \u6765\u7406\u89e3 LobbyMatchKeys \u7684\u4f5c\u7528\u3002 \u662f\u5426\u5f00\u653e\u623f\u95f4\u5141\u8bb8\u522b\u4eba\u52a0\u5165 \u521b\u5efa\u4e00\u4e2a\u623f\u95f4\u540e\uff0c\u4e0d\u5e0c\u671b\u5176\u4ed6\u4eba\u5bb6\u52a0\u5165\uff0c\u6bd4\u5982\u6709\u4e00\u4e9b\u5b9a\u65f6\u526f\u672c\uff0c\u73a9\u5bb6\u521b\u5efa\u597d\u623f\u95f4\u4e4b\u540e\uff0c\u7b49\u5230\u526f\u672c\u5f00\u59cb\u4e4b\u540e\uff0c\u518d\u5141\u8bb8\u5176\u4ed6\u73a9\u5bb6\u52a0\u5165\uff1a var roomConfig = PlayRoom.RoomConfig.Default; roomConfig.IsOpen = false; // \u5982\u679c\u4e0d\u8bbe\u7f6e IsOpen\uff0c\u4e91\u7aef\u521b\u5efa\u7684\u623f\u95f4\u9ed8\u8ba4\u90fd\u5141\u8bb8\u5176\u4ed6\u4eba\u52a0\u5165\u7684 Play.CreateRoom(roomConfig); \u5982\u679c\u5728\u67d0\u4e00\u4e2a\u65f6\u523b\uff0c\u5e0c\u671b\u91cd\u65b0\u6253\u5f00\u623f\u95f4\uff0c\u5141\u8bb8\u5176\u4ed6\u4eba\u52a0\u5165\uff0c\u53ea\u9700\u8981\u5c06\u8fd9\u4e2a\u5c5e\u6027\u8bbe\u7f6e\u6210 true \u5373\u53ef\uff1a Play.Room.IsOpen = true; \u623f\u95f4\u662f\u5426\u53ef\u89c1 \u521b\u5efa\u4e00\u4e2a\u623f\u95f4\u7684\u65f6\u5019\u9009\u62e9\u4e0d\u53ef\u89c1\uff0c\u8fd9\u4e2a\u623f\u95f4\u5c31\u4e0d\u4f1a\u88ab\u5176\u4ed6\u4eba\u5339\u914d\u5230\uff08\u5176\u4ed6\u4eba\u8c03\u7528 JoinRandomRoom \u7684\u65f6\u5019\u4e0d\u4f1a\u53c2\u4e0e\u5339\u914d\uff09\uff1a var roomConfig = PlayRoom.RoomConfig.Default; roomConfig.IsVisible = false; // \u5982\u679c\u4e0d\u8bbe\u7f6e IsVisible\uff0c\u4e91\u7aef\u521b\u5efa\u7684\u623f\u95f4\u9ed8\u8ba4\u90fd\u4f1a\u53c2\u4e0e JoinRandomRoom \u7684\u5339\u914d\u4e2d Play.CreateRoom(roomConfig); \u623f\u95f4\u7684\u76f8\u5173\u9650\u5236\u548c\u89c4\u5219 \u623f\u95f4\u7684\u5931\u6548 \u4e0b\u5217\u60c5\u51b5\u4f1a\u5bfc\u81f4\u623f\u95f4\u5728\u4e91\u7aef\u88ab\u6e05\u9664\uff0c\u4e5f\u5c31\u662f\u8ba4\u4e3a\u8fd9\u4e2a\u623f\u95f4\u5931\u6548\u4e86\uff1a \u6240\u6709\u6210\u5458\u90fd\u79bb\u5f00\u4e86 \u6240\u6709\u6210\u5458\u90fd\u6389\u7ebf\uff0c\u5e76\u4e14\u90fd\u6ca1\u6709\u91cd\u8fde\u56de\u6765\uff0c\u8d85\u8fc7 30 \u5206\u949f\uff0c\u4e91\u7aef\u5c31\u4f1a\u8ba4\u4e3a\u5931\u6548 \u52a0\u5165\u623f\u95f4 \u5f53\u524d\u73a9\u5bb6\u6210\u529f\u52a0\u5165\u5230\u623f\u95f4\u540e\uff0c\u4e91\u7aef\u4f1a\u5411\u5df2\u7ecf\u5728\u623f\u95f4\u91cc\u9762\u7684\u5176\u4ed6\u73a9\u5bb6\u4e0b\u53d1\u4e00\u6761\u300c\u6709\u65b0\u73a9\u5bb6\u52a0\u5165\u300d\u7684\u901a\u77e5\uff0c\u5177\u4f53\u7684\u4e8b\u4ef6\u56de\u8c03\u8bf7\u67e5\u770b \u65b0\u73a9\u5bb6\u52a0\u5165\u7684\u4e8b\u4ef6\u901a\u77e5 \u3002 \u6839\u636e Name \u52a0\u5165 public class SampleJoinRoom : PlayMonoBehaviour { void start() { // \u6253\u5f00\u8c03\u8bd5\u65e5\u5fd7 Play.ToggleLog(true); // \u8bbe\u7f6e UserID Play.UserID = Mario ; // \u58f0\u660e\u6e38\u620f\u7248\u672c\uff0c\u4e0d\u540c\u6e38\u620f\u7248\u672c\u7684\u73a9\u5bb6\u4f1a\u88ab\u5206\u914d\u5728\u4e0d\u540c\u7684\u9694\u79bb\u533a\u57df\u4e2d Play.Connect( 0.0.1 ); // \u5982\u679c\u9274\u6743\u6210\u529f\u5219\u4f1a\u89e6\u53d1 OnAuthenticated \u56de\u8c03 } [PlayEvent] public override void OnAuthenticated() { Play.Log( OnAuthenticated ); // \u52a0\u5165 RichMen \u623f\u95f4 Play.JoinRoom( RichMen ); } [PlayEvent] public override void OnJoinedRoom() { Play.Log( OnJoinedRoom ); var name = Play.Room.Name; } [PlayEvent] public override void OnJoinRoomFailed(int errorCode, string reason) { } } \u52a0\u5165\u6210\u529f\u5219\u4f1a\u56de\u8c03 OnJoinedRoom \uff0c\u52a0\u5165\u5931\u8d25\u5219\u4f1a\u56de\u8c03 OnJoinRoomFailed \u3002 \u9002\u7528\u573a\u666f \uff1a\u4e0e\u597d\u53cb\u4e00\u8d77\u6e38\u620f\u3002\u7528\u6237\u81ea\u5df1\u8f93\u5165\u4e86\u4e00\u4e2a\u623f\u95f4\u540d\uff0c\u5e76\u4e14\u521b\u5efa\u6210\u529f\uff0c\u7136\u540e\u901a\u8fc7\u804a\u5929\u5de5\u5177\u544a\u8bc9\u4e86\u597d\u53cb\uff0c\u7136\u540e\u597d\u53cb\u901a\u8fc7\u623f\u95f4\u540d\u76f4\u63a5\u52a0\u5165\u8fdb\u6765\u3002 var roomName = get_from_qq ; Play.JoinRoom(roomName); \u968f\u673a\u52a0\u5165 \u968f\u673a\u52a0\u5165\u4efb\u4f55\u4e00\u4e2a\u5f00\u653e\u7684\u6709\u7a7a\u4f4d\u7684\u623f\u95f4\uff1a Play.JoinRandomRoom(); \u9664\u975e\u662f\u6240\u6709\u53ef\u7528\u7684\u623f\u95f4\u90fd\u6ee1\u5458\u4e86\uff0c\u624d\u4f1a\u51fa\u73b0\u968f\u673a\u52a0\u5165\u5931\u8d25\u7684\u60c5\u51b5\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u90fd\u4f1a\u6210\u529f\u3002 \u5982\u679c\u968f\u673a\u52a0\u5165\u5931\u8d25\uff0c\u4f1a\u89e6\u53d1 OnJoinedRoomFailed \u56de\u8c03\uff0c\u53ef\u4ee5\u9009\u62e9\u5728\u8fd9\u4e2a\u56de\u8c03\u91cc\u9762\u7ee7\u7eed \u521b\u5efa\u623f\u95f4 \u3002 \u6ce8\u610f\uff0c\u4e0d\u53ef\u89c1\u7684\u623f\u95f4\u662f\u4e0d\u4f1a\u53c2\u4e0e\u968f\u673a\u623f\u95f4\u7684\u5339\u914d\u7684\u3002 \u9002\u7528\u573a\u666f \uff1a\u5feb\u901f\u52a0\u5165\u5df2\u6709\u623f\u95f4\uff08\u4e0d\u521b\u5efa\u65b0\u7684\u623f\u95f4\uff09 \u6839\u636e\u6761\u4ef6\u968f\u673a\u52a0\u5165 \u914d\u5408\u524d\u9762\u7684 \u8bbe\u7f6e\u623f\u95f4\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027 \u7684\u4ee3\u7801\uff1a var randomLobbyMatchKeys = new Hashtable { { rankPoints , 3000 } }; // \u6839\u636e key-value \u5339\u914d\u52a0\u5165 Play.JoinRandomRoom(randomLobbyMatchKeys); \u52a0\u5165\u6210\u529f\u5219\u4f1a\u56de\u8c03 OnJoinedRoom \uff0c\u52a0\u5165\u5931\u8d25\u5219\u4f1a\u56de\u8c03 OnJoinRoomFailed \u3002 \u6ce8\u610f\uff0c\u6839\u636e\u6761\u4ef6\u968f\u673a\u52a0\u5165\u6709\u5982\u4e0b\u5e97\u5740\uff1a \u4e0d\u53ef\u89c1\u7684\u623f\u95f4\u662f\u4e0d\u4f1a\u53c2\u4e0e\u968f\u673a\u623f\u95f4\u7684\u5339\u914d \u76ee\u524d\u53ea\u652f\u6301\u6761\u4ef6\u76f8\u7b49\u7684\u5339\u914d\uff0c\u6bd4\u5982\u6211\u4eec\u4e0d\u652f\u6301 rankPoints \u5c0f\u4e8e 3000 \u7684\u8fd9\u79cd\u5339\u914d \u52a0\u5165\u6216\u8005\u521b\u5efa \u89e3\u51b3\u7684\u9700\u6c42\u662f\uff1a\u4f18\u5148\u68c0\u6d4b\u4f20\u5165\u7684 room name \u5bf9\u5e94\u7684\u623f\u95f4\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u5b58\u5728\u5c31\u76f4\u63a5\u52a0\u5165\uff0c\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5c31\u76f4\u63a5\u521b\u5efa\uff1a var roomName = i-want-this-name ; Play.JoinOrCreate(roomName); \u6216\u8005\u6307\u5b9a\u4e00\u4e9b key-value \u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\uff0c\u4f8b\u5982\uff0c\u6211\u8981\u52a0\u5165\u4e00\u4e2a\u6307\u5b9a\u540d\u5b57\u7684\u623f\u95f4\uff0c\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u8bf7\u5e2e\u6211\u521b\u5efa\u8fd9\u4e2a\u623f\u95f4\u5e76\u4e14\u628a\u6211\u6307\u5b9a\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u4e5f\u8d4b\u503c\u7ed9\u623f\u95f4\uff1a var createWithAttributes = new Hashtable { { rankPoints , 1000 } }; var roomConfig = PlayRoom.RoomConfig.Default; roomConfig.CustomRoomProperties = createWithAttributes; roomConfig.LobbyMatchKeys = new string[] { rankPoints }; Play.JoinOrCreate(roomConfig); \u5982\u679c\u52a0\u5165\u6210\u529f\u5219\u4f1a\u56de\u8c03 OnJoinedRoom \uff0c\u5982\u679c\u662f\u521b\u5efa\u6210\u529f\uff0c\u5219\u4f1a\u5148\u8c03\u7528 OnCreatedRoom \u7136\u540e\u518d\u8c03\u7528 OnJoinedRoom \u3002 \u9002\u7528\u573a\u666f \uff1a\u4e24\u4eba\uff08\u6216\u8005\u591a\u4eba\uff09\u7ea6\u5b9a\u4e86\u4e00\u4e2a\u623f\u95f4\u540d\uff0c\u4f46\u662f\u8fd9\u4e9b\u4eba\u8fdb\u5165\u6e38\u620f\u7684\u65f6\u95f4\u4e0d\u4e00\u6837\uff0c\u56e0\u6b64\u6240\u6709\u4eba\u90fd\u8c03\u7528 JoinOrCreate \u5e76\u4e14\u4f20\u5165\u4e00\u6837\u7684\u540d\u5b57\uff0c\u5219 SDK \u4f1a\u786e\u4fdd\u8fd9\u4e9b\u4eba\u4e00\u5b9a\u4f1a\u52a0\u5165\u5230\u4e00\u4e2a\u76f8\u540c\u7684\u623f\u95f4\u5185\u3002 \u65b0\u73a9\u5bb6\u52a0\u5165\u7684\u4e8b\u4ef6\u901a\u77e5 A \u521b\u5efa\u4e86\u623f\u95f4\uff0c\u7136\u540e B \u52a0\u5165\u8fdb\u6765\uff08\u4e0d\u7ba1\u662f\u968f\u673a\u52a0\u5165\u8fd8\u662f\u5339\u914d\u52a0\u5165\uff0c\u8fd8\u662f\u4f7f\u7528 Name \u76f4\u63a5\u52a0\u5165\uff09\uff0cA \u90fd\u4f1a\u6536\u5230 B \u52a0\u5165\u5230\u623f\u95f4\u7684\u4e8b\u4ef6\u901a\u77e5 OnNewPlayerJoinedRoom \uff1a [PlayEvent] public override void OnNewPlayerJoinedRoom(Player player) { Play.Log(player.UserID); } \u5982\u679c C \u5148\u4e8e B \u52a0\u5165\u4e86\uff0cC \u4e5f\u4f1a\u6536\u5230 OnNewPlayerJoinedRoom \u7684\u4e8b\u4ef6\u901a\u77e5\u3002 \u5f00\u59cb\u6e38\u620f MasterClient \u7ed3\u5408\u524d\u9762\u7684\u7ae0\u8282\uff0c\u6211\u4eec\u9700\u8981\u660e\u786e\u4e00\u70b9\uff0c\u5728\u65e0\u670d\u52a1\u7aef\u8fdb\u884c\u7f51\u6e38\u5bf9\u6218\u7684\u65f6\u5019\uff0c\u901a\u5e38\u90fd\u4f1a\u6709\u4e00\u4e2a\u4e3b\u673a\u7684\u6982\u5ff5\uff08\u53c2\u7167\u9b54\u517d\u4e89\u9738\u5c40\u57df\u7f51\u6e38\u620f\u91cc\u9762\u7684\u521b\u5efa\u623f\u95f4\u7684 Host\uff09\uff0c\u56e0\u6b64 Play \u63d0\u4f9b\u4e86\u4e00\u4e2a MasterClient \u7684\u6982\u5ff5\uff0c\u6307\u7684\u5c31\u662f\u623f\u95f4 Host \u73a9\u5bb6\uff0c\u5b83\u53ef\u80fd\u7531\u4ee5\u4e0b\u51e0\u79cd\u73a9\u5bb6\u627f\u62c5\uff1a \u623f\u95f4\u6700\u521d\u7684\u521b\u5efa\u8005\uff0c\u5728\u4ed6\u52a0\u5165\u4e4b\u540e\uff0c\u81ea\u52a8\u6210\u4e3a\u7b2c\u4e00\u4efb MasterClient\u3002 A \u521b\u5efa\u4e86\u623f\u95f4\uff0c\u968f\u540e B \u548c C \u52a0\u5165\uff0c\u7136\u540e\u56e0\u4e3a A \u7684\u7f51\u7edc\u5f02\u5e38\uff0cTA \u6389\u7ebf\u4e86\uff0c\u8fd9\u4e2a\u65f6\u5019\u670d\u52a1\u7aef\u4f1a\u4ece\u73b0\u6709\u7684 B \u548c C \u91cc\u9762\u6311\u9009\u4e00\u4e2a\u4f5c\u4e3a\u65b0\u4efb\u7684 MasterClient\uff0c\u5e76\u4e14\u4f1a\u4e0b\u53d1 OnMasterClientSwitched \u7684\u4e8b\u4ef6\u56de\u8c03\u901a\u77e5 \u5728 A \u56de\u6765\u4e4b\u540e\uff0cA \u4e5f\u4e0d\u4f1a\u91cd\u65b0\u6210\u4e3a MasterClient\u3002 \u5982\u4e0b\u4ee3\u7801\u6f14\u793a\u5982\u4f55\u76d1\u542c MasterClient \u4ea7\u751f\u53d8\u5316\u7684\u4e8b\u4ef6\u56de\u8c03\uff1a [PlayEvent] public override void OnMasterClientSwitched(Player masterPlayer) { Play.Log( new master client is ,masterPlayer.UserID); } \u623f\u95f4\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027 \u623f\u95f4\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u662f\u9884\u7559\u7ed9\u5f00\u53d1\u8005\u81ea\u5b9a\u4e49\u4e1a\u52a1\u903b\u8f91\u7684\uff0c\u5f53\u4f60\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u5c5e\u6027\u4e4b\u540e\uff0cSDK \u4f1a\u4e0a\u4f20\u5230\u4e91\u7aef\uff0c\u4e91\u7aef\u4f1a\u5c06\u8fd9\u4e9b\u5c5e\u6027\u4e0b\u53d1\u7ed9\u5728\u540c\u4e00\u4e2a\u623f\u95f4\u7684\u5176\u4ed6\u73a9\u5bb6\u3002 \u521d\u59cb\u5316\u623f\u95f4\u5c5e\u6027 \u8bbe\u7f6e\u623f\u95f4\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027 \u5c0f\u8282\u91cc\u9762\u7684\u4ee3\u7801\u5c31\u662f\u521d\u59cb\u5316\u623f\u95f4\u5c5e\u6027\u7684\u4ee3\u7801\uff0c\u8fd9\u91cc\u8981\u8be6\u7ec6\u63cf\u8ff0\u4e00\u4e0b\u81ea\u5b9a\u4e49\u5c5e\u6027\u652f\u6301\u7684\u7c7b\u578b\uff1a bool string \u6570\u5b57\u7c7b\u578b\uff0c\u50cf byte\u3001int\u3001float\u3001double \u7b49\u57fa\u7840\u7c7b\u578b\u90fd\u652f\u6301\u3002 \u5b57\u5178\u7c7b\u578b Dictionary List \u7c7b\u578b\uff0c\u5982 List \u3001List \u7b49\u3002 \u672a\u6765\u4f1a\u652f\u6301\u66f4\u591a\u7c7b\u578b\uff0c\u5305\u62ec Hashtable \u6216\u8005\u662f\u81ea\u5b9a\u4e49\u7c7b\u578b\u3002 var roomConfig = PlayRoom.RoomConfig.Default; roomConfig.CustomRoomProperties = new Hashtable() { { vip , ture }, { note , welcome }, { bonus ,500 } }; Play.CreateRoom(roomConfig); \u4fee\u6539\u623f\u95f4\u5c5e\u6027 \u81ea\u5b9a\u4e49\u5c5e\u6027\u7684\u4fee\u6539\u662f\u589e\u91cf\u4fee\u6539\u7684\uff0c\u6bd4\u5982\u5f53\u524d\u5df2\u7ecf\u6709\u4e86\u4e00\u4e9b\u5c5e\u6027\uff0c\u7136\u540e\u4f60\u53ea\u8981\u8bbe\u7f6e\u4e00\u4e9b\u589e\u91cf\u5c31\u53ef\u4ee5\uff0c\u5ba2\u6237\u7aef\u4f1a\u505a\u81ea\u52a8\u7684\u5408\u5e76\uff0c\u4e91\u7aef\u4e5f\u4f1a\u505a\u6821\u9a8c\uff0c\u4e0b\u53d1\u7684\u901a\u77e5\u4e5f\u662f\u505a\u589e\u91cf\u4e0b\u53d1\u7684\uff1a [PlayEvent] public override void OnJoinedRoom() { var toUpdate = new Hashtable() { { level , 1200 } }; Play.Room.SetCustomProperties(toUpdate); } CAS \u539f\u5b50\u4fee\u6539\u6a21\u5f0f \u4e3a\u4e86\u539f\u5b50\u5316\u64cd\u4f5c\u5c5e\u6027\uff0c\u4e5f\u662f\u4e3a\u4e86\u9632\u6b62\u51b2\u7a81\uff0cPlay \u4e5f\u652f\u6301\u4ee5 CAS (check and save) \u6a21\u5f0f\u4fee\u6539\u5c5e\u6027\uff1a [PlayEvent] public override void OnJoinedRoom() { var toUpdate = new Hashtable() { { level , 1200 } }; var when = new Hashtable() { { level , 1000 } }; Play.Room.SetCustomProperties(toUpdate, when); } \u4e0a\u8ff0\u4ee3\u7801\u7684\u542b\u4e49\u662f\uff1a\u5982\u679c\u5f53\u524d level \u662f 1000 \u90a3\u4e48\u5c31\u4fee\u6539\u4e3a level \u503c\u4e3a 1200\uff0c\u5426\u5219\u5c31\u4e0d\u4fee\u6539\u3002 \u6536\u5230\u623f\u95f4\u5c5e\u6027\u88ab\u4fee\u6539\u7684\u901a\u77e5 [PlayEvent] public override void OnRoomCustomPropertiesUpdated(Hashtable updatedProperties) { Play.Log( OnRoomCustomPropertiesUpdated ); // \u4fee\u6539\u7684\u589e\u91cf\u4f1a\u88ab\u901a\u77e5\u7ed9\u6240\u6709\u5728\u623f\u95f4\u7684\u73a9\u5bb6 Play.Log(updatedProperties.ToLog()); } \u73a9\u5bb6\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027 \u73a9\u5bb6\uff08Player\uff09\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u4e0e\u623f\u95f4\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u65e0\u672c\u8d28\u5dee\u522b\uff0c\u5bf9\u5916\u66b4\u9732\u7684\u63a5\u53e3\u90fd\u662f\u4e00\u4e2a Hashtable\uff0c\u64cd\u4f5c\u4e5f\u51e0\u8fd1\u7c7b\u4f3c\uff0c\u53ea\u662f\u4e8b\u4ef6\u56de\u8c03\u4e0d\u4e00\u6837\u3002 \u521d\u59cb\u5316\u73a9\u5bb6\u5c5e\u6027 [PlayEvent] public override void OnNewPlayerJoinedRoom(Player player) { var initData = new Hashtable(); initData.Add( ready , false); initData.Add( gold , 200); player.CustomProperties = initData; } \u5728\u73a9\u5bb6\u52a0\u5165\u623f\u95f4\u4e4b\u540e\uff0c\u521d\u59cb\u5316 TA \u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u3002 \u6536\u5230\u73a9\u5bb6\u7684\u5c5e\u6027\u88ab\u4fee\u6539\u7684\u901a\u77e5 \u6ce8\u610f\uff0c\u8fd9\u91cc\u6709\u4e00\u4e2a\u70b9\uff0c\u4e0d\u8bba\u662f A \u4fee\u6539\u4e86\u81ea\u5df1\u7684\u5c5e\u6027\uff0c\u8fd8\u662f A \u4fee\u6539\u4e86\u5176\u4ed6\u4eba\u7684\u5c5e\u6027\uff0c\u90fd\u4f1a\u5728\u8fd9\u91cc\u8fdb\u884c\u4e8b\u4ef6\u56de\u8c03\u7684\u901a\u77e5\uff1a [PlayEvent] public override void OnPlayerCustomPropertiesChanged(Player player, Hashtable updatedProperties) { Play.Log( OnPlayerCustomPropertiesChanged ); Play.Log(player.UserID, updatedProperties.ToLog()); } \u4fee\u6539\u73a9\u5bb6\u5c5e\u6027 var cards = new Hashtable(); cards.Add( cards , new string[] { 1 , 2 , 3 }); Play.Player.CustomProperties = cards; \u4e0a\u8ff0\u64cd\u4f5c\u4e5f\u4f1a\u89e6\u53d1 OnPlayerCustomPropertiesChanged \u3002 RPC \u8fdc\u7a0b\u8c03\u7528\u51fd\u6570 RPC \u662f\u63d0\u4f9b\u7ed9\u5f00\u53d1\u8005\u81ea\u5b9a\u4e49\u6d88\u606f\u7684\u4e00\u79cd\u65b9\u5f0f\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7\u5b9a\u4e49 RPC \uff0c\u53d1\u9001 RPC \u6d88\u606f\u6765\u5b9e\u73b0\u591a\u7aef\u7684\u901a\u4fe1\u3002 \u6ce8\u610f\uff0c\u5f53\u524d\u73a9\u5bb6\u5fc5\u987b\u5904\u4e8e\u4e00\u4e2a\u623f\u95f4\u5185\u624d\u53ef\u4ee5\u53d1\u9001 RPC \u6d88\u606f\uff0c\u5426\u5219 RPC \u6d88\u606f\u4e0d\u4f1a\u89e6\u53d1\u3002 \u53e6\u5916\uff0cSDK \u5185\u7f6e\u7684\u56de\u8c03\u90fd\u4f1a\u6709 [PlayEvent] \uff0c\u800c\u5f00\u53d1\u8005\u81ea\u5b9a\u4e49\u7684 RPC \u56de\u8c03\u5219\u5fc5\u987b\u6709 [PlayRPC] \u4fee\u9970\u7b26\u3002 \u5b9a\u4e49 RPC \u65b9\u6cd5 [PlayRPC] public void OnSomebodySayHello(string words) { var length = words.Length; } \u53d1\u9001 RPC \u6d88\u606f Play.RPC( OnSomebodySayHello , PlayRPCTargets.All, hello ); \u4e0a\u8ff0\u6d88\u606f\u53d1\u9001\u51fa\u53bb\uff0c\u6240\u6709\u5728\u623f\u95f4\u7684\u73a9\u5bb6\u90fd\u4f1a\u6536\u5230 OnSomebodySayHello \u7684\u56de\u8c03\u901a\u77e5\u3002 \u6307\u5b9a\u6d88\u606f\u63a5\u6536\u8005 \u53ea\u53d1\u7ed9 MasterClient: Play.RPC( OnSomebodySayHello , PlayRPCTargets.MasterClient, hello ); \u53d1\u7ed9\u5176\u4ed6\u4eba\uff08\u81ea\u5df1\u4e0d\u63a5\u6536)\uff1a Play.RPC( OnSomebodySayHello , PlayRPCTargets.Others, hello ); \u8be5\u6d88\u606f\u662f\u9700\u8981\u88ab\u7f13\u5b58\u7684\uff0c\u5f53\u524d\u5728\u7ebf\u7684\u73a9\u5bb6\u5b9e\u65f6\u63a5\u6536\uff0c\u5e76\u4e14\u540e\u6765\u52a0\u5165\u7684\u73a9\u5bb6\u5728\u52a0\u5165\u623f\u95f4\u4e4b\u540e\uff0c\u4e5f\u80fd\u6536\u5230: Play.RPC( OnSomebodySayHello , PlayRPCTargets.OthersBuffered, hello ); \u9000\u51fa\u623f\u95f4 Play.LeaveRoom(); \u9000\u51fa\u6210\u529f\u7684\u56de\u8c03\u5982\u4e0b\uff1a [PlayEvent] public override void OnLeftRoom() { Play.Log( OnLeftRoom ); } \u5047\u8bbe\u5728 B \u9000\u51fa\u623f\u95f4\u4e4b\u524d\uff0c\u623f\u95f4\u91cc\u9762\u6709 A\u3001B\u3001C \u4e09\u4f4d\u73a9\u5bb6\uff0cB \u8c03\u7528 Play.LeaveRoom() \u4e4b\u540e\uff0cA \u548c C \u5c31\u4f1a\u6536\u5230 OnPlayerLeftRoom \u7684\u4e8b\u4ef6\u901a\u77e5\uff1a [PlayEvent] public override void OnPlayerLeftRoom(Player player) { Play.Log( someone left room with user id: , player.UserID); } \u5185\u7f6e\u7684\u5c5e\u6027\u8bbf\u95ee\u5668 \u901a\u8fc7 SDK \u5f00\u653e\u7684\u5c5e\u6027\u8bbf\u95ee\u5668\uff0c\u53ef\u4ee5\u5feb\u6377\u5730\u8bfb\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a \u5f53\u524d\u52a0\u5165\u7684\u623f\u95f4 var room = Play.Room; \u5f53\u524d\u623f\u95f4\u91cc\u9762\u6240\u6709\u73a9\u5bb6\u7684\u5217\u8868 var players = Play.Players; // \u901a\u8fc7 room \u6765\u83b7\u53d6 var playersInRoom = Play.Room.Players; // \u4ee5\u4e0a\u4e24\u884c\u8bed\u53e5\u83b7\u53d6\u7684\u5217\u8868\u662f\u4e00\u6837\u7684 \u5f53\u524d\u73a9\u5bb6 var player = Play.Player; \u5f53\u524d\u73a9\u5bb6\u7684 UserID var userId = Play.UserID; \u5f53\u524d\u6240\u5904\u5728\u7684\u6e38\u620f\u5927\u5385 var lobby = Play.Lobby; \u5f53\u524d\u6e38\u620f\u7248\u672c var gameVersion = Play.GameVersion; \u65ad\u7ebf\u91cd\u8fde \u65ad\u7ebf\u4e4b\u540e\uff0cSDK \u6ca1\u6709\u505a \u81ea\u52a8\u7684\u65ad\u7ebf\u91cd\u8fde \uff0c\u5047\u8bbe\u6e38\u620f\u5141\u8bb8\u73a9\u5bb6\u6389\u7ebf\u4e4b\u540e\u91cd\u8fde\uff0c\u5e76\u4e14\u52a0\u5165\u539f\u6765\u7684\u623f\u95f4\uff0c\u9700\u8981\u6389\u7ebf\u7684\u73a9\u5bb6\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a \u53d1\u73b0\u8fde\u63a5\u65ad\u5f00\uff08\u7f51\u7edc\u5f02\u5e38\u6216\u8005\u5176\u4ed6\u539f\u56e0\u5bfc\u81f4\u8fde\u63a5\u65ad\u5f00\uff09\uff0cSDK \u4f1a\u89e6\u53d1 OnDisconnected \u56de\u8c03\u3002 \u5c1d\u8bd5\u8c03\u7528 Play.Connect() \u91cd\u65b0\u6253\u5f00\u8fde\u63a5\u3002 \u5728 OnAuthenticated \u56de\u8c03\u91cc\u9762\u8c03\u7528 Play.RejoinRoom() \u91cd\u65b0\u52a0\u5165\u539f\u6765\u7684\u623f\u95f4\u3002 \u7136\u540e\u901a\u8fc7\u76d1\u542c OnJoinedRoom \u6765\u91cd\u65b0\u56de\u5230\u623f\u95f4\u3002 \u914d\u5408\u76d1\u542c OnJoinRoomFailed \u6765\u5224\u65ad\u623f\u95f4\u662f\u5426\u5931\u6548\u6216\u8005\u662f\u5176\u4ed6\u4ec0\u4e48\u539f\u56e0\u5bfc\u81f4\u91cd\u65b0\u52a0\u5165\u5931\u8d25\u3002 \u5982\u679c\u5f53\u524d\u7528\u6237\u6210\u529f\u56de\u5230\u623f\u95f4\uff0c\u89e6\u53d1\u5982\u4e0b\u901a\u77e5\uff1a OnPlayerCustomPropertiesChanged \u6765\u544a\u77e5\u5f53\u524d\u7528\u6237\u4e0a\u6b21\u6389\u7ebf\u4e4b\u524d\u6700\u65b0\u7684 Player \u4e0a\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027 OnRoomCustomPropertiesUpdated \u6765\u544a\u77e5\u5f53\u524d\u7528\u6237\u4e0a\u6b21\u6389\u7ebf\u4e4b\u524d\u6700\u65b0\u7684 Room \u4e0a\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027 \u5047\u8bbe\u623f\u95f4\u5185\u5df2\u6709 A\u3001B\u3001C \u4e09\u540d\u73a9\u5bb6\uff0c\u7136\u540e\u6b64\u65f6\u5ffd\u7136 B \u6389\u7ebf\u4e86\uff0c\u6b64\u65f6\u5982\u679c\u521b\u5efa\u623f\u95f4\u7684\u65f6\u5019\u6307\u5b9a\u4e86 \u73a9\u5bb6\u6389\u7ebf\u4e4b\u540e\u88ab\u4fdd\u7559\u7684\u65f6\u95f4 \uff0c\u5c31\u4f1a\u51fa\u73b0\u5982\u4e0b\u4e24\u79cd\u60c5\u51b5\uff1a \u5982\u679c\u8bbe\u7f6e\u4e86\u7c7b\u4f3c roomConfig.PlayerTimeToKeep = 30 \u8fd9\u6837\u7684\u6709\u6548\u503c\uff0c\u90a3\u4e48 B \u73a9\u5bb6\u5728\u6389\u7ebf\u65f6\uff0c\u4f1a\u4ea7\u751f\u5982\u4e0b\u60c5\u666f\uff1a A \u548c C \u5c06\u4f1a\u5f97\u5230\u5982\u4e0b\u901a\u77e5\uff1a [PlayEvent] public override void OnPlayerActivityChanged(Player player) { // player.IsInactive \u6b64\u65f6\u5e94\u8be5\u4e3a true Play.Log( OnPlayerActivityChanged , player.UserID, player.IsInactive); } B \u4f1a\u5f97\u5230\u5982\u4e0b\u901a\u77e5\uff1a [PlayEvent] public override void OnDisconnected() { Play.Log( OnDisconnected ); } \u5982\u679c B \u5728\u6709\u6548\u671f\u4e4b\u5185\u8c03\u7528\u4e86 Play.RejoinRoom() \u5e76\u4e14\u6210\u529f\u56de\u5230\u4e86\u623f\u95f4\uff0c\u90a3\u4e48 A \u548c C \u5c06\u4f1a\u518d\u6b21\u6536\u5230 OnPlayerActivityChanged \u7684\u56de\u8c03\uff1a [PlayEvent] public override void OnPlayerActivityChanged(Player player) { // player.IsInactive \u6b64\u65f6\u5e94\u8be5\u4e3a false Play.Log( OnPlayerActivityChanged , player.UserID, player.IsInactive); } \u7136\u540e\u5982\u679c B \u5728\u8d85\u8fc7\u4e86\u6709\u6548\u671f\u4e4b\u540e\uff0c\u4ecd\u7136 \u6ca1\u6709 \u8c03\u7528 Play.RejoinRoom() \u56de\u5230\u623f\u95f4\uff0c\u90a3\u4e48 A \u548c C \u8fd8\u4f1a\u518d\u6b21\u6536\u5230\u5982\u4e0b\u56de\u8c03\uff1a [PlayEvent] public override void OnPlayerLeftRoom(Player player) { Play.Log( OnPlayerLeftRoom ,player.UserID); } \u5982\u679c\u6ca1\u6709\u8bbe\u7f6e roomConfig.PlayerTimeToKeep \u90a3\u4e48 B \u4e00\u65e6\u6389\u7ebf\uff0cA \u548c C \u4f1a\u76f4\u63a5\u6536\u5230\u5982\u4e0b\u56de\u8c03\uff1a [PlayEvent] public override void OnPlayerLeftRoom(Player player) { Play.Log( OnPlayerLeftRoom ,player.UserID); } B \u4f1a\u6536\u5230\u5982\u4e0b\u56de\u8c03\uff1a [PlayEvent] public override void OnDisconnected() { Play.Log( OnDisconnected ); } \u6ce8\u610f\uff0c roomConfig.PlayerTimeToKeep \u7684\u8bbe\u7f6e\u4e0e\u5426\u6700\u5927\u7684\u533a\u522b\u5728\u4e8e\uff1a \u5982\u679c\u8bbe\u7f6e\u4e86\uff0cA \u548c C \u7aef\u4f1a\u5728\u6536\u5230 B \u7684 OnPlayerLeftRoom \u7684\u901a\u77e5\u524d\uff0c\u6536\u5230\u4e00\u4e2a B \u7684 OnPlayerActivityChanged \u56de\u8c03","title":"\u5f00\u53d1\u6307\u5357"},{"location":"game/play/multiplayer/#play-unity","text":"","title":"Play \u5f00\u53d1\u6307\u5357 &middot; Unity"},{"location":"game/play/multiplayer/#_1","text":"Play \u662f\u4e00\u4e2a\u57fa\u4e8e C# \u7f16\u5199\u7684 Unity \u7684\u7ec4\u4ef6\uff0c\u5b83\u5177\u5907\u5982\u4e0b\u51e0\u9879\u4e3b\u8981\u7684\u529f\u80fd\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff09\uff1a \u4f7f\u7528 UserID \u5efa\u7acb\u4e0e\u670d\u52a1\u7aef\u7684\u901a\u4fe1 \u521b\u5efa\u5bf9\u6218\u623f\u95f4(PlayRoom) \u83b7\u53d6\u623f\u95f4\u5217\u8868 \u52a0\u5165\u623f\u95f4 \u968f\u673a\u52a0\u5165\u623f\u95f4 \u6839\u636e\u5339\u914d\u6761\u4ef6\u52a0\u5165\u623f\u95f4 \u5bfb\u627e\u597d\u53cb\u6240\u5728\u7684\u623f\u95f4 \u8bbe\u7f6e\u623f\u95f4\u5c5e\u6027 \u83b7\u53d6\u623f\u95f4\u73a9\u5bb6\uff08Player\uff09\u5217\u8868 \u4fee\u6539\u73a9\u5bb6\u7684\u5c5e\u6027 \u53d1\u9001\u548c\u63a5\u6536 RPC \u6d88\u606f \u79bb\u5f00\u623f\u95f4 Play \u89e3\u51b3\u4e86\u5982\u4e0b\u51e0\u79cd\u6e38\u620f\u573a\u666f\u7684\u670d\u52a1\u7aef\u9700\u6c42\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff09\uff1a MOBA \u591a\u4eba\u5728\u7ebf\u5b9e\u65f6\u5bf9\u6218 \u5361\u724c\u68cb\u724c\u684c\u6e38 \u6218\u68cb Play \u4e3a\u6709\u5f3a\u8054\u7f51\u9700\u6c42\u7684\u7f51\u7edc\u6e38\u620f\u63d0\u4f9b\u4e86\u4e00\u6574\u5957\u7684\u5ba2\u6237\u7aef SDK \u89e3\u51b3\u65b9\u6848\uff0c\u56e0\u6b64\u5f00\u53d1\u56e2\u961f\u4e0d\u518d\u9700\u8981\u81ea\u5efa\u670d\u52a1\u7aef\uff0c\u4ece\u800c\u8282\u7701\u5927\u90e8\u5206\u5f00\u53d1\u548c\u8fd0\u7ef4\u6210\u672c\u3002","title":"\u524d\u8a00"},{"location":"game/play/multiplayer/#_2","text":"Play \u662f\u57fa\u4e8e C# \u5f00\u53d1\u8fd0\u884c\u5728 Unity \u7684 Mono .NET \u4e0b\u7684 SDK\uff0c\u56e0\u6b64\u5f00\u53d1\u8005\u9700\u8981\u638c\u63e1\u5982\u4e0b\u57fa\u7840\u77e5\u8bc6\uff1a C# \u7684\u7f16\u7a0b\u57fa\u7840\u77e5\u8bc6\uff0c\u7279\u522b\u662f Attribute\u3001Event \u7b49\u6982\u5ff5\u3002 \u5e27\u540c\u6b65\u548c\u72b6\u6001\u540c\u6b65\u7684\u4e24\u79cd\u7f51\u6e38\u7c7b\u578b\u5206\u522b\u662f\u5982\u4f55\u5b9e\u73b0\u7684\uff1f \u4ee5\u4e0a\u95ee\u9898\u7b54\u6848\u8bf7\u5f00\u53d1\u8005\u81ea\u884c\u5b66\u4e60\u638c\u63e1\u3002","title":"\u5fc5\u5907\u7684\u57fa\u7840\u77e5\u8bc6"},{"location":"game/play/multiplayer/#sdk","text":"\u8bf7\u9605\u8bfb \u5b89\u88c5\u548c\u521d\u59cb\u5316 \uff0c\u83b7\u53d6\u52a8\u6001\u94fe\u63a5\u5e93\u3002","title":"SDK \u5bfc\u5165\u548c\u521d\u59cb\u5316"},{"location":"game/play/multiplayer/#_3","text":"\u5982\u4e0b\u4ee3\u7801\u5c06\u6253\u5f00\u5ba2\u6237\u7aef\u7684\u65e5\u5fd7\uff0c\u53ef\u4ee5\u5e2e\u52a9\u8c03\u8bd5\u548c\u8fdb\u884c\u95ee\u9898\u53cd\u9988\uff1a // \u65e5\u5fd7\u90fd\u4f1a\u4f7f\u7528 Unity.Debug \u6253\u5370\u5728\u63a7\u5236\u53f0 Play.ToggleLog();","title":"\u6253\u5f00\u5ba2\u6237\u7aef\u65e5\u5fd7"},{"location":"game/play/multiplayer/#userid","text":"Play \u76ee\u524d\u53ea\u9700\u8981\u5ba2\u6237\u7aef\u8bbe\u7f6e\u4e00\u4e2a UserID \u5c31\u53ef\u4ee5\u76f4\u63a5\u8fde\u63a5\u4e91\u7aef\uff0c\u8fd9\u4e2a UserID \u62e5\u6709\u5982\u4e0b\u9650\u5236\uff1a \u4e0d\u652f\u6301\u4e2d\u6587\u548c\u7279\u6b8a\u5b57\u7b26\uff08\u5305\u62ec \uff0c\uff01@#\uffe5%\u2026\u2026 *\uff08\uff09 \u7b49\uff09\uff0c\u4f46\u53ef\u4ee5\u662f\u4e0b\u5212\u7ebf _ \u3002 \u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7 64 \u5b57\u7b26 \u4e00\u4e2a\u5e94\u7528\u5185\u5168\u5c40\u552f\u4e00 \u4e0b\u9762\u6211\u4eec\u4f7f\u7528 Mario \u4f5c\u4e3a UserID \u8fde\u63a5\u4e91\u7aef\u670d\u52a1\u5668\uff0c\u6210\u529f\u4e4b\u540e\u670d\u52a1\u7aef\u4f1a\u56de\u8c03 OnAuthenticated \uff1a using LeanCloud; namespace PlayDocSample { /// summary /// \u6ce8\u518c\u56de\u8c03\u7684\u7c7b\u578b\uff0c\u5fc5\u987b\u7ee7\u627f\u81ea PlayMonoBehaviour /// /summary public class SampleConnect : PlayMonoBehaviour { void start() { // \u6253\u5f00\u8c03\u8bd5\u65e5\u5fd7 Play.ToggleLog(true); // \u8bbe\u7f6e UserID Play.UserID = Mario ; // \u58f0\u660e\u6e38\u620f\u7248\u672c\uff0c\u4e0d\u540c\u7248\u672c\u7684\u73a9\u5bb6\u662f\u4e0d\u4f1a\u5339\u914d\u5230\u540c\u4e00\u4e2a\u623f\u95f4 Play.Connect( 0.0.1 ); // \u5982\u679c\u6210\u529f\u5219\u4f1a\u56de\u8c03 OnAuthenticated } [PlayEvent] public override void OnAuthenticated() { Play.Log( OnAuthenticated ); } protected override void Awake() { base.Awake(); } protected override void OnDestroy() { base.OnDestroy(); } } }","title":"\u4f7f\u7528 UserID \u5efa\u7acb\u4e0e\u670d\u52a1\u7aef\u7684\u901a\u4fe1"},{"location":"game/play/multiplayer/#_4","text":"\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\u53ef\u4ee5\u770b\u89c1\uff0c\u4ee3\u7801\u58f0\u660e\u4e86\u4e00\u4e2a ConnectSample \u7c7b\uff0c\u5b83\u7ee7\u627f\u81ea PlayMonoBehaviour \uff0c\u6240\u6709\u7684\u4e8b\u4ef6\u56de\u8c03\u90fd\u52a0\u4e0a\u4e86 [PlayEvent] \u5c5e\u6027\u6807\u8bb0\uff0c\u8fd9\u4e9b\u90fd\u662f \u5fc5\u987b\u7684 \u3002\u540e\u9762\u7684\u793a\u4f8b\u4ee3\u7801\u90fd\u4f1a\u5982\u6b64\uff0c\u5f00\u53d1\u8005\u7684\u4ee3\u7801\u4e5f\u9700\u8981\u9075\u5b88\u8fd9\u4e00\u7ea6\u5b9a\uff0c\u5c11\u4e86\u4e00\u9879\uff0c\u4e8b\u4ef6\u56de\u8c03\u5c31\u4e0d\u4f1a\u751f\u6548\u3002 \u56e0\u6b64\u4efb\u4f55\u4e00\u4e2a\u4f7f\u7528 Play \u8fdb\u884c\u6e38\u620f\u5f00\u53d1\u7684 PlayMonoBehaviour \u5b50\u7c7b\u5fc5\u987b\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\uff1a \u7ee7\u627f\u81ea PlayMonoBehaviour \u4e8b\u4ef6\u56de\u8c03\u5fc5\u987b\u5e26\u6709 [PlayEvent] \u6807\u8bb0 \u5c24\u5176\u91cd\u8981\u7684\u662f\uff0c \u5982\u679c\u9700\u8981 new\uff08\u91cd\u5199\uff09\u6216\u8005 override\uff08\u8986\u76d6\uff09 Awake \u548c OnDestroy \u65b9\u6cd5\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u8c03\u7528\u7236\u7c7b\u7684\u65b9\u6cd5 base.Awake() \u6216\u8005 base.OnDestroy \u3002","title":"\u91cd\u8981\u7684\u6ce8\u610f\u4e8b\u9879"},{"location":"game/play/multiplayer/#_5","text":"\u6ce8\u610f\uff0c\u5728\u6e38\u620f\u5f53\u4e2d\u90fd\u6709 Lobby(\u6e38\u620f\u5927\u5385)\u7684\u6982\u5ff5\uff0c\u800c\u623f\u95f4\u90fd\u4f1a\u5c5e\u4e8e\u4e00\u4e2a Lobby\uff0c\u5f53\u524d Play \u9ed8\u8ba4\u4e00\u4e2a\u5e94\u7528\u4e0b\u6240\u6709\u7684\u623f\u95f4\u90fd\u5904\u5728\u540c\u4e00\u4e2a Lobby \u4e0b\uff0c\u8fd9\u4e2a\u5c31\u662f\u5168\u5c40\u7684\u5927\u5385\uff08\u5728\u4e4b\u540e\u7684\u8fed\u4ee3\u7248\u672c\u4e2d\u4f1a\u6839\u636e\u7528\u6237\u7684\u9700\u6c42\u9010\u6e10\u5f00\u653e\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u6e38\u620f\u5927\u5385\uff0c\u656c\u8bf7\u671f\u5f85\uff09\u3002","title":"\u623f\u95f4\u5339\u914d"},{"location":"game/play/multiplayer/#playroom","text":"\u521b\u5efa\u623f\u95f4\u662f\u6e38\u620f\u5f00\u59cb\u7684\u524d\u63d0\uff0c\u53ea\u6709\u540c\u5728\u4e00\u4e2a\u623f\u95f4\u5185\u7684\u73a9\u5bb6\u624d\u53ef\u4ee5\u4e00\u8d77\u73a9\u6e38\u620f\u3002 \u623f\u95f4\u7684\u540d\u79f0\u662f\u5168\u5c40\u552f\u4e00\u7684\u6807\u8bc6\uff0c\u8fd9\u4e2a\u6807\u8bc6\u53ef\u4ee5\u7531\u5f00\u53d1\u8005\u81ea\u5df1\u6307\u5b9a\u4e5f\u53ef\u4ee5\u7531 SDK \u5185\u90e8\u968f\u673a\u751f\u6210\uff0c\u5e76\u4e14\u5728\u521b\u5efa\u623f\u95f4\u7684\u540c\u65f6\u6307\u5b9a\u4e00\u4e9b\u914d\u7f6e\u9879\uff0c\u6bd4\u5982\u623f\u95f4\u6700\u5927\u73a9\u5bb6\u6570\u91cf\u4e4b\u7c7b\u7684\u3002 \u4e0b\u9762\u901a\u8fc7\u51e0\u4e2a\u5c0f\u8282\u6765\u4ecb\u7ecd\u521b\u5efa\u623f\u95f4\u7684\u65b9\u5f0f\u4ee5\u53ca\u5982\u4f55\u8bbe\u7f6e\u5404\u79cd\u914d\u7f6e\u9879\uff1a","title":"\u521b\u5efa\u623f\u95f4 PlayRoom"},{"location":"game/play/multiplayer/#_6","text":"using LeanCloud; namespace TestUnit.NetFx46.Docs { public class SampleCreateRoom : PlayMonoBehaviour { void start() { // \u6253\u5f00\u8c03\u8bd5\u65e5\u5fd7 Play.ToggleLog(true); // \u8bbe\u7f6e UserID Play.UserID = Mario ; // \u58f0\u660e\u6e38\u620f\u7248\u672c\uff0c\u4e0d\u540c\u6e38\u620f\u7248\u672c\u7684\u73a9\u5bb6\u4f1a\u88ab\u5206\u914d\u5728\u4e0d\u540c\u7684\u9694\u79bb\u533a\u57df\u4e2d Play.Connect( 0.0.1 ); // \u5982\u679c\u6210\u529f\u5219\u4f1a\u56de\u8c03 OnAuthenticated } [PlayEvent] public override void OnAuthenticated() { Play.Log( OnAuthenticated ); // \u8bbe\u7f6e\u623f\u95f4\u5168\u5c40\u552f\u4e00\u7684\u540d\u79f0\u4e3a \u300ctest-game-001\u300d Play.CreateRoom( test-game-001 ); } /// summary /// \u5982\u679c\u6210\u529f\u521b\u5efa\uff0c\u5219\u4f1a\u56de\u8c03\u5230 OnCreatedRoom /// /summary [PlayEvent] public override void OnCreatedRoom() { // \u6253\u5370\u623f\u95f4\u540d\u79f0 Play.Log( OnCreatedRoom , Play.Room.Name); } /// summary /// \u5982\u679c\u521b\u5efa\u5931\u8d25\uff0c\u5219\u4f1a\u56de\u8c03 OnCreateRoomFailed /// /summary /// param name= errorCode /param /// param name= reason /param [PlayEvent] public override void OnCreateRoomFailed(int errorCode, string reason) { Play.LogError(errorCode, reason); } } } \u6ce8\uff1a\u56e0\u4e3a\u521b\u5efa\u623f\u95f4\u7684\u903b\u8f91\u548c\u987a\u5e8f\u90fd\u4e00\u81f4\uff0c\u56e0\u6b64\u672c\u5c0f\u8282\u4e4b\u540e\u4ecb\u7ecd\u521b\u5efa\u623f\u95f4\u65f6\uff0c\u4e3a\u4e86\u7a81\u51fa\u91cd\u70b9\u53ca\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c\uff0c\u6211\u4eec\u5c06\u4e0d\u518d\u7ed9\u51fa\u6bcf\u4e00\u79cd\u56de\u8c03\u7684\u5b9e\u4f8b\u4ee3\u7801\uff0c\u8bf7\u53c2\u7167\u4e0a\u8ff0\u4ee3\u7801\u5373\u53ef\u3002 \u9002\u7528\u573a\u666f \uff1a\u6839\u636e\u7528\u6237\u8f93\u5165\u540d\u79f0\u521b\u5efa\u623f\u95f4\u3002 var roomName = inputLable.text; Play.CreateRoom(roomName);","title":"\u6307\u5b9a\u623f\u95f4\u540d"},{"location":"game/play/multiplayer/#_7","text":"\u5982\u679c\u4e0d\u4f20\u5165\u4efb\u4f55\u53c2\u6570\u521b\u5efa\u623f\u95f4\uff0c \u5ba2\u6237\u7aef\u4f1a\u968f\u673a\u751f\u6210\u4e00\u4e2a\u540d\u79f0 \u3002\u8fd9\u4e2a\u4e0d\u7528\u5f00\u53d1\u8005\u62c5\u5fc3\uff0c\u7b97\u6cd5\u662f\u7ecf\u8fc7\u6d4b\u8bd5\uff0c\u540d\u5b57\u91cd\u590d\u7684\u6982\u7387\u7ea6\u7b49\u4e8e GUID \u91cd\u590d\u7684\u6982\u7387\uff0c\u6240\u4ee5\u51e0\u4e4e\u4e0d\u53ef\u80fd\u3002 Play.CreateRoom();","title":"\u968f\u673a\u623f\u95f4\u540d"},{"location":"game/play/multiplayer/#id","text":"\u8fd9\u4e2a\u529f\u80fd\u7684\u89e3\u51b3\u7684\u9700\u6c42\u662f\uff1a\u53ea\u5141\u8bb8\u4e00\u4e9b\u7279\u5b9a\u7684 ID \u73a9\u5bb6\u53ef\u4ee5\u52a0\u5165\u5230\u623f\u95f4\u6216\u8005\u5f53\u524d\u73a9\u5bb6\u5f00\u597d\u623f\u95f4\uff0c\u7b49\u5f85\u4e00\u4e9b\u7279\u5b9a\u7684\u670b\u53cb\u6765\u52a0\u5165\u3002\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a \u4e0b\u9762\u662f Play.CreateRoom(string roomName = null, IEnumerable string expectedUsers = null) \u7684\u4e24\u79cd\u91cd\u8f7d\u7684\u5b9e\u4f8b\u4ee3\u7801\uff1a // \u6307\u5b9a bill \u548c steve \u624d\u53ef\u4ee5\u52a0\u5165\u8fd9\u4e2a\u623f\u95f4 Play . CreateRoom ( expectedUsers : new string [] { bill , steve } ); // \u6216\u8005\u987a\u4fbf\u8bbe\u7f6e\u4e00\u4e0b Room Name Play . CreateRoom ( RichMen , new string [] { bill , steve } ); \u6ce8\u610f\uff0c\u8fd9\u79cd\u65b9\u5f0f\u521b\u5efa\u6210\u529f\u4e4b\u540e\uff0c\u88ab\u6307\u5b9a\u7684\u73a9\u5bb6\uff08\u4f8b\u5982\u4e0a\u8ff0\u4ee3\u7801\u4e2d\u7684 steve\uff09\u4e5f\u8fd8\u9700\u8981\u8c03\u7528\u4e00\u6b21 JoinRoom( RichMen ) \u4e3b\u52a8\u52a0\u5165\u5230\u8fd9\u4e2a\u623f\u95f4\u3002 Play.CreateRoom(new string[] { bill , steve }); \u53ea\u662f\u8868\u793a bill \u548c steve \u5df2\u7ecf\u628a\u623f\u95f4\u4f4d\u7f6e\u7ed9\u300c\u5360\u4f4d\u300d\u4e86\uff0c\u4f46\u662f\u7b49\u5230\u4ed6\u4eec\u81ea\u5df1\u4e0a\u7ebf\u4e4b\u540e\uff0c\u8fd8\u9700\u8981\u4e3b\u52a8\u52a0\u5165\u624d\u80fd\u771f\u6b63\u8fdb\u5165\u623f\u95f4\u3002 \u9002\u7528\u573a\u666f \uff1a\u597d\u53cb\u7ec4\u5c40\u4e00\u8d77\u73a9\u6e38\u620f\uff08\u4ee3\u7801\u53c2\u7167\u57fa\u7840\u7528\u6cd5\u91cc\u9762\u7684\u793a\u4f8b\uff09\u3002","title":"\u6307\u5b9a\u73a9\u5bb6 ID"},{"location":"game/play/multiplayer/#_8","text":"\u76ee\u524d Play \u6240\u6709\u7684\u623f\u95f4\u6700\u591a\u5141\u8bb8 10 \u4eba\u540c\u65f6\u5728\u4e00\u4e2a\u623f\u95f4\u8fdb\u884c\u6e38\u620f\u5bf9\u6218\uff0c\u6709\u4e00\u4e9b\u6e38\u620f\u751a\u81f3\u9700\u8981\u8bbe\u7f6e\u623f\u95f4\u6700\u591a\u4eba\u6570\u8981\u66f4\u5c11\uff0c\u6bd4\u5982\u6597\u5730\u4e3b\u53ea\u5141\u8bb8 3 \u4e2a\u4eba\u52a0\u5165\uff0c\u4e00\u65e6\u4eba\u6ee1\u4e86\uff0c\u5176\u4ed6\u7684\u4eba\u662f\u4e0d\u53ef\u4ee5\u52a0\u5165\u7684\uff0c\u56e0\u6b64\u5728\u521b\u5efa\u623f\u95f4\u7684\u65f6\u5019\u53ef\u4ee5\u8bbe\u7f6e\u623f\u95f4\u7684 MaxPlayerCount\uff1a var roomConfig = PlayRoom.RoomConfig.Default; roomConfig.MaxPlayerCount = 4; Play.CreateRoom(roomConfig); // \u4e5f\u53ef\u4ee5\u987a\u4fbf\u8bbe\u7f6e\u4e00\u4e0b room name Play.CreateRoom(roomConfig, max4-room ); \u9002\u7528\u573a\u666f \uff1a\u6e38\u620f\u672c\u8eab\u6709\u4e25\u683c\u7684\u4eba\u6570\u8981\u6c42\uff0c\u6bd4\u5982\u4e09\u56fd\u6740\u533a\u5206 1v1 \u4e24\u4eba\u5c40\u3001\u4e94\u4eba\u5c40\u30013v3 \u516d\u4eba\u5c40\u548c\u6807\u51c6\u516b\u4eba\u5c40\u3002\u4e0b\u9762\u793a\u4f8b\u5c06\u4f1a\u521b\u5efa\u4e00\u4e2a 3v3 \u516d\u4eba\u5c40\u7684\u4e09\u56fd\u6740\u623f\u95f4\uff1a var roomConfig = PlayRoom.RoomConfig.Default; roomConfig.MaxPlayerCount = 6; // \u623f\u95f4\u540d\u968f\u673a\u5373\u53ef\uff0c\u56e0\u4e3a room name \u6ca1\u6709\u5fc5\u8981\u4e00\u5b9a\u8981\u663e\u793a\u51fa\u6765 Play.CreateRoom(roomConfig);","title":"\u9650\u5236\u73a9\u5bb6\u4eba\u6570"},{"location":"game/play/multiplayer/#_9","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u73a9\u5bb6\u5728\u6389\u7ebf\u4e4b\u540e\uff0c\u4f1a \u7acb\u5373\u79bb\u5f00\u623f\u95f4 \uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u8fd9\u4e2a\u4fdd\u7559\u65f6\u95f4\uff0c\u6765\u907f\u514d\u73a9\u5bb6\u4e00\u6389\u7ebf\u5c31\u9ed8\u8ba4\u88ab\u8e22\u51fa\u623f\u95f4\u3002 \u4fdd\u7559\u65f6\u95f4\u6700\u957f\u53ef\u8bbe\u7f6e 300 \u79d2\uff08 5 \u5206\u949f\uff09 \uff0c300 \u79d2\u8fc7\u540e\u7528\u6237\u5728\u623f\u95f4\u5185\u7684\u4fe1\u606f\u5c06\u4f1a\u88ab\u9500\u6bc1\u3002 \u6bd4\u5982\u5982\u4e0b\u4ee3\u7801\u6307\u5b9a\u73a9\u5bb6\u6389\u7ebf\u4e4b\u540e\u7684\u4fdd\u7559\u65f6\u95f4\u662f 2 \u5206\u949f\uff1a var roomConfig = PlayRoom.RoomConfig.Default; // \u5355\u4f4d\u662f\u79d2 roomConfig.PlayerTimeToKeep = 120;// \u8bbe\u7f6e\u6210 120 \u79d2 Play.CreateRoom(roomConfig);","title":"\u73a9\u5bb6\u6389\u7ebf\u4e4b\u540e\u88ab\u4fdd\u7559\u7684\u65f6\u95f4"},{"location":"game/play/multiplayer/#_10","text":"\u623f\u95f4\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u6307\u7684\u662f\u4e00\u4e9b key-value \u7684\u952e\u503c\u5bf9\uff0c\u5728\u521b\u5efa\u6210\u529f\u4e4b\u540e\uff0c\u4e91\u7aef\u4e5f\u4f1a\u4fdd\u7559\u4e00\u4efd\u62f7\u8d1d\uff08\u6ce8\u610f\u8fd9\u91cc\u4e0d\u662f\u6301\u4e45\u5316\u5b58\u50a8\uff0c\u5f53\u8be5\u623f\u95f4\u5931\u6548\u4e4b\u540e\u6240\u6709\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u90fd\u4f1a\u88ab\u9500\u6bc1\uff09\u3002 var roomConfig = PlayRoom.RoomConfig.Default; roomConfig.CustomRoomProperties = new Hashtable() { { level , 1000 }, { rankPoints , 3011 } }; roomConfig.LobbyMatchKeys = new string[] { rankPoints }; Play.CreateRoom(roomConfig); \u6b64\u5904\u9700\u8981\u914d\u5408 \u6839\u636e\u6761\u4ef6\u968f\u673a\u52a0\u5165 \u6765\u7406\u89e3 LobbyMatchKeys \u7684\u4f5c\u7528\u3002","title":"\u8bbe\u7f6e\u623f\u95f4\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027"},{"location":"game/play/multiplayer/#_11","text":"\u521b\u5efa\u4e00\u4e2a\u623f\u95f4\u540e\uff0c\u4e0d\u5e0c\u671b\u5176\u4ed6\u4eba\u5bb6\u52a0\u5165\uff0c\u6bd4\u5982\u6709\u4e00\u4e9b\u5b9a\u65f6\u526f\u672c\uff0c\u73a9\u5bb6\u521b\u5efa\u597d\u623f\u95f4\u4e4b\u540e\uff0c\u7b49\u5230\u526f\u672c\u5f00\u59cb\u4e4b\u540e\uff0c\u518d\u5141\u8bb8\u5176\u4ed6\u73a9\u5bb6\u52a0\u5165\uff1a var roomConfig = PlayRoom.RoomConfig.Default; roomConfig.IsOpen = false; // \u5982\u679c\u4e0d\u8bbe\u7f6e IsOpen\uff0c\u4e91\u7aef\u521b\u5efa\u7684\u623f\u95f4\u9ed8\u8ba4\u90fd\u5141\u8bb8\u5176\u4ed6\u4eba\u52a0\u5165\u7684 Play.CreateRoom(roomConfig); \u5982\u679c\u5728\u67d0\u4e00\u4e2a\u65f6\u523b\uff0c\u5e0c\u671b\u91cd\u65b0\u6253\u5f00\u623f\u95f4\uff0c\u5141\u8bb8\u5176\u4ed6\u4eba\u52a0\u5165\uff0c\u53ea\u9700\u8981\u5c06\u8fd9\u4e2a\u5c5e\u6027\u8bbe\u7f6e\u6210 true \u5373\u53ef\uff1a Play.Room.IsOpen = true;","title":"\u662f\u5426\u5f00\u653e\u623f\u95f4\u5141\u8bb8\u522b\u4eba\u52a0\u5165"},{"location":"game/play/multiplayer/#_12","text":"\u521b\u5efa\u4e00\u4e2a\u623f\u95f4\u7684\u65f6\u5019\u9009\u62e9\u4e0d\u53ef\u89c1\uff0c\u8fd9\u4e2a\u623f\u95f4\u5c31\u4e0d\u4f1a\u88ab\u5176\u4ed6\u4eba\u5339\u914d\u5230\uff08\u5176\u4ed6\u4eba\u8c03\u7528 JoinRandomRoom \u7684\u65f6\u5019\u4e0d\u4f1a\u53c2\u4e0e\u5339\u914d\uff09\uff1a var roomConfig = PlayRoom.RoomConfig.Default; roomConfig.IsVisible = false; // \u5982\u679c\u4e0d\u8bbe\u7f6e IsVisible\uff0c\u4e91\u7aef\u521b\u5efa\u7684\u623f\u95f4\u9ed8\u8ba4\u90fd\u4f1a\u53c2\u4e0e JoinRandomRoom \u7684\u5339\u914d\u4e2d Play.CreateRoom(roomConfig);","title":"\u623f\u95f4\u662f\u5426\u53ef\u89c1"},{"location":"game/play/multiplayer/#_13","text":"","title":"\u623f\u95f4\u7684\u76f8\u5173\u9650\u5236\u548c\u89c4\u5219"},{"location":"game/play/multiplayer/#_14","text":"\u4e0b\u5217\u60c5\u51b5\u4f1a\u5bfc\u81f4\u623f\u95f4\u5728\u4e91\u7aef\u88ab\u6e05\u9664\uff0c\u4e5f\u5c31\u662f\u8ba4\u4e3a\u8fd9\u4e2a\u623f\u95f4\u5931\u6548\u4e86\uff1a \u6240\u6709\u6210\u5458\u90fd\u79bb\u5f00\u4e86 \u6240\u6709\u6210\u5458\u90fd\u6389\u7ebf\uff0c\u5e76\u4e14\u90fd\u6ca1\u6709\u91cd\u8fde\u56de\u6765\uff0c\u8d85\u8fc7 30 \u5206\u949f\uff0c\u4e91\u7aef\u5c31\u4f1a\u8ba4\u4e3a\u5931\u6548","title":"\u623f\u95f4\u7684\u5931\u6548"},{"location":"game/play/multiplayer/#_15","text":"\u5f53\u524d\u73a9\u5bb6\u6210\u529f\u52a0\u5165\u5230\u623f\u95f4\u540e\uff0c\u4e91\u7aef\u4f1a\u5411\u5df2\u7ecf\u5728\u623f\u95f4\u91cc\u9762\u7684\u5176\u4ed6\u73a9\u5bb6\u4e0b\u53d1\u4e00\u6761\u300c\u6709\u65b0\u73a9\u5bb6\u52a0\u5165\u300d\u7684\u901a\u77e5\uff0c\u5177\u4f53\u7684\u4e8b\u4ef6\u56de\u8c03\u8bf7\u67e5\u770b \u65b0\u73a9\u5bb6\u52a0\u5165\u7684\u4e8b\u4ef6\u901a\u77e5 \u3002","title":"\u52a0\u5165\u623f\u95f4"},{"location":"game/play/multiplayer/#name","text":"public class SampleJoinRoom : PlayMonoBehaviour { void start() { // \u6253\u5f00\u8c03\u8bd5\u65e5\u5fd7 Play.ToggleLog(true); // \u8bbe\u7f6e UserID Play.UserID = Mario ; // \u58f0\u660e\u6e38\u620f\u7248\u672c\uff0c\u4e0d\u540c\u6e38\u620f\u7248\u672c\u7684\u73a9\u5bb6\u4f1a\u88ab\u5206\u914d\u5728\u4e0d\u540c\u7684\u9694\u79bb\u533a\u57df\u4e2d Play.Connect( 0.0.1 ); // \u5982\u679c\u9274\u6743\u6210\u529f\u5219\u4f1a\u89e6\u53d1 OnAuthenticated \u56de\u8c03 } [PlayEvent] public override void OnAuthenticated() { Play.Log( OnAuthenticated ); // \u52a0\u5165 RichMen \u623f\u95f4 Play.JoinRoom( RichMen ); } [PlayEvent] public override void OnJoinedRoom() { Play.Log( OnJoinedRoom ); var name = Play.Room.Name; } [PlayEvent] public override void OnJoinRoomFailed(int errorCode, string reason) { } } \u52a0\u5165\u6210\u529f\u5219\u4f1a\u56de\u8c03 OnJoinedRoom \uff0c\u52a0\u5165\u5931\u8d25\u5219\u4f1a\u56de\u8c03 OnJoinRoomFailed \u3002 \u9002\u7528\u573a\u666f \uff1a\u4e0e\u597d\u53cb\u4e00\u8d77\u6e38\u620f\u3002\u7528\u6237\u81ea\u5df1\u8f93\u5165\u4e86\u4e00\u4e2a\u623f\u95f4\u540d\uff0c\u5e76\u4e14\u521b\u5efa\u6210\u529f\uff0c\u7136\u540e\u901a\u8fc7\u804a\u5929\u5de5\u5177\u544a\u8bc9\u4e86\u597d\u53cb\uff0c\u7136\u540e\u597d\u53cb\u901a\u8fc7\u623f\u95f4\u540d\u76f4\u63a5\u52a0\u5165\u8fdb\u6765\u3002 var roomName = get_from_qq ; Play.JoinRoom(roomName);","title":"\u6839\u636e Name \u52a0\u5165"},{"location":"game/play/multiplayer/#_16","text":"\u968f\u673a\u52a0\u5165\u4efb\u4f55\u4e00\u4e2a\u5f00\u653e\u7684\u6709\u7a7a\u4f4d\u7684\u623f\u95f4\uff1a Play.JoinRandomRoom(); \u9664\u975e\u662f\u6240\u6709\u53ef\u7528\u7684\u623f\u95f4\u90fd\u6ee1\u5458\u4e86\uff0c\u624d\u4f1a\u51fa\u73b0\u968f\u673a\u52a0\u5165\u5931\u8d25\u7684\u60c5\u51b5\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u90fd\u4f1a\u6210\u529f\u3002 \u5982\u679c\u968f\u673a\u52a0\u5165\u5931\u8d25\uff0c\u4f1a\u89e6\u53d1 OnJoinedRoomFailed \u56de\u8c03\uff0c\u53ef\u4ee5\u9009\u62e9\u5728\u8fd9\u4e2a\u56de\u8c03\u91cc\u9762\u7ee7\u7eed \u521b\u5efa\u623f\u95f4 \u3002 \u6ce8\u610f\uff0c\u4e0d\u53ef\u89c1\u7684\u623f\u95f4\u662f\u4e0d\u4f1a\u53c2\u4e0e\u968f\u673a\u623f\u95f4\u7684\u5339\u914d\u7684\u3002 \u9002\u7528\u573a\u666f \uff1a\u5feb\u901f\u52a0\u5165\u5df2\u6709\u623f\u95f4\uff08\u4e0d\u521b\u5efa\u65b0\u7684\u623f\u95f4\uff09","title":"\u968f\u673a\u52a0\u5165"},{"location":"game/play/multiplayer/#_17","text":"\u914d\u5408\u524d\u9762\u7684 \u8bbe\u7f6e\u623f\u95f4\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027 \u7684\u4ee3\u7801\uff1a var randomLobbyMatchKeys = new Hashtable { { rankPoints , 3000 } }; // \u6839\u636e key-value \u5339\u914d\u52a0\u5165 Play.JoinRandomRoom(randomLobbyMatchKeys); \u52a0\u5165\u6210\u529f\u5219\u4f1a\u56de\u8c03 OnJoinedRoom \uff0c\u52a0\u5165\u5931\u8d25\u5219\u4f1a\u56de\u8c03 OnJoinRoomFailed \u3002 \u6ce8\u610f\uff0c\u6839\u636e\u6761\u4ef6\u968f\u673a\u52a0\u5165\u6709\u5982\u4e0b\u5e97\u5740\uff1a \u4e0d\u53ef\u89c1\u7684\u623f\u95f4\u662f\u4e0d\u4f1a\u53c2\u4e0e\u968f\u673a\u623f\u95f4\u7684\u5339\u914d \u76ee\u524d\u53ea\u652f\u6301\u6761\u4ef6\u76f8\u7b49\u7684\u5339\u914d\uff0c\u6bd4\u5982\u6211\u4eec\u4e0d\u652f\u6301 rankPoints \u5c0f\u4e8e 3000 \u7684\u8fd9\u79cd\u5339\u914d","title":"\u6839\u636e\u6761\u4ef6\u968f\u673a\u52a0\u5165"},{"location":"game/play/multiplayer/#_18","text":"\u89e3\u51b3\u7684\u9700\u6c42\u662f\uff1a\u4f18\u5148\u68c0\u6d4b\u4f20\u5165\u7684 room name \u5bf9\u5e94\u7684\u623f\u95f4\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u5b58\u5728\u5c31\u76f4\u63a5\u52a0\u5165\uff0c\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5c31\u76f4\u63a5\u521b\u5efa\uff1a var roomName = i-want-this-name ; Play.JoinOrCreate(roomName); \u6216\u8005\u6307\u5b9a\u4e00\u4e9b key-value \u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\uff0c\u4f8b\u5982\uff0c\u6211\u8981\u52a0\u5165\u4e00\u4e2a\u6307\u5b9a\u540d\u5b57\u7684\u623f\u95f4\uff0c\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u8bf7\u5e2e\u6211\u521b\u5efa\u8fd9\u4e2a\u623f\u95f4\u5e76\u4e14\u628a\u6211\u6307\u5b9a\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u4e5f\u8d4b\u503c\u7ed9\u623f\u95f4\uff1a var createWithAttributes = new Hashtable { { rankPoints , 1000 } }; var roomConfig = PlayRoom.RoomConfig.Default; roomConfig.CustomRoomProperties = createWithAttributes; roomConfig.LobbyMatchKeys = new string[] { rankPoints }; Play.JoinOrCreate(roomConfig); \u5982\u679c\u52a0\u5165\u6210\u529f\u5219\u4f1a\u56de\u8c03 OnJoinedRoom \uff0c\u5982\u679c\u662f\u521b\u5efa\u6210\u529f\uff0c\u5219\u4f1a\u5148\u8c03\u7528 OnCreatedRoom \u7136\u540e\u518d\u8c03\u7528 OnJoinedRoom \u3002 \u9002\u7528\u573a\u666f \uff1a\u4e24\u4eba\uff08\u6216\u8005\u591a\u4eba\uff09\u7ea6\u5b9a\u4e86\u4e00\u4e2a\u623f\u95f4\u540d\uff0c\u4f46\u662f\u8fd9\u4e9b\u4eba\u8fdb\u5165\u6e38\u620f\u7684\u65f6\u95f4\u4e0d\u4e00\u6837\uff0c\u56e0\u6b64\u6240\u6709\u4eba\u90fd\u8c03\u7528 JoinOrCreate \u5e76\u4e14\u4f20\u5165\u4e00\u6837\u7684\u540d\u5b57\uff0c\u5219 SDK \u4f1a\u786e\u4fdd\u8fd9\u4e9b\u4eba\u4e00\u5b9a\u4f1a\u52a0\u5165\u5230\u4e00\u4e2a\u76f8\u540c\u7684\u623f\u95f4\u5185\u3002","title":"\u52a0\u5165\u6216\u8005\u521b\u5efa"},{"location":"game/play/multiplayer/#_19","text":"A \u521b\u5efa\u4e86\u623f\u95f4\uff0c\u7136\u540e B \u52a0\u5165\u8fdb\u6765\uff08\u4e0d\u7ba1\u662f\u968f\u673a\u52a0\u5165\u8fd8\u662f\u5339\u914d\u52a0\u5165\uff0c\u8fd8\u662f\u4f7f\u7528 Name \u76f4\u63a5\u52a0\u5165\uff09\uff0cA \u90fd\u4f1a\u6536\u5230 B \u52a0\u5165\u5230\u623f\u95f4\u7684\u4e8b\u4ef6\u901a\u77e5 OnNewPlayerJoinedRoom \uff1a [PlayEvent] public override void OnNewPlayerJoinedRoom(Player player) { Play.Log(player.UserID); } \u5982\u679c C \u5148\u4e8e B \u52a0\u5165\u4e86\uff0cC \u4e5f\u4f1a\u6536\u5230 OnNewPlayerJoinedRoom \u7684\u4e8b\u4ef6\u901a\u77e5\u3002","title":"\u65b0\u73a9\u5bb6\u52a0\u5165\u7684\u4e8b\u4ef6\u901a\u77e5"},{"location":"game/play/multiplayer/#_20","text":"","title":"\u5f00\u59cb\u6e38\u620f"},{"location":"game/play/multiplayer/#masterclient","text":"\u7ed3\u5408\u524d\u9762\u7684\u7ae0\u8282\uff0c\u6211\u4eec\u9700\u8981\u660e\u786e\u4e00\u70b9\uff0c\u5728\u65e0\u670d\u52a1\u7aef\u8fdb\u884c\u7f51\u6e38\u5bf9\u6218\u7684\u65f6\u5019\uff0c\u901a\u5e38\u90fd\u4f1a\u6709\u4e00\u4e2a\u4e3b\u673a\u7684\u6982\u5ff5\uff08\u53c2\u7167\u9b54\u517d\u4e89\u9738\u5c40\u57df\u7f51\u6e38\u620f\u91cc\u9762\u7684\u521b\u5efa\u623f\u95f4\u7684 Host\uff09\uff0c\u56e0\u6b64 Play \u63d0\u4f9b\u4e86\u4e00\u4e2a MasterClient \u7684\u6982\u5ff5\uff0c\u6307\u7684\u5c31\u662f\u623f\u95f4 Host \u73a9\u5bb6\uff0c\u5b83\u53ef\u80fd\u7531\u4ee5\u4e0b\u51e0\u79cd\u73a9\u5bb6\u627f\u62c5\uff1a \u623f\u95f4\u6700\u521d\u7684\u521b\u5efa\u8005\uff0c\u5728\u4ed6\u52a0\u5165\u4e4b\u540e\uff0c\u81ea\u52a8\u6210\u4e3a\u7b2c\u4e00\u4efb MasterClient\u3002 A \u521b\u5efa\u4e86\u623f\u95f4\uff0c\u968f\u540e B \u548c C \u52a0\u5165\uff0c\u7136\u540e\u56e0\u4e3a A \u7684\u7f51\u7edc\u5f02\u5e38\uff0cTA \u6389\u7ebf\u4e86\uff0c\u8fd9\u4e2a\u65f6\u5019\u670d\u52a1\u7aef\u4f1a\u4ece\u73b0\u6709\u7684 B \u548c C \u91cc\u9762\u6311\u9009\u4e00\u4e2a\u4f5c\u4e3a\u65b0\u4efb\u7684 MasterClient\uff0c\u5e76\u4e14\u4f1a\u4e0b\u53d1 OnMasterClientSwitched \u7684\u4e8b\u4ef6\u56de\u8c03\u901a\u77e5 \u5728 A \u56de\u6765\u4e4b\u540e\uff0cA \u4e5f\u4e0d\u4f1a\u91cd\u65b0\u6210\u4e3a MasterClient\u3002 \u5982\u4e0b\u4ee3\u7801\u6f14\u793a\u5982\u4f55\u76d1\u542c MasterClient \u4ea7\u751f\u53d8\u5316\u7684\u4e8b\u4ef6\u56de\u8c03\uff1a [PlayEvent] public override void OnMasterClientSwitched(Player masterPlayer) { Play.Log( new master client is ,masterPlayer.UserID); }","title":"MasterClient"},{"location":"game/play/multiplayer/#_21","text":"\u623f\u95f4\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u662f\u9884\u7559\u7ed9\u5f00\u53d1\u8005\u81ea\u5b9a\u4e49\u4e1a\u52a1\u903b\u8f91\u7684\uff0c\u5f53\u4f60\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u5c5e\u6027\u4e4b\u540e\uff0cSDK \u4f1a\u4e0a\u4f20\u5230\u4e91\u7aef\uff0c\u4e91\u7aef\u4f1a\u5c06\u8fd9\u4e9b\u5c5e\u6027\u4e0b\u53d1\u7ed9\u5728\u540c\u4e00\u4e2a\u623f\u95f4\u7684\u5176\u4ed6\u73a9\u5bb6\u3002","title":"\u623f\u95f4\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027"},{"location":"game/play/multiplayer/#_22","text":"\u8bbe\u7f6e\u623f\u95f4\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027 \u5c0f\u8282\u91cc\u9762\u7684\u4ee3\u7801\u5c31\u662f\u521d\u59cb\u5316\u623f\u95f4\u5c5e\u6027\u7684\u4ee3\u7801\uff0c\u8fd9\u91cc\u8981\u8be6\u7ec6\u63cf\u8ff0\u4e00\u4e0b\u81ea\u5b9a\u4e49\u5c5e\u6027\u652f\u6301\u7684\u7c7b\u578b\uff1a bool string \u6570\u5b57\u7c7b\u578b\uff0c\u50cf byte\u3001int\u3001float\u3001double \u7b49\u57fa\u7840\u7c7b\u578b\u90fd\u652f\u6301\u3002 \u5b57\u5178\u7c7b\u578b Dictionary List \u7c7b\u578b\uff0c\u5982 List \u3001List \u7b49\u3002 \u672a\u6765\u4f1a\u652f\u6301\u66f4\u591a\u7c7b\u578b\uff0c\u5305\u62ec Hashtable \u6216\u8005\u662f\u81ea\u5b9a\u4e49\u7c7b\u578b\u3002 var roomConfig = PlayRoom.RoomConfig.Default; roomConfig.CustomRoomProperties = new Hashtable() { { vip , ture }, { note , welcome }, { bonus ,500 } }; Play.CreateRoom(roomConfig);","title":"\u521d\u59cb\u5316\u623f\u95f4\u5c5e\u6027"},{"location":"game/play/multiplayer/#_23","text":"\u81ea\u5b9a\u4e49\u5c5e\u6027\u7684\u4fee\u6539\u662f\u589e\u91cf\u4fee\u6539\u7684\uff0c\u6bd4\u5982\u5f53\u524d\u5df2\u7ecf\u6709\u4e86\u4e00\u4e9b\u5c5e\u6027\uff0c\u7136\u540e\u4f60\u53ea\u8981\u8bbe\u7f6e\u4e00\u4e9b\u589e\u91cf\u5c31\u53ef\u4ee5\uff0c\u5ba2\u6237\u7aef\u4f1a\u505a\u81ea\u52a8\u7684\u5408\u5e76\uff0c\u4e91\u7aef\u4e5f\u4f1a\u505a\u6821\u9a8c\uff0c\u4e0b\u53d1\u7684\u901a\u77e5\u4e5f\u662f\u505a\u589e\u91cf\u4e0b\u53d1\u7684\uff1a [PlayEvent] public override void OnJoinedRoom() { var toUpdate = new Hashtable() { { level , 1200 } }; Play.Room.SetCustomProperties(toUpdate); }","title":"\u4fee\u6539\u623f\u95f4\u5c5e\u6027"},{"location":"game/play/multiplayer/#cas","text":"\u4e3a\u4e86\u539f\u5b50\u5316\u64cd\u4f5c\u5c5e\u6027\uff0c\u4e5f\u662f\u4e3a\u4e86\u9632\u6b62\u51b2\u7a81\uff0cPlay \u4e5f\u652f\u6301\u4ee5 CAS (check and save) \u6a21\u5f0f\u4fee\u6539\u5c5e\u6027\uff1a [PlayEvent] public override void OnJoinedRoom() { var toUpdate = new Hashtable() { { level , 1200 } }; var when = new Hashtable() { { level , 1000 } }; Play.Room.SetCustomProperties(toUpdate, when); } \u4e0a\u8ff0\u4ee3\u7801\u7684\u542b\u4e49\u662f\uff1a\u5982\u679c\u5f53\u524d level \u662f 1000 \u90a3\u4e48\u5c31\u4fee\u6539\u4e3a level \u503c\u4e3a 1200\uff0c\u5426\u5219\u5c31\u4e0d\u4fee\u6539\u3002","title":"CAS \u539f\u5b50\u4fee\u6539\u6a21\u5f0f"},{"location":"game/play/multiplayer/#_24","text":"[PlayEvent] public override void OnRoomCustomPropertiesUpdated(Hashtable updatedProperties) { Play.Log( OnRoomCustomPropertiesUpdated ); // \u4fee\u6539\u7684\u589e\u91cf\u4f1a\u88ab\u901a\u77e5\u7ed9\u6240\u6709\u5728\u623f\u95f4\u7684\u73a9\u5bb6 Play.Log(updatedProperties.ToLog()); }","title":"\u6536\u5230\u623f\u95f4\u5c5e\u6027\u88ab\u4fee\u6539\u7684\u901a\u77e5"},{"location":"game/play/multiplayer/#_25","text":"\u73a9\u5bb6\uff08Player\uff09\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u4e0e\u623f\u95f4\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u65e0\u672c\u8d28\u5dee\u522b\uff0c\u5bf9\u5916\u66b4\u9732\u7684\u63a5\u53e3\u90fd\u662f\u4e00\u4e2a Hashtable\uff0c\u64cd\u4f5c\u4e5f\u51e0\u8fd1\u7c7b\u4f3c\uff0c\u53ea\u662f\u4e8b\u4ef6\u56de\u8c03\u4e0d\u4e00\u6837\u3002","title":"\u73a9\u5bb6\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027"},{"location":"game/play/multiplayer/#_26","text":"[PlayEvent] public override void OnNewPlayerJoinedRoom(Player player) { var initData = new Hashtable(); initData.Add( ready , false); initData.Add( gold , 200); player.CustomProperties = initData; } \u5728\u73a9\u5bb6\u52a0\u5165\u623f\u95f4\u4e4b\u540e\uff0c\u521d\u59cb\u5316 TA \u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u3002","title":"\u521d\u59cb\u5316\u73a9\u5bb6\u5c5e\u6027"},{"location":"game/play/multiplayer/#_27","text":"\u6ce8\u610f\uff0c\u8fd9\u91cc\u6709\u4e00\u4e2a\u70b9\uff0c\u4e0d\u8bba\u662f A \u4fee\u6539\u4e86\u81ea\u5df1\u7684\u5c5e\u6027\uff0c\u8fd8\u662f A \u4fee\u6539\u4e86\u5176\u4ed6\u4eba\u7684\u5c5e\u6027\uff0c\u90fd\u4f1a\u5728\u8fd9\u91cc\u8fdb\u884c\u4e8b\u4ef6\u56de\u8c03\u7684\u901a\u77e5\uff1a [PlayEvent] public override void OnPlayerCustomPropertiesChanged(Player player, Hashtable updatedProperties) { Play.Log( OnPlayerCustomPropertiesChanged ); Play.Log(player.UserID, updatedProperties.ToLog()); }","title":"\u6536\u5230\u73a9\u5bb6\u7684\u5c5e\u6027\u88ab\u4fee\u6539\u7684\u901a\u77e5"},{"location":"game/play/multiplayer/#_28","text":"var cards = new Hashtable(); cards.Add( cards , new string[] { 1 , 2 , 3 }); Play.Player.CustomProperties = cards; \u4e0a\u8ff0\u64cd\u4f5c\u4e5f\u4f1a\u89e6\u53d1 OnPlayerCustomPropertiesChanged \u3002","title":"\u4fee\u6539\u73a9\u5bb6\u5c5e\u6027"},{"location":"game/play/multiplayer/#rpc","text":"RPC \u662f\u63d0\u4f9b\u7ed9\u5f00\u53d1\u8005\u81ea\u5b9a\u4e49\u6d88\u606f\u7684\u4e00\u79cd\u65b9\u5f0f\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7\u5b9a\u4e49 RPC \uff0c\u53d1\u9001 RPC \u6d88\u606f\u6765\u5b9e\u73b0\u591a\u7aef\u7684\u901a\u4fe1\u3002 \u6ce8\u610f\uff0c\u5f53\u524d\u73a9\u5bb6\u5fc5\u987b\u5904\u4e8e\u4e00\u4e2a\u623f\u95f4\u5185\u624d\u53ef\u4ee5\u53d1\u9001 RPC \u6d88\u606f\uff0c\u5426\u5219 RPC \u6d88\u606f\u4e0d\u4f1a\u89e6\u53d1\u3002 \u53e6\u5916\uff0cSDK \u5185\u7f6e\u7684\u56de\u8c03\u90fd\u4f1a\u6709 [PlayEvent] \uff0c\u800c\u5f00\u53d1\u8005\u81ea\u5b9a\u4e49\u7684 RPC \u56de\u8c03\u5219\u5fc5\u987b\u6709 [PlayRPC] \u4fee\u9970\u7b26\u3002","title":"RPC \u8fdc\u7a0b\u8c03\u7528\u51fd\u6570"},{"location":"game/play/multiplayer/#rpc_1","text":"[PlayRPC] public void OnSomebodySayHello(string words) { var length = words.Length; }","title":"\u5b9a\u4e49 RPC \u65b9\u6cd5"},{"location":"game/play/multiplayer/#rpc_2","text":"Play.RPC( OnSomebodySayHello , PlayRPCTargets.All, hello ); \u4e0a\u8ff0\u6d88\u606f\u53d1\u9001\u51fa\u53bb\uff0c\u6240\u6709\u5728\u623f\u95f4\u7684\u73a9\u5bb6\u90fd\u4f1a\u6536\u5230 OnSomebodySayHello \u7684\u56de\u8c03\u901a\u77e5\u3002","title":"\u53d1\u9001 RPC \u6d88\u606f"},{"location":"game/play/multiplayer/#_29","text":"\u53ea\u53d1\u7ed9 MasterClient: Play.RPC( OnSomebodySayHello , PlayRPCTargets.MasterClient, hello ); \u53d1\u7ed9\u5176\u4ed6\u4eba\uff08\u81ea\u5df1\u4e0d\u63a5\u6536)\uff1a Play.RPC( OnSomebodySayHello , PlayRPCTargets.Others, hello ); \u8be5\u6d88\u606f\u662f\u9700\u8981\u88ab\u7f13\u5b58\u7684\uff0c\u5f53\u524d\u5728\u7ebf\u7684\u73a9\u5bb6\u5b9e\u65f6\u63a5\u6536\uff0c\u5e76\u4e14\u540e\u6765\u52a0\u5165\u7684\u73a9\u5bb6\u5728\u52a0\u5165\u623f\u95f4\u4e4b\u540e\uff0c\u4e5f\u80fd\u6536\u5230: Play.RPC( OnSomebodySayHello , PlayRPCTargets.OthersBuffered, hello );","title":"\u6307\u5b9a\u6d88\u606f\u63a5\u6536\u8005"},{"location":"game/play/multiplayer/#_30","text":"Play.LeaveRoom(); \u9000\u51fa\u6210\u529f\u7684\u56de\u8c03\u5982\u4e0b\uff1a [PlayEvent] public override void OnLeftRoom() { Play.Log( OnLeftRoom ); } \u5047\u8bbe\u5728 B \u9000\u51fa\u623f\u95f4\u4e4b\u524d\uff0c\u623f\u95f4\u91cc\u9762\u6709 A\u3001B\u3001C \u4e09\u4f4d\u73a9\u5bb6\uff0cB \u8c03\u7528 Play.LeaveRoom() \u4e4b\u540e\uff0cA \u548c C \u5c31\u4f1a\u6536\u5230 OnPlayerLeftRoom \u7684\u4e8b\u4ef6\u901a\u77e5\uff1a [PlayEvent] public override void OnPlayerLeftRoom(Player player) { Play.Log( someone left room with user id: , player.UserID); }","title":"\u9000\u51fa\u623f\u95f4"},{"location":"game/play/multiplayer/#_31","text":"\u901a\u8fc7 SDK \u5f00\u653e\u7684\u5c5e\u6027\u8bbf\u95ee\u5668\uff0c\u53ef\u4ee5\u5feb\u6377\u5730\u8bfb\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a","title":"\u5185\u7f6e\u7684\u5c5e\u6027\u8bbf\u95ee\u5668"},{"location":"game/play/multiplayer/#_32","text":"var room = Play.Room;","title":"\u5f53\u524d\u52a0\u5165\u7684\u623f\u95f4"},{"location":"game/play/multiplayer/#_33","text":"var players = Play.Players; // \u901a\u8fc7 room \u6765\u83b7\u53d6 var playersInRoom = Play.Room.Players; // \u4ee5\u4e0a\u4e24\u884c\u8bed\u53e5\u83b7\u53d6\u7684\u5217\u8868\u662f\u4e00\u6837\u7684","title":"\u5f53\u524d\u623f\u95f4\u91cc\u9762\u6240\u6709\u73a9\u5bb6\u7684\u5217\u8868"},{"location":"game/play/multiplayer/#_34","text":"var player = Play.Player;","title":"\u5f53\u524d\u73a9\u5bb6"},{"location":"game/play/multiplayer/#userid_1","text":"var userId = Play.UserID;","title":"\u5f53\u524d\u73a9\u5bb6\u7684 UserID"},{"location":"game/play/multiplayer/#_35","text":"var lobby = Play.Lobby;","title":"\u5f53\u524d\u6240\u5904\u5728\u7684\u6e38\u620f\u5927\u5385"},{"location":"game/play/multiplayer/#_36","text":"var gameVersion = Play.GameVersion;","title":"\u5f53\u524d\u6e38\u620f\u7248\u672c"},{"location":"game/play/multiplayer/#_37","text":"\u65ad\u7ebf\u4e4b\u540e\uff0cSDK \u6ca1\u6709\u505a \u81ea\u52a8\u7684\u65ad\u7ebf\u91cd\u8fde \uff0c\u5047\u8bbe\u6e38\u620f\u5141\u8bb8\u73a9\u5bb6\u6389\u7ebf\u4e4b\u540e\u91cd\u8fde\uff0c\u5e76\u4e14\u52a0\u5165\u539f\u6765\u7684\u623f\u95f4\uff0c\u9700\u8981\u6389\u7ebf\u7684\u73a9\u5bb6\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a \u53d1\u73b0\u8fde\u63a5\u65ad\u5f00\uff08\u7f51\u7edc\u5f02\u5e38\u6216\u8005\u5176\u4ed6\u539f\u56e0\u5bfc\u81f4\u8fde\u63a5\u65ad\u5f00\uff09\uff0cSDK \u4f1a\u89e6\u53d1 OnDisconnected \u56de\u8c03\u3002 \u5c1d\u8bd5\u8c03\u7528 Play.Connect() \u91cd\u65b0\u6253\u5f00\u8fde\u63a5\u3002 \u5728 OnAuthenticated \u56de\u8c03\u91cc\u9762\u8c03\u7528 Play.RejoinRoom() \u91cd\u65b0\u52a0\u5165\u539f\u6765\u7684\u623f\u95f4\u3002 \u7136\u540e\u901a\u8fc7\u76d1\u542c OnJoinedRoom \u6765\u91cd\u65b0\u56de\u5230\u623f\u95f4\u3002 \u914d\u5408\u76d1\u542c OnJoinRoomFailed \u6765\u5224\u65ad\u623f\u95f4\u662f\u5426\u5931\u6548\u6216\u8005\u662f\u5176\u4ed6\u4ec0\u4e48\u539f\u56e0\u5bfc\u81f4\u91cd\u65b0\u52a0\u5165\u5931\u8d25\u3002 \u5982\u679c\u5f53\u524d\u7528\u6237\u6210\u529f\u56de\u5230\u623f\u95f4\uff0c\u89e6\u53d1\u5982\u4e0b\u901a\u77e5\uff1a OnPlayerCustomPropertiesChanged \u6765\u544a\u77e5\u5f53\u524d\u7528\u6237\u4e0a\u6b21\u6389\u7ebf\u4e4b\u524d\u6700\u65b0\u7684 Player \u4e0a\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027 OnRoomCustomPropertiesUpdated \u6765\u544a\u77e5\u5f53\u524d\u7528\u6237\u4e0a\u6b21\u6389\u7ebf\u4e4b\u524d\u6700\u65b0\u7684 Room \u4e0a\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027 \u5047\u8bbe\u623f\u95f4\u5185\u5df2\u6709 A\u3001B\u3001C \u4e09\u540d\u73a9\u5bb6\uff0c\u7136\u540e\u6b64\u65f6\u5ffd\u7136 B \u6389\u7ebf\u4e86\uff0c\u6b64\u65f6\u5982\u679c\u521b\u5efa\u623f\u95f4\u7684\u65f6\u5019\u6307\u5b9a\u4e86 \u73a9\u5bb6\u6389\u7ebf\u4e4b\u540e\u88ab\u4fdd\u7559\u7684\u65f6\u95f4 \uff0c\u5c31\u4f1a\u51fa\u73b0\u5982\u4e0b\u4e24\u79cd\u60c5\u51b5\uff1a \u5982\u679c\u8bbe\u7f6e\u4e86\u7c7b\u4f3c roomConfig.PlayerTimeToKeep = 30 \u8fd9\u6837\u7684\u6709\u6548\u503c\uff0c\u90a3\u4e48 B \u73a9\u5bb6\u5728\u6389\u7ebf\u65f6\uff0c\u4f1a\u4ea7\u751f\u5982\u4e0b\u60c5\u666f\uff1a A \u548c C \u5c06\u4f1a\u5f97\u5230\u5982\u4e0b\u901a\u77e5\uff1a [PlayEvent] public override void OnPlayerActivityChanged(Player player) { // player.IsInactive \u6b64\u65f6\u5e94\u8be5\u4e3a true Play.Log( OnPlayerActivityChanged , player.UserID, player.IsInactive); } B \u4f1a\u5f97\u5230\u5982\u4e0b\u901a\u77e5\uff1a [PlayEvent] public override void OnDisconnected() { Play.Log( OnDisconnected ); } \u5982\u679c B \u5728\u6709\u6548\u671f\u4e4b\u5185\u8c03\u7528\u4e86 Play.RejoinRoom() \u5e76\u4e14\u6210\u529f\u56de\u5230\u4e86\u623f\u95f4\uff0c\u90a3\u4e48 A \u548c C \u5c06\u4f1a\u518d\u6b21\u6536\u5230 OnPlayerActivityChanged \u7684\u56de\u8c03\uff1a [PlayEvent] public override void OnPlayerActivityChanged(Player player) { // player.IsInactive \u6b64\u65f6\u5e94\u8be5\u4e3a false Play.Log( OnPlayerActivityChanged , player.UserID, player.IsInactive); } \u7136\u540e\u5982\u679c B \u5728\u8d85\u8fc7\u4e86\u6709\u6548\u671f\u4e4b\u540e\uff0c\u4ecd\u7136 \u6ca1\u6709 \u8c03\u7528 Play.RejoinRoom() \u56de\u5230\u623f\u95f4\uff0c\u90a3\u4e48 A \u548c C \u8fd8\u4f1a\u518d\u6b21\u6536\u5230\u5982\u4e0b\u56de\u8c03\uff1a [PlayEvent] public override void OnPlayerLeftRoom(Player player) { Play.Log( OnPlayerLeftRoom ,player.UserID); } \u5982\u679c\u6ca1\u6709\u8bbe\u7f6e roomConfig.PlayerTimeToKeep \u90a3\u4e48 B \u4e00\u65e6\u6389\u7ebf\uff0cA \u548c C \u4f1a\u76f4\u63a5\u6536\u5230\u5982\u4e0b\u56de\u8c03\uff1a [PlayEvent] public override void OnPlayerLeftRoom(Player player) { Play.Log( OnPlayerLeftRoom ,player.UserID); } B \u4f1a\u6536\u5230\u5982\u4e0b\u56de\u8c03\uff1a [PlayEvent] public override void OnDisconnected() { Play.Log( OnDisconnected ); } \u6ce8\u610f\uff0c roomConfig.PlayerTimeToKeep \u7684\u8bbe\u7f6e\u4e0e\u5426\u6700\u5927\u7684\u533a\u522b\u5728\u4e8e\uff1a \u5982\u679c\u8bbe\u7f6e\u4e86\uff0cA \u548c C \u7aef\u4f1a\u5728\u6536\u5230 B \u7684 OnPlayerLeftRoom \u7684\u901a\u77e5\u524d\uff0c\u6536\u5230\u4e00\u4e2a B \u7684 OnPlayerActivityChanged \u56de\u8c03","title":"\u65ad\u7ebf\u91cd\u8fde"},{"location":"game/play/play-overview/","text":"","title":"\u670d\u52a1\u603b\u89c8"},{"location":"im/im-beginner/","text":"\u5373\u65f6\u901a\u8baf\u5f00\u53d1\u6307\u5357 \u57fa\u7840\u5165\u95e8 \u4f7f\u7528\u573a\u666f\u548c\u89e3\u51b3\u7684\u9700\u6c42 \u9488\u5bf9\u5982\u4e0b\u5e94\u7528\u573a\u666f\uff0c\u5373\u65f6\u901a\u8baf\u90fd\u6709\u5bf9\u5e94\u7684\u89e3\u51b3\u65b9\u6848\uff1a \u793e\u4ea4\u5e94\u7528\u9700\u8981\u63a5\u5165\u804a\u5929\u529f\u80fd \u6e38\u620f\u9700\u8981\u63a5\u5165\u804a\u5929\u9891\u9053 \u76f4\u64ad\u5e94\u7528\u8981\u63a5\u5165\u804a\u5929\u5ba4\u5f39\u5e55\u670d\u52a1 \u7cfb\u7edf\u5e7f\u64ad\u6d88\u606f\u5728\u7ebf\u901a\u77e5\uff0c\u6e38\u620f GM \u5728\u7ebf\u5168\u670d\u5e7f\u64ad \u800c\u4e0a\u8ff0\u53ea\u662f\u4e00\u4e9b\u6bd4\u8f83\u7ecf\u5178\u548c\u6d41\u884c\u7684\u573a\u666f\uff0c\u5373\u65f6\u901a\u8baf\u4e0d\u5c40\u9650\u4e8e\u4e0a\u8ff0\u7528\u6cd5\u548c\u573a\u666f\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u8bb8\u591a\u6613\u7528\u6027\u8f83\u9ad8\u7684\u63a5\u53e3\u652f\u6301\u5f00\u53d1\u8005\u53ef\u4ee5\u62d3\u5c55\u66f4\u591a\u7684\u573a\u666f\u548c\u6a21\u5f0f\u3002 \u5373\u65f6\u901a\u8baf\u8981\u89e3\u51b3\u7684\u6838\u5fc3\u9700\u6c42\u5c31\u662f: \u8ba9\u4f60\u7684\u5e94\u7528\u62e5\u6709\u79c1\u804a\u3001\u7fa4\u804a\u3001\u804a\u5929\u5ba4\u3001\u7cfb\u7edf\u6d88\u606f\u7b49\u901a\u8baf\u80fd\u529b \b\u5373\u65f6\u901a\u8baf\u4f7f\u5f97\u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u4e0d\u7f16\u5199\u670d\u52a1\u7aef\u7684\u4ee3\u7801\u7684\u60c5\u51b5\u4e0b\uff0c\u4ec5\u4f7f\u7528\u5ba2\u6237\u7aef SDK \u5373\u53ef\u5b9e\u73b0\u5728\u7ebf\u804a\u5929/\u591a\u4eba\u7fa4\u7ec4/\u79c1\u804a/\u6d88\u606f\u7fa4\u53d1\u7b49\u5b9e\u65f6\u901a\u8baf\u7684\u529f\u80fd\uff0c\u5982\u4e0b\u65f6\u5e8f\u56fe\u7b80\u5355\u7684\u4ecb\u7ecd\u4e86\u4e00\u4e0b\u5373\u65f6\u901a\u8baf\u7684\u4e1a\u52a1\u6d41\u7a0b\uff1a ClientA- Cloud : send ( \u5927\u5bb6\u597d\uff0c\u6211\u662f A ); Cloud-- ClientB : onMessage ( ClientA , \u5927\u5bb6\u597d\uff0c\u6211\u662f A ); Cloud-- ClientC : onMessage ( ClientA , \u5927\u5bb6\u597d\uff0c\u6211\u662f A ); \u9605\u524d\u51c6\u5907 \u5efa\u8bae\u5148\u9605\u8bfb \u5373\u65f6\u901a\u8baf\u670d\u52a1\u603b\u89c8 \u4e4b\u540e\uff0c\u518d\u9605\u8bfb\u672c\u6587\u6548\u679c\u6700\u4f73\u3002 \u4e00\u5bf9\u4e00\u5355\u804a \u6211\u4eec\u4ece\u6700\u57fa\u672c\u7684\u4e00\u5bf9\u4e00\u79c1\u804a\u5f00\u59cb\u63a5\u5165\u5373\u65f6\u901a\u8baf\u6a21\u5757\uff0c\u9996\u5148\u6211\u4eec\u9700\u8981\u660e\u786e\u4e00\u4e2a\u9700\u6c42\uff1a \u5047\u8bbe\u6211\u4eec\u6b63\u5728\u5236\u4f5c\u4e00\u4e2a\u793e\u4ea4\u804a\u5929\u7684\u5e94\u7528\uff0c\u7b2c\u4e00\u6b65\u8981\u5b9e\u73b0\u4e00\u4e2a\u7528\u6237\u5411\u53e6\u4e00\u4e2a\u7528\u6237\u53d1\u8d77\u804a\u5929\u7684\u529f\u80fd \u9996\u5148\u6211\u4eec\u9700\u8981\u4ecb\u7ecd\u4e00\u4e0b\u5728\u5373\u65f6\u901a\u8baf\u670d\u52a1\u4e2d\u7684 IMClient \u5bf9\u8c61\uff1a IMClient \u5bf9\u5e94\u5b9e\u4f53\u7684\u662f\u4e00\u4e2a\u7528\u6237\uff0c\u5b83\u4ee3\u8868\u7740\u4e00\u4e2a\u7528\u6237\u4ee5\u5ba2\u6237\u7aef\u7684\u8eab\u4efd\u767b\u5f55\u5230\u4e86\u5373\u65f6\u901a\u8baf\u7684\u7cfb\u7edf\u3002 1.\u521b\u5efa IMClient \u5728 iOS \u548c Android SDK \u4e2d\u4f7f\u7528\u5982\u4e0b\u4ee3\u7801\u521b\u5efa\u51fa\u4e00\u4e2a IMClient : var realtime = new Realtime ({ appId : your-app-id , appKey : your-app-key , plugins : [ TypedMessagesPlugin ], // \u6ce8\u518c\u5bcc\u5a92\u4f53\u6d88\u606f\u63d2\u4ef6 }); // Tom \u7528\u81ea\u5df1\u7684\u540d\u5b57\u4f5c\u4e3a clientId realtime . createIMClient ( Tom ). then ( function ( tom ) { // \u6210\u529f\u767b\u5f55 }). catch ( console . error ); @property ( nonatomic , strong ) AVIMClient * tom ; // clientId \u4e3a Tom tom = [[ AVIMClient alloc ] initWithClientId : @ Tom ] // clientId \u4e3a Tom AVIMClient tom = AVIMClient . getInstance ( Tom ); var realtime = new AVRealtime( your-app-id , your-app-key ); var tom = await realtime.CreateClientAsync( Tom ); \u793a\u4f8b\u4ee3\u7801\u4e2d clientId \u88ab\u8bbe\u7f6e\u4e3a Tom, \u8fd9\u91cc\u6211\u4eec\u9700\u8981\u660e\u786e\u4e00\u4e0b clientId \u7684\u7ea6\u675f\uff1a \u5b83\u5fc5\u987b\u4e3a\u4e00\u4e2a\u5b57\u7b26\u4e32 \u5728\u4e00\u4e2a\u5e94\u7528\u5185\u5168\u5c40\u552f\u4e00 \u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7 64 \u4e2a\u5b57\u7b26 \u6ce8\uff1a JavaScript \u548c C#(Unity3D) SDK \u521b\u5efa IMClient \u6210\u529f\u540c\u65f6\u610f\u5473\u7740\u8fde\u63a5\u4e5f\u5df2\u7ecf\u5efa\u7acb\uff0c\u800c iOS \u548c Android SDK \u5219\u9700\u8981\u989d\u5916\u4e0b\u4e00\u6b65 2.\u5efa\u7acb\u8fde\u63a5 2.\u5efa\u7acb\u8fde\u63a5 \u5efa\u7acb\u8fde\u63a5\u7684\u542b\u4e49\u662f\uff1a IMClient \u5efa\u7acb\u4e00\u4e2a\u4e8e\u4e91\u7aef\u7684\u957f\u8fde\u63a5\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u5f00\u59cb\u6536\u53d1\u6d88\u606f\u4e86\uff0c\u5e76\u4e14\u53ef\u4ee5\u76d1\u542c\u4e8b\u4ef6\u3002 \u5bf9\u5e94\u7684 SDK \u65b9\u6cd5\u5982\u4e0b\uff1a // Tom \u7528\u81ea\u5df1\u7684\u540d\u5b57\u4f5c\u4e3a clientId, \u5efa\u7acb\u957f\u8fde\u63a5\uff0c\u5e76\u4e14\u83b7\u53d6 IMClient \u5bf9\u8c61\u5b9e\u4f8b realtime . createIMClient ( Tom ). then ( function ( tom ) { // \u6210\u529f\u767b\u5f55 }). catch ( console . error ); // Tom \u521b\u5efa\u4e86\u4e00\u4e2a client\uff0c\u7528\u81ea\u5df1\u7684\u540d\u5b57\u4f5c\u4e3a clientId AVIMClient * tom = [[ AVIMClient alloc ] initWithClientId : @ Tom ]; // Tom \u521b\u5efa\u8fde\u63a5 [ tom openWithCallback : ^ ( BOOL succeeded , NSError * error ) { if ( succeeded ) { // \u6210\u529f\u6253\u5f00\u8fde\u63a5 } }]; // Tom \u521b\u5efa\u4e86\u4e00\u4e2a client\uff0c\u7528\u81ea\u5df1\u7684\u540d\u5b57\u4f5c\u4e3a clientId AVIMClient tom = AVIMClient . getInstance ( Tom ); // Tom \u521b\u5efa\u8fde\u63a5 tom . open ( new AVIMClientCallback () { @Override public void done ( AVIMClient client , AVIMException e ) { if ( e == null ) { // \u6210\u529f\u6253\u5f00\u8fde\u63a5 } } } var realtime = new AVRealtime( your-app-id , your-app-key ); var tom = await realtime.CreateClientAsync( Tom ); \u6ce8\uff1aJavaScript \u548c C#(Unity3D) SDK \u5efa\u7acb\u8fde\u63a5\u6210\u529f\u4e4b\u540e\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2a IMClient \u3002 \u63a8\u8350\u4f7f\u7528\u7684\u65b9\u5f0f\uff1a\u5728\u7528\u6237\u767b\u5f55\u4e4b\u540e\u7528\u5f53\u524d\u7684\u7528\u6237\u540d\u5f53\u505a clientId \u6765\u521b\u5efa IMClient \u5e76\u5efa\u7acb\u8fde\u63a5\u3002 \u6211\u4eec\u63a8\u8350\u5728\u8fde\u63a5\u521b\u5efa\u6210\u529f\u4e4b\u540e\u8ba2\u9605 \u5ba2\u6237\u7aef\u4e8b\u4ef6\u4e0e\u7f51\u7edc\u72b6\u6001\u54cd\u5e94 \uff0c\u9488\u5bf9\u7f51\u7edc\u7684\u5f02\u5e38\u60c5\u51b5\u4f5c\u51fa\u5e94\u6709\u7684 UI \u5c55\u793a\uff0c\u4ee5\u786e\u4fdd\u5e94\u7528\u7684\u5065\u58ee\u6027\u3002 3.\b\u521b\u5efa\u5bf9\u8bdd Conversation \u5bf9\u8bdd( Conversation ) \u662f\u5373\u65f6\u901a\u8baf\u62bd\u8c61\u51fa\u6765\u7684\u6982\u5ff5\uff0c\u5b83\u662f\b\u5ba2\u6237\u7aef\u4e4b\u95f4\u4e92\u53d1\u6d88\u606f\u7684\u8f7d\u4f53\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u901a\u9053\uff0c\b\u6240\u6709\u5728\u8fd9\u4e2a\u5bf9\u8bdd\u5185\u7684\u6210\u5458\u90fd\u53ef\u4ee5\u5728\u8fd9\u4e2a\u5bf9\u8bdd\u5185\u6536\u53d1\u6d88\u606f: \u5bf9\u8bdd( Conversation )\u5bf9\u8bdd\u662f\u6d88\u606f\u7684\u8f7d\u4f53\uff0c\u6240\u6709\u6d88\u606f\u7684\u76ee\u6807\u90fd\u662f\u5bf9\u8bdd\uff0c\u800c\u6240\u6709\u5728\u5bf9\u8bdd\u4e2d\u7684\u6210\u5458\u90fd\u4f1a\u63a5\u6536\u5230\u5bf9\u8bdd\u5185\u4ea7\u751f\u7684\u6d88\u606f\u3002 Tom \u5df2\u7ecf\u5efa\u7acb\u4e86\b\b\u8fde\u63a5\uff0c\u56e0\u6b64\u4ed6\u9700\u8981\u521b\u5efa\u4e00\u4e2a Conversation \u6765\u53d1\u9001\u6d88\u606f\u7ed9 Jerry\uff1a // \u521b\u5efa\u4e0e Jerry \u4e4b\u95f4\u7684\u5bf9\u8bdd return tom . createConversation ({ // \b\u6307\u5b9a\u5bf9\u8bdd\u7684\u6210\u5458\u9664\u4e86\u5f53\u524d\u7528\u6237 Tom(SDK \u4f1a\u9ed8\u8ba4\u628a\u5f53\u524d\b\u7528\u6237\u5f53\u505a\u5bf9\u8bdd\u6210\u5458)\u4e4b\u5916\uff0c\u8fd8\u6709 Jerry members : [ Jerry ], // \u5bf9\u8bdd\u540d\u79f0 name : Tom Jerry , });. catch ( console . error ); // \u521b\u5efa\u4e0e Jerry \u4e4b\u95f4\u7684\u5bf9\u8bdd [ tom createConversationWithName : @ Tom Jerry clientIds : @[ @ Jerry ] callback : ^ ( AVIMConversation * conversation , NSError * error ) { }]; tom . createConversation ( Arrays . asList ( Jerry ), Tom Jerry , null , new AVIMConversationCreatedCallback () { @Override public void done ( AVIMConversation conversation , AVIMException e ) { if ( e == null ) { // \u521b\u5efa\u6210\u529f } } }); var tom = await realtime . CreateClientAsync ( Tom ); var conversation = await tom . CreateConversationAsync ( Jerry , name : Tom Jerry ); \b createConversation \u8fd9\u4e2a\u63a5\u53e3\u4f1a\u76f4\u63a5\u521b\u5efa\u4e00\u4e2a\u5bf9\u8bdd\uff0c\u5e76\u4e14\u8be5\u5bf9\u8bdd\u4f1a\u88ab\u5b58\u50a8\u5728 _Conversation \u8868\u5185\uff0c\u53ef\u4ee5\u6253\u5f00\u63a7\u5236\u53f0- \u5b58\u50a8\u67e5\u770b\u6570\u636e\u3002 createConversation \u7684\u53c2\u6570\u8be6\u89e3: {{ docs.langSpecStart('js') }} \b members : \u5b57\u7b26\u4e32\u6570\u7ec4\uff0c\u5fc5\u8981\u53c2\u6570\uff0c\u5bf9\u8bdd\u7684\u521d\u59cb\u6210\u5458(clientId)\u5217\u8868\uff0c\u9ed8\u8ba4\u5305\u542b\u5f53\u524d clientId name : \u5b57\u7b26\u4e32\uff0c\u53ef\u9009\u53c2\u6570\uff0c\u5bf9\u8bdd\u7684\u540d\u5b57\uff0c\u5982\u679c\u4e0d\u4f20\u9ed8\u8ba4\u503c\u4e3a null unique \uff1a bool \u7c7b\u578b\uff0c\u53ef\u9009\u53c2\u6570\uff0c\u662f\u5426\u552f\u4e00\u5bf9\u8bdd\uff0c\u5f53\u5176\u4e3a true \u65f6\uff0c\u5982\u679c\u5f53\u524d\u5df2\u7ecf\u6709\u76f8\u540c\u6210\u5458\u7684\u5bf9\u8bdd\u5b58\u5728\u5219\u8fd4\u56de\u8be5\u5bf9\u8bdd\uff0c\u5426\u5219\u4f1a\u521b\u5efa\u65b0\u7684\u5bf9\u8bdd {{ docs.langSpecEnd('js') }} {{ docs.langSpecStart('objc') }} name \uff0d \u8868\u793a\u5bf9\u8bdd\u540d\u5b57\uff0c\u53ef\u4ee5\u6307\u5b9a\u4efb\u610f\u6709\u610f\u4e49\u7684\u540d\u5b57\uff0c\u4e5f\u53ef\u4e0d\u586b\u3002 clientIds \uff0d \u8868\u793a\u5bf9\u8bdd\u521d\u59cb\u6210\u5458\uff0c\u53ef\u4e0d\u586b\u3002\u5982\u679c\u586b\u5199\u4e86\u521d\u59cb\u6210\u5458\uff0c\u5219 LeanCloud \u4e91\u7aef\u4f1a\u76f4\u63a5\u7ed9\u8fd9\u4e9b\u6210\u5458\u53d1\u51fa\u9080\u8bf7\uff0c\u7701\u6389\u518d\u4e13\u95e8\u53d1\u4e00\u6b21\u9080\u8bf7\u8bf7\u6c42\u3002 attributes \uff0d \u8868\u793a\u989d\u5916\u5c5e\u6027\uff0cDictionary\uff0c\u652f\u6301\u4efb\u610f\u7684 key/value\uff0c\u53ef\u4e0d\u586b\u3002 options \uff0d \u5bf9\u8bdd\u9009\u9879\uff1a AVIMConversationOptionTransient\uff1a\u804a\u5929\u5ba4\uff0c\u5177\u4f53\u53ef\u4ee5\u53c2\u89c1\u521b\u5efa\u804a\u5929\u5ba4\uff1b AVIMConversationOptionNone\uff1a\u666e\u901a\u5bf9\u8bdd\uff1b AVIMConversationOptionTemporary\uff1a\u4e34\u65f6\u5bf9\u8bdd\uff1b AVIMConversationOptionUnique\uff1a\u6839\u636e\u6210\u5458\uff08clientIds\uff09\u521b\u5efa\u539f\u5b50\u5bf9\u8bdd\u3002\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u9009\u9879\uff0c\u670d\u52a1\u7aef\u4f1a\u4e3a\u76f8\u540c\u7684 clientIds \u521b\u5efa\u65b0\u7684\u5bf9\u8bdd\u3002clientIds \u5373 _Conversation \u8868\u7684 m \u5b57\u6bb5\u3002 callback \uff0d \u7ed3\u679c\u56de\u8c03\uff0c\u5728\u64cd\u4f5c\u7ed3\u675f\u4e4b\u540e\u8c03\u7528\uff0c\u901a\u77e5\u5f00\u53d1\u8005\u6210\u529f\u4e0e\u5426\u3002 {{ docs.langSpecEnd('objc') }} {{ docs.langSpecStart('java') }} members - \u5bf9\u8bdd\u7684\u6210\u5458 name - \u5bf9\u8bdd\u7684\u540d\u5b57 attributes - \u5bf9\u8bdd\u7684\u989d\u5916\u5c5e\u6027 isTransient - \u662f\u5426\u662f\u6682\u6001\u4f1a\u8bdd isUnique - \u5982\u679c\u5df2\u7ecf\u5b58\u5728\u7b26\u5408\u6761\u4ef6\u7684\u4f1a\u8bdd\uff0c\u662f\u5426\u8fd4\u56de\u5df2\u6709\u56de\u8bdd \u4e3a false \u65f6\uff0c\u5219\u4e00\u76f4\u4e3a\u521b\u5efa\u65b0\u7684\u56de\u8bdd \u4e3a true \u65f6\uff0c\u5219\u5148\u67e5\u8be2\uff0c\u5982\u679c\u5df2\u6709\u7b26\u5408\u6761\u4ef6\u7684\u56de\u8bdd\uff0c\u5219\u8fd4\u56de\u5df2\u6709\u7684\uff0c\u5426\u5219\uff0c\u521b\u5efa\u65b0\u7684\u5e76\u8fd4\u56de \u4e3a true \u65f6\uff0c\u4ec5 members \u4e3a\u6709\u6548\u67e5\u8be2\u6761\u4ef6 callback - \u7ed3\u679c\u56de\u8c03\u51fd\u6570 {{ docs.langSpecEnd('java') }} {{ docs.langSpecStart('cs') }} \b members : \u5b57\u7b26\u4e32\u6570\u7ec4\uff0c\u5fc5\u8981\u53c2\u6570\uff0c\u5bf9\u8bdd\u7684\u521d\u59cb\u6210\u5458(clientId)\u5217\u8868\uff0c\u9ed8\u8ba4\u5305\u542b\u5f53\u524d clientId name : \u5b57\u7b26\u4e32\uff0c\u53ef\u9009\u53c2\u6570\uff0c\u5bf9\u8bdd\u7684\u540d\u5b57\uff0c\u5982\u679c\u4e0d\u4f20\u9ed8\u8ba4\u503c\u4e3a null isSystem : bool \u503c\uff0c\u53ef\u9009\u53c2\u6570\uff0c\u662f\u5426\u662f\u670d\u52a1\u53f7 isTransient :bool \u503c\uff0c\u53ef\u9009\u53c2\u6570\uff0c\u662f\u5426\u4e3a\u804a\u5929\u5ba4 isUnique \uff1a bool \u7c7b\u578b\uff0c\u53ef\u9009\u53c2\u6570\uff0c\u662f\u5426\u552f\u4e00\u5bf9\u8bdd\uff0c\u5f53\u5176\u4e3a true \u65f6\uff0c\u5982\u679c\u5f53\u524d\u5df2\u7ecf\u6709\u76f8\u540c\u6210\u5458\u7684\u5bf9\u8bdd\u5b58\u5728\u5219\u8fd4\u56de\u8be5\u5bf9\u8bdd\uff0c\u5426\u5219\u4f1a\u521b\u5efa\u65b0\u7684\u5bf9\u8bdd options \uff1a\u5b57\u5178\u7c7b\u578b\uff0c\u53ef\u9009\u53c2\u6570\uff0c\u989d\u5916\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027 {{ docs.langSpecEnd('cs') }} \u521b\u5efa\u5bf9\u8bdd\u4e4b\u540e\uff0c\u53ef\u4ee5\u83b7\u53d6\u5bf9\u8bdd\u7684\u5185\u7f6e\u5c5e\u6027\uff0c\u4e91\u7aef\u4f1a\u4e3a\u6bcf\u4e00\u4e2a\u5bf9\u8bdd\u751f\u6210\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684 ID \u5c5e\u6027\uff1a Conversation.id \uff0c\u5b83\u662f\u67e5\u8be2\u5bf9\u8bdd\u548c\u83b7\u53d6\u5bf9\u8bdd\u65f6\u5e38\u7528\u7684\u5339\u914d\u5b57\u6bb5\u3002 4.\u53d1\u9001\u6d88\u606f \u5bf9\u8bdd\u5df2\u7ecf\u521b\u5efa\u6210\u529f\u4e86\uff0c\u63a5\u4e0b\u6765 Tom \u53ef\u4ee5\u53d1\u51fa\u7b2c\u4e00\u6761\u6587\u672c\u6d88\u606f\u4e86\uff1a \b var { TextMessage } = require ( leancloud-realtime ); conversation . send ( new TextMessage ( Jerry\uff0c\u8d77\u5e8a\u4e86\uff01 )). then ( function ( message ) { console . log ( Tom Jerry , \u53d1\u9001\u6210\u529f\uff01 ); }). catch ( console . error ); [ conversation sendMessage :[ AVIMTextMessage messageWithText : @ \u8017\u5b50\uff0c\u8d77\u5e8a\uff01 attributes : nil ] callback : ^ ( BOOL succeeded , NSError * error ) { if ( succeeded ) { NSLog ( @ \u53d1\u9001\u6210\u529f\uff01 ); } }]; AVIMTextMessage msg = new AVIMTextMessage (); msg . setText ( Jerry\uff0c\u8d77\u5e8a\u4e86\uff01 ); // \u53d1\u9001\u6d88\u606f conversation . sendMessage ( msg , new AVIMConversationCallback () { @Override public void done ( AVIMException e ) { if ( e == null ) { Log . d ( Tom Jerry , \u53d1\u9001\u6210\u529f\uff01 ); } } }); var textMessage = new AVIMTextMessage( Jerry\uff0c\u8d77\u5e8a\u4e86\uff01 ); await conversation.SendAsync(textMessage); \b conversation.send \u63a5\u53e3\u5b9e\u73b0\u7684\u529f\u80fd\u5c31\u662f\u5411\u5bf9\u8bdd\u4e2d\u53d1\u9001\u4e00\u6761\u6d88\u606f\u3002 Jerry \u53ea\u8981\u5728\u7ebf\u4ed6\u5c31\u4f1a\u6536\u5230\u6d88\u606f\uff0c\u81f3\u6b64 Jerry \u8fd8\u6ca1\u6709\u767b\u573a\uff0c\u90a3\u4e48\u4ed6\u600e\u4e48\b\u63a5\u6536\u6d88\u606f\u5462\uff1f \b 5.\b\u63a5\u6536\u6d88\u606f \u6211\u4eec\u5728\u53e6\u4e00\u4e2a\u8bbe\u5907\u4e0a\u542f\u52a8\u5e94\u7528\uff0c\u7136\u540e\u4f7f\u7528 Jerry \u5f53\u505a clientId \b\u521b\u5efa AVIMClient \u548c \u5efa\u7acb\u8fde\u63a5\uff08\u53c2\u7167\u524d\u4e24\u7ae0\u8282 Tom \u7684\u793a\u4f8b\u4ee3\u7801\uff09: var { Event } = require ( leancloud-realtime ); // Jerry \u767b\u5f55 realtime . createIMClient ( Jerry ). then ( function ( jerry ) { }). catch ( console . error ); jerry = [[ AVIMClient alloc ] initWithClientId : @ Jerry ]; [ jerry openWithCallback : ^ ( BOOL succeeded , NSError * error ) {}]; //Jerry\u767b\u5f55 AVIMClient jerry = AVIMClient . getInstance ( Jerry ); jerry . open ( new AVIMClientCallback (){ @Override public void done ( AVIMClient client , AVIMException e ){ if ( e == null ){ ... //\u767b\u5f55\u6210\u529f\u540e\u7684\u903b\u8f91 } } }); var realtime = new AVRealtime( your-app-id , your-app-key ); var jerry = await realtime.CreateClientAsync( Jerry ); \u7d27\u63a5\u7740\u8ba9 Jerry \u5f00\u59cb\u8ba2\u9605\u5bf9\u8bdd\u52a0\u5165\u7684\u4e8b\u4ef6\u901a\u77e5\uff1a // \u5f53\u524d\u7528\u6237\u88ab\u6dfb\u52a0\u81f3\u67d0\u4e2a\u5bf9\u8bdd jerry . on ( Event . INVITED , function invitedEventHandler ( payload , conversation ) { console . log ( payload . invitedBy , conversation . id ); }); jerry . delegate = self ; -( void ) conversation: ( AVIMConversation * ) conversation invitedByClientId: ( NSString * ) clientId { NSLog ( @ %@ , [ NSString stringWithFormat : @ \u5f53\u524d ClientId(Jerry) \u88ab %@ \u9080\u8bf7\uff0c\u52a0\u5165\u4e86\u5bf9\u8bdd , clientId ]); } public class CustomConversationEventHandler extends AVIMConversationEventHandler { @Override public void onInvited ( AVIMClient client , AVIMConversation conversation , String invitedBy ) { // \u5f53\u524d ClientId(Jerry) \u88ab\u9080\u8bf7\u5230\u5bf9\u8bdd\uff0c\u6267\u884c\u6b64\u5904\u903b\u8f91 } } AVIMMessageManager . registerDefaultMessageHandler ( new CustomMessageHandler ()); var jerry =await realtime.CreateClientAsync( Jerry ); jerry.OnInvited += (sender, args) = { var invitedBy = args.InvitedBy; var conversationId = args.ConversationId; }; \u4e3a Jerry \u6dfb\u52a0\u4e86\u52a0\u5165\u5bf9\u8bdd\u7684\u4e8b\u4ef6\u8ba2\u9605\u4e4b\u540e\uff0c\u7ee7\u7eed\u4e3a Jerry \u8ba2\u9605\u6d88\u606f\u63a5\u6536\u7684\u4e8b\u4ef6\uff1a var { Event } = require ( leancloud-realtime ); // Jerry \u767b\u5f55 realtime . createIMClient ( Jerry ). then ( function ( jerry ) { // \u5f53\u524d\u7528\u6237\u6536\u5230\u4e86\u67d0\u4e00\u6761\u6d88\u606f jerry . on ( Event . MESSAGE , function ( message , conversation ) { console . log ( Message received: + message . text ); }); }). catch ( console . error ); jerry . delegate = self ; #pragma mark - AVIMClientDelegate // \u63a5\u6536\u6d88\u606f\u7684\u56de\u8c03\u51fd\u6570 - ( void ) conversation: ( AVIMConversation * ) conversation didReceiveTypedMessage: ( AVIMTypedMessage * ) message { NSLog ( @ %@ , message . text ); // Jerry\uff0c\u8d77\u5e8a\u4e86\uff01 } public static class CustomMessageHandler extends AVIMMessageHandler { //\u63a5\u6536\u5230\u6d88\u606f\u540e\u7684\u5904\u7406\u903b\u8f91 @Override public void onMessage ( AVIMMessage message , AVIMConversation conversation , AVIMClient client ){ if ( message instanceof AVIMTextMessage ){ Log . d ((( AVIMTextMessage ) message ). getText ()); // Jerry\uff0c\u8d77\u5e8a\u4e86 } } } AVIMMessageManager . registerDefaultMessageHandler ( new CustomMessageHandler ()); jerry.OnMessageReceived += Jerry_OnMessageReceived; private void Jerry_OnMessageReceived(object sender, AVIMMessageEventArgs e) { if (e.Message is AVIMTextMessage) { var textMessage = (AVIMTextMessage)e.Message; // textMessage.ConversationId \u662f\u8be5\u6761\u6d88\u606f\u6240\u5c5e\u4e8e\u7684\u5bf9\u8bdd Id // textMessage.TextContent \u662f\u8be5\u6587\u672c\u6d88\u606f\u7684\u6587\u672c\u5185\u5bb9 // textMessage.FromClientId \u662f\u6d88\u606f\u53d1\u9001\u8005\u7684 client Id } } \u800c\u5f53 Tom \u521b\u5efa\u4e86\u5bf9\u8bdd\u4e4b\u540e\uff0cJerry \u4f1a\b\u8fd9\u4e00\u7aef\u4f1a\u7acb\u5373\u89e6\u53d1 INVITED \uff08\u66f4\u591a\u5173\u4e8e INVITED \u7684\u63cf\u8ff0\u5728 \u6210\u5458\u53d8\u66f4\u7684\u4e8b\u4ef6\u901a\u77e5\u603b\u7ed3 \uff09\uff0c\b\u6b64\u65f6\u5ba2\u6237\u7aef\u53ef\u4ee5\u505a\u51fa\u4e00\u4e9b UI \u5c55\u793a\uff0c\b\b\u5f15\u5bfc\u7528\u6237\u52a0\u8f7d\u804a\u5929\u7684\u754c\u9762\uff0c\u7d27\u63a5\u7740 Tom \u53d1\u9001\u4e86\u6d88\u606f\u001d\uff0c\u5219\u4f1a\u89e6\u53d1 Jerry MESSAGE \uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u53ef\u4ee5\u76f4\u63a5\u5728\u804a\u5929\u754c\u9762\u7684\u6d88\u606f\u5217\u8868\u91cc\u9762\u6e32\u67d3\u8fd9\u6761\u6d88\u606f\u4e86\u3002 \u5bf9\u5e94\u7684\u65f6\u5e8f\u56fe\u5982\u4e0b: Tom- Cloud: 1.Tom \u5c06 Jerry \u52a0\u5165\u5bf9\u8bdd Cloud-- Jerry: 2.\u4e0b\u53d1\u901a\u77e5\uff1a\u4f60\u88ab\u9080\u8bf7\u52a0\u5165\u5bf9\u8bdd Jerry-- UI: 3.\u52a0\u8f7d\u804a\u5929\u7684 UI \u754c\u9762 Tom- Cloud: 4.\u53d1\u9001\u6d88\u606f Cloud-- Jerry: 5.\u4e0b\u53d1\u901a\u77e5\uff1a\u63a5\u6536\u5230\u6709\u65b0\u6d88\u606f Jerry-- UI: 6.\u663e\u793a\u6536\u5230\u7684\u6d88\u606f\u5185\u5bb9 \u591a\u4eba\u7fa4\u804a \u591a\u4eba\u7fa4\u804a\u4e0e\u5355\u804a\u5341\u5206\u63a5\u8fd1\uff0c\u5728\u4e00\u4e2a\u73b0\u6709\u5bf9\u8bdd\u4e0a\u52a0\u5165\u66f4\u591a\u7684\u6210\u5458\u5373\u53ef\u8f6c\u5316\u4e3a\u7fa4\u804a\uff1a 1.\u521b\u5efa\u591a\u4eba\u7fa4\u804a\b\u5bf9\u8bdd \u591a\u4eba\u7fa4\u804a\u7684\u5bf9\u8bdd\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u4e24\u79cd\u65b9\u5f0f\u5b9e\u73b0\uff1a \u5411\u73b0\u6709\u5bf9\u8bdd\u4e2d\u6dfb\u52a0\u66f4\u591a\u6210\u5458 \u91cd\u65b0\u521b\u5efa\u4e00\u4e2a\u5bf9\u8bdd\uff0c\u5e76\u5728\u521b\u5efa\u7684\u65f6\u5019\u6307\u5b9a\u81f3\u5c11 2 \u540d\u6210\u5458 \b\u9996\u5148\u6211\u4eec\u5b9e\u73b0\u7b2c\u4e00\u79cd\u65b9\u5f0f\uff1a \u5411\u73b0\u6709\u5bf9\u8bdd\u4e2d\u6dfb\u52a0\u66f4\u591a\u6210\u5458 \uff0c\u5c06\u5176\u8f6c\u5316\u6210\u4e00\u4e2a\u7fa4\u804a\u3002 Tom \u7ee7\u7eed\u6dfb\u52a0 Mary \u5230\u5bf9\u8bdd\u4e2d\uff1a tom . getConversation ( CONVERSATION_ID ). then ( function ( conversation ) { return conversation . add ([ Mary ]); }). then ( function ( conversation ) { console . log ( \u6dfb\u52a0\u6210\u529f , conversation . members ); // \u6b64\u65f6\u5bf9\u8bdd\u6210\u5458\u4e3a: [ Mary , Tom , Jerry ] }). catch ( console . error . bind ( console )); AVIMConversationQuery * query = [ self . client conversationQuery ]; [ query getConversationById : @ CONVERSATION_ID callback : ^ ( AVIMConversation * conversation , NSError * error ) { // Jerry \u9080\u8bf7 Mary \u5230\u4f1a\u8bdd\u4e2d [ conversation addMembersWithClientIds : @[ @ Mary ] callback : ^ ( BOOL succeeded , NSError * error ) { if ( succeeded ) { NSLog ( @ \u9080\u8bf7\u6210\u529f\uff01 ); } }]; }]; AVIMClient jerry = AVIMClient . getInstance ( Jerry ); final AVIMConversation conv = client . getConversation ( CONVERSATION_ID ); conv . addMembers ( Arrays . asList ( Mary ), new AVIMConversationCallback () { @Override public void done ( AVIMException e ) { // \u6dfb\u52a0\u6210\u529f } }); var tom = await realtime.CreateClientAsync(); var conversation = await tom.GetConversationAsync( CONVERSATION_ID ); await tom.InviteAsync(conversation, Mary ); \u800c Jerry \u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801\u4e5f\u80fd\u968f\u65f6\u77e5\u9053\u5f53\u524d\u5bf9\u8bdd\u8fd8\u6709\u8c01\u52a0\u8fdb\u6765\u4e86\uff1a var { Event } = require ( leancloud-realtime ); // Jerry \u767b\u5f55 realtime . createIMClient ( Jerry ). then ( function ( jerry ) { // \u6709\u7528\u6237\u88ab\u6dfb\u52a0\u81f3\u67d0\u4e2a\u5bf9\u8bdd jerry . on ( Event . MEMBERS_JOINED , function membersjoinedEventHandler ( payload , conversation ) { console . log ( payload . members , payload . invitedBy , conversation . id ); }); }); }). catch ( console . error ); -( void ) maryNoticedWhenJerryInviteMary { // Mary \u521b\u5efa\u4e00\u4e2a client\uff0c\u7528\u81ea\u5df1\u7684\u540d\u5b57\u4f5c\u4e3a clientId self . client = [[ AVIMClient alloc ] initWithClientId : @ Mary ]; self . client . delegate = self ; [ self . client openWithCallback : ^ ( BOOL succeeded , NSError * error ) { // \u767b\u5f55\u6210\u529f }]; } #pragma mark - AVIMClientDelegate - ( void ) conversation: ( AVIMConversation * ) conversation membersAdded: ( NSArray * ) clientIds byClientId: ( NSString * ) clientId { NSLog ( @ %@ , [ NSString stringWithFormat : @ %@ \u52a0\u5165\u5230\u5bf9\u8bdd\uff0c\u64cd\u4f5c\u8005\u4e3a\uff1a%@ ,[ clientIds objectAtIndex : 0 ], clientId ]); } public static class CustomMessageHandler extends AVIMMessageHandler { @Override public void onMemberJoined ( AVIMClient client , AVIMConversation conversation , List String members , String invitedBy ) { // \u624b\u673a\u5c4f\u5e55\u4e0a\u4f1a\u663e\u793a\u4e00\u5c0f\u6bb5\u6587\u5b57\uff1aMary \u52a0\u5165\u5230 551260efe4b01608686c3e0f \uff1b\u64cd\u4f5c\u8005\u4e3a\uff1aTom Toast . makeText ( AVOSCloud . applicationContext , members + \u52a0\u5165\u5230 + conversation . getConversationId () + \uff1b\u64cd\u4f5c\u8005\u4e3a\uff1a + invitedBy , Toast . LENGTH_SHORT ). show (); } } AVIMMessageManager . registerDefaultMessageHandler ( new CustomMessageHandler ()); jerry.OnMembersJoined += OnMembersJoined; private void OnMembersJoined(object sender, AVIMOnInvitedEventArgs e) { // e.InvitedBy \u662f\u8be5\u9879\u64cd\u4f5c\u7684\u53d1\u8d77\u4eba, e.ConversationId \u662f\u8be5\u9879\u64cd\u4f5c\u9488\u5bf9\u7684\u5bf9\u8bdd Id Debug.Log(string.Format( {0} \u9080\u8bf7\u4e86 {1} \u52a0\u5165\u4e86 {2} \u5bf9\u8bdd , e.InvitedBy,e.JoinedMembers, e.ConversationId)); } {{ docs.langSpecStart('js') }} \u5176\u4e2d payload \u53c2\u6570\u5305\u542b\u5982\u4e0b\u5185\u5bb9\uff1a members : \u5b57\u7b26\u4e32\u6570\u7ec4, \u88ab\u6dfb\u52a0\u7684\u7528\u6237 clientId \u5217\u8868 invitedBy \u5b57\u7b26\u4e32, \u9080\u8bf7\u8005 clientId {{ docs.langSpecEnd('js') }} {{ docs.langSpecStart('cs') }} \u5176\u4e2d AVIMOnInvitedEventArgs \u53c2\u6570\u5305\u542b\u5982\u4e0b\u5185\u5bb9\uff1a 1. InvitedBy : \u6539\u64cd\u4f5c\u7684\u53d1\u8d77\u8005 2. JoinedMembers \uff1a\u6b64\u6b21\u52a0\u5165\u5bf9\u8bdd\u7684\u5305\u542b\u7684\u6210\u5458\u5217\u8868 3. ConversationId \uff1a\u88ab\u64cd\u4f5c\u7684\u5bf9\u8bdd {{ docs.langSpecEnd('cs') }} \u5982\u4e0b\u65f6\u5e8f\u56fe\u53ef\u4ee5\u7b80\u5355\u7684\u6982\u62ec\u4e0a\u8ff0\u6d41\u7a0b\uff1a Tom- Cloud: 1.\u6dfb\u52a0 Mary Cloud- Tom: 2.\u4e0b\u53d1\u901a\u77e5\uff1aMary \u88ab\u4f60\u9080\u8bf7\u52a0\u5165\u4e86\u5bf9\u8bdd Cloud-- Mary: 2.\u4e0b\u53d1\u901a\u77e5\uff1a\u4f60\u88ab Tom \u9080\u8bf7\u52a0\u5165\u5bf9\u8bdd Cloud-- Jerry: 2.\u4e0b\u53d1\u901a\u77e5: Mary \u88ab Tom \u9080\u8bf7\u52a0\u5165\u4e86\u5bf9\u8bdd \u800c Mary \u5982\u679c\u5728\u53e6\u4e00\u53f0\u8bbe\u5907\u4e0a\u767b\u5f55\u4e86\uff0cTa \u53ef\u4ee5\u53c2\u7167 \u4e00\u5bf9\u4e00\u5355\u804a \b\u4e2d Jerry \u7684\u505a\u6cd5\u76d1\u542c INVITED \u4e8b\u4ef6\uff0c\u5c31\u53ef\u4ee5\u81ea\u5df1\u88ab\u9080\u8bf7\u5230\u4e86\u4e00\u4e2a\u5bf9\u8bdd\u5f53\u4e2d\u3002 \b\u800c \u91cd\u65b0\u521b\u5efa\u4e00\u4e2a\u5bf9\u8bdd\uff0c\u5e76\u5728\u521b\u5efa\u7684\u65f6\u5019\u6307\u5b9a\u81f3\u5c11\u4e3a 2 \u7684\u6210\u5458\u6570\u91cf \u7684\u65b9\u5f0f\u5982\u4e0b\uff1a tom . createConversation ({ // \b\b\u521b\u5efa\u7684\u65f6\u5019\u76f4\u63a5\u6307\u5b9a \bJerry \u548c Mary \u4e00\u8d77\u52a0\u5165\u591a\u4eba\u7fa4\u804a\uff0c\u5f53\u7136\u6839\u636e\u9700\u6c42\u53ef\u4ee5\u6dfb\u52a0\u66f4\u591a\u6210\u5458 members : [ Jerry , Mary ], // \u5bf9\u8bdd\u540d\u79f0 name : Tom Jerry friends , }). catch ( console . error ); // Jerry \u5efa\u7acb\u4e86\u4e0e\u670b\u53cb\u4eec\u7684\u4f1a\u8bdd NSArray * friends = @[ @ Jerry , @ Mary ] ; [ tom createConversationWithName : @ Tom Jerry friends clientIds : friends callback : ^ ( AVIMConversation * conversation , NSError * error ) { if ( ! error ) { NSLog ( @ \u521b\u5efa\u6210\u529f ); } }]; tom . createConversation ( Arrays . asList ( Jerry , Mary ), Tom Jerry friends , null , new AVIMConversationCreatedCallback () { @Override public void done ( AVIMConversation conversation , AVIMException e ) { if ( e == null ) { // \u521b\u5efa\u6210\u529f } } }); var conversation = await tom.CreateConversationAsync(new string[]{ Jerry , Mary }, Tom Jerry friends ); 2.\u7fa4\u53d1\u6d88\u606f \u7fa4\u804a\u548c\u5355\u804a\u4e00\u6837\uff0c\u5bf9\u8bdd\u4e2d\u7684\u6210\u5458\u90fd\u4f1a\u63a5\u6536\u5230\u5bf9\u8bdd\u5185\u4ea7\u751f\u7684\u6d88\u606f\u3002 Tom \b\u5411\u7fa4\u804a\u5bf9\u8bdd\u53d1\u9001\u4e86\u6d88\u606f\uff1a conversation . send ( new TextMessage ( \u5927\u5bb6\u597d\uff0c\u6b22\u8fce\u6765\u5230\u6211\u4eec\u7684\u7fa4\u804a\b\u5bf9\u8bdd )); [ conversation sendMessage :[ AVIMTextMessage messageWithText : @ \u5927\u5bb6\u597d\uff0c\u6b22\u8fce\u6765\u5230\u6211\u4eec\u7684\u7fa4\u804a\b\u5bf9\u8bdd\uff01 attributes : nil ] callback : ^ ( BOOL succeeded , NSError * error ) { if ( succeeded ) { NSLog ( @ \u53d1\u9001\u6210\u529f\uff01 ); } }]; AVIMTextMessage msg = new AVIMTextMessage (); msg . setText ( \u5927\u5bb6\u597d\uff0c\u6b22\u8fce\u6765\u5230\u6211\u4eec\u7684\u7fa4\u804a\b\u5bf9\u8bdd\uff01 ); // \u53d1\u9001\u6d88\u606f conversation . sendMessage ( msg , new AVIMConversationCallback () { @Override public void done ( AVIMException e ) { if ( e == null ) { Log . d ( \u7fa4\u804a , \u53d1\u9001\u6210\u529f\uff01 ); } } }); await conversation.SendAsync( \u5927\u5bb6\u597d\uff0c\u6b22\u8fce\u6765\u5230\u6211\u4eec\u7684\u7fa4\u804a\b\u5bf9\u8bdd\uff01 ); \u800c Jerry \u548c Mary \u90fd\u4f1a\u6709 Event.MESSAGE \u4e8b\u4ef6\u89e6\u53d1\uff0c\u5229\u7528\u5b83\u6765\u63a5\u6536\u7fa4\u804a\u6d88\u606f\uff0c\u8fd9\u4e00\u70b9\u4e0e\u4e00\u5bf9\u4e00\u5355\u804a\u6ca1\u533a\u522b\u3002 \u5c06\u4ed6\u4eba\u8e22\u51fa\u5bf9\u8bdd \u521a\u624d\u7684\u4ee3\u7801\u6f14\u793a\u7684\u662f\u6dfb\u52a0\u65b0\u6210\u5458\uff0c\u800c\u5bf9\u5e94\u7684\u5220\u9664\u6210\u5458\u7684\u4ee3\u7801\u5982\u4e0b\uff1a Tom \u53c8\u628a Mary \u8e22\u51fa\u5bf9\u8bdd\u4e86: conversation . remove ([ Mary ]). then ( function ( conversation ) { console . log ( \u79fb\u9664\u6210\u529f , conversation . members ); }). catch ( console . error . bind ( console )); [ conversation removeMembersWithClientIds : @[ @ Mary ] callback : ^ ( BOOL succeeded , NSError * error ) { if ( succeeded ) { NSLog ( @ \u8e22\u4eba\u6210\u529f\uff01 ); } }]; conv . kickMembers ( Arrays . asList ( Mary ), new AVIMConversationCallback (){ @Override public void done ( AVIMException e ){ } }); await conversation.RemoveMembersAsync( Mary ); \u6267\u884c\u4e86\u8fd9\u6bb5\u4ee3\u7801\u4e4b\u540e\u4f1a\u89e6\u53d1\u5982\u4e0b\u6d41\u7a0b\uff1a Tom- Cloud: 1. \u5bf9\u8bdd\u4e2d\u79fb\u9664 Mary Cloud-- Mary: 2. \u4e0b\u53d1\u901a\u77e5\uff1a\u4f60\u88ab Tom \u4ece\u5bf9\u8bdd\u4e2d\u5254\u9664\u4e86 Cloud-- Jerry: 2. \u4e0b\u53d1\u901a\u77e5\uff1aMary \u88ab Tom \u79fb\u9664 Cloud-- Tom: 2. \u4e0b\u53d1\u901a\u77e5\uff1aMary \u88ab\u79fb\u9664\u4e86\u5bf9\u8bdd \u52a0\u5165\u5bf9\u8bdd \u7d27\u63a5\u7740 William \u901a\u8fc7 Conversation.id \u4ed6\u81ea\u5df1\u4e3b\u52a8\u52a0\u5165\u5bf9\u8bdd\uff1a \u6ce8\u610f\uff0c\u5982\u4e0b\u4ee3\u7801\u8fd0\u884c\u7684\u524d\u63d0\u6709\u51e0\u4e2a\u524d\u63d0\uff1a William \u9700\u8981\u53c2\u7167\u524d\u9762\u7ae0\u8282\u91cc\u9762\u7684\u521b\u5efa\u4e86\u4e00\u4e2a IMClient \u7684\u5b9e\u4f8b\uff0c\u5e76\u4e14\u786e\u4fdd\u5df2\u7ecf\u4e0e\u4e91\u7aef\u5efa\u7acb\u8fde\u63a5\u3002 590aa654fab00f41dda86f51 \u662f\u4e00\u4e2a\u5728 _Conversation \u8868\u91cc\u9762\u771f\u662f\u5b58\u5728\u7684\u5bf9\u8bdd Id\u3002 william . getConversation ( 590aa654fab00f41dda86f51 ). then ( function ( conversation ) { return conversation . join (); }). then ( function ( conversation ) { console . log ( \u52a0\u5165\u6210\u529f , conversation . members ); // \u52a0\u5165\u6210\u529f [ William , Tom , Jerry ] }). catch ( console . error . bind ( console )); AVIMConversationQuery * query = [ william conversationQuery ]; [ query getConversationById : @ 590aa654fab00f41dda86f51 callback : ^ ( AVIMConversation * conversation , NSError * error ) { [ conversation joinWithCallback : ^ ( BOOL succeeded , NSError * error ) { if ( succeeded ) { NSLog ( @ \u52a0\u5165\u6210\u529f\uff01 ); } }]; }]; AVIMClient william = AVIMClient . getInstance ( William ); AVIMConversation conv = client . getConversation ( 590aa654fab00f41dda86f51 ); conv . join ( new AVIMConversationCallback (){ @Override public void done ( AVIMException e ){ if ( e == null ){ //\u52a0\u5165\u6210\u529f } } }); await william.JoinAsync( 590aa654fab00f41dda86f51 ); \u6267\u884c\u4e86\u8fd9\u6bb5\u4ee3\u7801\u4e4b\u540e\u4f1a\u89e6\u53d1\u5982\u4e0b\u6d41\u7a0b\uff1a William- Cloud: 1.\u52a0\u5165\u5bf9\u8bdd Cloud-- William: 2. \u4e0b\u53d1\u901a\u77e5: \u4f60\u5df2\u52a0\u5165\u5bf9\u8bdd Cloud-- Tom: 2. \u4e0b\u53d1\u901a\u77e5\uff1aWilliam \u52a0\u5165\u5bf9\u8bdd Cloud-- Jerry: 2. \u4e0b\u53d1\u901a\u77e5\uff1aWilliam \u52a0\u5165\u5bf9\u8bdd \u5176\u4ed6\u4eba\u5219\u901a\u8fc7\u8ba2\u9605 MEMBERS_JOINED \u6765\u63a5\u6536 William \u52a0\u5165\u5bf9\u8bdd\u7684\u901a\u77e5: jerry . on ( Event . MEMBERS_JOINED , function membersJoinedEventHandler ( payload , conversation ) { console . log ( payload . members , payload . invitedBy , conversation . id ); }); - ( void ) conversation: ( AVIMConversation * ) conversation membersAdded: ( NSArray * ) clientIds byClientId: ( NSString * ) clientId { NSLog ( @ %@ , [ NSString stringWithFormat : @ %@ \u52a0\u5165\u5230\u5bf9\u8bdd\uff0c\u64cd\u4f5c\u8005\u4e3a\uff1a%@ ,[ clientIds objectAtIndex : 0 ], clientId ]); } @Override public void onMemberJoined ( AVIMClient client , AVIMConversation conversation , List String members , String invitedBy ) { // \u624b\u673a\u5c4f\u5e55\u4e0a\u4f1a\u663e\u793a\u4e00\u5c0f\u6bb5\u6587\u5b57\uff1aTom \u52a0\u5165\u5230 551260efe4b01608686c3e0f \uff1b\u64cd\u4f5c\u8005\u4e3a\uff1aTom Toast . makeText ( AVOSCloud . applicationContext , members + \u52a0\u5165\u5230 + conversation . getConversationId () + \uff1b\u64cd\u4f5c\u8005\u4e3a\uff1a + invitedBy , Toast . LENGTH_SHORT ). show (); } jerry.OnMembersJoined += OnMembersJoined; private void OnMembersJoined(object sender, AVIMOnInvitedEventArgs e) { // e.InvitedBy \u662f\u8be5\u9879\u64cd\u4f5c\u7684\u53d1\u8d77\u4eba, e.ConversationId \u662f\u8be5\u9879\u64cd\u4f5c\u9488\u5bf9\u7684\u5bf9\u8bdd Id Debug.Log(string.Format( {0} \u52a0\u5165\u4e86 {1} \u5bf9\u8bdd\uff0c\u64cd\u4f5c\u8005\u662f {2} ,e.JoinedMembers, e.ConversationId, e.InvitedBy)); } \u9000\u51fa\u5bf9\u8bdd Jerry \u4e0d\u60f3\u7ee7\u7eed\u5446\u5728\u8fd9\u4e2a\u5bf9\u8bdd\u91cc\u9762\u4e86\uff0c\u4ed6\u9009\u62e9\u9000\u51fa\u5bf9\u8bdd: conversation . quit (). then ( function ( conversation ) { console . log ( \u9000\u51fa\u6210\u529f , conversation . members ); // \u9000\u51fa\u6210\u529f [ William , Tom ] }). catch ( console . error . bind ( console )); [ conversation quitWithCallback : ^ ( BOOL succeeded , NSError * error ) { if ( succeeded ) { NSLog ( @ \u9000\u51fa\u6210\u529f\uff01 ); } }]; conversation . quit ( new AVIMConversationCallback (){ @Override public void done ( AVIMException e ){ if ( e == null ){ //\u9000\u51fa\u6210\u529f } } }); jerry.LeaveAsync(conversation); // \u6216\u8005\u4f20\u5165 conversation id jerry.LeaveAsync( 590aa654fab00f41dda86f51 ); \u6267\u884c\u4e86\u8fd9\u6bb5\u4ee3\u7801\u4e4b\u540e\u4f1a\u89e6\u53d1\u5982\u4e0b\u6d41\u7a0b\uff1a Jerry- Cloud: 1. \u79bb\u5f00\u5bf9\u8bdd Cloud-- Jerry: 2. \u4e0b\u53d1\u901a\u77e5\uff1a\u4f60\u5df2\u79bb\u5f00\u5bf9\u8bdd Cloud-- Mary: 2. \u4e0b\u53d1\u901a\u77e5\uff1aJerry \u5df2\u79bb\u5f00\u5bf9\u8bdd Cloud-- Tom: 2. \u4e0b\u53d1\u901a\u77e5\uff1aJerry \u5df2\u79bb\u5f00\u5bf9\u8bdd \u800c\u5176\u4ed6\u4eba\u9700\u8981\u901a\u8fc7\u8ba2\u9605 MEMBERS_LEFT \u6765\u63a5\u6536 Jerry \u79bb\u5f00\u5bf9\u8bdd\u7684\u4e8b\u4ef6\u901a\u77e5: mary . on ( Event . MEMBERS_LEFT , function membersLeftEventHandler ( payload , conversation ) { console . log ( payload . members , payload . invitedBy , conversation . id ); }); // mary \u767b\u5f55\u4e4b\u540e\uff0cjerry \u9000\u51fa\u4e86\u5bf9\u8bdd\uff0c\u5728 mary \u6240\u5728\u7684\u5ba2\u6237\u7aef\u5c31\u4f1a\u6fc0\u53d1\u4ee5\u4e0b\u56de\u8c03 -( void ) conversation: ( AVIMConversation * ) conversation membersRemoved: ( NSArray * ) clientIds byClientId: ( NSString * ) clientId { NSLog ( @ %@ , [ NSString stringWithFormat : @ %@ \u79bb\u5f00\u4e86\u5bf9\u8bdd\uff0c \u64cd\u4f5c\u8005\u4e3a\uff1a%@ ,[ clientIds objectAtIndex : 0 ], clientId ]); } @Override public void onMemberLeft ( AVIMClient client , AVIMConversation conversation , List String members , String kickedBy ) { // \u6709\u5176\u4ed6\u6210\u5458\u79bb\u5f00\u65f6\uff0c\u6267\u884c\u6b64\u5904\u903b\u8f91 } mary.OnMembersLeft += OnMembersLeft; private void OnMembersLeft(object sender, AVIMOnMembersLeftEventArgs e) { // e.InvitedBy \u662f\u8be5\u9879\u64cd\u4f5c\u7684\u53d1\u8d77\u4eba, e.ConversationId \u662f\u8be5\u9879\u64cd\u4f5c\u9488\u5bf9\u7684\u5bf9\u8bdd Id Debug.Log(string.Format( {0} \u79bb\u5f00\u4e86 {1} \u5bf9\u8bdd\uff0c\u64cd\u4f5c\u8005\u662f {2} ,e.JoinedMembers, e.ConversationId, e.InvitedBy)); } \u6210\u5458\u53d8\u66f4\u7684\u4e8b\u4ef6\u901a\u77e5\u603b\u7ed3 \u524d\u9762\u7684\u65f6\u5e8f\u56fe\u548c\u4ee3\u7801\u9488\u5bf9\u6210\u5458\u53d8\u66f4\u7684\u64cd\u4f5c\u505a\u4e86\u9010\u6b65\u7684\u5206\u6790\u548c\u9610\u8ff0\uff0c\u4e3a\u4e86\u786e\u4fdd\u5f00\u53d1\u8005\u80fd\u591f\u51c6\u786e\u7684\u4f7f\u7528\u4e8b\u4ef6\u901a\u77e5\uff0c\u5982\u4e0b\u8868\u683c\u505a\u4e86\u4e00\u4e2a\u7edf\u4e00\u7684\u5f52\u7c7b\u548c\u5212\u5206: \u5047\u8bbe Tom \u548c Jerry \u5df2\u7ecf\u5728\u5bf9\u8bdd\u5185\u4e86\uff1a \u64cd\u4f5c|Tom|Jerry|Mary|William | | | Tom \u6dfb\u52a0 Mary| MEMBERS_JOINED | MEMBERS_JOINED | INVITED |/ Tom \u5254\u9664 Mary| MEMBERS_LEFT | MEMBERS_LEFT | KICKED |/ William \u52a0\u5165| MEMBERS_JOINED | MEMBERS_JOINED |/| MEMBERS_JOINED Jerry \u4e3b\u52a8\u9000\u51fa| MEMBERS_LEFT | MEMBERS_LEFT |/| MEMBERS_LEFT \u5176\u4ed6\u5bf9\u8bdd\u7c7b\u578b\uff08\u804a\u5929\u6a21\u5f0f\uff09 \u5373\u65f6\u901a\u8baf\u670d\u52a1\u63d0\u4f9b\u7684\u529f\u80fd\u5c31\u662f\u8ba9\u4e00\u4e2a\u5ba2\u6237\u7aef\u4e0e\u5176\u4ed6\u5ba2\u6237\u7aef\u8fdb\u884c\u5728\u7ebf\u7684\u6d88\u606f\u4e92\u53d1\uff0c\u5bf9\u5e94\u4e0d\u540c\u7684\u4f7f\u7528\u573a\u666f\u9664\u53bb\u521a\u624d\u524d\u4e24\u7ae0\u8282\u4ecb\u7ecd\u7684 \u4e00\u5bf9\u4e00\u5355\u804a \u548c \u591a\u4eba\u7fa4\u804a \u4e4b\u5916,\u5373\u65f6\u901a\u8baf\u4e5f\u652f\u6301\u4f46\u4e0d\u9650\u4e8e\u5982\u4e0b\u4e2d\u6d41\u884c\u7684\u901a\u8baf\u6a21\u5f0f\uff1a \u552f\u4e00\u804a\u5929\u5ba4 \u5f00\u653e\u804a\u5929\u5ba4\uff0c\u4f8b\u5982\u76f4\u64ad\u4e2d\u7684\u5f39\u5e55\u804a\u5929\u5ba4\u3002 \u670d\u52a1\u53f7\uff0c\u4f8b\u5982\u516c\u4f17\u53f7\uff0c\u6e38\u620f GM \u5728\u7ebf\u7fa4\u53d1\u901a\u77e5 \b \u5173\u4e8e\u4e0a\u8ff0\u7684\u51e0\u79cd\u573a\u666f\u5bf9\u5e94\u7684\u5b9e\u73b0\uff0c\u8bf7\u53c2\u9605 \u8fdb\u9636\u529f\u80fd#\b\u5bf9\u8bdd\u7c7b\u578b \u3002 \u5bf9\u8bdd \u4e00\u4e2a\u804a\u5929\u5e94\u7528\u5728\u9996\u9875\u5f80\u5f80\u4f1a\u5c55\u793a\u5f53\u524d\u7528\u6237\u52a0\u5165\u7684\uff0c\u6700\u6d3b\u8dc3\u7684\u51e0\u4e2a\u5bf9\u8bdd\u3002 \u83b7\u53d6\u5bf9\u8bdd\u5217\u8868 tom . getQuery (). containsMembers ([ Tom ]). find (). then ( function ( conversations ) { // \u9ed8\u8ba4\u6309\u6bcf\u4e2a\u5bf9\u8bdd\u7684\u6700\u540e\u66f4\u65b0\u65e5\u671f\uff08\u6536\u5230\u6700\u540e\u4e00\u6761\u6d88\u606f\u7684\u65f6\u95f4\uff09\u5012\u5e8f\u6392\u5217 conversations . map ( function ( conversation ) { console . log ( conversation . lastMessageAt . toString (), conversation . members ); }); }). catch ( console . error . bind ( console )); // Tom \u6784\u5efa\u4e00\u4e2a\u67e5\u8be2 AVIMConversationQuery * query = [ tom conversationQuery ]; // \u6267\u884c\u67e5\u8be2 [ query findConversationsWithCallback : ^ ( NSArray * conversations , NSError * error ) { NSLog ( @ \u627e\u5230 %ld \u4e2a\u5bf9\u8bdd\uff01 , [ conversations count ]); }]; AVIMConversationsQuery query = client . getConversationsQuery (); query . findInBackground ( new AVIMConversationQueryCallback (){ @Override public void done ( List AVIMConversation conversations , AVIMException e ){ if ( e == null ){ //conversations \u5c31\u662f\u83b7\u53d6\u5230\u7684 conversation \u5217\u8868 //\u6ce8\u610f\uff1a\u6309\u6bcf\u4e2a\u5bf9\u8bdd\u7684\u6700\u540e\u66f4\u65b0\u65e5\u671f\uff08\u6536\u5230\u6700\u540e\u4e00\u6761\u6d88\u606f\u7684\u65f6\u95f4\uff09\u5012\u5e8f\u6392\u5217 } } }); var query = tom.GetQuery().WhereContainedIn( m , Tom ); await query.FindAsync(); \u4e0a\u8ff0\u4ee3\u7801\u9ed8\u8ba4\u8fd4\u56de\u6700\u8fd1\u6d3b\u8dc3\u7684 10 \u4e2a\u5bf9\u8bdd\uff0c\u82e5\u8981\u66f4\u6539\u8fd4\u56de\u5bf9\u8bdd\u7684\u6570\u91cf\uff0c\u8bf7\u8bbe\u7f6e limit \u503c\u3002 query . limit ( 20 ); query . limit = 20 ; query . limit ( 20 ); query.Limit(20); \u6839\u636e\u5173\u952e\u5b57\u67e5\u8be2 \u5728\u67d0\u4e9b\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u9700\u8981\u6839\u636e\u5bf9\u8bdd\u7684\u4e00\u4e9b\u7279\u6027\u6765\u505a\u67e5\u627e\uff0c\u6bd4\u5982\u6211\u8981\u67e5\u627e\u540d\u5b57\u91cc\u5305\u542b NBA \u7684\u5bf9\u8bdd: query . contains ( name , NBA ); [ query whereKey : @ name containsString : @ NBA ]; query . whereContains ( name , NBA ); query.WhereContains( name , NBA ); \u66f4\u591a\u67e5\u8be2\u65b9\u5f0f \u5173\u4e8e\u4e0a\u8ff0\u7684\u51e0\u79cd\u573a\u666f\u5bf9\u5e94\u7684\u5b9e\u73b0\uff0c\u8bf7\u53c2\u9605 \u8fdb\u9636\u529f\u80fd#\u5bf9\u8bdd\u7684\u67e5\u8be2 \u6d88\u606f \u6d88\u606f\u7684\u7c7b\u578b\u6709\u5f88\u591a\u79cd\uff0c\u4f7f\u7528\u6700\u591a\u7684\u5c31\u662f\u6587\u672c\u6d88\u606f\uff0c\u5176\u6b21\u662f\u56fe\u50cf\u6d88\u606f\uff0c\u8fd8\u6709\u4e00\u4e9b\u77ed\u8bed\u97f3/\u77ed\u89c6\u9891\u6d88\u606f\uff0c\u6587\u672c\u6d88\u606f\u548c\u5176\u4ed6\u6d88\u606f\u7c7b\u578b\u6709\u672c\u8d28\u7684\u533a\u522b: \u6587\u672c\u6d88\u606f\u53d1\u9001\u7684\u5c31\u662f\u672c\u8eab\u7684\u5185\u5bb9\uff0c\u800c\u5176\u4ed6\u591a\u5a92\u4f53\u6d88\u606f\uff0c\u4f8b\u5982\u4e00\u5f20\u56fe\u7247\u5b9e\u9645\u4e0a\u53d1\u9001\u7684\u662f\u4e00\u4e2a\u6307\u5411\u56fe\u50cf\u7684\u94fe\u63a5\uff0c\u800c\u56fe\u50cf\u672c\u8eab\u7684\u7269\u7406\u6587\u4ef6\u5185\u5bb9\u4f1a\u88ab SDK \u6301\u4e45\u5316\u5b58\u50a8\u5728\u4e91\u7aef\u6587\u4ef6\u5b58\u50a8\u670d\u52a1\u4e2d \u56fe\u50cf\u6d88\u606f \u53d1\u9001\u56fe\u50cf\u6587\u4ef6 \u6211\u4eec\u4ece\u53d1\u9001\u4e00\u5f20\u56fe\u7247\u6d88\u606f\u7684\u751f\u547d\u5468\u671f\u7684\u65f6\u5e8f\u56fe\u6765\u4e86\u89e3\u6574\u4e2a\u8fc7\u7a0b\uff1a Tom-- source: 1. \u83b7\u53d6\u56fe\u50cf\u5b9e\u4f53\u5185\u5bb9 Tom- Cloud: 2. \u8c03\u7528\u53d1\u9001\u56fe\u50cf\u6d88\u606f\u7684\u63a5\u53e3 Cloud-- AVFile: 3. SDK \u540e\u53f0\u4e0a\u4f20\u6587\u4ef6\u5230 AVFile \u8868 AVFile-- Tom: 4. \u8fd4\u56de\u56fe\u50cf\u7684\u4e91\u7aef\u5730\u5740 Tom-- Cloud: 5. SDK \u5c06\u56fe\u50cf\u6d88\u606f\u53d1\u9001\u7ed9\u4e91\u7aef Cloud- Jerry: 6. \u6536\u5230\u56fe\u50cf\u6d88\u606f\uff0c\u6839\u636e\u63a5\u53e3\u83b7\u53d6\u56fe\u50cf\u7684\u4e91\u7aef\u5730\u5740\uff0c\u5728\u5bf9\u8bdd\u6846\u91cc\u9762\u505a UI \u5c55\u73b0 \u56fe\u89e3\uff1a 1. source \u53ef\u80fd\u662f\u6765\u81ea\u4e8e localStorage/camera\uff0c \u8868\u793a\u56fe\u50cf\u7684\u6765\u6e90\u53ef\u4ee5\u662f\u672c\u5730\u5b58\u50a8\u4f8b\u5982 iPhone \u624b\u673a\u7684\u5a92\u4f53\u5e93\u6216\u8005\u76f4\u63a5\u8c03\u7528\u76f8\u673a API \u5b9e\u65f6\u5730\u62cd\u7167\u83b7\u53d6\u7684\u7167\u7247\u3002 2. AVFile \u662f LeanCloud \u63d0\u4f9b\u7684\u6587\u4ef6\u5b58\u50a8\u670d\u52a1\u5bf9\u8c61\uff0c\u8be6\u7ec6\u53ef\u4ee5\u53c2\u9605 \u6587\u4ef6\u5b58\u50a8 AVFile \u5bf9\u5e94\u7684\u4ee3\u7801\u5e76\u6ca1\u6709\u65f6\u5e8f\u56fe\u90a3\u6837\u590d\u6742\uff0c\u56e0\u4e3a\u8c03\u7528 send \u63a5\u53e3\u7684\u65f6\u5019\uff0cSDK \u4f1a\u81ea\u52a8\u4e0a\u4f20\u56fe\u50cf\uff0c\u4e0d\u9700\u8981\u5f00\u53d1\u8005\u518d\u53bb\u5173\u5fc3\u8fd9\u4e00\u6b65: var AV = require ( leancloud-storage ); var { ImageMessage } = require ( leancloud-realtime-plugin-typed-messages ); var fileUploadControl = $ ( #photoFileUpload )[ 0 ]; var file = new AV . File ( avatar.jpg , fileUploadControl . files [ 0 ]); file . save (). then ( function () { var message = new ImageMessage ( file ); message . setText ( \u53d1\u81ea\u6211\u7684 Ins ); message . setAttributes ({ location : \u65e7\u91d1\u5c71 }); return conversation . send ( message ); }). then ( function () { console . log ( \u53d1\u9001\u6210\u529f ); }). catch ( console . error . bind ( console )); NSArray * paths = NSSearchPathForDirectoriesInDomains ( NSDocumentDirectory , NSUserDomainMask , YES ); NSString * documentsDirectory = [ paths objectAtIndex : 0 ]; NSString * imagePath = [ documentsDirectory stringByAppendingPathComponent : @ LeanCloud.png ]; NSError * error ; AVFile * file = [ AVFile fileWithLocalPath : imagePath error : error ]; AVIMImageMessage * message = [ AVIMImageMessage messageWithText : @ \u840c\u59b9\u5b50\u4e00\u679a file : file attributes : nil ]; [ conversation sendMessage : message callback : ^ ( BOOL succeeded , NSError * error ) { if ( succeeded ) { NSLog ( @ \u53d1\u9001\u6210\u529f\uff01 ); } }]; AVFile file = AVFile . withAbsoluteLocalPath ( San_Francisco.png , Environment . getExternalStorageDirectory () + /San_Francisco.png ); // \u521b\u5efa\u4e00\u6761\u56fe\u7247\u6d88\u606f AVIMImageMessage m = new AVIMImageMessage ( file ); m . setText ( \u53d1\u81ea\u6211\u7684\u5c0f\u7c73\u624b\u673a ); conv . sendMessage ( m , new AVIMConversationCallback () { @Override public void done ( AVIMException e ) { if ( e == null ) { // \u53d1\u9001\u6210\u529f } } }); // \u5047\u8bbe\u5728\u7a0b\u5e8f\u8fd0\u884c\u76ee\u5f55\u4e0b\u6709\u4e00\u5f20\u56fe\u7247\uff0cUnity/Xamarin \u53ef\u4ee5\u53c2\u7167\u8fd9\u79cd\u505a\u6cd5\u901a\u8fc7\u8def\u5f84\u83b7\u53d6\u56fe\u7247 // \u4ee5\u4e0b\u662f\u53d1\u9001\u56fe\u7247\u6d88\u606f\u7684\u5feb\u6377\u7528\u6cd5 using (FileStream fileStream = new FileStream(Path.Combine(Path.GetDirectoryName(Assembly.GetEntryAssembly().Location), San_Francisco.png ), FileMode.Open, FileAccess.Read)) { await conversation.SendImageAsync( San_Francisco.png , fileStream); } // \u6216\u8005\u5982\u4e0b\u6bd4\u8f83\u5e38\u89c4\u7684\u7528\u6cd5 var imageMessage = new AVIMImageMessage(); imageMessage.File = new AVFile( San_Francisco.png , fileStream); imageMessage.TextContent = \u53d1\u81ea\u6211\u7684 Windows ; await conversation.SendAsync(imageMessage); \u53d1\u9001\u56fe\u50cf\u94fe\u63a5 \u9664\u4e86\u4e0a\u8ff0\u8fd9\u79cd\u4ece\u672c\u5730\u76f4\u63a5\u53d1\u9001\u56fe\u7247\u6587\u4ef6\u7684\u6d88\u606f\u4e4b\u5916\uff0c\u5728\u5f88\u591a\u65f6\u5019\uff0c\u7528\u6237\u53ef\u80fd\u4ece\u7f51\u7edc\u4e0a\u6216\u8005\u522b\u7684\u5e94\u7528\u4e2d\u62f7\u8d1d\u4e86\u4e00\u4e2a\u56fe\u50cf\u7684\u7f51\u7edc\u8fde\u63a5\u5730\u5740\uff0c\u5f53\u505a\u4e00\u6761\u56fe\u50cf\u6d88\u606f\u53d1\u9001\u5230\u5bf9\u8bdd\u4e2d\uff0c\u8fd9\u79cd\u9700\u6c42\u53ef\u4ee5\u7528\u5982\u4e0b\u4ee3\u7801\u6765\u5b9e\u73b0\uff1a var AV = require ( leancloud-storage ); var { ImageMessage } = require ( leancloud-realtime-plugin-typed-messages ); // \u4ece\u7f51\u7edc\u94fe\u63a5\u76f4\u63a5\u6784\u5efa\u4e00\u4e2a\u56fe\u50cf\u6d88\u606f var file = new AV . File . withURL ( \u840c\u59b9\u5b50 , http://pic2.zhimg.com/6c10e6053c739ed0ce676a0aff15cf1c.gif ); file . save (). then ( function () { var message = new ImageMessage ( file ); message . setText ( \u840c\u59b9\u5b50\u4e00\u679a ); return conversation . send ( message ); }). then ( function () { console . log ( \u53d1\u9001\u6210\u529f ); }). catch ( console . error . bind ( console )); // Tom \u53d1\u4e86\u4e00\u5f20\u56fe\u7247\u7ed9 Jerry AVFile * file = [ AVFile fileWithURL :[ self @ http://ww3.sinaimg.cn/bmiddle/596b0666gw1ed70eavm5tg20bq06m7wi.gif ]]; AVIMImageMessage * message = [ AVIMImageMessage messageWithText : @ \u840c\u59b9\u5b50\u4e00\u679a file : file attributes : nil ]; [ conversation sendMessage : message callback : ^ ( BOOL succeeded , NSError * error ) { if ( succeeded ) { NSLog ( @ \u53d1\u9001\u6210\u529f\uff01 ); } }]; AVFile file = new AVFile ( \u840c\u59b9\u5b50 , http://ww3.sinaimg.cn/bmiddle/596b0666gw1ed70eavm5tg20bq06m7wi.gif , null ); AVIMImageMessage m = new AVIMImageMessage ( file ); m . setText ( \u840c\u59b9\u5b50\u4e00\u679a ); // \u521b\u5efa\u4e00\u6761\u56fe\u7247\u6d88\u606f conv . sendMessage ( m , new AVIMConversationCallback () { @Override public void done ( AVIMException e ) { if ( e == null ) { // \u53d1\u9001\u6210\u529f } } }); await conversation . SendImageAsync ( http://ww3.sinaimg.cn/bmiddle/596b0666gw1ed70eavm5tg20bq06m7wi.gif , Satomi_Ishihara , \u840c\u59b9\u5b50\u4e00\u679a ); \u63a5\u6536\u56fe\u50cf\u6d88\u606f \u5bf9\u8bdd\u4e2d\u7684\u5176\u4ed6\u6210\u5458\u4fee\u6539\u4e00\u4e0b\u63a5\u6536\u6d88\u606f\u7684\u4e8b\u4ef6\u8ba2\u9605\u903b\u8f91\uff0c\u6839\u636e\u6d88\u606f\u7c7b\u578b\u6765\u505a\u4e0d\u540c\u7684 UI \u5c55\u73b0\uff1a var { Event , TextMessage } = require ( leancloud-realtime ); var { ImageMessage } = require ( leancloud-realtime-plugin-typed-messages ); client . on ( Event . MESSAGE , function messageEventHandler ( message , conversation ) { var file ; switch ( message . type ) { case ImageMessage . TYPE : file = message . getFile (); console . log ( \u6536\u5230\u56fe\u50cf\u6d88\u606f\uff0curl: + file . url ()); break ; } } - ( void ) conversation: ( AVIMConversation * ) conversation didReceiveTypedMessage: ( AVIMTypedMessage * ) message { AVIMImageMessage * imageMessage = ( AVIMImageMessage * ) message ; // \u6d88\u606f\u7684 id NSString * messageId = imageMessage . messageId ; // \u56fe\u50cf\u6587\u4ef6\u7684 URL NSString * imageUrl = imageMessage . file . url ; // \u53d1\u8be5\u6d88\u606f\u7684 ClientId NSString * fromClientId = message . clientId ; } AVIMMessageManager . registerMessageHandler ( AVIMImageMessage . class , new AVIMTypedMessageHandler AVIMImageMessage () { @Override public void onMessage ( AVIMImageMessage msg , AVIMConversation conv , AVIMClient client ) { //\u53ea\u5904\u7406 Jerry \u8fd9\u4e2a\u5ba2\u6237\u7aef\u7684\u6d88\u606f //\u5e76\u4e14\u6765\u81ea conversationId \u4e3a 55117292e4b065f7ee9edd29 \u7684 conversation \u7684\u6d88\u606f if ( Jerry . equals ( client . getClientId ()) 55117292e4b065f7ee9edd29 . equals ( conv . getConversationId ())) { String fromClientId = msg . getFrom (); String messageId = msg . getMessageId (); String url = msg . getFileUrl (); Map String , Object metaData = msg . getFileMetaData (); if ( metaData . containsKey ( size )) { int size = ( Integer ) metaData . get ( size ); } if ( metaData . containsKey ( width )) { int width = ( Integer ) metaData . get ( width ); } if ( metaData . containsKey ( height )) { int height = ( Integer ) metaData . get ( height ); } if ( metaData . containsKey ( format )) { String format = ( String ) metaData . get ( format ); } } } }); private void OnMessageReceived(object sender, AVIMMessageEventArgs e) { if (e.Message is AVIMImageMessage imageMessage) { Console.WriteLine(imageMessage.File.Url); // imageMessage.File \u662f\u4e00\u4e2a AVFile \u5bf9\u8c61\uff0c\u66f4\u591a\u64cd\u4f5c\u53ef\u4ee5\u53c2\u8003\u6570\u636e\u5b58\u50a8\u91cc\u9762\u7684\u6587\u4ef6 } } \u591a\u5a92\u4f53\u6d88\u606f \u4e0e\u56fe\u50cf\u6d88\u606f\u4e00\u6837\uff0c\u5176\u4ed6\u591a\u5a92\u4f53\u6d88\u606f\u90fd\u62e5\u6709\u5982\u4e0b\u4e24\u79cd\u7528\u6cd5\uff1a \u5982\u679c\u53d1\u9001\u7684\u662f\u591a\u5a92\u4f53\u6d88\u606f\u672c\u8eab\u7684\u7269\u7406\u6587\u4ef6\uff0c\u90a3\u4e48\u5b83\u7684\u7684\u5185\u5bb9\u4f1a\u5148\u8bd5\u7528 AVFile \u5b58\u50a8\u5728\u4e91\u7aef\uff0c\u7136\u540e\u53d1\u9001\u4e91\u7aef\u94fe\u63a5\u5230\u5bf9\u8bdd\u5f53\u4e2d\uff0c\u800c\u5728\u63a5\u6536\u65b9\u7684\u5ba2\u6237\u7aef\u53ea\u8981\u5bf9\u94fe\u63a5\u505a\u4e00\u4e9b\u5904\u7406\uff0c\u6839\u636e\u6d88\u606f\u7684\u7c7b\u578b\u4e0d\u540c\u505a\u4e0d\u540c\u7684 UI \u5c55\u73b0\uff0c\u4f8b\u5982\u8bed\u97f3\u6d88\u606f\u53ef\u4ee5\u505a\u6210\u4e00\u4e2a\u5c0f\u6309\u94ae\uff0c\u7528\u6237\u70b9\u51fb\u4e4b\u540e\u5c31\u64ad\u653e\u8bed\u97f3\uff0c\u800c\u89c6\u9891\u6d88\u606f\u5219\u662f\u4e00\u5f20\u89c6\u9891\u622a\u56fe\uff0c\u7528\u6237\u70b9\u51fb\u4e4b\u540e\u64ad\u653e\u89c6\u9891\uff0c\u8bf8\u5982\u6b64\u7c7b\u3002 \u5982\u679c\u662f\u4e00\u4e2a\u7f51\u7edc\u8fde\u63a5\u5730\u5740\uff0c\u5b83\u7684\u7269\u7406\u5185\u5bb9\u5e76\u4e0d\u4f1a\u88ab\u5b58\u653e\u4e8e AVFile \u8868\u5185\uff0c\u800c\u662f\u76f4\u63a5\u5c06\u5176\u8f6c\u5316\u6210\u4e00\u4e2a\u6d88\u606f\uff0c\u53d1\u9001\u51fa\u53bb \u5176\u4ed6\u7c7b\u578b\u6d88\u606f \u66f4\u591a\u6d88\u606f\u7c7b\u578b\u8bf7\u70b9\u51fb \u8fdb\u9636\u529f\u80fd#\u6d88\u606f\u7c7b\u578b \u3002 \u6d88\u606f\u8bb0\u5f55 \u6d88\u606f\u8bb0\u5f55\u9ed8\u8ba4\u4f1a\u5728\u4e91\u7aef\u4fdd\u5b58 180 \u5929\uff0c SDK \u63d0\u4f9b\u4e86\u591a\u79cd\u65b9\u5f0f\u6765\u83b7\u53d6\u5230\u672c\u5730\u3002\u5f00\u53d1\u8005\u53ef\u4ee5\u4ed8\u8d39\u6765\u5ef6\u957f\u8fd9\u4e00\u671f\u9650\uff0c\u8bf7\u8054\u7cfb \u3002\u53e6\u5916\u53ef\u4ee5\u53c2\u8003 \u5bf9\u8bdd\u7684\u6709\u6548\u671f\u3002\u4f60\u4e5f\u968f\u65f6\u53ef\u4ee5\u901a\u8fc7 REST API \u5c06\u804a\u5929\u8bb0\u5f55\u540c\u6b65\u5230\u81ea\u5df1\u7684\u670d\u52a1\u5668\u4e0a\u3002 iOS \u548c Android SDK \u5206\u522b\u63d0\u4f9b\u4e86\u5185\u7f6e\u7684\u6d88\u606f\u7f13\u5b58\u673a\u5236\uff0c\u51cf\u5c11\u5ba2\u6237\u7aef\u5bf9\u4e91\u7aef\u6d88\u606f\u8bb0\u5f55\u7684\u67e5\u8be2\u6b21\u6570\uff0c\u5e76\u4e14\u5728\u79bb\u7ebf\u60c5\u51b5\u4e0b\uff0c\u4e5f\u80fd\u67e5\u8be2\u5230\u51c6\u786e\u7684\u6d88\u606f\u8bb0\u5f55\u3002 \u83b7\u53d6\u5bf9\u8bdd\u7684\u5168\u90e8\u6d88\u606f\u8bb0\u5f55 \u5982\u4e0b\u4ee3\u7801\u53ef\u4ee5\u83b7\u53d6\u4e00\u4e2a\u5bf9\u8bdd\u6700\u8fd1\u7684 10 \u6761\u6d88\u606f\uff0c\u6ce8\u610f\uff0c\u8fd4\u56de\u7ed3\u679c\u662f\u6309\u7167\u65f6\u95f4 \u7531\u65b0\u5230\u65e7 \u6392\u5e8f\u7684\uff1a conversation . queryMessages ({ limit : 10 , // limit \u53d6\u503c\u8303\u56f4 1~1000\uff0c\u9ed8\u8ba4 20 }). then ( function ( messages ) { // \u6700\u65b0\u7684\u5341\u6761\u6d88\u606f\uff0c\u6309\u65f6\u95f4\u589e\u5e8f\u6392\u5217 }). catch ( console . error . bind ( console )); // \u67e5\u8be2\u5bf9\u8bdd\u4e2d\u6700\u540e 10 \u6761\u6d88\u606f\uff0c limit \u53d6\u503c\u8303\u56f4 1~1000\uff0c\u9ed8\u8ba4 20 [ conversation queryMessagesWithLimit : 10 callback : ^ ( NSArray * objects , NSError * error ) { NSLog ( @ \u67e5\u8be2\u6210\u529f\uff01 ); }]; // limit \u53d6\u503c\u8303\u56f4 1~1000\uff0c\u9ed8\u8ba4 20 conv . queryMessages ( 10 , new AVIMMessagesQueryCallback () { @Override public void done ( List AVIMMessage messages , AVIMException e ) { if ( e == null ) { //\u6210\u529f\u83b7\u53d6\u6700\u65b010\u6761\u6d88\u606f\u8bb0\u5f55 } } }); // limit \u53d6\u503c\u8303\u56f4 1 ~ 1000 \uff0c\u9ed8\u8ba4 20 var messages = await conversation . QueryMessageAsync ( limit : 10 ); \u800c\u5982\u679c\u60f3\u7ee7\u7eed\u62c9\u53d6\u66f4\u65e9\u7684\u6d88\u606f\u8bb0\u5f55\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u4ee3\u7801\uff1a // \u521b\u5efa\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u6bcf\u6b21\u83b7\u53d6 10 \u6761\u5386\u53f2\u6d88\u606f var messageIterator = conversation . createMessagesIterator ({ limit : 10 }); // \u7b2c\u4e00\u6b21\u8c03\u7528 next \u65b9\u6cd5\uff0c\u83b7\u5f97\u524d 10 \u6761\u6d88\u606f\uff0c\u8fd8\u6709\u66f4\u591a\u6d88\u606f\uff0cdone \u4e3a false messageIterator . next (). then ( function ( result ) { // result: { // value: [message1, ..., message10], // done: false, // } }). catch ( console . error . bind ( console )); // \u7b2c\u4e8c\u6b21\u8c03\u7528 next \u65b9\u6cd5\uff0c\u83b7\u5f97\u7b2c 11 ~ 20 \u6761\u6d88\u606f\uff0c\u8fd8\u6709\u66f4\u591a\u6d88\u606f\uff0cdone \u4e3a false messageIterator . next (). then ( function ( result ) { // result: { // value: [message11, ..., message20], // done: false, // } }). catch ( console . error . bind ( console )); // \u67e5\u8be2\u5bf9\u8bdd\u4e2d\u6700\u540e 10 \u6761\u6d88\u606f [ conversation queryMessagesWithLimit : 10 callback : ^ ( NSArray * messages , NSError * error ) { NSLog ( @ \u67e5\u8be2\u6210\u529f\uff01 ); // \u4ee5\u7b2c\u4e00\u9875\u7684\u6700\u65e9\u7684\u6d88\u606f\u4f5c\u4e3a\u5f00\u59cb\uff0c\u7ee7\u7eed\u5411\u524d\u62c9\u53d6\u6d88\u606f AVIMMessage * oldestMessage = [ messages firstObject ]; [ conversation queryMessagesBeforeId : oldestMessage . messageId timestamp : oldestMessage . sendTimestamp limit : 10 callback : ^ ( NSArray * messagesInPage , NSError * error ) { NSLog ( @ \u67e5\u8be2\u6210\u529f\uff01 ); }]; }]; // limit \u53d6\u503c\u8303\u56f4 1~1000\uff0c\u9ed8\u8ba4 20 conv . queryMessages ( 10 , new AVIMMessagesQueryCallback () { @Override public void done ( List AVIMMessage messages , AVIMException e ) { if ( e == null ) { //\u6210\u529f\u83b7\u53d6\u6700\u65b010\u6761\u6d88\u606f\u8bb0\u5f55 //\u8fd4\u56de\u7684\u6d88\u606f\u4e00\u5b9a\u662f\u65f6\u95f4\u589e\u5e8f\u6392\u5217\uff0c\u4e5f\u5c31\u662f\u6700\u65e9\u7684\u6d88\u606f\u4e00\u5b9a\u662f\u7b2c\u4e00\u4e2a AVIMMessage oldestMessage = messages . get ( 0 ); conv . queryMessages ( oldestMessage . getMessageId (), oldestMessage . getTimestamp (), 20 , new AVIMMessageQueryCallback (){ @Override public void done ( List AVIMMessage messagesInPage , AVIMException e ){ if ( e == null ){ //\u67e5\u8be2\u6210\u529f\u8fd4\u56de Log . d ( Tom Jerry , got + messagesInPage . size ()+ messages ); } } }); } } }); // limit \u53d6\u503c\u8303\u56f4 1 ~ 1000 \uff0c\u9ed8\u8ba4 20 var messages = await conversation . QueryMessageAsync ( limit : 10 ); var oldestMessage = messages . ToList () [ 0 ] ; var messagesInPage = await conversation . QueryMessageAsync ( beforeMessageId : oldestMessage . Id , beforeTimeStamp : oldestMessage . ServerTimestamp ); \u6309\u7167\u6d88\u606f\u7c7b\u578b\u83b7\u53d6 \u5982\u4e0b\u4ee3\u7801\u7684\u529f\u80fd\u662f\uff1a\u83b7\u53d6\u6240\u6709\u7684\u56fe\u50cf\u6d88\u606f\uff1a conversation . queryMessages ({ type : ImageMessage . TYPE }). then ( messages = { console . log ( messages ); }). catch ( console . error ); [ conversation queryMediaMessagesFromServerWithType : kAVIMMessageMediaTypeImage limit : 10 fromMessageId : nil fromTimestamp : 0 callback : ^ ( NSArray * messages , NSError * error ) { if ( ! error ) { NSLog ( @ \u67e5\u8be2\u6210\u529f\uff01 ); } }]; int msgType = . AVIMMessageType . TEXT_MESSAGE_TYPE ; conversation . queryMessagesByType ( msgType , limit , new AVIMMessagesQueryCallback () { @Override public void done ( List AVIMMessage messages , AVIMException e ){ } }); // \u4f20\u5165\u6cdb\u578b\u53c2\u6570\uff0cSDK \u4f1a\u81ea\u52a8\u8bfb\u53d6\u7c7b\u578b\u7684\u4fe1\u606f\u53d1\u9001\u7ed9\u670d\u52a1\u7aef\uff0c\u7528\u4f5c\u7b5b\u9009\u76ee\u6807\u7c7b\u578b\u7684\u6d88\u606f var imageMessages = await conversation.QueryMessageAsync AVIMImageMessage (); \u5982\u8981\u83b7\u53d6\u66f4\u591a\u56fe\u50cf\u6d88\u606f\uff0c\u53ef\u4ee5\u6548\u4eff\u524d\u4e00\u7ae0\u8282\u4e2d\u7684\u793a\u4f8b\u4ee3\u7801\uff0c\u7ee7\u7eed\u67e5\u8be2\u53ef\u4ee5\u83b7\u53d6\u66f4\u591a\u7684\u56fe\u50cf\u6d88\u606f\u3002 \u66f4\u591a\u7684\u83b7\u53d6\u65b9\u5f0f \u66f4\u591a\u6d88\u606f\u7c7b\u578b\u8bf7\u70b9\u51fb \u8fdb\u9636\u529f\u80fd#\u6d88\u606f\u8bb0\u5f55 \u5ba2\u6237\u7aef\u4e8b\u4ef6\u4e0e\u7f51\u7edc\u72b6\u6001\u54cd\u5e94 {{ docs.note(\"\u6ce8\u610f\uff1a\u5728\u7f51\u7edc\u4e2d\u65ad\u7684\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u7684\u6d88\u606f\u6536\u53d1\u548c\u5bf9\u8bdd\u64cd\u4f5c\u90fd\u4f1a\u5931\u8d25\u3002\u5f00\u53d1\u8005\u5e94\u8be5\u76d1\u542c\u4e0e\u7f51\u7edc\u72b6\u6001\u76f8\u5173\u7684\u4e8b\u4ef6\u5e76\u66f4\u65b0 UI\uff0c\u4ee5\u514d\u5f71\u54cd\u7528\u6237\u7684\u4f7f\u7528\u4f53\u9a8c\u3002\") }} \u5f53\u7f51\u7edc\u8fde\u63a5\u51fa\u73b0\u4e2d\u65ad\u3001\u6062\u590d\u7b49\u72b6\u6001\u53d8\u5316\u65f6\uff0cSDK \u4f1a\u6d3e\u53d1\u4ee5\u4e0b\u4e8b\u4ef6\uff1a {{ docs.langSpecStart('js') }} DISCONNECT \uff1a\u4e0e\u670d\u52a1\u7aef\u8fde\u63a5\u65ad\u5f00\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u4e0d\u53ef\u7528\u3002 OFFLINE \uff1a\u7f51\u7edc\u4e0d\u53ef\u7528\u3002 ONLINE \uff1a\u7f51\u7edc\u6062\u590d\u3002 SCHEDULE \uff1a\u8ba1\u5212\u5728\u4e00\u6bb5\u65f6\u95f4\u540e\u5c1d\u8bd5\u91cd\u8fde\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u4ecd\u4e0d\u53ef\u7528\u3002 RETRY \uff1a\u6b63\u5728\u91cd\u8fde\u3002 RECONNECT \uff1a\u4e0e\u670d\u52a1\u7aef\u8fde\u63a5\u6062\u590d\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u53ef\u7528\u3002 var { Event } = require ( leancloud-realtime ); realtime . on ( Event . DISCONNECT , function () { console . log ( \u670d\u52a1\u5668\u8fde\u63a5\u5df2\u65ad\u5f00 ); }); realtime . on ( Event . OFFLINE , function () { console . log ( \u79bb\u7ebf\uff08\u7f51\u7edc\u8fde\u63a5\u5df2\u65ad\u5f00\uff09 ); }); realtime . on ( Event . ONLINE , function () { console . log ( \u5df2\u6062\u590d\u5728\u7ebf ); }); realtime . on ( Event . SCHEDULE , function ( attempt , delay ) { console . log ( delay + ms \u540e\u8fdb\u884c\u7b2c + ( attempt + 1 ) + \u6b21\u91cd\u8fde ); }); realtime . on ( Event . RETRY , function ( attempt ) { console . log ( \u6b63\u5728\u8fdb\u884c\u7b2c + ( attempt + 1 ) + \u6b21\u91cd\u8fde ); }); realtime . on ( Event . RECONNECT , function () { console . log ( \u4e0e\u670d\u52a1\u7aef\u8fde\u63a5\u6062\u590d ); }); {{ docs.langSpecEnd('js') }} {{ docs.langSpecStart('objc') }} \u5728 AVIMClientDelegate \u4e0a\u4f1a\u6709\u5982\u4e0b\u4e8b\u4ef6\u901a\u77e5\uff1a imClientPaused:(AVIMClient *)imClient \u6307\u7f51\u7edc\u8fde\u63a5\u65ad\u5f00\u4e8b\u4ef6\u53d1\u751f\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u4e0d\u53ef\u7528\u3002 imClientResuming:(AVIMClient *)imClient \u6307\u7f51\u7edc\u65ad\u5f00\u540e\u5f00\u59cb\u91cd\u8fde\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u4f9d\u7136\u4e0d\u53ef\u7528\u3002 imClientResumed:(AVIMClient *)imClient \u6307\u7f51\u7edc\u8fde\u63a5\u6062\u590d\u6b63\u5e38\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u53d8\u5f97\u53ef\u7528\u3002 {{ docs.langSpecEnd('objc') }} {{ docs.langSpecStart('java') }} AVIMClientEventHandler \u4e0a\u4f1a\u6709\u5982\u4e0b\u4e8b\u4ef6\u901a\u77e5\uff1a onConnectionPaused() \u6307\u7f51\u7edc\u8fde\u63a5\u65ad\u5f00\u4e8b\u4ef6\u53d1\u751f\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u4e0d\u53ef\u7528\u3002 onConnectionResume() \u6307\u7f51\u7edc\u8fde\u63a5\u6062\u590d\u6b63\u5e38\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u53d8\u5f97\u53ef\u7528\u3002 onClientOffline() \u6307\u5355\u70b9\u767b\u5f55\u88ab\u8e22\u4e0b\u7ebf\u7684\u4e8b\u4ef6\u3002 {{ docs.langSpecEnd('java') }} {{ docs.langSpecStart('cs') }} AVRealtime \u4e0a\u4f1a\u6709\u5982\u4e0b\u4e8b\u4ef6\u901a\u77e5\uff1a OnDisconnected \u6307\u7f51\u7edc\u8fde\u63a5\u65ad\u5f00\u4e8b\u4ef6\u53d1\u751f\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u4e0d\u53ef\u7528\u3002 OnReconnecting \u6307\u7f51\u7edc\u6b63\u5728\u5c1d\u8bd5\u91cd\u8fde\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u4e0d\u53ef\u7528\u3002 OnReconnected \u6307\u7f51\u7edc\u8fde\u63a5\u6062\u590d\u6b63\u5e38\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u53d8\u5f97\u53ef\u7528\u3002 OnReconnectFailed \u6307\u91cd\u8fde\u5931\u8d25\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u4e0d\u53ef\u7528\u3002 {{ docs.langSpecEnd('cs') }} \u65ad\u7ebf\u91cd\u8fde \u76ee\u524d SDK \u9ed8\u8ba4\u5185\u7f6e\u4e86\u65ad\u7ebf\u91cd\u8fde\u7684\u529f\u80fd\uff0c\u4ece\u5ba2\u6237\u7aef\u4e0e\u4e91\u7aef\u5efa\u7acb\u8fde\u63a5\u6210\u529f\u5f00\u59cb\uff0c\u53ea\u8981\u6ca1\u6709\u8c03\u7528\u9000\u51fa\u767b\u5f55\u7684\u63a5\u53e3\uff0cSDK \u4f1a\u4e00\u76f4\u5c1d\u8bd5\u548c\u4e91\u7aef\u4fdd\u6301\u957f\u8fde\u63a5\uff0c\u6b64\u65f6 IMClient \u7684\u72b6\u6001\u53ef\u4ee5\u901a\u8fc7 \u7f51\u7edc\u72b6\u6001\u54cd\u5e94\u63a5\u53e3\u5f97\u5230\u3002 \u6ce8\u610f\uff1a\u7528\u6237\u5982\u679c\u81ea\u884c\u5b9e\u73b0\u4e86\u91cd\u8fde\u903b\u8f91\u53ef\u80fd\u4f1a\u62a5\u51fa 1001 \u9519\u8bef\u3002 \u9000\u51fa\u767b\u5f55\u4e0e\u65ad\u5f00\u8fde\u63a5 tom . close (). then ( function () { console . log ( Tom \u9000\u51fa\u767b\u5f55 ); }). catch ( console . error . bind ( console )); [ tom closeWithCallback : ^ ( BOOL succeeded , NSError * _Nullable error ) { if ( succeeded ) { NSLog ( @ \u9000\u51fa\u5373\u65f6\u901a\u8baf\u670d\u52a1 ); } }]; tom . close ( new AVIMClientCallback (){ @Override public void done ( AVIMClient client , AVIMException e ){ if ( e == null ){ //\u767b\u51fa\u6210\u529f } } }); await tom.CloseAsync();","title":"\u57fa\u7840\u5165\u95e8"},{"location":"im/im-beginner/#_1","text":"","title":"\u5373\u65f6\u901a\u8baf\u5f00\u53d1\u6307\u5357 &middot; \u57fa\u7840\u5165\u95e8"},{"location":"im/im-beginner/#_2","text":"\u9488\u5bf9\u5982\u4e0b\u5e94\u7528\u573a\u666f\uff0c\u5373\u65f6\u901a\u8baf\u90fd\u6709\u5bf9\u5e94\u7684\u89e3\u51b3\u65b9\u6848\uff1a \u793e\u4ea4\u5e94\u7528\u9700\u8981\u63a5\u5165\u804a\u5929\u529f\u80fd \u6e38\u620f\u9700\u8981\u63a5\u5165\u804a\u5929\u9891\u9053 \u76f4\u64ad\u5e94\u7528\u8981\u63a5\u5165\u804a\u5929\u5ba4\u5f39\u5e55\u670d\u52a1 \u7cfb\u7edf\u5e7f\u64ad\u6d88\u606f\u5728\u7ebf\u901a\u77e5\uff0c\u6e38\u620f GM \u5728\u7ebf\u5168\u670d\u5e7f\u64ad \u800c\u4e0a\u8ff0\u53ea\u662f\u4e00\u4e9b\u6bd4\u8f83\u7ecf\u5178\u548c\u6d41\u884c\u7684\u573a\u666f\uff0c\u5373\u65f6\u901a\u8baf\u4e0d\u5c40\u9650\u4e8e\u4e0a\u8ff0\u7528\u6cd5\u548c\u573a\u666f\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u8bb8\u591a\u6613\u7528\u6027\u8f83\u9ad8\u7684\u63a5\u53e3\u652f\u6301\u5f00\u53d1\u8005\u53ef\u4ee5\u62d3\u5c55\u66f4\u591a\u7684\u573a\u666f\u548c\u6a21\u5f0f\u3002 \u5373\u65f6\u901a\u8baf\u8981\u89e3\u51b3\u7684\u6838\u5fc3\u9700\u6c42\u5c31\u662f: \u8ba9\u4f60\u7684\u5e94\u7528\u62e5\u6709\u79c1\u804a\u3001\u7fa4\u804a\u3001\u804a\u5929\u5ba4\u3001\u7cfb\u7edf\u6d88\u606f\u7b49\u901a\u8baf\u80fd\u529b \b\u5373\u65f6\u901a\u8baf\u4f7f\u5f97\u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u4e0d\u7f16\u5199\u670d\u52a1\u7aef\u7684\u4ee3\u7801\u7684\u60c5\u51b5\u4e0b\uff0c\u4ec5\u4f7f\u7528\u5ba2\u6237\u7aef SDK \u5373\u53ef\u5b9e\u73b0\u5728\u7ebf\u804a\u5929/\u591a\u4eba\u7fa4\u7ec4/\u79c1\u804a/\u6d88\u606f\u7fa4\u53d1\u7b49\u5b9e\u65f6\u901a\u8baf\u7684\u529f\u80fd\uff0c\u5982\u4e0b\u65f6\u5e8f\u56fe\u7b80\u5355\u7684\u4ecb\u7ecd\u4e86\u4e00\u4e0b\u5373\u65f6\u901a\u8baf\u7684\u4e1a\u52a1\u6d41\u7a0b\uff1a ClientA- Cloud : send ( \u5927\u5bb6\u597d\uff0c\u6211\u662f A ); Cloud-- ClientB : onMessage ( ClientA , \u5927\u5bb6\u597d\uff0c\u6211\u662f A ); Cloud-- ClientC : onMessage ( ClientA , \u5927\u5bb6\u597d\uff0c\u6211\u662f A );","title":"\u4f7f\u7528\u573a\u666f\u548c\u89e3\u51b3\u7684\u9700\u6c42"},{"location":"im/im-beginner/#_3","text":"\u5efa\u8bae\u5148\u9605\u8bfb \u5373\u65f6\u901a\u8baf\u670d\u52a1\u603b\u89c8 \u4e4b\u540e\uff0c\u518d\u9605\u8bfb\u672c\u6587\u6548\u679c\u6700\u4f73\u3002","title":"\u9605\u524d\u51c6\u5907"},{"location":"im/im-beginner/#_4","text":"\u6211\u4eec\u4ece\u6700\u57fa\u672c\u7684\u4e00\u5bf9\u4e00\u79c1\u804a\u5f00\u59cb\u63a5\u5165\u5373\u65f6\u901a\u8baf\u6a21\u5757\uff0c\u9996\u5148\u6211\u4eec\u9700\u8981\u660e\u786e\u4e00\u4e2a\u9700\u6c42\uff1a \u5047\u8bbe\u6211\u4eec\u6b63\u5728\u5236\u4f5c\u4e00\u4e2a\u793e\u4ea4\u804a\u5929\u7684\u5e94\u7528\uff0c\u7b2c\u4e00\u6b65\u8981\u5b9e\u73b0\u4e00\u4e2a\u7528\u6237\u5411\u53e6\u4e00\u4e2a\u7528\u6237\u53d1\u8d77\u804a\u5929\u7684\u529f\u80fd \u9996\u5148\u6211\u4eec\u9700\u8981\u4ecb\u7ecd\u4e00\u4e0b\u5728\u5373\u65f6\u901a\u8baf\u670d\u52a1\u4e2d\u7684 IMClient \u5bf9\u8c61\uff1a IMClient \u5bf9\u5e94\u5b9e\u4f53\u7684\u662f\u4e00\u4e2a\u7528\u6237\uff0c\u5b83\u4ee3\u8868\u7740\u4e00\u4e2a\u7528\u6237\u4ee5\u5ba2\u6237\u7aef\u7684\u8eab\u4efd\u767b\u5f55\u5230\u4e86\u5373\u65f6\u901a\u8baf\u7684\u7cfb\u7edf\u3002","title":"\u4e00\u5bf9\u4e00\u5355\u804a"},{"location":"im/im-beginner/#1-imclient","text":"\u5728 iOS \u548c Android SDK \u4e2d\u4f7f\u7528\u5982\u4e0b\u4ee3\u7801\u521b\u5efa\u51fa\u4e00\u4e2a IMClient : var realtime = new Realtime ({ appId : your-app-id , appKey : your-app-key , plugins : [ TypedMessagesPlugin ], // \u6ce8\u518c\u5bcc\u5a92\u4f53\u6d88\u606f\u63d2\u4ef6 }); // Tom \u7528\u81ea\u5df1\u7684\u540d\u5b57\u4f5c\u4e3a clientId realtime . createIMClient ( Tom ). then ( function ( tom ) { // \u6210\u529f\u767b\u5f55 }). catch ( console . error ); @property ( nonatomic , strong ) AVIMClient * tom ; // clientId \u4e3a Tom tom = [[ AVIMClient alloc ] initWithClientId : @ Tom ] // clientId \u4e3a Tom AVIMClient tom = AVIMClient . getInstance ( Tom ); var realtime = new AVRealtime( your-app-id , your-app-key ); var tom = await realtime.CreateClientAsync( Tom ); \u793a\u4f8b\u4ee3\u7801\u4e2d clientId \u88ab\u8bbe\u7f6e\u4e3a Tom, \u8fd9\u91cc\u6211\u4eec\u9700\u8981\u660e\u786e\u4e00\u4e0b clientId \u7684\u7ea6\u675f\uff1a \u5b83\u5fc5\u987b\u4e3a\u4e00\u4e2a\u5b57\u7b26\u4e32 \u5728\u4e00\u4e2a\u5e94\u7528\u5185\u5168\u5c40\u552f\u4e00 \u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7 64 \u4e2a\u5b57\u7b26 \u6ce8\uff1a JavaScript \u548c C#(Unity3D) SDK \u521b\u5efa IMClient \u6210\u529f\u540c\u65f6\u610f\u5473\u7740\u8fde\u63a5\u4e5f\u5df2\u7ecf\u5efa\u7acb\uff0c\u800c iOS \u548c Android SDK \u5219\u9700\u8981\u989d\u5916\u4e0b\u4e00\u6b65 2.\u5efa\u7acb\u8fde\u63a5","title":"1.\u521b\u5efa IMClient"},{"location":"im/im-beginner/#2","text":"\u5efa\u7acb\u8fde\u63a5\u7684\u542b\u4e49\u662f\uff1a IMClient \u5efa\u7acb\u4e00\u4e2a\u4e8e\u4e91\u7aef\u7684\u957f\u8fde\u63a5\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u5f00\u59cb\u6536\u53d1\u6d88\u606f\u4e86\uff0c\u5e76\u4e14\u53ef\u4ee5\u76d1\u542c\u4e8b\u4ef6\u3002 \u5bf9\u5e94\u7684 SDK \u65b9\u6cd5\u5982\u4e0b\uff1a // Tom \u7528\u81ea\u5df1\u7684\u540d\u5b57\u4f5c\u4e3a clientId, \u5efa\u7acb\u957f\u8fde\u63a5\uff0c\u5e76\u4e14\u83b7\u53d6 IMClient \u5bf9\u8c61\u5b9e\u4f8b realtime . createIMClient ( Tom ). then ( function ( tom ) { // \u6210\u529f\u767b\u5f55 }). catch ( console . error ); // Tom \u521b\u5efa\u4e86\u4e00\u4e2a client\uff0c\u7528\u81ea\u5df1\u7684\u540d\u5b57\u4f5c\u4e3a clientId AVIMClient * tom = [[ AVIMClient alloc ] initWithClientId : @ Tom ]; // Tom \u521b\u5efa\u8fde\u63a5 [ tom openWithCallback : ^ ( BOOL succeeded , NSError * error ) { if ( succeeded ) { // \u6210\u529f\u6253\u5f00\u8fde\u63a5 } }]; // Tom \u521b\u5efa\u4e86\u4e00\u4e2a client\uff0c\u7528\u81ea\u5df1\u7684\u540d\u5b57\u4f5c\u4e3a clientId AVIMClient tom = AVIMClient . getInstance ( Tom ); // Tom \u521b\u5efa\u8fde\u63a5 tom . open ( new AVIMClientCallback () { @Override public void done ( AVIMClient client , AVIMException e ) { if ( e == null ) { // \u6210\u529f\u6253\u5f00\u8fde\u63a5 } } } var realtime = new AVRealtime( your-app-id , your-app-key ); var tom = await realtime.CreateClientAsync( Tom ); \u6ce8\uff1aJavaScript \u548c C#(Unity3D) SDK \u5efa\u7acb\u8fde\u63a5\u6210\u529f\u4e4b\u540e\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2a IMClient \u3002 \u63a8\u8350\u4f7f\u7528\u7684\u65b9\u5f0f\uff1a\u5728\u7528\u6237\u767b\u5f55\u4e4b\u540e\u7528\u5f53\u524d\u7684\u7528\u6237\u540d\u5f53\u505a clientId \u6765\u521b\u5efa IMClient \u5e76\u5efa\u7acb\u8fde\u63a5\u3002 \u6211\u4eec\u63a8\u8350\u5728\u8fde\u63a5\u521b\u5efa\u6210\u529f\u4e4b\u540e\u8ba2\u9605 \u5ba2\u6237\u7aef\u4e8b\u4ef6\u4e0e\u7f51\u7edc\u72b6\u6001\u54cd\u5e94 \uff0c\u9488\u5bf9\u7f51\u7edc\u7684\u5f02\u5e38\u60c5\u51b5\u4f5c\u51fa\u5e94\u6709\u7684 UI \u5c55\u793a\uff0c\u4ee5\u786e\u4fdd\u5e94\u7528\u7684\u5065\u58ee\u6027\u3002","title":"2.\u5efa\u7acb\u8fde\u63a5"},{"location":"im/im-beginner/#3-conversation","text":"\u5bf9\u8bdd( Conversation ) \u662f\u5373\u65f6\u901a\u8baf\u62bd\u8c61\u51fa\u6765\u7684\u6982\u5ff5\uff0c\u5b83\u662f\b\u5ba2\u6237\u7aef\u4e4b\u95f4\u4e92\u53d1\u6d88\u606f\u7684\u8f7d\u4f53\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u901a\u9053\uff0c\b\u6240\u6709\u5728\u8fd9\u4e2a\u5bf9\u8bdd\u5185\u7684\u6210\u5458\u90fd\u53ef\u4ee5\u5728\u8fd9\u4e2a\u5bf9\u8bdd\u5185\u6536\u53d1\u6d88\u606f: \u5bf9\u8bdd( Conversation )\u5bf9\u8bdd\u662f\u6d88\u606f\u7684\u8f7d\u4f53\uff0c\u6240\u6709\u6d88\u606f\u7684\u76ee\u6807\u90fd\u662f\u5bf9\u8bdd\uff0c\u800c\u6240\u6709\u5728\u5bf9\u8bdd\u4e2d\u7684\u6210\u5458\u90fd\u4f1a\u63a5\u6536\u5230\u5bf9\u8bdd\u5185\u4ea7\u751f\u7684\u6d88\u606f\u3002 Tom \u5df2\u7ecf\u5efa\u7acb\u4e86\b\b\u8fde\u63a5\uff0c\u56e0\u6b64\u4ed6\u9700\u8981\u521b\u5efa\u4e00\u4e2a Conversation \u6765\u53d1\u9001\u6d88\u606f\u7ed9 Jerry\uff1a // \u521b\u5efa\u4e0e Jerry \u4e4b\u95f4\u7684\u5bf9\u8bdd return tom . createConversation ({ // \b\u6307\u5b9a\u5bf9\u8bdd\u7684\u6210\u5458\u9664\u4e86\u5f53\u524d\u7528\u6237 Tom(SDK \u4f1a\u9ed8\u8ba4\u628a\u5f53\u524d\b\u7528\u6237\u5f53\u505a\u5bf9\u8bdd\u6210\u5458)\u4e4b\u5916\uff0c\u8fd8\u6709 Jerry members : [ Jerry ], // \u5bf9\u8bdd\u540d\u79f0 name : Tom Jerry , });. catch ( console . error ); // \u521b\u5efa\u4e0e Jerry \u4e4b\u95f4\u7684\u5bf9\u8bdd [ tom createConversationWithName : @ Tom Jerry clientIds : @[ @ Jerry ] callback : ^ ( AVIMConversation * conversation , NSError * error ) { }]; tom . createConversation ( Arrays . asList ( Jerry ), Tom Jerry , null , new AVIMConversationCreatedCallback () { @Override public void done ( AVIMConversation conversation , AVIMException e ) { if ( e == null ) { // \u521b\u5efa\u6210\u529f } } }); var tom = await realtime . CreateClientAsync ( Tom ); var conversation = await tom . CreateConversationAsync ( Jerry , name : Tom Jerry ); \b createConversation \u8fd9\u4e2a\u63a5\u53e3\u4f1a\u76f4\u63a5\u521b\u5efa\u4e00\u4e2a\u5bf9\u8bdd\uff0c\u5e76\u4e14\u8be5\u5bf9\u8bdd\u4f1a\u88ab\u5b58\u50a8\u5728 _Conversation \u8868\u5185\uff0c\u53ef\u4ee5\u6253\u5f00\u63a7\u5236\u53f0- \u5b58\u50a8\u67e5\u770b\u6570\u636e\u3002 createConversation \u7684\u53c2\u6570\u8be6\u89e3: {{ docs.langSpecStart('js') }} \b members : \u5b57\u7b26\u4e32\u6570\u7ec4\uff0c\u5fc5\u8981\u53c2\u6570\uff0c\u5bf9\u8bdd\u7684\u521d\u59cb\u6210\u5458(clientId)\u5217\u8868\uff0c\u9ed8\u8ba4\u5305\u542b\u5f53\u524d clientId name : \u5b57\u7b26\u4e32\uff0c\u53ef\u9009\u53c2\u6570\uff0c\u5bf9\u8bdd\u7684\u540d\u5b57\uff0c\u5982\u679c\u4e0d\u4f20\u9ed8\u8ba4\u503c\u4e3a null unique \uff1a bool \u7c7b\u578b\uff0c\u53ef\u9009\u53c2\u6570\uff0c\u662f\u5426\u552f\u4e00\u5bf9\u8bdd\uff0c\u5f53\u5176\u4e3a true \u65f6\uff0c\u5982\u679c\u5f53\u524d\u5df2\u7ecf\u6709\u76f8\u540c\u6210\u5458\u7684\u5bf9\u8bdd\u5b58\u5728\u5219\u8fd4\u56de\u8be5\u5bf9\u8bdd\uff0c\u5426\u5219\u4f1a\u521b\u5efa\u65b0\u7684\u5bf9\u8bdd {{ docs.langSpecEnd('js') }} {{ docs.langSpecStart('objc') }} name \uff0d \u8868\u793a\u5bf9\u8bdd\u540d\u5b57\uff0c\u53ef\u4ee5\u6307\u5b9a\u4efb\u610f\u6709\u610f\u4e49\u7684\u540d\u5b57\uff0c\u4e5f\u53ef\u4e0d\u586b\u3002 clientIds \uff0d \u8868\u793a\u5bf9\u8bdd\u521d\u59cb\u6210\u5458\uff0c\u53ef\u4e0d\u586b\u3002\u5982\u679c\u586b\u5199\u4e86\u521d\u59cb\u6210\u5458\uff0c\u5219 LeanCloud \u4e91\u7aef\u4f1a\u76f4\u63a5\u7ed9\u8fd9\u4e9b\u6210\u5458\u53d1\u51fa\u9080\u8bf7\uff0c\u7701\u6389\u518d\u4e13\u95e8\u53d1\u4e00\u6b21\u9080\u8bf7\u8bf7\u6c42\u3002 attributes \uff0d \u8868\u793a\u989d\u5916\u5c5e\u6027\uff0cDictionary\uff0c\u652f\u6301\u4efb\u610f\u7684 key/value\uff0c\u53ef\u4e0d\u586b\u3002 options \uff0d \u5bf9\u8bdd\u9009\u9879\uff1a AVIMConversationOptionTransient\uff1a\u804a\u5929\u5ba4\uff0c\u5177\u4f53\u53ef\u4ee5\u53c2\u89c1\u521b\u5efa\u804a\u5929\u5ba4\uff1b AVIMConversationOptionNone\uff1a\u666e\u901a\u5bf9\u8bdd\uff1b AVIMConversationOptionTemporary\uff1a\u4e34\u65f6\u5bf9\u8bdd\uff1b AVIMConversationOptionUnique\uff1a\u6839\u636e\u6210\u5458\uff08clientIds\uff09\u521b\u5efa\u539f\u5b50\u5bf9\u8bdd\u3002\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u9009\u9879\uff0c\u670d\u52a1\u7aef\u4f1a\u4e3a\u76f8\u540c\u7684 clientIds \u521b\u5efa\u65b0\u7684\u5bf9\u8bdd\u3002clientIds \u5373 _Conversation \u8868\u7684 m \u5b57\u6bb5\u3002 callback \uff0d \u7ed3\u679c\u56de\u8c03\uff0c\u5728\u64cd\u4f5c\u7ed3\u675f\u4e4b\u540e\u8c03\u7528\uff0c\u901a\u77e5\u5f00\u53d1\u8005\u6210\u529f\u4e0e\u5426\u3002 {{ docs.langSpecEnd('objc') }} {{ docs.langSpecStart('java') }} members - \u5bf9\u8bdd\u7684\u6210\u5458 name - \u5bf9\u8bdd\u7684\u540d\u5b57 attributes - \u5bf9\u8bdd\u7684\u989d\u5916\u5c5e\u6027 isTransient - \u662f\u5426\u662f\u6682\u6001\u4f1a\u8bdd isUnique - \u5982\u679c\u5df2\u7ecf\u5b58\u5728\u7b26\u5408\u6761\u4ef6\u7684\u4f1a\u8bdd\uff0c\u662f\u5426\u8fd4\u56de\u5df2\u6709\u56de\u8bdd \u4e3a false \u65f6\uff0c\u5219\u4e00\u76f4\u4e3a\u521b\u5efa\u65b0\u7684\u56de\u8bdd \u4e3a true \u65f6\uff0c\u5219\u5148\u67e5\u8be2\uff0c\u5982\u679c\u5df2\u6709\u7b26\u5408\u6761\u4ef6\u7684\u56de\u8bdd\uff0c\u5219\u8fd4\u56de\u5df2\u6709\u7684\uff0c\u5426\u5219\uff0c\u521b\u5efa\u65b0\u7684\u5e76\u8fd4\u56de \u4e3a true \u65f6\uff0c\u4ec5 members \u4e3a\u6709\u6548\u67e5\u8be2\u6761\u4ef6 callback - \u7ed3\u679c\u56de\u8c03\u51fd\u6570 {{ docs.langSpecEnd('java') }} {{ docs.langSpecStart('cs') }} \b members : \u5b57\u7b26\u4e32\u6570\u7ec4\uff0c\u5fc5\u8981\u53c2\u6570\uff0c\u5bf9\u8bdd\u7684\u521d\u59cb\u6210\u5458(clientId)\u5217\u8868\uff0c\u9ed8\u8ba4\u5305\u542b\u5f53\u524d clientId name : \u5b57\u7b26\u4e32\uff0c\u53ef\u9009\u53c2\u6570\uff0c\u5bf9\u8bdd\u7684\u540d\u5b57\uff0c\u5982\u679c\u4e0d\u4f20\u9ed8\u8ba4\u503c\u4e3a null isSystem : bool \u503c\uff0c\u53ef\u9009\u53c2\u6570\uff0c\u662f\u5426\u662f\u670d\u52a1\u53f7 isTransient :bool \u503c\uff0c\u53ef\u9009\u53c2\u6570\uff0c\u662f\u5426\u4e3a\u804a\u5929\u5ba4 isUnique \uff1a bool \u7c7b\u578b\uff0c\u53ef\u9009\u53c2\u6570\uff0c\u662f\u5426\u552f\u4e00\u5bf9\u8bdd\uff0c\u5f53\u5176\u4e3a true \u65f6\uff0c\u5982\u679c\u5f53\u524d\u5df2\u7ecf\u6709\u76f8\u540c\u6210\u5458\u7684\u5bf9\u8bdd\u5b58\u5728\u5219\u8fd4\u56de\u8be5\u5bf9\u8bdd\uff0c\u5426\u5219\u4f1a\u521b\u5efa\u65b0\u7684\u5bf9\u8bdd options \uff1a\u5b57\u5178\u7c7b\u578b\uff0c\u53ef\u9009\u53c2\u6570\uff0c\u989d\u5916\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027 {{ docs.langSpecEnd('cs') }} \u521b\u5efa\u5bf9\u8bdd\u4e4b\u540e\uff0c\u53ef\u4ee5\u83b7\u53d6\u5bf9\u8bdd\u7684\u5185\u7f6e\u5c5e\u6027\uff0c\u4e91\u7aef\u4f1a\u4e3a\u6bcf\u4e00\u4e2a\u5bf9\u8bdd\u751f\u6210\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684 ID \u5c5e\u6027\uff1a Conversation.id \uff0c\u5b83\u662f\u67e5\u8be2\u5bf9\u8bdd\u548c\u83b7\u53d6\u5bf9\u8bdd\u65f6\u5e38\u7528\u7684\u5339\u914d\u5b57\u6bb5\u3002","title":"3.\b\u521b\u5efa\u5bf9\u8bdd Conversation"},{"location":"im/im-beginner/#4","text":"\u5bf9\u8bdd\u5df2\u7ecf\u521b\u5efa\u6210\u529f\u4e86\uff0c\u63a5\u4e0b\u6765 Tom \u53ef\u4ee5\u53d1\u51fa\u7b2c\u4e00\u6761\u6587\u672c\u6d88\u606f\u4e86\uff1a \b var { TextMessage } = require ( leancloud-realtime ); conversation . send ( new TextMessage ( Jerry\uff0c\u8d77\u5e8a\u4e86\uff01 )). then ( function ( message ) { console . log ( Tom Jerry , \u53d1\u9001\u6210\u529f\uff01 ); }). catch ( console . error ); [ conversation sendMessage :[ AVIMTextMessage messageWithText : @ \u8017\u5b50\uff0c\u8d77\u5e8a\uff01 attributes : nil ] callback : ^ ( BOOL succeeded , NSError * error ) { if ( succeeded ) { NSLog ( @ \u53d1\u9001\u6210\u529f\uff01 ); } }]; AVIMTextMessage msg = new AVIMTextMessage (); msg . setText ( Jerry\uff0c\u8d77\u5e8a\u4e86\uff01 ); // \u53d1\u9001\u6d88\u606f conversation . sendMessage ( msg , new AVIMConversationCallback () { @Override public void done ( AVIMException e ) { if ( e == null ) { Log . d ( Tom Jerry , \u53d1\u9001\u6210\u529f\uff01 ); } } }); var textMessage = new AVIMTextMessage( Jerry\uff0c\u8d77\u5e8a\u4e86\uff01 ); await conversation.SendAsync(textMessage); \b conversation.send \u63a5\u53e3\u5b9e\u73b0\u7684\u529f\u80fd\u5c31\u662f\u5411\u5bf9\u8bdd\u4e2d\u53d1\u9001\u4e00\u6761\u6d88\u606f\u3002 Jerry \u53ea\u8981\u5728\u7ebf\u4ed6\u5c31\u4f1a\u6536\u5230\u6d88\u606f\uff0c\u81f3\u6b64 Jerry \u8fd8\u6ca1\u6709\u767b\u573a\uff0c\u90a3\u4e48\u4ed6\u600e\u4e48\b\u63a5\u6536\u6d88\u606f\u5462\uff1f \b","title":"4.\u53d1\u9001\u6d88\u606f"},{"location":"im/im-beginner/#5","text":"\u6211\u4eec\u5728\u53e6\u4e00\u4e2a\u8bbe\u5907\u4e0a\u542f\u52a8\u5e94\u7528\uff0c\u7136\u540e\u4f7f\u7528 Jerry \u5f53\u505a clientId \b\u521b\u5efa AVIMClient \u548c \u5efa\u7acb\u8fde\u63a5\uff08\u53c2\u7167\u524d\u4e24\u7ae0\u8282 Tom \u7684\u793a\u4f8b\u4ee3\u7801\uff09: var { Event } = require ( leancloud-realtime ); // Jerry \u767b\u5f55 realtime . createIMClient ( Jerry ). then ( function ( jerry ) { }). catch ( console . error ); jerry = [[ AVIMClient alloc ] initWithClientId : @ Jerry ]; [ jerry openWithCallback : ^ ( BOOL succeeded , NSError * error ) {}]; //Jerry\u767b\u5f55 AVIMClient jerry = AVIMClient . getInstance ( Jerry ); jerry . open ( new AVIMClientCallback (){ @Override public void done ( AVIMClient client , AVIMException e ){ if ( e == null ){ ... //\u767b\u5f55\u6210\u529f\u540e\u7684\u903b\u8f91 } } }); var realtime = new AVRealtime( your-app-id , your-app-key ); var jerry = await realtime.CreateClientAsync( Jerry ); \u7d27\u63a5\u7740\u8ba9 Jerry \u5f00\u59cb\u8ba2\u9605\u5bf9\u8bdd\u52a0\u5165\u7684\u4e8b\u4ef6\u901a\u77e5\uff1a // \u5f53\u524d\u7528\u6237\u88ab\u6dfb\u52a0\u81f3\u67d0\u4e2a\u5bf9\u8bdd jerry . on ( Event . INVITED , function invitedEventHandler ( payload , conversation ) { console . log ( payload . invitedBy , conversation . id ); }); jerry . delegate = self ; -( void ) conversation: ( AVIMConversation * ) conversation invitedByClientId: ( NSString * ) clientId { NSLog ( @ %@ , [ NSString stringWithFormat : @ \u5f53\u524d ClientId(Jerry) \u88ab %@ \u9080\u8bf7\uff0c\u52a0\u5165\u4e86\u5bf9\u8bdd , clientId ]); } public class CustomConversationEventHandler extends AVIMConversationEventHandler { @Override public void onInvited ( AVIMClient client , AVIMConversation conversation , String invitedBy ) { // \u5f53\u524d ClientId(Jerry) \u88ab\u9080\u8bf7\u5230\u5bf9\u8bdd\uff0c\u6267\u884c\u6b64\u5904\u903b\u8f91 } } AVIMMessageManager . registerDefaultMessageHandler ( new CustomMessageHandler ()); var jerry =await realtime.CreateClientAsync( Jerry ); jerry.OnInvited += (sender, args) = { var invitedBy = args.InvitedBy; var conversationId = args.ConversationId; }; \u4e3a Jerry \u6dfb\u52a0\u4e86\u52a0\u5165\u5bf9\u8bdd\u7684\u4e8b\u4ef6\u8ba2\u9605\u4e4b\u540e\uff0c\u7ee7\u7eed\u4e3a Jerry \u8ba2\u9605\u6d88\u606f\u63a5\u6536\u7684\u4e8b\u4ef6\uff1a var { Event } = require ( leancloud-realtime ); // Jerry \u767b\u5f55 realtime . createIMClient ( Jerry ). then ( function ( jerry ) { // \u5f53\u524d\u7528\u6237\u6536\u5230\u4e86\u67d0\u4e00\u6761\u6d88\u606f jerry . on ( Event . MESSAGE , function ( message , conversation ) { console . log ( Message received: + message . text ); }); }). catch ( console . error ); jerry . delegate = self ; #pragma mark - AVIMClientDelegate // \u63a5\u6536\u6d88\u606f\u7684\u56de\u8c03\u51fd\u6570 - ( void ) conversation: ( AVIMConversation * ) conversation didReceiveTypedMessage: ( AVIMTypedMessage * ) message { NSLog ( @ %@ , message . text ); // Jerry\uff0c\u8d77\u5e8a\u4e86\uff01 } public static class CustomMessageHandler extends AVIMMessageHandler { //\u63a5\u6536\u5230\u6d88\u606f\u540e\u7684\u5904\u7406\u903b\u8f91 @Override public void onMessage ( AVIMMessage message , AVIMConversation conversation , AVIMClient client ){ if ( message instanceof AVIMTextMessage ){ Log . d ((( AVIMTextMessage ) message ). getText ()); // Jerry\uff0c\u8d77\u5e8a\u4e86 } } } AVIMMessageManager . registerDefaultMessageHandler ( new CustomMessageHandler ()); jerry.OnMessageReceived += Jerry_OnMessageReceived; private void Jerry_OnMessageReceived(object sender, AVIMMessageEventArgs e) { if (e.Message is AVIMTextMessage) { var textMessage = (AVIMTextMessage)e.Message; // textMessage.ConversationId \u662f\u8be5\u6761\u6d88\u606f\u6240\u5c5e\u4e8e\u7684\u5bf9\u8bdd Id // textMessage.TextContent \u662f\u8be5\u6587\u672c\u6d88\u606f\u7684\u6587\u672c\u5185\u5bb9 // textMessage.FromClientId \u662f\u6d88\u606f\u53d1\u9001\u8005\u7684 client Id } } \u800c\u5f53 Tom \u521b\u5efa\u4e86\u5bf9\u8bdd\u4e4b\u540e\uff0cJerry \u4f1a\b\u8fd9\u4e00\u7aef\u4f1a\u7acb\u5373\u89e6\u53d1 INVITED \uff08\u66f4\u591a\u5173\u4e8e INVITED \u7684\u63cf\u8ff0\u5728 \u6210\u5458\u53d8\u66f4\u7684\u4e8b\u4ef6\u901a\u77e5\u603b\u7ed3 \uff09\uff0c\b\u6b64\u65f6\u5ba2\u6237\u7aef\u53ef\u4ee5\u505a\u51fa\u4e00\u4e9b UI \u5c55\u793a\uff0c\b\b\u5f15\u5bfc\u7528\u6237\u52a0\u8f7d\u804a\u5929\u7684\u754c\u9762\uff0c\u7d27\u63a5\u7740 Tom \u53d1\u9001\u4e86\u6d88\u606f\u001d\uff0c\u5219\u4f1a\u89e6\u53d1 Jerry MESSAGE \uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u53ef\u4ee5\u76f4\u63a5\u5728\u804a\u5929\u754c\u9762\u7684\u6d88\u606f\u5217\u8868\u91cc\u9762\u6e32\u67d3\u8fd9\u6761\u6d88\u606f\u4e86\u3002 \u5bf9\u5e94\u7684\u65f6\u5e8f\u56fe\u5982\u4e0b: Tom- Cloud: 1.Tom \u5c06 Jerry \u52a0\u5165\u5bf9\u8bdd Cloud-- Jerry: 2.\u4e0b\u53d1\u901a\u77e5\uff1a\u4f60\u88ab\u9080\u8bf7\u52a0\u5165\u5bf9\u8bdd Jerry-- UI: 3.\u52a0\u8f7d\u804a\u5929\u7684 UI \u754c\u9762 Tom- Cloud: 4.\u53d1\u9001\u6d88\u606f Cloud-- Jerry: 5.\u4e0b\u53d1\u901a\u77e5\uff1a\u63a5\u6536\u5230\u6709\u65b0\u6d88\u606f Jerry-- UI: 6.\u663e\u793a\u6536\u5230\u7684\u6d88\u606f\u5185\u5bb9","title":"5.\b\u63a5\u6536\u6d88\u606f"},{"location":"im/im-beginner/#_5","text":"\u591a\u4eba\u7fa4\u804a\u4e0e\u5355\u804a\u5341\u5206\u63a5\u8fd1\uff0c\u5728\u4e00\u4e2a\u73b0\u6709\u5bf9\u8bdd\u4e0a\u52a0\u5165\u66f4\u591a\u7684\u6210\u5458\u5373\u53ef\u8f6c\u5316\u4e3a\u7fa4\u804a\uff1a","title":"\u591a\u4eba\u7fa4\u804a"},{"location":"im/im-beginner/#1","text":"\u591a\u4eba\u7fa4\u804a\u7684\u5bf9\u8bdd\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u4e24\u79cd\u65b9\u5f0f\u5b9e\u73b0\uff1a \u5411\u73b0\u6709\u5bf9\u8bdd\u4e2d\u6dfb\u52a0\u66f4\u591a\u6210\u5458 \u91cd\u65b0\u521b\u5efa\u4e00\u4e2a\u5bf9\u8bdd\uff0c\u5e76\u5728\u521b\u5efa\u7684\u65f6\u5019\u6307\u5b9a\u81f3\u5c11 2 \u540d\u6210\u5458 \b\u9996\u5148\u6211\u4eec\u5b9e\u73b0\u7b2c\u4e00\u79cd\u65b9\u5f0f\uff1a \u5411\u73b0\u6709\u5bf9\u8bdd\u4e2d\u6dfb\u52a0\u66f4\u591a\u6210\u5458 \uff0c\u5c06\u5176\u8f6c\u5316\u6210\u4e00\u4e2a\u7fa4\u804a\u3002 Tom \u7ee7\u7eed\u6dfb\u52a0 Mary \u5230\u5bf9\u8bdd\u4e2d\uff1a tom . getConversation ( CONVERSATION_ID ). then ( function ( conversation ) { return conversation . add ([ Mary ]); }). then ( function ( conversation ) { console . log ( \u6dfb\u52a0\u6210\u529f , conversation . members ); // \u6b64\u65f6\u5bf9\u8bdd\u6210\u5458\u4e3a: [ Mary , Tom , Jerry ] }). catch ( console . error . bind ( console )); AVIMConversationQuery * query = [ self . client conversationQuery ]; [ query getConversationById : @ CONVERSATION_ID callback : ^ ( AVIMConversation * conversation , NSError * error ) { // Jerry \u9080\u8bf7 Mary \u5230\u4f1a\u8bdd\u4e2d [ conversation addMembersWithClientIds : @[ @ Mary ] callback : ^ ( BOOL succeeded , NSError * error ) { if ( succeeded ) { NSLog ( @ \u9080\u8bf7\u6210\u529f\uff01 ); } }]; }]; AVIMClient jerry = AVIMClient . getInstance ( Jerry ); final AVIMConversation conv = client . getConversation ( CONVERSATION_ID ); conv . addMembers ( Arrays . asList ( Mary ), new AVIMConversationCallback () { @Override public void done ( AVIMException e ) { // \u6dfb\u52a0\u6210\u529f } }); var tom = await realtime.CreateClientAsync(); var conversation = await tom.GetConversationAsync( CONVERSATION_ID ); await tom.InviteAsync(conversation, Mary ); \u800c Jerry \u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801\u4e5f\u80fd\u968f\u65f6\u77e5\u9053\u5f53\u524d\u5bf9\u8bdd\u8fd8\u6709\u8c01\u52a0\u8fdb\u6765\u4e86\uff1a var { Event } = require ( leancloud-realtime ); // Jerry \u767b\u5f55 realtime . createIMClient ( Jerry ). then ( function ( jerry ) { // \u6709\u7528\u6237\u88ab\u6dfb\u52a0\u81f3\u67d0\u4e2a\u5bf9\u8bdd jerry . on ( Event . MEMBERS_JOINED , function membersjoinedEventHandler ( payload , conversation ) { console . log ( payload . members , payload . invitedBy , conversation . id ); }); }); }). catch ( console . error ); -( void ) maryNoticedWhenJerryInviteMary { // Mary \u521b\u5efa\u4e00\u4e2a client\uff0c\u7528\u81ea\u5df1\u7684\u540d\u5b57\u4f5c\u4e3a clientId self . client = [[ AVIMClient alloc ] initWithClientId : @ Mary ]; self . client . delegate = self ; [ self . client openWithCallback : ^ ( BOOL succeeded , NSError * error ) { // \u767b\u5f55\u6210\u529f }]; } #pragma mark - AVIMClientDelegate - ( void ) conversation: ( AVIMConversation * ) conversation membersAdded: ( NSArray * ) clientIds byClientId: ( NSString * ) clientId { NSLog ( @ %@ , [ NSString stringWithFormat : @ %@ \u52a0\u5165\u5230\u5bf9\u8bdd\uff0c\u64cd\u4f5c\u8005\u4e3a\uff1a%@ ,[ clientIds objectAtIndex : 0 ], clientId ]); } public static class CustomMessageHandler extends AVIMMessageHandler { @Override public void onMemberJoined ( AVIMClient client , AVIMConversation conversation , List String members , String invitedBy ) { // \u624b\u673a\u5c4f\u5e55\u4e0a\u4f1a\u663e\u793a\u4e00\u5c0f\u6bb5\u6587\u5b57\uff1aMary \u52a0\u5165\u5230 551260efe4b01608686c3e0f \uff1b\u64cd\u4f5c\u8005\u4e3a\uff1aTom Toast . makeText ( AVOSCloud . applicationContext , members + \u52a0\u5165\u5230 + conversation . getConversationId () + \uff1b\u64cd\u4f5c\u8005\u4e3a\uff1a + invitedBy , Toast . LENGTH_SHORT ). show (); } } AVIMMessageManager . registerDefaultMessageHandler ( new CustomMessageHandler ()); jerry.OnMembersJoined += OnMembersJoined; private void OnMembersJoined(object sender, AVIMOnInvitedEventArgs e) { // e.InvitedBy \u662f\u8be5\u9879\u64cd\u4f5c\u7684\u53d1\u8d77\u4eba, e.ConversationId \u662f\u8be5\u9879\u64cd\u4f5c\u9488\u5bf9\u7684\u5bf9\u8bdd Id Debug.Log(string.Format( {0} \u9080\u8bf7\u4e86 {1} \u52a0\u5165\u4e86 {2} \u5bf9\u8bdd , e.InvitedBy,e.JoinedMembers, e.ConversationId)); } {{ docs.langSpecStart('js') }} \u5176\u4e2d payload \u53c2\u6570\u5305\u542b\u5982\u4e0b\u5185\u5bb9\uff1a members : \u5b57\u7b26\u4e32\u6570\u7ec4, \u88ab\u6dfb\u52a0\u7684\u7528\u6237 clientId \u5217\u8868 invitedBy \u5b57\u7b26\u4e32, \u9080\u8bf7\u8005 clientId {{ docs.langSpecEnd('js') }} {{ docs.langSpecStart('cs') }} \u5176\u4e2d AVIMOnInvitedEventArgs \u53c2\u6570\u5305\u542b\u5982\u4e0b\u5185\u5bb9\uff1a 1. InvitedBy : \u6539\u64cd\u4f5c\u7684\u53d1\u8d77\u8005 2. JoinedMembers \uff1a\u6b64\u6b21\u52a0\u5165\u5bf9\u8bdd\u7684\u5305\u542b\u7684\u6210\u5458\u5217\u8868 3. ConversationId \uff1a\u88ab\u64cd\u4f5c\u7684\u5bf9\u8bdd {{ docs.langSpecEnd('cs') }} \u5982\u4e0b\u65f6\u5e8f\u56fe\u53ef\u4ee5\u7b80\u5355\u7684\u6982\u62ec\u4e0a\u8ff0\u6d41\u7a0b\uff1a Tom- Cloud: 1.\u6dfb\u52a0 Mary Cloud- Tom: 2.\u4e0b\u53d1\u901a\u77e5\uff1aMary \u88ab\u4f60\u9080\u8bf7\u52a0\u5165\u4e86\u5bf9\u8bdd Cloud-- Mary: 2.\u4e0b\u53d1\u901a\u77e5\uff1a\u4f60\u88ab Tom \u9080\u8bf7\u52a0\u5165\u5bf9\u8bdd Cloud-- Jerry: 2.\u4e0b\u53d1\u901a\u77e5: Mary \u88ab Tom \u9080\u8bf7\u52a0\u5165\u4e86\u5bf9\u8bdd \u800c Mary \u5982\u679c\u5728\u53e6\u4e00\u53f0\u8bbe\u5907\u4e0a\u767b\u5f55\u4e86\uff0cTa \u53ef\u4ee5\u53c2\u7167 \u4e00\u5bf9\u4e00\u5355\u804a \b\u4e2d Jerry \u7684\u505a\u6cd5\u76d1\u542c INVITED \u4e8b\u4ef6\uff0c\u5c31\u53ef\u4ee5\u81ea\u5df1\u88ab\u9080\u8bf7\u5230\u4e86\u4e00\u4e2a\u5bf9\u8bdd\u5f53\u4e2d\u3002 \b\u800c \u91cd\u65b0\u521b\u5efa\u4e00\u4e2a\u5bf9\u8bdd\uff0c\u5e76\u5728\u521b\u5efa\u7684\u65f6\u5019\u6307\u5b9a\u81f3\u5c11\u4e3a 2 \u7684\u6210\u5458\u6570\u91cf \u7684\u65b9\u5f0f\u5982\u4e0b\uff1a tom . createConversation ({ // \b\b\u521b\u5efa\u7684\u65f6\u5019\u76f4\u63a5\u6307\u5b9a \bJerry \u548c Mary \u4e00\u8d77\u52a0\u5165\u591a\u4eba\u7fa4\u804a\uff0c\u5f53\u7136\u6839\u636e\u9700\u6c42\u53ef\u4ee5\u6dfb\u52a0\u66f4\u591a\u6210\u5458 members : [ Jerry , Mary ], // \u5bf9\u8bdd\u540d\u79f0 name : Tom Jerry friends , }). catch ( console . error ); // Jerry \u5efa\u7acb\u4e86\u4e0e\u670b\u53cb\u4eec\u7684\u4f1a\u8bdd NSArray * friends = @[ @ Jerry , @ Mary ] ; [ tom createConversationWithName : @ Tom Jerry friends clientIds : friends callback : ^ ( AVIMConversation * conversation , NSError * error ) { if ( ! error ) { NSLog ( @ \u521b\u5efa\u6210\u529f ); } }]; tom . createConversation ( Arrays . asList ( Jerry , Mary ), Tom Jerry friends , null , new AVIMConversationCreatedCallback () { @Override public void done ( AVIMConversation conversation , AVIMException e ) { if ( e == null ) { // \u521b\u5efa\u6210\u529f } } }); var conversation = await tom.CreateConversationAsync(new string[]{ Jerry , Mary }, Tom Jerry friends );","title":"1.\u521b\u5efa\u591a\u4eba\u7fa4\u804a\b\u5bf9\u8bdd"},{"location":"im/im-beginner/#2_1","text":"\u7fa4\u804a\u548c\u5355\u804a\u4e00\u6837\uff0c\u5bf9\u8bdd\u4e2d\u7684\u6210\u5458\u90fd\u4f1a\u63a5\u6536\u5230\u5bf9\u8bdd\u5185\u4ea7\u751f\u7684\u6d88\u606f\u3002 Tom \b\u5411\u7fa4\u804a\u5bf9\u8bdd\u53d1\u9001\u4e86\u6d88\u606f\uff1a conversation . send ( new TextMessage ( \u5927\u5bb6\u597d\uff0c\u6b22\u8fce\u6765\u5230\u6211\u4eec\u7684\u7fa4\u804a\b\u5bf9\u8bdd )); [ conversation sendMessage :[ AVIMTextMessage messageWithText : @ \u5927\u5bb6\u597d\uff0c\u6b22\u8fce\u6765\u5230\u6211\u4eec\u7684\u7fa4\u804a\b\u5bf9\u8bdd\uff01 attributes : nil ] callback : ^ ( BOOL succeeded , NSError * error ) { if ( succeeded ) { NSLog ( @ \u53d1\u9001\u6210\u529f\uff01 ); } }]; AVIMTextMessage msg = new AVIMTextMessage (); msg . setText ( \u5927\u5bb6\u597d\uff0c\u6b22\u8fce\u6765\u5230\u6211\u4eec\u7684\u7fa4\u804a\b\u5bf9\u8bdd\uff01 ); // \u53d1\u9001\u6d88\u606f conversation . sendMessage ( msg , new AVIMConversationCallback () { @Override public void done ( AVIMException e ) { if ( e == null ) { Log . d ( \u7fa4\u804a , \u53d1\u9001\u6210\u529f\uff01 ); } } }); await conversation.SendAsync( \u5927\u5bb6\u597d\uff0c\u6b22\u8fce\u6765\u5230\u6211\u4eec\u7684\u7fa4\u804a\b\u5bf9\u8bdd\uff01 ); \u800c Jerry \u548c Mary \u90fd\u4f1a\u6709 Event.MESSAGE \u4e8b\u4ef6\u89e6\u53d1\uff0c\u5229\u7528\u5b83\u6765\u63a5\u6536\u7fa4\u804a\u6d88\u606f\uff0c\u8fd9\u4e00\u70b9\u4e0e\u4e00\u5bf9\u4e00\u5355\u804a\u6ca1\u533a\u522b\u3002","title":"2.\u7fa4\u53d1\u6d88\u606f"},{"location":"im/im-beginner/#_6","text":"\u521a\u624d\u7684\u4ee3\u7801\u6f14\u793a\u7684\u662f\u6dfb\u52a0\u65b0\u6210\u5458\uff0c\u800c\u5bf9\u5e94\u7684\u5220\u9664\u6210\u5458\u7684\u4ee3\u7801\u5982\u4e0b\uff1a Tom \u53c8\u628a Mary \u8e22\u51fa\u5bf9\u8bdd\u4e86: conversation . remove ([ Mary ]). then ( function ( conversation ) { console . log ( \u79fb\u9664\u6210\u529f , conversation . members ); }). catch ( console . error . bind ( console )); [ conversation removeMembersWithClientIds : @[ @ Mary ] callback : ^ ( BOOL succeeded , NSError * error ) { if ( succeeded ) { NSLog ( @ \u8e22\u4eba\u6210\u529f\uff01 ); } }]; conv . kickMembers ( Arrays . asList ( Mary ), new AVIMConversationCallback (){ @Override public void done ( AVIMException e ){ } }); await conversation.RemoveMembersAsync( Mary ); \u6267\u884c\u4e86\u8fd9\u6bb5\u4ee3\u7801\u4e4b\u540e\u4f1a\u89e6\u53d1\u5982\u4e0b\u6d41\u7a0b\uff1a Tom- Cloud: 1. \u5bf9\u8bdd\u4e2d\u79fb\u9664 Mary Cloud-- Mary: 2. \u4e0b\u53d1\u901a\u77e5\uff1a\u4f60\u88ab Tom \u4ece\u5bf9\u8bdd\u4e2d\u5254\u9664\u4e86 Cloud-- Jerry: 2. \u4e0b\u53d1\u901a\u77e5\uff1aMary \u88ab Tom \u79fb\u9664 Cloud-- Tom: 2. \u4e0b\u53d1\u901a\u77e5\uff1aMary \u88ab\u79fb\u9664\u4e86\u5bf9\u8bdd","title":"\u5c06\u4ed6\u4eba\u8e22\u51fa\u5bf9\u8bdd"},{"location":"im/im-beginner/#_7","text":"\u7d27\u63a5\u7740 William \u901a\u8fc7 Conversation.id \u4ed6\u81ea\u5df1\u4e3b\u52a8\u52a0\u5165\u5bf9\u8bdd\uff1a \u6ce8\u610f\uff0c\u5982\u4e0b\u4ee3\u7801\u8fd0\u884c\u7684\u524d\u63d0\u6709\u51e0\u4e2a\u524d\u63d0\uff1a William \u9700\u8981\u53c2\u7167\u524d\u9762\u7ae0\u8282\u91cc\u9762\u7684\u521b\u5efa\u4e86\u4e00\u4e2a IMClient \u7684\u5b9e\u4f8b\uff0c\u5e76\u4e14\u786e\u4fdd\u5df2\u7ecf\u4e0e\u4e91\u7aef\u5efa\u7acb\u8fde\u63a5\u3002 590aa654fab00f41dda86f51 \u662f\u4e00\u4e2a\u5728 _Conversation \u8868\u91cc\u9762\u771f\u662f\u5b58\u5728\u7684\u5bf9\u8bdd Id\u3002 william . getConversation ( 590aa654fab00f41dda86f51 ). then ( function ( conversation ) { return conversation . join (); }). then ( function ( conversation ) { console . log ( \u52a0\u5165\u6210\u529f , conversation . members ); // \u52a0\u5165\u6210\u529f [ William , Tom , Jerry ] }). catch ( console . error . bind ( console )); AVIMConversationQuery * query = [ william conversationQuery ]; [ query getConversationById : @ 590aa654fab00f41dda86f51 callback : ^ ( AVIMConversation * conversation , NSError * error ) { [ conversation joinWithCallback : ^ ( BOOL succeeded , NSError * error ) { if ( succeeded ) { NSLog ( @ \u52a0\u5165\u6210\u529f\uff01 ); } }]; }]; AVIMClient william = AVIMClient . getInstance ( William ); AVIMConversation conv = client . getConversation ( 590aa654fab00f41dda86f51 ); conv . join ( new AVIMConversationCallback (){ @Override public void done ( AVIMException e ){ if ( e == null ){ //\u52a0\u5165\u6210\u529f } } }); await william.JoinAsync( 590aa654fab00f41dda86f51 ); \u6267\u884c\u4e86\u8fd9\u6bb5\u4ee3\u7801\u4e4b\u540e\u4f1a\u89e6\u53d1\u5982\u4e0b\u6d41\u7a0b\uff1a William- Cloud: 1.\u52a0\u5165\u5bf9\u8bdd Cloud-- William: 2. \u4e0b\u53d1\u901a\u77e5: \u4f60\u5df2\u52a0\u5165\u5bf9\u8bdd Cloud-- Tom: 2. \u4e0b\u53d1\u901a\u77e5\uff1aWilliam \u52a0\u5165\u5bf9\u8bdd Cloud-- Jerry: 2. \u4e0b\u53d1\u901a\u77e5\uff1aWilliam \u52a0\u5165\u5bf9\u8bdd \u5176\u4ed6\u4eba\u5219\u901a\u8fc7\u8ba2\u9605 MEMBERS_JOINED \u6765\u63a5\u6536 William \u52a0\u5165\u5bf9\u8bdd\u7684\u901a\u77e5: jerry . on ( Event . MEMBERS_JOINED , function membersJoinedEventHandler ( payload , conversation ) { console . log ( payload . members , payload . invitedBy , conversation . id ); }); - ( void ) conversation: ( AVIMConversation * ) conversation membersAdded: ( NSArray * ) clientIds byClientId: ( NSString * ) clientId { NSLog ( @ %@ , [ NSString stringWithFormat : @ %@ \u52a0\u5165\u5230\u5bf9\u8bdd\uff0c\u64cd\u4f5c\u8005\u4e3a\uff1a%@ ,[ clientIds objectAtIndex : 0 ], clientId ]); } @Override public void onMemberJoined ( AVIMClient client , AVIMConversation conversation , List String members , String invitedBy ) { // \u624b\u673a\u5c4f\u5e55\u4e0a\u4f1a\u663e\u793a\u4e00\u5c0f\u6bb5\u6587\u5b57\uff1aTom \u52a0\u5165\u5230 551260efe4b01608686c3e0f \uff1b\u64cd\u4f5c\u8005\u4e3a\uff1aTom Toast . makeText ( AVOSCloud . applicationContext , members + \u52a0\u5165\u5230 + conversation . getConversationId () + \uff1b\u64cd\u4f5c\u8005\u4e3a\uff1a + invitedBy , Toast . LENGTH_SHORT ). show (); } jerry.OnMembersJoined += OnMembersJoined; private void OnMembersJoined(object sender, AVIMOnInvitedEventArgs e) { // e.InvitedBy \u662f\u8be5\u9879\u64cd\u4f5c\u7684\u53d1\u8d77\u4eba, e.ConversationId \u662f\u8be5\u9879\u64cd\u4f5c\u9488\u5bf9\u7684\u5bf9\u8bdd Id Debug.Log(string.Format( {0} \u52a0\u5165\u4e86 {1} \u5bf9\u8bdd\uff0c\u64cd\u4f5c\u8005\u662f {2} ,e.JoinedMembers, e.ConversationId, e.InvitedBy)); }","title":"\u52a0\u5165\u5bf9\u8bdd"},{"location":"im/im-beginner/#_8","text":"Jerry \u4e0d\u60f3\u7ee7\u7eed\u5446\u5728\u8fd9\u4e2a\u5bf9\u8bdd\u91cc\u9762\u4e86\uff0c\u4ed6\u9009\u62e9\u9000\u51fa\u5bf9\u8bdd: conversation . quit (). then ( function ( conversation ) { console . log ( \u9000\u51fa\u6210\u529f , conversation . members ); // \u9000\u51fa\u6210\u529f [ William , Tom ] }). catch ( console . error . bind ( console )); [ conversation quitWithCallback : ^ ( BOOL succeeded , NSError * error ) { if ( succeeded ) { NSLog ( @ \u9000\u51fa\u6210\u529f\uff01 ); } }]; conversation . quit ( new AVIMConversationCallback (){ @Override public void done ( AVIMException e ){ if ( e == null ){ //\u9000\u51fa\u6210\u529f } } }); jerry.LeaveAsync(conversation); // \u6216\u8005\u4f20\u5165 conversation id jerry.LeaveAsync( 590aa654fab00f41dda86f51 ); \u6267\u884c\u4e86\u8fd9\u6bb5\u4ee3\u7801\u4e4b\u540e\u4f1a\u89e6\u53d1\u5982\u4e0b\u6d41\u7a0b\uff1a Jerry- Cloud: 1. \u79bb\u5f00\u5bf9\u8bdd Cloud-- Jerry: 2. \u4e0b\u53d1\u901a\u77e5\uff1a\u4f60\u5df2\u79bb\u5f00\u5bf9\u8bdd Cloud-- Mary: 2. \u4e0b\u53d1\u901a\u77e5\uff1aJerry \u5df2\u79bb\u5f00\u5bf9\u8bdd Cloud-- Tom: 2. \u4e0b\u53d1\u901a\u77e5\uff1aJerry \u5df2\u79bb\u5f00\u5bf9\u8bdd \u800c\u5176\u4ed6\u4eba\u9700\u8981\u901a\u8fc7\u8ba2\u9605 MEMBERS_LEFT \u6765\u63a5\u6536 Jerry \u79bb\u5f00\u5bf9\u8bdd\u7684\u4e8b\u4ef6\u901a\u77e5: mary . on ( Event . MEMBERS_LEFT , function membersLeftEventHandler ( payload , conversation ) { console . log ( payload . members , payload . invitedBy , conversation . id ); }); // mary \u767b\u5f55\u4e4b\u540e\uff0cjerry \u9000\u51fa\u4e86\u5bf9\u8bdd\uff0c\u5728 mary \u6240\u5728\u7684\u5ba2\u6237\u7aef\u5c31\u4f1a\u6fc0\u53d1\u4ee5\u4e0b\u56de\u8c03 -( void ) conversation: ( AVIMConversation * ) conversation membersRemoved: ( NSArray * ) clientIds byClientId: ( NSString * ) clientId { NSLog ( @ %@ , [ NSString stringWithFormat : @ %@ \u79bb\u5f00\u4e86\u5bf9\u8bdd\uff0c \u64cd\u4f5c\u8005\u4e3a\uff1a%@ ,[ clientIds objectAtIndex : 0 ], clientId ]); } @Override public void onMemberLeft ( AVIMClient client , AVIMConversation conversation , List String members , String kickedBy ) { // \u6709\u5176\u4ed6\u6210\u5458\u79bb\u5f00\u65f6\uff0c\u6267\u884c\u6b64\u5904\u903b\u8f91 } mary.OnMembersLeft += OnMembersLeft; private void OnMembersLeft(object sender, AVIMOnMembersLeftEventArgs e) { // e.InvitedBy \u662f\u8be5\u9879\u64cd\u4f5c\u7684\u53d1\u8d77\u4eba, e.ConversationId \u662f\u8be5\u9879\u64cd\u4f5c\u9488\u5bf9\u7684\u5bf9\u8bdd Id Debug.Log(string.Format( {0} \u79bb\u5f00\u4e86 {1} \u5bf9\u8bdd\uff0c\u64cd\u4f5c\u8005\u662f {2} ,e.JoinedMembers, e.ConversationId, e.InvitedBy)); }","title":"\u9000\u51fa\u5bf9\u8bdd"},{"location":"im/im-beginner/#_9","text":"\u524d\u9762\u7684\u65f6\u5e8f\u56fe\u548c\u4ee3\u7801\u9488\u5bf9\u6210\u5458\u53d8\u66f4\u7684\u64cd\u4f5c\u505a\u4e86\u9010\u6b65\u7684\u5206\u6790\u548c\u9610\u8ff0\uff0c\u4e3a\u4e86\u786e\u4fdd\u5f00\u53d1\u8005\u80fd\u591f\u51c6\u786e\u7684\u4f7f\u7528\u4e8b\u4ef6\u901a\u77e5\uff0c\u5982\u4e0b\u8868\u683c\u505a\u4e86\u4e00\u4e2a\u7edf\u4e00\u7684\u5f52\u7c7b\u548c\u5212\u5206: \u5047\u8bbe Tom \u548c Jerry \u5df2\u7ecf\u5728\u5bf9\u8bdd\u5185\u4e86\uff1a \u64cd\u4f5c|Tom|Jerry|Mary|William | | | Tom \u6dfb\u52a0 Mary| MEMBERS_JOINED | MEMBERS_JOINED | INVITED |/ Tom \u5254\u9664 Mary| MEMBERS_LEFT | MEMBERS_LEFT | KICKED |/ William \u52a0\u5165| MEMBERS_JOINED | MEMBERS_JOINED |/| MEMBERS_JOINED Jerry \u4e3b\u52a8\u9000\u51fa| MEMBERS_LEFT | MEMBERS_LEFT |/| MEMBERS_LEFT","title":"\u6210\u5458\u53d8\u66f4\u7684\u4e8b\u4ef6\u901a\u77e5\u603b\u7ed3"},{"location":"im/im-beginner/#_10","text":"\u5373\u65f6\u901a\u8baf\u670d\u52a1\u63d0\u4f9b\u7684\u529f\u80fd\u5c31\u662f\u8ba9\u4e00\u4e2a\u5ba2\u6237\u7aef\u4e0e\u5176\u4ed6\u5ba2\u6237\u7aef\u8fdb\u884c\u5728\u7ebf\u7684\u6d88\u606f\u4e92\u53d1\uff0c\u5bf9\u5e94\u4e0d\u540c\u7684\u4f7f\u7528\u573a\u666f\u9664\u53bb\u521a\u624d\u524d\u4e24\u7ae0\u8282\u4ecb\u7ecd\u7684 \u4e00\u5bf9\u4e00\u5355\u804a \u548c \u591a\u4eba\u7fa4\u804a \u4e4b\u5916,\u5373\u65f6\u901a\u8baf\u4e5f\u652f\u6301\u4f46\u4e0d\u9650\u4e8e\u5982\u4e0b\u4e2d\u6d41\u884c\u7684\u901a\u8baf\u6a21\u5f0f\uff1a \u552f\u4e00\u804a\u5929\u5ba4 \u5f00\u653e\u804a\u5929\u5ba4\uff0c\u4f8b\u5982\u76f4\u64ad\u4e2d\u7684\u5f39\u5e55\u804a\u5929\u5ba4\u3002 \u670d\u52a1\u53f7\uff0c\u4f8b\u5982\u516c\u4f17\u53f7\uff0c\u6e38\u620f GM \u5728\u7ebf\u7fa4\u53d1\u901a\u77e5 \b \u5173\u4e8e\u4e0a\u8ff0\u7684\u51e0\u79cd\u573a\u666f\u5bf9\u5e94\u7684\u5b9e\u73b0\uff0c\u8bf7\u53c2\u9605 \u8fdb\u9636\u529f\u80fd#\b\u5bf9\u8bdd\u7c7b\u578b \u3002","title":"\u5176\u4ed6\u5bf9\u8bdd\u7c7b\u578b\uff08\u804a\u5929\u6a21\u5f0f\uff09"},{"location":"im/im-beginner/#_11","text":"\u4e00\u4e2a\u804a\u5929\u5e94\u7528\u5728\u9996\u9875\u5f80\u5f80\u4f1a\u5c55\u793a\u5f53\u524d\u7528\u6237\u52a0\u5165\u7684\uff0c\u6700\u6d3b\u8dc3\u7684\u51e0\u4e2a\u5bf9\u8bdd\u3002","title":"\u5bf9\u8bdd"},{"location":"im/im-beginner/#_12","text":"tom . getQuery (). containsMembers ([ Tom ]). find (). then ( function ( conversations ) { // \u9ed8\u8ba4\u6309\u6bcf\u4e2a\u5bf9\u8bdd\u7684\u6700\u540e\u66f4\u65b0\u65e5\u671f\uff08\u6536\u5230\u6700\u540e\u4e00\u6761\u6d88\u606f\u7684\u65f6\u95f4\uff09\u5012\u5e8f\u6392\u5217 conversations . map ( function ( conversation ) { console . log ( conversation . lastMessageAt . toString (), conversation . members ); }); }). catch ( console . error . bind ( console )); // Tom \u6784\u5efa\u4e00\u4e2a\u67e5\u8be2 AVIMConversationQuery * query = [ tom conversationQuery ]; // \u6267\u884c\u67e5\u8be2 [ query findConversationsWithCallback : ^ ( NSArray * conversations , NSError * error ) { NSLog ( @ \u627e\u5230 %ld \u4e2a\u5bf9\u8bdd\uff01 , [ conversations count ]); }]; AVIMConversationsQuery query = client . getConversationsQuery (); query . findInBackground ( new AVIMConversationQueryCallback (){ @Override public void done ( List AVIMConversation conversations , AVIMException e ){ if ( e == null ){ //conversations \u5c31\u662f\u83b7\u53d6\u5230\u7684 conversation \u5217\u8868 //\u6ce8\u610f\uff1a\u6309\u6bcf\u4e2a\u5bf9\u8bdd\u7684\u6700\u540e\u66f4\u65b0\u65e5\u671f\uff08\u6536\u5230\u6700\u540e\u4e00\u6761\u6d88\u606f\u7684\u65f6\u95f4\uff09\u5012\u5e8f\u6392\u5217 } } }); var query = tom.GetQuery().WhereContainedIn( m , Tom ); await query.FindAsync(); \u4e0a\u8ff0\u4ee3\u7801\u9ed8\u8ba4\u8fd4\u56de\u6700\u8fd1\u6d3b\u8dc3\u7684 10 \u4e2a\u5bf9\u8bdd\uff0c\u82e5\u8981\u66f4\u6539\u8fd4\u56de\u5bf9\u8bdd\u7684\u6570\u91cf\uff0c\u8bf7\u8bbe\u7f6e limit \u503c\u3002 query . limit ( 20 ); query . limit = 20 ; query . limit ( 20 ); query.Limit(20);","title":"\u83b7\u53d6\u5bf9\u8bdd\u5217\u8868"},{"location":"im/im-beginner/#_13","text":"\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u9700\u8981\u6839\u636e\u5bf9\u8bdd\u7684\u4e00\u4e9b\u7279\u6027\u6765\u505a\u67e5\u627e\uff0c\u6bd4\u5982\u6211\u8981\u67e5\u627e\u540d\u5b57\u91cc\u5305\u542b NBA \u7684\u5bf9\u8bdd: query . contains ( name , NBA ); [ query whereKey : @ name containsString : @ NBA ]; query . whereContains ( name , NBA ); query.WhereContains( name , NBA );","title":"\u6839\u636e\u5173\u952e\u5b57\u67e5\u8be2"},{"location":"im/im-beginner/#_14","text":"\u5173\u4e8e\u4e0a\u8ff0\u7684\u51e0\u79cd\u573a\u666f\u5bf9\u5e94\u7684\u5b9e\u73b0\uff0c\u8bf7\u53c2\u9605 \u8fdb\u9636\u529f\u80fd#\u5bf9\u8bdd\u7684\u67e5\u8be2","title":"\u66f4\u591a\u67e5\u8be2\u65b9\u5f0f"},{"location":"im/im-beginner/#_15","text":"\u6d88\u606f\u7684\u7c7b\u578b\u6709\u5f88\u591a\u79cd\uff0c\u4f7f\u7528\u6700\u591a\u7684\u5c31\u662f\u6587\u672c\u6d88\u606f\uff0c\u5176\u6b21\u662f\u56fe\u50cf\u6d88\u606f\uff0c\u8fd8\u6709\u4e00\u4e9b\u77ed\u8bed\u97f3/\u77ed\u89c6\u9891\u6d88\u606f\uff0c\u6587\u672c\u6d88\u606f\u548c\u5176\u4ed6\u6d88\u606f\u7c7b\u578b\u6709\u672c\u8d28\u7684\u533a\u522b: \u6587\u672c\u6d88\u606f\u53d1\u9001\u7684\u5c31\u662f\u672c\u8eab\u7684\u5185\u5bb9\uff0c\u800c\u5176\u4ed6\u591a\u5a92\u4f53\u6d88\u606f\uff0c\u4f8b\u5982\u4e00\u5f20\u56fe\u7247\u5b9e\u9645\u4e0a\u53d1\u9001\u7684\u662f\u4e00\u4e2a\u6307\u5411\u56fe\u50cf\u7684\u94fe\u63a5\uff0c\u800c\u56fe\u50cf\u672c\u8eab\u7684\u7269\u7406\u6587\u4ef6\u5185\u5bb9\u4f1a\u88ab SDK \u6301\u4e45\u5316\u5b58\u50a8\u5728\u4e91\u7aef\u6587\u4ef6\u5b58\u50a8\u670d\u52a1\u4e2d","title":"\u6d88\u606f"},{"location":"im/im-beginner/#_16","text":"","title":"\u56fe\u50cf\u6d88\u606f"},{"location":"im/im-beginner/#_17","text":"\u6211\u4eec\u4ece\u53d1\u9001\u4e00\u5f20\u56fe\u7247\u6d88\u606f\u7684\u751f\u547d\u5468\u671f\u7684\u65f6\u5e8f\u56fe\u6765\u4e86\u89e3\u6574\u4e2a\u8fc7\u7a0b\uff1a Tom-- source: 1. \u83b7\u53d6\u56fe\u50cf\u5b9e\u4f53\u5185\u5bb9 Tom- Cloud: 2. \u8c03\u7528\u53d1\u9001\u56fe\u50cf\u6d88\u606f\u7684\u63a5\u53e3 Cloud-- AVFile: 3. SDK \u540e\u53f0\u4e0a\u4f20\u6587\u4ef6\u5230 AVFile \u8868 AVFile-- Tom: 4. \u8fd4\u56de\u56fe\u50cf\u7684\u4e91\u7aef\u5730\u5740 Tom-- Cloud: 5. SDK \u5c06\u56fe\u50cf\u6d88\u606f\u53d1\u9001\u7ed9\u4e91\u7aef Cloud- Jerry: 6. \u6536\u5230\u56fe\u50cf\u6d88\u606f\uff0c\u6839\u636e\u63a5\u53e3\u83b7\u53d6\u56fe\u50cf\u7684\u4e91\u7aef\u5730\u5740\uff0c\u5728\u5bf9\u8bdd\u6846\u91cc\u9762\u505a UI \u5c55\u73b0 \u56fe\u89e3\uff1a 1. source \u53ef\u80fd\u662f\u6765\u81ea\u4e8e localStorage/camera\uff0c \u8868\u793a\u56fe\u50cf\u7684\u6765\u6e90\u53ef\u4ee5\u662f\u672c\u5730\u5b58\u50a8\u4f8b\u5982 iPhone \u624b\u673a\u7684\u5a92\u4f53\u5e93\u6216\u8005\u76f4\u63a5\u8c03\u7528\u76f8\u673a API \u5b9e\u65f6\u5730\u62cd\u7167\u83b7\u53d6\u7684\u7167\u7247\u3002 2. AVFile \u662f LeanCloud \u63d0\u4f9b\u7684\u6587\u4ef6\u5b58\u50a8\u670d\u52a1\u5bf9\u8c61\uff0c\u8be6\u7ec6\u53ef\u4ee5\u53c2\u9605 \u6587\u4ef6\u5b58\u50a8 AVFile \u5bf9\u5e94\u7684\u4ee3\u7801\u5e76\u6ca1\u6709\u65f6\u5e8f\u56fe\u90a3\u6837\u590d\u6742\uff0c\u56e0\u4e3a\u8c03\u7528 send \u63a5\u53e3\u7684\u65f6\u5019\uff0cSDK \u4f1a\u81ea\u52a8\u4e0a\u4f20\u56fe\u50cf\uff0c\u4e0d\u9700\u8981\u5f00\u53d1\u8005\u518d\u53bb\u5173\u5fc3\u8fd9\u4e00\u6b65: var AV = require ( leancloud-storage ); var { ImageMessage } = require ( leancloud-realtime-plugin-typed-messages ); var fileUploadControl = $ ( #photoFileUpload )[ 0 ]; var file = new AV . File ( avatar.jpg , fileUploadControl . files [ 0 ]); file . save (). then ( function () { var message = new ImageMessage ( file ); message . setText ( \u53d1\u81ea\u6211\u7684 Ins ); message . setAttributes ({ location : \u65e7\u91d1\u5c71 }); return conversation . send ( message ); }). then ( function () { console . log ( \u53d1\u9001\u6210\u529f ); }). catch ( console . error . bind ( console )); NSArray * paths = NSSearchPathForDirectoriesInDomains ( NSDocumentDirectory , NSUserDomainMask , YES ); NSString * documentsDirectory = [ paths objectAtIndex : 0 ]; NSString * imagePath = [ documentsDirectory stringByAppendingPathComponent : @ LeanCloud.png ]; NSError * error ; AVFile * file = [ AVFile fileWithLocalPath : imagePath error : error ]; AVIMImageMessage * message = [ AVIMImageMessage messageWithText : @ \u840c\u59b9\u5b50\u4e00\u679a file : file attributes : nil ]; [ conversation sendMessage : message callback : ^ ( BOOL succeeded , NSError * error ) { if ( succeeded ) { NSLog ( @ \u53d1\u9001\u6210\u529f\uff01 ); } }]; AVFile file = AVFile . withAbsoluteLocalPath ( San_Francisco.png , Environment . getExternalStorageDirectory () + /San_Francisco.png ); // \u521b\u5efa\u4e00\u6761\u56fe\u7247\u6d88\u606f AVIMImageMessage m = new AVIMImageMessage ( file ); m . setText ( \u53d1\u81ea\u6211\u7684\u5c0f\u7c73\u624b\u673a ); conv . sendMessage ( m , new AVIMConversationCallback () { @Override public void done ( AVIMException e ) { if ( e == null ) { // \u53d1\u9001\u6210\u529f } } }); // \u5047\u8bbe\u5728\u7a0b\u5e8f\u8fd0\u884c\u76ee\u5f55\u4e0b\u6709\u4e00\u5f20\u56fe\u7247\uff0cUnity/Xamarin \u53ef\u4ee5\u53c2\u7167\u8fd9\u79cd\u505a\u6cd5\u901a\u8fc7\u8def\u5f84\u83b7\u53d6\u56fe\u7247 // \u4ee5\u4e0b\u662f\u53d1\u9001\u56fe\u7247\u6d88\u606f\u7684\u5feb\u6377\u7528\u6cd5 using (FileStream fileStream = new FileStream(Path.Combine(Path.GetDirectoryName(Assembly.GetEntryAssembly().Location), San_Francisco.png ), FileMode.Open, FileAccess.Read)) { await conversation.SendImageAsync( San_Francisco.png , fileStream); } // \u6216\u8005\u5982\u4e0b\u6bd4\u8f83\u5e38\u89c4\u7684\u7528\u6cd5 var imageMessage = new AVIMImageMessage(); imageMessage.File = new AVFile( San_Francisco.png , fileStream); imageMessage.TextContent = \u53d1\u81ea\u6211\u7684 Windows ; await conversation.SendAsync(imageMessage);","title":"\u53d1\u9001\u56fe\u50cf\u6587\u4ef6"},{"location":"im/im-beginner/#_18","text":"\u9664\u4e86\u4e0a\u8ff0\u8fd9\u79cd\u4ece\u672c\u5730\u76f4\u63a5\u53d1\u9001\u56fe\u7247\u6587\u4ef6\u7684\u6d88\u606f\u4e4b\u5916\uff0c\u5728\u5f88\u591a\u65f6\u5019\uff0c\u7528\u6237\u53ef\u80fd\u4ece\u7f51\u7edc\u4e0a\u6216\u8005\u522b\u7684\u5e94\u7528\u4e2d\u62f7\u8d1d\u4e86\u4e00\u4e2a\u56fe\u50cf\u7684\u7f51\u7edc\u8fde\u63a5\u5730\u5740\uff0c\u5f53\u505a\u4e00\u6761\u56fe\u50cf\u6d88\u606f\u53d1\u9001\u5230\u5bf9\u8bdd\u4e2d\uff0c\u8fd9\u79cd\u9700\u6c42\u53ef\u4ee5\u7528\u5982\u4e0b\u4ee3\u7801\u6765\u5b9e\u73b0\uff1a var AV = require ( leancloud-storage ); var { ImageMessage } = require ( leancloud-realtime-plugin-typed-messages ); // \u4ece\u7f51\u7edc\u94fe\u63a5\u76f4\u63a5\u6784\u5efa\u4e00\u4e2a\u56fe\u50cf\u6d88\u606f var file = new AV . File . withURL ( \u840c\u59b9\u5b50 , http://pic2.zhimg.com/6c10e6053c739ed0ce676a0aff15cf1c.gif ); file . save (). then ( function () { var message = new ImageMessage ( file ); message . setText ( \u840c\u59b9\u5b50\u4e00\u679a ); return conversation . send ( message ); }). then ( function () { console . log ( \u53d1\u9001\u6210\u529f ); }). catch ( console . error . bind ( console )); // Tom \u53d1\u4e86\u4e00\u5f20\u56fe\u7247\u7ed9 Jerry AVFile * file = [ AVFile fileWithURL :[ self @ http://ww3.sinaimg.cn/bmiddle/596b0666gw1ed70eavm5tg20bq06m7wi.gif ]]; AVIMImageMessage * message = [ AVIMImageMessage messageWithText : @ \u840c\u59b9\u5b50\u4e00\u679a file : file attributes : nil ]; [ conversation sendMessage : message callback : ^ ( BOOL succeeded , NSError * error ) { if ( succeeded ) { NSLog ( @ \u53d1\u9001\u6210\u529f\uff01 ); } }]; AVFile file = new AVFile ( \u840c\u59b9\u5b50 , http://ww3.sinaimg.cn/bmiddle/596b0666gw1ed70eavm5tg20bq06m7wi.gif , null ); AVIMImageMessage m = new AVIMImageMessage ( file ); m . setText ( \u840c\u59b9\u5b50\u4e00\u679a ); // \u521b\u5efa\u4e00\u6761\u56fe\u7247\u6d88\u606f conv . sendMessage ( m , new AVIMConversationCallback () { @Override public void done ( AVIMException e ) { if ( e == null ) { // \u53d1\u9001\u6210\u529f } } }); await conversation . SendImageAsync ( http://ww3.sinaimg.cn/bmiddle/596b0666gw1ed70eavm5tg20bq06m7wi.gif , Satomi_Ishihara , \u840c\u59b9\u5b50\u4e00\u679a );","title":"\u53d1\u9001\u56fe\u50cf\u94fe\u63a5"},{"location":"im/im-beginner/#_19","text":"\u5bf9\u8bdd\u4e2d\u7684\u5176\u4ed6\u6210\u5458\u4fee\u6539\u4e00\u4e0b\u63a5\u6536\u6d88\u606f\u7684\u4e8b\u4ef6\u8ba2\u9605\u903b\u8f91\uff0c\u6839\u636e\u6d88\u606f\u7c7b\u578b\u6765\u505a\u4e0d\u540c\u7684 UI \u5c55\u73b0\uff1a var { Event , TextMessage } = require ( leancloud-realtime ); var { ImageMessage } = require ( leancloud-realtime-plugin-typed-messages ); client . on ( Event . MESSAGE , function messageEventHandler ( message , conversation ) { var file ; switch ( message . type ) { case ImageMessage . TYPE : file = message . getFile (); console . log ( \u6536\u5230\u56fe\u50cf\u6d88\u606f\uff0curl: + file . url ()); break ; } } - ( void ) conversation: ( AVIMConversation * ) conversation didReceiveTypedMessage: ( AVIMTypedMessage * ) message { AVIMImageMessage * imageMessage = ( AVIMImageMessage * ) message ; // \u6d88\u606f\u7684 id NSString * messageId = imageMessage . messageId ; // \u56fe\u50cf\u6587\u4ef6\u7684 URL NSString * imageUrl = imageMessage . file . url ; // \u53d1\u8be5\u6d88\u606f\u7684 ClientId NSString * fromClientId = message . clientId ; } AVIMMessageManager . registerMessageHandler ( AVIMImageMessage . class , new AVIMTypedMessageHandler AVIMImageMessage () { @Override public void onMessage ( AVIMImageMessage msg , AVIMConversation conv , AVIMClient client ) { //\u53ea\u5904\u7406 Jerry \u8fd9\u4e2a\u5ba2\u6237\u7aef\u7684\u6d88\u606f //\u5e76\u4e14\u6765\u81ea conversationId \u4e3a 55117292e4b065f7ee9edd29 \u7684 conversation \u7684\u6d88\u606f if ( Jerry . equals ( client . getClientId ()) 55117292e4b065f7ee9edd29 . equals ( conv . getConversationId ())) { String fromClientId = msg . getFrom (); String messageId = msg . getMessageId (); String url = msg . getFileUrl (); Map String , Object metaData = msg . getFileMetaData (); if ( metaData . containsKey ( size )) { int size = ( Integer ) metaData . get ( size ); } if ( metaData . containsKey ( width )) { int width = ( Integer ) metaData . get ( width ); } if ( metaData . containsKey ( height )) { int height = ( Integer ) metaData . get ( height ); } if ( metaData . containsKey ( format )) { String format = ( String ) metaData . get ( format ); } } } }); private void OnMessageReceived(object sender, AVIMMessageEventArgs e) { if (e.Message is AVIMImageMessage imageMessage) { Console.WriteLine(imageMessage.File.Url); // imageMessage.File \u662f\u4e00\u4e2a AVFile \u5bf9\u8c61\uff0c\u66f4\u591a\u64cd\u4f5c\u53ef\u4ee5\u53c2\u8003\u6570\u636e\u5b58\u50a8\u91cc\u9762\u7684\u6587\u4ef6 } }","title":"\u63a5\u6536\u56fe\u50cf\u6d88\u606f"},{"location":"im/im-beginner/#_20","text":"\u4e0e\u56fe\u50cf\u6d88\u606f\u4e00\u6837\uff0c\u5176\u4ed6\u591a\u5a92\u4f53\u6d88\u606f\u90fd\u62e5\u6709\u5982\u4e0b\u4e24\u79cd\u7528\u6cd5\uff1a \u5982\u679c\u53d1\u9001\u7684\u662f\u591a\u5a92\u4f53\u6d88\u606f\u672c\u8eab\u7684\u7269\u7406\u6587\u4ef6\uff0c\u90a3\u4e48\u5b83\u7684\u7684\u5185\u5bb9\u4f1a\u5148\u8bd5\u7528 AVFile \u5b58\u50a8\u5728\u4e91\u7aef\uff0c\u7136\u540e\u53d1\u9001\u4e91\u7aef\u94fe\u63a5\u5230\u5bf9\u8bdd\u5f53\u4e2d\uff0c\u800c\u5728\u63a5\u6536\u65b9\u7684\u5ba2\u6237\u7aef\u53ea\u8981\u5bf9\u94fe\u63a5\u505a\u4e00\u4e9b\u5904\u7406\uff0c\u6839\u636e\u6d88\u606f\u7684\u7c7b\u578b\u4e0d\u540c\u505a\u4e0d\u540c\u7684 UI \u5c55\u73b0\uff0c\u4f8b\u5982\u8bed\u97f3\u6d88\u606f\u53ef\u4ee5\u505a\u6210\u4e00\u4e2a\u5c0f\u6309\u94ae\uff0c\u7528\u6237\u70b9\u51fb\u4e4b\u540e\u5c31\u64ad\u653e\u8bed\u97f3\uff0c\u800c\u89c6\u9891\u6d88\u606f\u5219\u662f\u4e00\u5f20\u89c6\u9891\u622a\u56fe\uff0c\u7528\u6237\u70b9\u51fb\u4e4b\u540e\u64ad\u653e\u89c6\u9891\uff0c\u8bf8\u5982\u6b64\u7c7b\u3002 \u5982\u679c\u662f\u4e00\u4e2a\u7f51\u7edc\u8fde\u63a5\u5730\u5740\uff0c\u5b83\u7684\u7269\u7406\u5185\u5bb9\u5e76\u4e0d\u4f1a\u88ab\u5b58\u653e\u4e8e AVFile \u8868\u5185\uff0c\u800c\u662f\u76f4\u63a5\u5c06\u5176\u8f6c\u5316\u6210\u4e00\u4e2a\u6d88\u606f\uff0c\u53d1\u9001\u51fa\u53bb","title":"\u591a\u5a92\u4f53\u6d88\u606f"},{"location":"im/im-beginner/#_21","text":"\u66f4\u591a\u6d88\u606f\u7c7b\u578b\u8bf7\u70b9\u51fb \u8fdb\u9636\u529f\u80fd#\u6d88\u606f\u7c7b\u578b \u3002","title":"\u5176\u4ed6\u7c7b\u578b\u6d88\u606f"},{"location":"im/im-beginner/#_22","text":"\u6d88\u606f\u8bb0\u5f55\u9ed8\u8ba4\u4f1a\u5728\u4e91\u7aef\u4fdd\u5b58 180 \u5929\uff0c SDK \u63d0\u4f9b\u4e86\u591a\u79cd\u65b9\u5f0f\u6765\u83b7\u53d6\u5230\u672c\u5730\u3002\u5f00\u53d1\u8005\u53ef\u4ee5\u4ed8\u8d39\u6765\u5ef6\u957f\u8fd9\u4e00\u671f\u9650\uff0c\u8bf7\u8054\u7cfb \u3002\u53e6\u5916\u53ef\u4ee5\u53c2\u8003 \u5bf9\u8bdd\u7684\u6709\u6548\u671f\u3002\u4f60\u4e5f\u968f\u65f6\u53ef\u4ee5\u901a\u8fc7 REST API \u5c06\u804a\u5929\u8bb0\u5f55\u540c\u6b65\u5230\u81ea\u5df1\u7684\u670d\u52a1\u5668\u4e0a\u3002 iOS \u548c Android SDK \u5206\u522b\u63d0\u4f9b\u4e86\u5185\u7f6e\u7684\u6d88\u606f\u7f13\u5b58\u673a\u5236\uff0c\u51cf\u5c11\u5ba2\u6237\u7aef\u5bf9\u4e91\u7aef\u6d88\u606f\u8bb0\u5f55\u7684\u67e5\u8be2\u6b21\u6570\uff0c\u5e76\u4e14\u5728\u79bb\u7ebf\u60c5\u51b5\u4e0b\uff0c\u4e5f\u80fd\u67e5\u8be2\u5230\u51c6\u786e\u7684\u6d88\u606f\u8bb0\u5f55\u3002","title":"\u6d88\u606f\u8bb0\u5f55"},{"location":"im/im-beginner/#_23","text":"\u5982\u4e0b\u4ee3\u7801\u53ef\u4ee5\u83b7\u53d6\u4e00\u4e2a\u5bf9\u8bdd\u6700\u8fd1\u7684 10 \u6761\u6d88\u606f\uff0c\u6ce8\u610f\uff0c\u8fd4\u56de\u7ed3\u679c\u662f\u6309\u7167\u65f6\u95f4 \u7531\u65b0\u5230\u65e7 \u6392\u5e8f\u7684\uff1a conversation . queryMessages ({ limit : 10 , // limit \u53d6\u503c\u8303\u56f4 1~1000\uff0c\u9ed8\u8ba4 20 }). then ( function ( messages ) { // \u6700\u65b0\u7684\u5341\u6761\u6d88\u606f\uff0c\u6309\u65f6\u95f4\u589e\u5e8f\u6392\u5217 }). catch ( console . error . bind ( console )); // \u67e5\u8be2\u5bf9\u8bdd\u4e2d\u6700\u540e 10 \u6761\u6d88\u606f\uff0c limit \u53d6\u503c\u8303\u56f4 1~1000\uff0c\u9ed8\u8ba4 20 [ conversation queryMessagesWithLimit : 10 callback : ^ ( NSArray * objects , NSError * error ) { NSLog ( @ \u67e5\u8be2\u6210\u529f\uff01 ); }]; // limit \u53d6\u503c\u8303\u56f4 1~1000\uff0c\u9ed8\u8ba4 20 conv . queryMessages ( 10 , new AVIMMessagesQueryCallback () { @Override public void done ( List AVIMMessage messages , AVIMException e ) { if ( e == null ) { //\u6210\u529f\u83b7\u53d6\u6700\u65b010\u6761\u6d88\u606f\u8bb0\u5f55 } } }); // limit \u53d6\u503c\u8303\u56f4 1 ~ 1000 \uff0c\u9ed8\u8ba4 20 var messages = await conversation . QueryMessageAsync ( limit : 10 ); \u800c\u5982\u679c\u60f3\u7ee7\u7eed\u62c9\u53d6\u66f4\u65e9\u7684\u6d88\u606f\u8bb0\u5f55\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u4ee3\u7801\uff1a // \u521b\u5efa\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u6bcf\u6b21\u83b7\u53d6 10 \u6761\u5386\u53f2\u6d88\u606f var messageIterator = conversation . createMessagesIterator ({ limit : 10 }); // \u7b2c\u4e00\u6b21\u8c03\u7528 next \u65b9\u6cd5\uff0c\u83b7\u5f97\u524d 10 \u6761\u6d88\u606f\uff0c\u8fd8\u6709\u66f4\u591a\u6d88\u606f\uff0cdone \u4e3a false messageIterator . next (). then ( function ( result ) { // result: { // value: [message1, ..., message10], // done: false, // } }). catch ( console . error . bind ( console )); // \u7b2c\u4e8c\u6b21\u8c03\u7528 next \u65b9\u6cd5\uff0c\u83b7\u5f97\u7b2c 11 ~ 20 \u6761\u6d88\u606f\uff0c\u8fd8\u6709\u66f4\u591a\u6d88\u606f\uff0cdone \u4e3a false messageIterator . next (). then ( function ( result ) { // result: { // value: [message11, ..., message20], // done: false, // } }). catch ( console . error . bind ( console )); // \u67e5\u8be2\u5bf9\u8bdd\u4e2d\u6700\u540e 10 \u6761\u6d88\u606f [ conversation queryMessagesWithLimit : 10 callback : ^ ( NSArray * messages , NSError * error ) { NSLog ( @ \u67e5\u8be2\u6210\u529f\uff01 ); // \u4ee5\u7b2c\u4e00\u9875\u7684\u6700\u65e9\u7684\u6d88\u606f\u4f5c\u4e3a\u5f00\u59cb\uff0c\u7ee7\u7eed\u5411\u524d\u62c9\u53d6\u6d88\u606f AVIMMessage * oldestMessage = [ messages firstObject ]; [ conversation queryMessagesBeforeId : oldestMessage . messageId timestamp : oldestMessage . sendTimestamp limit : 10 callback : ^ ( NSArray * messagesInPage , NSError * error ) { NSLog ( @ \u67e5\u8be2\u6210\u529f\uff01 ); }]; }]; // limit \u53d6\u503c\u8303\u56f4 1~1000\uff0c\u9ed8\u8ba4 20 conv . queryMessages ( 10 , new AVIMMessagesQueryCallback () { @Override public void done ( List AVIMMessage messages , AVIMException e ) { if ( e == null ) { //\u6210\u529f\u83b7\u53d6\u6700\u65b010\u6761\u6d88\u606f\u8bb0\u5f55 //\u8fd4\u56de\u7684\u6d88\u606f\u4e00\u5b9a\u662f\u65f6\u95f4\u589e\u5e8f\u6392\u5217\uff0c\u4e5f\u5c31\u662f\u6700\u65e9\u7684\u6d88\u606f\u4e00\u5b9a\u662f\u7b2c\u4e00\u4e2a AVIMMessage oldestMessage = messages . get ( 0 ); conv . queryMessages ( oldestMessage . getMessageId (), oldestMessage . getTimestamp (), 20 , new AVIMMessageQueryCallback (){ @Override public void done ( List AVIMMessage messagesInPage , AVIMException e ){ if ( e == null ){ //\u67e5\u8be2\u6210\u529f\u8fd4\u56de Log . d ( Tom Jerry , got + messagesInPage . size ()+ messages ); } } }); } } }); // limit \u53d6\u503c\u8303\u56f4 1 ~ 1000 \uff0c\u9ed8\u8ba4 20 var messages = await conversation . QueryMessageAsync ( limit : 10 ); var oldestMessage = messages . ToList () [ 0 ] ; var messagesInPage = await conversation . QueryMessageAsync ( beforeMessageId : oldestMessage . Id , beforeTimeStamp : oldestMessage . ServerTimestamp );","title":"\u83b7\u53d6\u5bf9\u8bdd\u7684\u5168\u90e8\u6d88\u606f\u8bb0\u5f55"},{"location":"im/im-beginner/#_24","text":"\u5982\u4e0b\u4ee3\u7801\u7684\u529f\u80fd\u662f\uff1a\u83b7\u53d6\u6240\u6709\u7684\u56fe\u50cf\u6d88\u606f\uff1a conversation . queryMessages ({ type : ImageMessage . TYPE }). then ( messages = { console . log ( messages ); }). catch ( console . error ); [ conversation queryMediaMessagesFromServerWithType : kAVIMMessageMediaTypeImage limit : 10 fromMessageId : nil fromTimestamp : 0 callback : ^ ( NSArray * messages , NSError * error ) { if ( ! error ) { NSLog ( @ \u67e5\u8be2\u6210\u529f\uff01 ); } }]; int msgType = . AVIMMessageType . TEXT_MESSAGE_TYPE ; conversation . queryMessagesByType ( msgType , limit , new AVIMMessagesQueryCallback () { @Override public void done ( List AVIMMessage messages , AVIMException e ){ } }); // \u4f20\u5165\u6cdb\u578b\u53c2\u6570\uff0cSDK \u4f1a\u81ea\u52a8\u8bfb\u53d6\u7c7b\u578b\u7684\u4fe1\u606f\u53d1\u9001\u7ed9\u670d\u52a1\u7aef\uff0c\u7528\u4f5c\u7b5b\u9009\u76ee\u6807\u7c7b\u578b\u7684\u6d88\u606f var imageMessages = await conversation.QueryMessageAsync AVIMImageMessage (); \u5982\u8981\u83b7\u53d6\u66f4\u591a\u56fe\u50cf\u6d88\u606f\uff0c\u53ef\u4ee5\u6548\u4eff\u524d\u4e00\u7ae0\u8282\u4e2d\u7684\u793a\u4f8b\u4ee3\u7801\uff0c\u7ee7\u7eed\u67e5\u8be2\u53ef\u4ee5\u83b7\u53d6\u66f4\u591a\u7684\u56fe\u50cf\u6d88\u606f\u3002","title":"\u6309\u7167\u6d88\u606f\u7c7b\u578b\u83b7\u53d6"},{"location":"im/im-beginner/#_25","text":"\u66f4\u591a\u6d88\u606f\u7c7b\u578b\u8bf7\u70b9\u51fb \u8fdb\u9636\u529f\u80fd#\u6d88\u606f\u8bb0\u5f55","title":"\u66f4\u591a\u7684\u83b7\u53d6\u65b9\u5f0f"},{"location":"im/im-beginner/#_26","text":"{{ docs.note(\"\u6ce8\u610f\uff1a\u5728\u7f51\u7edc\u4e2d\u65ad\u7684\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u7684\u6d88\u606f\u6536\u53d1\u548c\u5bf9\u8bdd\u64cd\u4f5c\u90fd\u4f1a\u5931\u8d25\u3002\u5f00\u53d1\u8005\u5e94\u8be5\u76d1\u542c\u4e0e\u7f51\u7edc\u72b6\u6001\u76f8\u5173\u7684\u4e8b\u4ef6\u5e76\u66f4\u65b0 UI\uff0c\u4ee5\u514d\u5f71\u54cd\u7528\u6237\u7684\u4f7f\u7528\u4f53\u9a8c\u3002\") }} \u5f53\u7f51\u7edc\u8fde\u63a5\u51fa\u73b0\u4e2d\u65ad\u3001\u6062\u590d\u7b49\u72b6\u6001\u53d8\u5316\u65f6\uff0cSDK \u4f1a\u6d3e\u53d1\u4ee5\u4e0b\u4e8b\u4ef6\uff1a {{ docs.langSpecStart('js') }} DISCONNECT \uff1a\u4e0e\u670d\u52a1\u7aef\u8fde\u63a5\u65ad\u5f00\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u4e0d\u53ef\u7528\u3002 OFFLINE \uff1a\u7f51\u7edc\u4e0d\u53ef\u7528\u3002 ONLINE \uff1a\u7f51\u7edc\u6062\u590d\u3002 SCHEDULE \uff1a\u8ba1\u5212\u5728\u4e00\u6bb5\u65f6\u95f4\u540e\u5c1d\u8bd5\u91cd\u8fde\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u4ecd\u4e0d\u53ef\u7528\u3002 RETRY \uff1a\u6b63\u5728\u91cd\u8fde\u3002 RECONNECT \uff1a\u4e0e\u670d\u52a1\u7aef\u8fde\u63a5\u6062\u590d\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u53ef\u7528\u3002 var { Event } = require ( leancloud-realtime ); realtime . on ( Event . DISCONNECT , function () { console . log ( \u670d\u52a1\u5668\u8fde\u63a5\u5df2\u65ad\u5f00 ); }); realtime . on ( Event . OFFLINE , function () { console . log ( \u79bb\u7ebf\uff08\u7f51\u7edc\u8fde\u63a5\u5df2\u65ad\u5f00\uff09 ); }); realtime . on ( Event . ONLINE , function () { console . log ( \u5df2\u6062\u590d\u5728\u7ebf ); }); realtime . on ( Event . SCHEDULE , function ( attempt , delay ) { console . log ( delay + ms \u540e\u8fdb\u884c\u7b2c + ( attempt + 1 ) + \u6b21\u91cd\u8fde ); }); realtime . on ( Event . RETRY , function ( attempt ) { console . log ( \u6b63\u5728\u8fdb\u884c\u7b2c + ( attempt + 1 ) + \u6b21\u91cd\u8fde ); }); realtime . on ( Event . RECONNECT , function () { console . log ( \u4e0e\u670d\u52a1\u7aef\u8fde\u63a5\u6062\u590d ); }); {{ docs.langSpecEnd('js') }} {{ docs.langSpecStart('objc') }} \u5728 AVIMClientDelegate \u4e0a\u4f1a\u6709\u5982\u4e0b\u4e8b\u4ef6\u901a\u77e5\uff1a imClientPaused:(AVIMClient *)imClient \u6307\u7f51\u7edc\u8fde\u63a5\u65ad\u5f00\u4e8b\u4ef6\u53d1\u751f\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u4e0d\u53ef\u7528\u3002 imClientResuming:(AVIMClient *)imClient \u6307\u7f51\u7edc\u65ad\u5f00\u540e\u5f00\u59cb\u91cd\u8fde\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u4f9d\u7136\u4e0d\u53ef\u7528\u3002 imClientResumed:(AVIMClient *)imClient \u6307\u7f51\u7edc\u8fde\u63a5\u6062\u590d\u6b63\u5e38\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u53d8\u5f97\u53ef\u7528\u3002 {{ docs.langSpecEnd('objc') }} {{ docs.langSpecStart('java') }} AVIMClientEventHandler \u4e0a\u4f1a\u6709\u5982\u4e0b\u4e8b\u4ef6\u901a\u77e5\uff1a onConnectionPaused() \u6307\u7f51\u7edc\u8fde\u63a5\u65ad\u5f00\u4e8b\u4ef6\u53d1\u751f\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u4e0d\u53ef\u7528\u3002 onConnectionResume() \u6307\u7f51\u7edc\u8fde\u63a5\u6062\u590d\u6b63\u5e38\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u53d8\u5f97\u53ef\u7528\u3002 onClientOffline() \u6307\u5355\u70b9\u767b\u5f55\u88ab\u8e22\u4e0b\u7ebf\u7684\u4e8b\u4ef6\u3002 {{ docs.langSpecEnd('java') }} {{ docs.langSpecStart('cs') }} AVRealtime \u4e0a\u4f1a\u6709\u5982\u4e0b\u4e8b\u4ef6\u901a\u77e5\uff1a OnDisconnected \u6307\u7f51\u7edc\u8fde\u63a5\u65ad\u5f00\u4e8b\u4ef6\u53d1\u751f\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u4e0d\u53ef\u7528\u3002 OnReconnecting \u6307\u7f51\u7edc\u6b63\u5728\u5c1d\u8bd5\u91cd\u8fde\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u4e0d\u53ef\u7528\u3002 OnReconnected \u6307\u7f51\u7edc\u8fde\u63a5\u6062\u590d\u6b63\u5e38\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u53d8\u5f97\u53ef\u7528\u3002 OnReconnectFailed \u6307\u91cd\u8fde\u5931\u8d25\uff0c\u6b64\u65f6\u804a\u5929\u670d\u52a1\u4e0d\u53ef\u7528\u3002 {{ docs.langSpecEnd('cs') }}","title":"\u5ba2\u6237\u7aef\u4e8b\u4ef6\u4e0e\u7f51\u7edc\u72b6\u6001\u54cd\u5e94"},{"location":"im/im-beginner/#_27","text":"\u76ee\u524d SDK \u9ed8\u8ba4\u5185\u7f6e\u4e86\u65ad\u7ebf\u91cd\u8fde\u7684\u529f\u80fd\uff0c\u4ece\u5ba2\u6237\u7aef\u4e0e\u4e91\u7aef\u5efa\u7acb\u8fde\u63a5\u6210\u529f\u5f00\u59cb\uff0c\u53ea\u8981\u6ca1\u6709\u8c03\u7528\u9000\u51fa\u767b\u5f55\u7684\u63a5\u53e3\uff0cSDK \u4f1a\u4e00\u76f4\u5c1d\u8bd5\u548c\u4e91\u7aef\u4fdd\u6301\u957f\u8fde\u63a5\uff0c\u6b64\u65f6 IMClient \u7684\u72b6\u6001\u53ef\u4ee5\u901a\u8fc7 \u7f51\u7edc\u72b6\u6001\u54cd\u5e94\u63a5\u53e3\u5f97\u5230\u3002 \u6ce8\u610f\uff1a\u7528\u6237\u5982\u679c\u81ea\u884c\u5b9e\u73b0\u4e86\u91cd\u8fde\u903b\u8f91\u53ef\u80fd\u4f1a\u62a5\u51fa 1001 \u9519\u8bef\u3002","title":"\u65ad\u7ebf\u91cd\u8fde"},{"location":"im/im-beginner/#_28","text":"tom . close (). then ( function () { console . log ( Tom \u9000\u51fa\u767b\u5f55 ); }). catch ( console . error . bind ( console )); [ tom closeWithCallback : ^ ( BOOL succeeded , NSError * _Nullable error ) { if ( succeeded ) { NSLog ( @ \u9000\u51fa\u5373\u65f6\u901a\u8baf\u670d\u52a1 ); } }]; tom . close ( new AVIMClientCallback (){ @Override public void done ( AVIMClient client , AVIMException e ){ if ( e == null ){ //\u767b\u51fa\u6210\u529f } } }); await tom.CloseAsync();","title":"\u9000\u51fa\u767b\u5f55\u4e0e\u65ad\u5f00\u8fde\u63a5"},{"location":"im/im-overview/","text":"\u5373\u65f6\u901a\u8baf\u670d\u52a1\u603b\u89c8 \u5373\u65f6\u901a\u8baf\u670d\u52a1\u662f LeanCloud \u6d88\u606f\u670d\u52a1\u4e2d\u7684\u91cd\u8981\u4e00\u73af\u3002\u4f60\u4e0d\u4f46\u53ef\u4ee5\u4e3a\u5e94\u7528\u52a0\u5165\u5373\u65f6\u901a\u8baf\u3001\u79c1\u4fe1\u7b49\u5e38\u7528\u529f\u80fd\uff0c\u8fd8\u80fd\u5b9e\u73b0\u6e38\u620f\u5bf9\u6218\u7b49\u5b9e\u65f6\u4e92\u52a8\u529f\u80fd\u3002 \u76ee\u524d\uff0c\u6211\u4eec\u63d0\u4f9b Android\u3001iOS\u3001JavaScript\u3001Windows Phone \u56db\u4e2a\u4e3b\u8981\u5e73\u53f0\u7684\u5ba2\u6237\u7aef SDK\uff0c\u4e5f\u63d0\u4f9b\u4e86\u4e00\u4e9b Demo \u5e2e\u52a9\u4f60\u5feb\u901f\u5165\u95e8\uff1a iOS \u804a\u5929\u5e94\u7528\uff1a ChatKit\uff0c\u81ea\u5e26 UI \u7684\u804a\u5929\u5de5\u5177\u5305 Android \u804a\u5929\u5e94\u7528\uff1a ChatKit\uff0c\u81ea\u5e26 UI \u7684\u804a\u5929\u5de5\u5177\u5305 LeanChat Android \u7248 JavaScript \u804a\u5929\u5e94\u7528 LeanMessageDemo \u7f51\u9875\u7248 Simple Chatroom \uff08 \u6e90\u7801 \uff09 \u5173\u4e8e\u8fd9\u4e9b\u9879\u76ee\u7684\u66f4\u591a\u4ecb\u7ecd\u3001\u622a\u56fe\u9884\u89c8\uff0c\u53ef\u89c1 LeanCloud Demos \u3002 \u76ee\u524d\u65b0\u7248\u672c\u5373\u65f6\u901a\u8baf\u670d\u52a1\u63a5\u53e3\u4e0e\u65e7\u7248\u672c\u5e76\u4e0d\u517c\u5bb9\uff0c\u4e0d\u80fd\u4e92\u76f8\u901a\u4fe1\u3002\u6211\u4eec\u63a8\u8350\u6240\u6709\u65b0\u7528\u6237\u76f4\u63a5\u4f7f\u7528\u65b0\u7248\u672c\u3002\u5df2\u6709\u7684\u65e7\u7248\u672c\u7528\u6237\u53ef\u4ee5\u7ee7\u7eed\u53c2\u8003 v1 \u7248\u672c\u6587\u6863 \uff0c\u6211\u4eec\u4ecd\u7136\u4f1a\u5bf9\u5df2\u6709\u7248\u672c\u63d0\u4f9b\u652f\u6301\uff0c\u5e76\u53ef\u80fd\u5728\u672a\u6765\u63d0\u4f9b\u65e0\u7f1d\u7684\u8fc1\u79fb\u65b9\u6848\u3002\u5df2\u7ecf\u53d1\u5e03\u7684\u65e7\u7248\u672c\u7528\u6237\u4e0d\u4f1a\u5728\u529f\u80fd\u3001\u8d44\u6e90\u7b49\u5404\u4e2a\u65b9\u9762\u53d7\u5230\u4efb\u4f55\u5f71\u54cd\uff0c\u8bf7\u653e\u5fc3\u4f7f\u7528\u3002 \u529f\u80fd\u548c\u7279\u6027 LeanCloud \u5373\u65f6\u901a\u8baf\u670d\u52a1\u5b9a\u4f4d\u4e8e\u5b8c\u7f8e\u5b9e\u73b0\u7f51\u7edc\u5c42\u7684\u901a\u8baf\u80fd\u529b\uff0c\u5176\u8bbe\u8ba1\u76ee\u6807\u805a\u7126\u5728\uff1a \u5feb\u6377 LeanCloud \u4e91\u7aef\u8981\u80fd\u652f\u6301\u4e0a\u4ebf\u7ec8\u7aef\u540c\u65f6\u5728\u7ebf\uff0c\u5e76\u4e14\u6d88\u606f\u4f20\u9012\u5ef6\u65f6\u9700\u8981\u4e25\u683c\u63a7\u5236\u5728\u6beb\u79d2\u4ee5\u5185\u3002 \u7075\u6d3b \u65e2\u8981\u4e3a\u5b8c\u5168\u4f9d\u6258 LeanCloud \u5e73\u53f0\u7684\u5f00\u53d1\u8005\u8003\u8651\uff0c\u4e5f\u8981\u4e3a\u81ea\u6709\u8d26\u6237\u7cfb\u7edf\u7684\u7528\u6237\u8bbe\u8ba1\uff1a\u5982\u679c\u7528\u6237\u81ea\u5df1\u6709\u5b8c\u5907\u7684\u540e\u53f0\u548c\u8d26\u6237\u7cfb\u7edf\uff0c\u5e94\u8be5\u5b8c\u5168\u4e0d\u7528\u66b4\u9732\u5185\u90e8\u6570\u636e\u5c31\u80fd\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u3002\u800c\u4e14\uff0c\u6d88\u606f\u901a\u77e5\u7684\u624b\u6bb5\u8981\u591a\u6837\u5316\uff0c\u8981\u8ba9\u5f00\u53d1\u8005\u6709\u66f4\u591a\u5b9a\u5236\u7684\u80fd\u529b\u3002\u8b6c\u5982\u804a\u5929\u65f6\u5bf9\u65b9\u4e0d\u5728\u7ebf\uff0c\u5e94\u8be5\u80fd\u8d70\u300c\u6d88\u606f\u63a8\u9001\uff08Push Notification\uff09\u300d\u901a\u9053\u6765\u53ca\u65f6\u63d0\u9192\u5bf9\u65b9\uff0c\u5e76\u5141\u8bb8\u5f00\u53d1\u8005\u5bf9\u63a8\u9001\u5185\u5bb9\u8fdb\u884c\u300c\u79c1\u4eba\u5b9a\u5236\u300d\u7b49\u7b49\u3002 \u5b89\u5168 \u9664\u4e86\u7b80\u5355\u7684 appId \u548c secretKey \u4e4b\u5916\uff0c\u8fd8\u5e94\u8be5\u8d4b\u4e88\u5f00\u53d1\u8005\u66f4\u591a\u7684\u5b89\u5168\u63a7\u5236\u80fd\u529b\uff0c\u6765\u4fdd\u8bc1\u804a\u5929\u901a\u9053\u7684\u79c1\u5bc6\u6027\u3002 LeanCloud \u5373\u65f6\u901a\u8baf\u670d\u52a1\u7684\u7279\u6027\u4e3b\u8981\u6709\uff1a \u4e0e\u8d26\u6237\u7cfb\u7edf\u89e3\u8026\u5408 \u4efb\u4f55\u7ec8\u7aef\u7528\u6237\u8981\u52a0\u5165\u804a\u5929\uff0c\u53ea\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u552f\u4e00\u6807\u8bc6\u81ea\u5df1\u7684 clientId \u5373\u53ef\uff0c\u8fd9\u6837\u53ef\u4ee5\u5c3d\u91cf\u907f\u514d\u81ea\u6709\u8d26\u6237\u7cfb\u7edf\u7684\u5e94\u7528\u6570\u636e\u66b4\u9732\uff0c\u4e5f\u53ef\u4ee5\u4fc3\u4f7f\u901a\u4fe1\u670d\u52a1\u4e13\u6ce8\u505a\u597d\u5e95\u5c42\u7684\u300c\u4fe1\u4f7f\u300d\u89d2\u8272\uff1b \u591a\u8d26\u53f7\u767b\u5f55 \u652f\u6301\u5355\u4e2a\u8bbe\u5907\u591a\u4e2a\u8d26\u53f7\u3001\u5355\u4e2a\u8d26\u53f7\u591a\u4e2a\u8bbe\u5907\u540c\u65f6\u767b\u5f55\uff0c\u5b9e\u65f6\u6d88\u606f\u540c\u6b65\u5230\u6240\u6709\u8bbe\u5907\u3002 \u5b8c\u6574\u7684\u804a\u5929\u529f\u80fd \u652f\u6301\u5355\u804a\u3001\u7fa4\u804a\u3001\u804a\u5929\u5ba4\u3001\u8ba2\u9605\u53f7\u7b49\u4e0d\u540c\u804a\u5929\u5f62\u5f0f\uff0c\u5e76\u4e14\u5177\u5907\u5b8c\u5584\u7684\u7fa4\u7ec4\u7ba1\u7406\u529f\u80fd\u3002 \u652f\u6301\u5bcc\u5a92\u4f53\u3001\u81ea\u5b9a\u4e49\u7c7b\u578b\u6d88\u606f \u652f\u6301\u6587\u672c\u3001\u56fe\u7247\u3001\u97f3\u9891\u3001\u89c6\u9891\u548c\u5730\u7406\u4f4d\u7f6e\u7b49\u591a\u79cd\u683c\u5f0f\u7684\u5bcc\u5a92\u4f53\u6d88\u606f\uff0c\u5e76\u4e14\u5f00\u53d1\u8005\u8fd8\u53ef\u65b9\u4fbf\u5730\u81ea\u5b9a\u4e49\u6269\u5c55\u3002 \u79bb\u7ebf\u6d88\u606f\u63a8\u9001 \u6d88\u606f\u5728\u5bf9\u65b9\u79bb\u7ebf\u65f6\uff0c\u4f1a\u81ea\u52a8\u901a\u8fc7 \u6d88\u606f\u63a8\u9001 \u6765\u53ca\u65f6\u9001\u8fbe\u5bf9\u65b9\uff0c\u5e76\u4e14\u63a8\u9001\u7684\u6d88\u606f\u6587\u672c\u53ef\u4ee5\u7531\u5f00\u53d1\u8005\u81ea\u5df1\u63a7\u5236\u3002 \u654f\u611f\u8bcd\u8fc7\u6ee4 \u5b9e\u65f6\u6d88\u606f\u4e2d\u51fa\u73b0\u7684\u654f\u611f\u8bcd\uff0c\u4f1a\u81ea\u52a8\u88ab\u8fc7\u6ee4\u6389\u3002\u8be6\u60c5\u89c1 \u654f\u611f\u8bcd\u8fc7\u6ee4 \u3002 \u804a\u5929\u8bb0\u5f55\u4fdd\u5b58\u5728\u4e91\u7aef \u804a\u5929\u8bb0\u5f55\u81ea\u52a8\u4fdd\u5b58\u5728\u4e91\u7aef\uff0c\u5141\u8bb8\u5f00\u53d1\u8005\u81ea\u7531\u83b7\u53d6\u3002 \u7b2c\u4e09\u65b9\u64cd\u4f5c\u9274\u6743\u673a\u5236 \u4e3a\u4e86\u4fdd\u8bc1\u4fe1\u9053\u7684\u5b89\u5168\uff0c\u4e5f\u7ed9\u5f00\u53d1\u8005\u6700\u5927\u7684\u63a7\u5236\u81ea\u7531\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u64cd\u4f5c\u9274\u6743\u7684\u673a\u5236\uff1a\u5f00\u53d1\u8005\u4f7f\u7528\u81ea\u5df1\u7684\u670d\u52a1\u5668\u6765\u5145\u5f53\u9274\u6743\u670d\u52a1\u5668\uff0c\u5bf9\u6d88\u606f\u6d41\u5411\u8fdb\u884c\u300c\u8bb8\u53ef\u63a7\u5236\u300d\u3002\u5bf9\u4e8e\u6d88\u606f\u8def\u7531\u8fc7\u7a0b\u4e2d\u7684\u91cd\u8981\u64cd\u4f5c\uff08\u8b6c\u5982\u767b\u5f55\u3001\u5f00\u542f\u5bf9\u8bdd\u3001\u9080\u8bf7\u52a0\u5165\u7fa4\u7ec4\u3001\u4ece\u7fa4\u7ec4\u8e22\u51fa\u67d0\u4eba\u7b49\uff09\uff0c\u5b9e\u65f6\u6d88\u606f SDK \u5728\u53d1\u9001\u8bf7\u6c42\u4e4b\u524d\uff0c\u4f1a\u5148\u5230\u9274\u6743\u670d\u52a1\u5668\u83b7\u5f97\u64cd\u4f5c\u7b7e\u540d\uff0cLeanCloud \u4e91\u7aef\u4f1a\u9a8c\u8bc1\u7b7e\u540d\u6709\u6548\u6027\u5e76\u5b8c\u5168\u6309\u7167\u9274\u6743\u7ed3\u679c\u6765\u5bf9\u64cd\u4f5c\u653e\u884c\u6216\u62d2\u7edd\u3002 \u7cfb\u7edf\u8d26\u53f7\u3001\u673a\u5668\u4eba Hook \u548c\u516c\u4f17\u53f7\u540e\u53f0 \u652f\u6301\u7cfb\u7edf\u4e2d\u7684\u5c0f\u52a9\u624b\u3001\u673a\u5668\u4eba\u548c\u516c\u4f17\u53f7\u7b49\u573a\u666f\uff0c\u65b9\u4fbf\u7528\u6237\u5c06\u5373\u65f6\u901a\u8baf\u7cfb\u7edf\u548c\u81ea\u5df1\u5df2\u6709\u7684\u7cfb\u7edf\u65e0\u7f1d\u96c6\u6210\uff0c\u652f\u6301\u4e8c\u6b21\u5f00\u53d1\u673a\u5668\u4eba\u548c\u6d88\u606f\u540e\u53f0\u3002 \u6211\u4eec\u63d0\u4f9b\u51e0\u4e2a\u5c42\u9762\u7528\u6237\u63a5\u53e3\uff1a \u539f\u751f\u7684 Android\u3001iOS\u3001Windows Phone \u548c Web (JavaScript) \u8bed\u8a00\u7684\u5ba2\u6237\u7aef SDK \u5e2e\u52a9\u5f00\u53d1\u8005\u5b8c\u6210\u540e\u53f0\u7ba1\u7406\u548c\u4e91\u7aef\u76f8\u5173\u529f\u80fd\u7684 REST API \u90e8\u7f72\u5728 LeanCloud \u73af\u5883\u4e2d\u7684\u4e91\u5f15\u64ce Hook \u4fbf\u4e8e\u5f00\u53d1\u8005\u4fee\u6539\u9ed8\u8ba4\u7684\u7cfb\u7edf\u884c\u4e3a \u53ef\u4ee5\u5b9e\u65f6\u76d1\u63a7\u5728\u7ebf\u7528\u6237\u6570\u3001\u6d88\u606f\u6570\u7684\u5f00\u53d1\u8005\u63a7\u5236\u53f0 \u6838\u5fc3\u6982\u5ff5 ClientID\u3001\u7528\u6237\u548c\u767b\u5f55 \u5373\u65f6\u901a\u8baf\u670d\u52a1\u4e2d\u7684\u6bcf\u4e00\u4e2a\u7ec8\u7aef\u79f0\u4e3a\u4e00\u4e2a client\u3002client \u62e5\u6709\u4e00\u4e2a\u5728\u5e94\u7528\u5185\u552f\u4e00\u6807\u8bc6\u81ea\u5df1\u7684 id\u3002\u8fd9\u4e2a id \u7531\u5e94\u7528\u81ea\u5df1\u5b9a\u4e49\uff0c\u5fc5\u987b\u662f\u4e0d\u591a\u4e8e 64 \u4e2a\u5b57\u7b26\u7684\u5b57\u7b26\u4e32\u3002\u5728\u5927\u90e8\u5206\u573a\u5408\uff0cclient \u90fd\u53ef\u4ee5\u5bf9\u5e94\u5230\u5e94\u7528\u4e2d\u7684\u67d0\u4e2a\u300c\u7528\u6237\u300d\uff0c\u4f46\u662f\u5e76\u4e0d\u662f\u53ea\u6709\u771f\u7684\u7528\u6237\u624d\u80fd\u505a\u4e3a client\uff0c\u4f60\u5b8c\u5168\u53ef\u4ee5\u628a\u4e00\u4e2a\u63a2\u6d4b\u5668\u5f53\u6210\u4e00\u4e2a client\uff0c\u628a\u5b83\u6536\u96c6\u5230\u7684\u6570\u636e\u901a\u8fc7\u5373\u65f6\u901a\u8baf\u670d\u52a1\u5e7f\u64ad\u7ed9\u66f4\u591a\u300c\u4eba\u300d\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cLeanCloud \u901a\u4fe1\u670d\u52a1\u5141\u8bb8\u4e00\u4e2a clientId \u5728\u591a\u4e2a\u4e0d\u540c\u7684\u8bbe\u5907\u4e0a\u767b\u5f55\uff0c\u4e5f\u5141\u8bb8\u4e00\u4e2a\u8bbe\u5907\u4e0a\u6709\u591a\u4e2a clientId \u540c\u65f6\u767b\u5f55\u3002\u5982\u679c\u4f7f\u7528\u573a\u666f\u4e2d\u9700\u8981\u9650\u5236\u7528\u6237\u53ea\u5728\u4e00\u5904\u767b\u5f55\uff0c\u53ef\u4ee5\u5728\u767b\u5f55\u65f6\u660e\u786e\u8bbe\u7f6e\u5f53\u524d\u8bbe\u5907\u7684 tag\uff0c \u5f53 LeanCloud \u68c0\u6d4b\u5230\u540c\u4e00\u4e2a tag \u7684\u8bbe\u5907\u51fa\u73b0\u51b2\u7a81\u65f6\uff0c\u4f1a\u81ea\u52a8\u8e22\u51fa\u5df2\u5b58\u5728\u8bbe\u5907\u4e0a\u7684\u767b\u5f55\u72b6\u6001\u3002\u5f00\u53d1\u8005\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u5e94\u7528\u573a\u666f\u9009\u62e9\u5408\u9002\u7684\u4f7f\u7528\u65b9\u5f0f\u3002 \u4f7f\u7528 LeanCloud \u5373\u65f6\u901a\u8baf SDK \u5b8c\u6210\u767b\u5f55\u540e\uff0c\u5f00\u53d1\u8005\u5c31\u4e0d\u5fc5\u5173\u5fc3\u7f51\u7edc\u8fde\u63a5\u7b49\u72b6\u6001\uff0cSDK \u4f1a\u81ea\u52a8\u4e3a\u5f00\u53d1\u8005\u4fdd\u6301\u8fde\u63a5\u72b6\u6001\uff0c\u5e76\u6839\u636e\u7f51\u7edc\u72b6\u6001\u81ea\u52a8\u91cd\u8fde\u3002\u5bf9\u4e8e Android \u5e73\u53f0\uff0c\u6211\u4eec\u4f7f\u7528\u5e38\u9a7b\u540e\u53f0\u7684\u670d\u52a1\u4fdd\u6301\u5728\u7ebf\u72b6\u6001\uff1b\u5bf9\u4e8e iOS \u548c Windows Phone \u7b49\u5e73\u53f0\uff0c\u6211\u4eec\u4f1a\u5728\u5e94\u7528\u4ecd\u5728\u524d\u53f0\u65f6\u4fdd\u6301\u8fde\u63a5\uff0c\u5f53\u5e94\u7528\u9000\u5230\u540e\u53f0\u65f6\uff0c\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u518d\u6fc0\u6d3b\u5e73\u53f0\u539f\u751f\u7684\u63a8\u9001\u670d\u52a1\u3002 \u5728\u7ebf\u72b6\u6001 \u6211\u4eec\u76ee\u524d\u5728 SDK \u548c REST API \u4e0a\u63d0\u4f9b\u4e3b\u52a8\u67e5\u8be2\u7684\u673a\u5236\u5e2e\u52a9\u5f00\u53d1\u8005\u67e5\u8be2\u76ee\u6807\u7528\u6237\u7684\u5728\u7ebf\u72b6\u6001\u3002 \u5bf9\u8bdd\uff08Conversation\uff09 \u7528\u6237\u767b\u5f55\u4e4b\u540e\uff0c\u4e0e\u5176\u4ed6\u4eba\u8fdb\u884c\u6d88\u606f\u6c9f\u901a\uff0c\u5373\u4e3a\u5f00\u542f\u4e86\u4e00\u4e2a\u5bf9\u8bdd\uff08Conversation\uff09\u3002\u5f00\u59cb\u804a\u5929\u4e4b\u524d\uff0c\u9700\u8981\u5148\u521b\u5efa\u6216\u8005\u52a0\u5165\u4e00\u4e2a\u5bf9\u8bdd\uff0c\u7136\u540e\u518d\u9080\u8bf7\u5176\u4ed6\u4eba\u8fdb\u6765\uff0c\u4e4b\u540e\u6240\u6709\u53c2\u4e0e\u8005\u5728\u8fd9\u4e2a\u5bf9\u8bdd\u5185\u8fdb\u884c\u4ea4\u6d41\u3002\u6240\u6709\u6d88\u606f\u90fd\u662f\u7531\u67d0\u4e00\u4e2a client \u53d1\u5f80\u4e00\u4e2a\u300c\u5bf9\u8bdd\u300d\u3002 \u7cfb\u7edf\u6bcf\u521b\u5efa\u4e00\u4e2a\u5bf9\u8bdd\uff0c\u5c31\u4f1a\u5728\u4e91\u7aef\u7684 _Conversation \u8868\u4e2d\u589e\u52a0\u4e00\u6761\u8bb0\u5f55\uff0c\u53ef\u4ee5\u8fdb\u5165 \u63a7\u5236\u53f0 \u5b58\u50a8 \u6570\u636e \u6765\u67e5\u770b\u8be5\u6570\u636e\u3002 _Conversation \u8868\u4e2d\u5b57\u6bb5\u540d\u4e0e\u5bf9\u8bdd\u7684\u5404\u4e2a\u5c5e\u6027\u7684\u5bf9\u5e94\u5173\u7cfb\u4e3a\uff1a \u8868\u5b57\u6bb5 \u5c5e\u6027\u540d \u7c7b\u578b \u7ea6\u675f \u8bf4\u660e attr attributes Object \u53ef\u9009 \u81ea\u5b9a\u4e49\u5c5e\u6027\uff0c\u4f9b\u5f00\u53d1\u8005\u6269\u5c55\u4f7f\u7528\u3002 objectId conversationId String \u5bf9\u8bdd id\uff08\u53ea\u8bfb\uff09\uff0c\u7531\u4e91\u7aef\u4e3a\u8be5\u5bf9\u8bdd\u751f\u6210\u7684\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684 id\u3002 c creator String \u5bf9\u8bdd\u521b\u5efa\u8005\u7684 clientId\uff08\u53ea\u8bfb\uff09 lm lastMessageAt Date \u5bf9\u8bdd\u4e2d\u6700\u540e\u4e00\u6761\u6d88\u606f\u7684\u53d1\u9001\u6216\u63a5\u6536\u65f6\u95f4 m members Array \u666e\u901a\u5bf9\u8bdd\u7684\u6240\u6709\u53c2\u4e0e\u8005\uff08\u4ec5\u9488\u5bf9\u666e\u901a\u5bf9\u8bdd\uff0c\u6682\u6001\u5bf9\u8bdd\u548c\u7cfb\u7edf\u5bf9\u8bdd\u5e76\u4e0d\u652f\u6301\u6301\u4e45\u5316\u7684\u6210\u5458\u5217\u8868\uff09 mu mute Array \u5c06\u5bf9\u8bdd\u8bbe\u4e3a\u9759\u97f3\u7684\u53c2\u4e0e\u8005\uff0c\u8fd9\u90e8\u5206\u53c2\u4e0e\u8005\u4e0d\u4f1a\u6536\u5230\u63a8\u9001\u3002 \uff08\u4ec5\u9488\u5bf9 iOS \u4ee5\u53ca Windows Phone \u7528\u6237\u6709\u6548\uff09 name name String \u53ef\u9009 \u5bf9\u8bdd\u7684\u540d\u5b57\uff0c\u53ef\u4e3a\u7fa4\u7ec4\u547d\u540d\u3002 tr transient Boolean \u53ef\u9009 \u662f\u5426\u4e3a\u6682\u6001\u5bf9\u8bdd sys system Boolean \u53ef\u9009 \u662f\u5426\u662f\u7cfb\u7edf\u5bf9\u8bdd unique unique Boolean \u53ef\u9009 \u5185\u90e8\u5b57\u6bb5\uff0c\u6807\u8bb0\u6839\u636e\u6210\u5458\u539f\u5b50\u521b\u5efa\u7684\u5bf9\u8bdd\u3002 \u9664\u4e86\u5728\u5404\u5e73\u53f0\u7684 SDK \u91cc\u9762\u53ef\u4ee5\u8c03\u7528 API \u521b\u5efa\u5bf9\u8bdd\u5916\uff0c\u6211\u4eec\u4e5f\u63d0\u4f9b REST API \u53ef\u4ee5\u8ba9\u5927\u5bb6\u9884\u5148\u5efa\u7acb\u5bf9\u8bdd\uff1a\u5bf9\u8bdd\u7684\u4fe1\u606f\u5b58\u50a8\u5728 _Conversation \u8868\u4e2d\u3002 \u8fd9\u91cc\u8981\u7279\u522b\u8ba8\u8bba\u4e00\u4e0b \u5355\u804a \u3001 \u7fa4\u804a \u3001 \u804a\u5929\u5ba4 \u3001 \u516c\u4f17\u53f7 \u7b49\u4f7f\u7528\u573a\u666f\u3002 \u5355\u804a \u5c31\u662f\u4e24\u4e2a client \u4e4b\u95f4\u7684\u5bf9\u8bdd\uff0c\u516c\u5f00\u4e0e\u5426\uff08\u80fd\u5426\u8ba9\u5176\u4ed6\u4eba\u770b\u5230\u8fd9\u4e2a\u5bf9\u8bdd\u5b58\u5728\uff09\u7531\u5e94\u7528\u5c42\u81ea\u5df1\u63a7\u5236\u3002\u4e00\u822c\u800c\u8a00\uff0c\u5b83\u662f\u79c1\u5bc6\u7684\uff0c\u5e76\u4e14\u52a0\u5165\u65b0\u7684\u6210\u5458\u4e4b\u540e\uff0c\u4f1a\u5207\u6362\u5230\u65b0\u7684\u5bf9\u8bdd\uff08\u5f53\u7136\uff0c\u4e5f\u53ef\u4ee5\u4f9d\u7136\u4e0d\u79bb\u5f00\u5f53\u524d\u5bf9\u8bdd\uff0c\u8fd9\u4e00\u70b9\u8fd8\u662f\u7531\u5e94\u7528\u5c42\u6765\u51b3\u5b9a\uff09\u3002 \u7fa4\u804a \u5c31\u662f\u4e24\u4e2a\uff08\u542b\uff09\u4ee5\u4e0a client \u4e4b\u95f4\u7684\u5bf9\u8bdd\uff0c\u4e00\u822c\u800c\u8a00\uff0c\u53ef\u4ee5\u6dfb\u52a0\u548c\u5220\u9664\u6210\u5458\uff0c\u5e76\u4e14\u4f1a\u8d4b\u4e88\u7fa4\u804a\u4e00\u4e2a\u540d\u5b57\u3002\u968f\u7740\u6210\u5458\u7684\u51cf\u5c11\uff0c\u7fa4\u804a\u4e5f\u53ef\u80fd\u53ea\u6709\u4e24\u4e2a\u751a\u81f3\u4e00\u4e2a\u6210\u5458\uff08\u6210\u5458\u7684\u591a\u5c11\u5e76\u4e0d\u662f\u533a\u5206\u7fa4\u804a\u548c\u5355\u804a\u7684\u5173\u952e\uff09\u3002\u7fa4\u804a\u80fd\u5426\u516c\u5f00\uff08\u8b6c\u5982\u652f\u6301\u540d\u5b57\u641c\u7d22\uff09\uff0c\u7531\u5e94\u7528\u81ea\u5df1\u51b3\u5b9a\u3002 \u804a\u5929\u5ba4 \u5f88\u591a\u5e94\u7528\u4f7f\u7528\u7684\u804a\u5929\u5ba4\u3001\u5f39\u5e55\u3001\u7f51\u9875\u76f4\u64ad\u7b49\u90fd\u53ef\u4ee5\u62bd\u8c61\u6210\u300c\u804a\u5929\u5ba4\u300d\uff0c\u5b83\u4e0e\u7fa4\u804a\u7c7b\u4f3c\uff0c\u90fd\u662f\u591a\u4eba\u53c2\u4e0e\u7684\u7fa4\u7ec4\uff0c\u4f46\u662f\u4e5f\u6709\u4e00\u4e9b\u533a\u522b\uff1a\u5176\u4e00\u5728\u4e8e\u804a\u5929\u5ba4\u4eba\u6570\u53ef\u80fd\u8fdc\u5927\u4e8e\u7fa4\u804a\u4eba\u6570\uff1b\u5176\u4e8c\u5728\u4e8e\u804a\u5929\u5ba4\u5f3a\u8c03\u7684\u662f\u5728\u7ebf\u4eba\u6570\uff0c\u6240\u6709\u53c2\u4e0e\u8005\u8fdb\u5165\u804a\u5929\u754c\u9762\u5c31\u7b97\u52a0\u5165\uff0c\u5173\u95ed\u754c\u9762\u5c31\u7b97\u9000\u51fa\uff0c\u6240\u4ee5\u804a\u5929\u5ba4\u4e0d\u9700\u8981\u79bb\u7ebf\u6d88\u606f\u548c\u63a8\u9001\u901a\u77e5\uff0c\u5728\u7ebf\u6210\u5458\u6570\u6bd4\u5177\u4f53\u6210\u5458\u5217\u8868\u66f4\u6709\u610f\u4e49\u3002 \u516c\u4f17\u53f7\u3001\u673a\u5668\u4eba \u5bf9\u5168\u90e8\u6216\u8005\u90e8\u5206\u7528\u6237\u53ef\u89c1\uff08\u7531\u5e94\u7528\u5f00\u53d1\u8005\u51b3\u5b9a\uff09\u7684\u8d26\u53f7\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u8d26\u53f7\u7ed9\u7528\u6237\u53d1\u5e7f\u64ad\u901a\u77e5\uff0c\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u8d26\u53f7\u53cd\u9988\u5185\u5bb9\u7ed9\u5f00\u53d1\u8005\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u540e\u53f0\u770b\u5230\u6d88\u606f\uff0c\u4e5f\u53ef\u4ee5\u5229\u7528 API \u6216 Web Hook \u5c06\u81ea\u5df1\u7684\u4e1a\u52a1\u7cfb\u7edf\u96c6\u6210\u8fdb\u6765\u3002 \u6211\u4eec\u5c06\u4ee5\u4e0a\u573a\u666f\u62bd\u8c61\u4e3a\u300c\u5bf9\u8bdd\u300d\u8fd9\u4e00\u6982\u5ff5\uff0c\u5e76\u5206\u79bb\u51fa\u4ee5\u4e0b\u7c7b\u578b\u7684\u5bf9\u8bdd\uff1a \u666e\u901a\u5bf9\u8bdd\uff08Normal Conversation\uff09 \u8fd9\u662f\u6211\u4eec\u7ecf\u5e38\u4f1a\u7528\u5230\u7684\u300c\u5bf9\u8bdd\u300d\uff0c\u5355\u804a\u548c\u7fa4\u804a\u90fd\u901a\u8fc7\u5b83\u6765\u5b9e\u73b0\u3002\u6211\u4eec\u5efa\u8bae\u5f00\u53d1\u8005\u5c06\u5355\u804a/\u7fa4\u804a\u3001\u79c1\u5bc6/\u516c\u5f00\u7b49\u5c5e\u6027\u5b58\u5165\u5230 Conversation.attributes \u4e4b\u4e2d\uff0c\u5728\u5e94\u7528\u5c42\u8fdb\u884c\u533a\u522b\u5bf9\u5f85\u3002 \u4e3a\u4e86\u63d0\u9ad8\u7cfb\u7edf\u7684\u7075\u6d3b\u6027\uff0c\u6211\u4eec\u5141\u8bb8\u591a\u4e2a\u5bf9\u8bdd\u4fdd\u6301\u76f8\u540c\u7684\u6210\u5458\uff0c\u56e0\u6b64\u521b\u5efa\u5bf9\u8bdd\u65f6\u7cfb\u7edf\u603b\u662f\u9ed8\u8ba4\u521b\u5efa\u65b0\u7684\u5bf9\u8bdd\u3002 \u5982\u679c\u5f00\u53d1\u8005\u5e0c\u671b\u4f7f\u7528\u56fa\u5b9a\u7684\u5bf9\u8bdd\uff0c\u53ef\u4ee5\u5728\u521b\u5efa\u5bf9\u8bdd\u65f6\u8bbe\u7f6e\u76f8\u5e94 SDK \u4e0a\u7684 unique \u9009\u9879\uff0c\u7cfb\u7edf\u5c06\u67e5\u627e\u5bf9\u5e94\u6210\u5458\u76f8\u540c\u4e14 unique \u9009\u9879\u4e3a true \u7684\u5bf9\u8bdd\uff0c\u5982\u679c\u627e\u5230\u5373\u8fd4\u56de\u5df2\u6709\u7684\u5bf9\u8bdd\uff0c\u5982\u679c\u6ca1\u6709\u5219\u81ea\u52a8\u521b\u5efa\u3002 \uff08\u6ce8\u610f\uff0c\u8fd9\u79cd\u65b9\u5f0f\u67e5\u627e\u7684\u5bf9\u8bdd\u4ec5\u5bf9\u5df2\u7ecf\u4f7f\u7528 unique \u9009\u9879\u7684\u5bf9\u8bdd\u6709\u6548\uff0c\u5e76\u4e14\u521b\u5efa\u5bf9\u8bdd\u65f6\u4e0d\u4f1a\u89e6\u53d1 _Conversation \u8868\u5728\u4e91\u5f15\u64ce\u4e0a\u7684 beforeSave \u7b49 hook\uff09 REST API \u5728\u521b\u5efa\u5bf9\u8bdd\u65f6\u540c\u6837\u652f\u6301 unique \u53c2\u6570\u3002 \u5bf9\u4e8e\u5e94\u7528\u4e2d\u5b58\u5728\u7cfb\u7edf\u5e10\u53f7\u7684\u573a\u666f\uff0c\u6211\u4eec\u5efa\u8bae\u60a8\u901a\u8fc7\u4e0b\u6587\u63d0\u5230\u7684 \u7cfb\u7edf\u5bf9\u8bdd \u6765\u5b9e\u73b0\uff0c\u4ee5\u907f\u514d\u5bf9\u5355\u4e00\u5e10\u53f7\u521b\u5efa\u8fc7\u591a\u7684\u5bf9\u8bdd\u5f71\u54cd\u60a8\u5e94\u7528\u7684\u6027\u80fd\u3002 \u6682\u6001\u5bf9\u8bdd\uff08Transient Conversation\uff09 \u4e13\u95e8\u7528\u6765\u5904\u7406\u300c\u804a\u5929\u5ba4\u300d\u8fd9\u79cd\u9700\u6c42\u3002\u4e0e\u666e\u901a\u5bf9\u8bdd\u4e00\u6837\uff0c\u5b83\u652f\u6301\u521b\u5efa\u3001\u81ea\u8eab\u4e3b\u52a8\u52a0\u5165\u3001\u81ea\u8eab\u4e3b\u52a8\u9000\u51fa\u5bf9\u8bdd\u7b49\u64cd\u4f5c\uff1b\u6d88\u606f\u8bb0\u5f55\u4f1a\u88ab\u4fdd\u5b58\u5e76\u53ef\u4f9b\u83b7\u53d6\uff1b\u4f46\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff1a \u4e0d\u9650\u6210\u5458\u4e0a\u9650 \uff0c\u6ca1\u6709\u56fa\u5b9a\u6210\u5458\u6982\u5ff5\uff0c\u52a0\u5165\u5373\u4e3a\u6210\u5458\uff0c\u65ad\u7ebf\u5373\u4e3a\u9000\u51fa \u4e0d\u652f\u6301\u67e5\u8be2\u6210\u5458\u5217\u8868\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u76f8\u5173 API \u67e5\u8be2\u5728\u7ebf\u4eba\u6570\u3002 \u4e0d\u652f\u6301\u79bb\u7ebf\u6d88\u606f\u3001\u79bb\u7ebf\u63a8\u9001\u901a\u77e5\u7b49\u529f\u80fd\u3002 \u6ca1\u6709\u6210\u5458\u52a0\u5165\u3001\u79bb\u5f00\u7684\u901a\u77e5\u3002 \u4e0d\u652f\u6301\u9080\u8bf7\u52a0\u5165\u3001\u8e22\u51fa\u6210\u5458\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u3002 \u4e00\u4e2a\u7528\u6237\u4e00\u6b21\u767b\u5f55\u53ea\u80fd\u52a0\u5165\u4e00\u4e2a\u6682\u6001\u5bf9\u8bdd\uff0c\u52a0\u5165\u65b0\u7684\u6682\u6001\u5bf9\u8bdd\u540e\u4f1a\u81ea\u52a8\u79bb\u5f00\u65e7\u7684\u6682\u6001\u5bf9\u8bdd\u3002 \u52a0\u5165\u6682\u6001\u5bf9\u8bdd\u540e\u534a\u5c0f\u65f6\u5185\u65ad\u7f51\u91cd\u8fde\u4f1a\u81ea\u52a8\u52a0\u5165\u539f\u6682\u6001\u5bf9\u8bdd\uff0c\u8d85\u8fc7\u8fd9\u4e2a\u65f6\u95f4\u5219\u9700\u8981\u91cd\u65b0\u52a0\u5165\u3002 \u5728 _Conversation \u8868\u4e2d\uff0c\u4ee5 tr \u4e3a true \u6765\u6807\u8bb0\uff08 m \u5217\u5728\u6682\u6001\u5bf9\u8bdd\u4e2d\u5c06\u88ab\u5ffd\u7565\uff09 \u6ce8\u610f\u6682\u6001\u5bf9\u8bdd\u6ca1\u6709\u6301\u4e45\u5316\u7684\u6210\u5458\u6982\u5ff5\uff0c\u56e0\u6b64\u5bf9\u666e\u901a\u5bf9\u8bdd\u7684 m \u5b57\u6bb5\u7684\u64cd\u4f5c\u5bf9\u6682\u6001\u5bf9\u8bdd\u65e0\u6548\u3002 \u7cfb\u7edf\u5bf9\u8bdd\uff08System Conversation\uff09 \u8fd9\u662f\u7528\u4e8e\u5b9e\u73b0\u673a\u5668\u4eba\u3001\u516c\u4f17\u53f7\u3001\u670d\u52a1\u8d26\u53f7\u7b49\u573a\u666f\u7684\u5bf9\u8bdd\uff0c\u4e5f\u53ef\u4ee5\u7528\u4f5c\u53d1\u9001\u5e94\u7528\u5185\u901a\u77e5\u7684\u901a\u9053\u3002\u8fd9\u79cd\u5bf9\u8bdd\u5177\u6709\u4ee5\u4e0b\u7279\u70b9\uff1a \u52a0\u5165\u5373\u8ba2\u9605\uff0c\u79bb\u5f00\u5373\u9000\u8ba2\uff0c\u652f\u6301\u65e0\u9650\u7684\u8ba2\u9605\u4eba\u6570 \u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7 REST API \u4ee5\u7cfb\u7edf\u5bf9\u8bdd\u7684\u6e20\u9053\u7ed9\u6240\u6709\u7528\u6237\u3001\u8ba2\u9605\u7528\u6237\u6216\u6307\u5b9a\u7528\u6237\uff08\u4e0d\u8981\u6c42\u7528\u6237\u8ba2\u9605\uff09\u53d1\u6d88\u606f \u7528\u6237\u53ef\u4ee5\u7ed9\u7cfb\u7edf\u5bf9\u8bdd\u53d1\u6d88\u606f\uff0c\u6d88\u606f\u548c\u76f8\u5173\u4fe1\u606f\u4f1a\u5b58\u50a8\u5728\u6570\u636e\u5b58\u50a8\u4e2d\u7684 _SysMessage \u8868\uff0c\u5e76\u4e0d\u4f1a\u88ab\u5176\u4ed6\u8ba2\u9605\u7528\u6237\u6536\u5230 \u5f00\u53d1\u8005\u53ef\u4ee5\u914d\u7f6e Web Hook \u5730\u5740\u63a5\u6536\u7528\u6237\u53d1\u7ed9\u7cfb\u7edf\u5bf9\u8bdd\u7684\u6d88\u606f\uff0c\u5e76\u5229\u7528 REST API \u53d1\u6d88\u606f\u56de\u590d \u5728 SDK \u5c42\u9762\uff0c\u7cfb\u7edf\u5bf9\u8bdd\u7684\u63a5\u53e3\u4e0e\u666e\u901a\u5bf9\u8bdd\u5b8c\u5168\u4e00\u81f4 \u5728 _Conversation \u8868\u4e2d\uff0c\u4ee5 sys \u4e3a true \u6765\u6807\u8bb0\uff08 m \u5217\u5728\u7cfb\u7edf\u5bf9\u8bdd\u4e2d\u5c06\u88ab\u5ffd\u7565\uff09 \u5bf9\u8bdd\u7c7b\u578b\u6bd4\u8f83 \u529f\u80fd\u70b9 \u666e\u901a\u5bf9\u8bdd \u6682\u6001\u5bf9\u8bdd \u7cfb\u7edf\u5bf9\u8bdd \u4f7f\u7528\u573a\u666f \u5355\u804a\u3001\u7fa4\u804a \u804a\u5929\u5ba4\u3001\u5f39\u5e55\u3001\u7f51\u9875\u5b9e\u65f6\u8bc4\u8bba \u516c\u4f17\u53f7\u3001\u673a\u5668\u4eba\u3001\u4e0b\u53d1\u52a0\u597d\u53cb\u901a\u77e5\u3001\u81ea\u5b9a\u4e49\u6d88\u606f \u6210\u5458\u7ba1\u7406 \u6210\u5458\u6301\u4e45\u5316\u4fdd\u5b58\uff0c \u6700\u9ad8\u652f\u6301 500 \u4e2a\u6210\u5458 \u6ca1\u6709\u6301\u4e45\u5316\u7684\u6210\u5458\u6570\u636e\uff0c \u4f46\u652f\u6301\u6210\u5458\u6ca1\u6709\u4e0a\u9650 \u6ca1\u6709\u6210\u5458\u6982\u5ff5\uff0c \u5f00\u53d1\u8005\u7ef4\u62a4\u8ba2\u9605\u5173\u7cfb\uff0c \u8ba2\u9605\u4eba\u6570\u6ca1\u6709\u4e0a\u9650 \u6536\u53d1\u6d88\u606f \u53ea\u6709\u6210\u5458\u53ef\u4ee5\u6536\u53d1\u6d88\u606f \u6240\u6709\u7528\u6237\u90fd\u53ef\u4ee5\u53d1\u6d88\u606f\uff0c \u5f53\u524d\u5728\u7ebf\u7684\u6210\u5458\u53ef\u4ee5\u6536\u5230\u6d88\u606f \u5f00\u53d1\u8005\u901a\u8fc7 API \u7ed9\u7279\u5b9a\u7528\u6237\u53d1\u6d88\u606f\uff0c \u7528\u6237\u53d1\u9001\u7684\u6d88\u606f\u5230\u8fbe\u6570\u636e\u5e93\u548c Web Hook \u6d88\u606f\u8bb0\u5f55 \u652f\u6301 \u652f\u6301 \u652f\u6301 \u521b\u5efa\u5bf9\u8bdd \u5bf9\u8bdd\u53ef\u4ee5\u901a\u8fc7 SDK \u548c REST API \u521b\u5efa\u3002 \u5728\u5927\u90e8\u5206\u4f7f\u7528\u573a\u666f\u4e2d\uff0c\u666e\u901a\u5bf9\u8bdd\u901a\u8fc7 SDK \u521b\u5efa\uff0c\u7528\u4e8e\u6700\u7ec8\u7528\u6237\u4e4b\u95f4\u81ea\u53d1\u7684\u901a\u4fe1\u3002 \u6682\u6001\u5bf9\u8bdd\u548c\u7cfb\u7edf\u5bf9\u8bdd\u901a\u5e38\u548c\u5e94\u7528\u4e2d\u7684\u7279\u5b9a\u5b9e\u4f53\u7ed1\u5b9a\uff0c\u53ef\u4ee5\u901a\u8fc7 REST API \u63d0\u524d\u521b\u5efa\uff0c\u901a\u8fc7\u5e94\u7528\u4e2d\u7684\u4e1a\u52a1\u903b\u8f91 \u628a\u5bf9\u8bdd ID \u4e0b\u53d1\u7ed9\u6700\u7ec8\u7528\u6237\u3002 \u6d88\u606f\uff08Message\uff09 \u5373\u65f6\u901a\u8baf\u670d\u52a1\u7684\u6d88\u606f\u3002\u6211\u4eec\u7684\u6d88\u606f\u5141\u8bb8\u7528\u6237\u4e00\u6b21\u4f20\u8f93\u4e0d\u8d85\u8fc7 5 KB \u7684\u6587\u672c\u6570\u636e\u3002\u5728\u5e95\u5c42\u5373\u65f6\u901a\u8baf\u5141\u8bb8\u5f00\u53d1\u8005\u4f20\u8f93\u4efb\u4f55\u57fa\u4e8e\u6587\u672c\u7684\u6d88\u606f\u6570\u636e\uff0c\u7cfb\u7edf\u5bf9\u6d88\u606f\u683c\u5f0f\u6ca1\u6709\u4efb\u4f55\u8981\u6c42\uff0c \u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u6587\u672c\u534f\u8bae\u57fa\u7840\u4e0a\u5b9a\u4e49\u81ea\u5df1\u7684\u5e94\u7528\u5c42\u534f\u8bae\u3002 \u6d88\u606f\u5206\u4e3a\u300c\u666e\u901a\u6d88\u606f\u300d\u548c\u300c\u6682\u6001\u6d88\u606f\u300d\u3002LeanCloud \u4e91\u7aef\u5bf9\u4e8e\u666e\u901a\u6d88\u606f\u4f1a\u63d0\u4f9b\u63a5\u6536\u56de\u6267\u3001\u81ea\u52a8\u6301\u4e45\u5316\u5b58\u50a8\u3001\u79bb\u7ebf\u63a8\u9001\u7b49\u529f\u80fd\u3002 \u4f46\u662f\u6682\u6001\u6d88\u606f\uff0c\u5219\u4e0d\u4f1a\u88ab\u81ea\u52a8\u4fdd\u5b58\uff0c\u4e5f\u4e0d\u652f\u6301\u5ef6\u8fdf\u63a5\u6536\uff0c\u79bb\u7ebf\u7528\u6237\u66f4\u4e0d\u4f1a\u6536\u5230\u63a8\u9001\u901a\u77e5\uff0c\u6240\u4ee5\u9002\u5408\u7528\u6765\u505a\u63a7\u5236\u534f\u8bae\u3002 \u8b6c\u5982\u804a\u5929\u8fc7\u7a0b\u4e2d\u300c\u67d0\u67d0\u6b63\u5728\u8f93\u5165\u4e2d \u300d\u8fd9\u6837\u7684\u72b6\u6001\u4fe1\u606f\uff0c\u5c31\u9002\u5408\u901a\u8fc7\u6682\u6001\u6d88\u606f\u6765\u53d1\u9001\uff0c\u800c\u7528\u6237\u8f93\u5165\u7684\u6b63\u5f0f\u6d88\u606f\uff0c\u5219\u5e94\u8be5\u7528\u666e\u901a\u6d88\u606f\u6765\u53d1\u9001\u3002 LeanCloud \u5bf9\u666e\u901a\u6d88\u606f\u63d0\u4f9b\u300c\u81f3\u5c11\u4e00\u6b21\u300d\u7684\u5230\u8fbe\u4fdd\u8bc1\uff0c\u5e76\u4e14\u5728\u5b98\u65b9 SDK \u4e2d\u652f\u6301\u5bf9\u6d88\u606f\u7684\u53bb\u91cd\uff0c\u5f00\u53d1\u8005\u65e0\u9700\u5173\u5fc3\u3002\u9664\u4e86\u57fa\u4e8e\u300c\u63a8\u300d\u6a21\u578b\u7684\u6d88\u606f\u673a\u5236\uff0c\u6211\u4eec\u8fd8\u63d0\u4f9b\u6d88\u606f\u8bb0\u5f55\u7684\u673a\u5236\u5141\u8bb8 SDK \u548c REST API \u901a\u8fc7\u300c\u62c9\u300d\u7684\u65b9\u5f0f\u83b7\u53d6\u4efb\u610f\u65f6\u95f4\u70b9\u524d\u7684\u6d88\u606f\u3002 \u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7 SDK \u6216 REST API \u53d1\u9001\u6d88\u606f\u3002 SDK \u901a\u5e38\u7528\u4e8e\u6700\u7ec8\u7528\u6237\u53d1\u9001\u6d88\u606f\uff0c\u800c REST API \u662f\u5f00\u53d1\u8005\u4ece\u4e91\u7aef\u53d1\u9001\u6d88\u606f\u7684\u63a5\u53e3\u3002\u5f53\u4ece REST API \u53d1\u9001\u6d88\u606f\u65f6\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u6307\u5b9a\u6d88\u606f\u7684\u53d1\u9001\u8005\u3001\u5bf9\u8bdd ID\uff0c\u5bf9\u4e8e\u7cfb\u7edf\u5bf9\u8bdd\u8fd8\u53ef\u4ee5\u6307\u5b9a\u6d88\u606f\u7684\u63a5\u6536\u8005\u3002 \u4e00\u4e2a\u5bf9\u8bdd\u7684\u6d88\u606f\u8bb0\u5f55\u4f1a\u5728\u4e91\u7aef\u4fdd\u7559 6 \u4e2a\u6708 \uff0c\u4e5f\u5c31\u662f\u8bf4\u4e00\u4e2a\u5bf9\u8bdd\u53ef\u4ee5\u67e5\u8be2\u5230\u534a\u5e74\u4e4b\u5185\u7684\u5386\u53f2\u6d88\u606f\u8bb0\u5f55\u3002\u5f00\u53d1\u8005\u53ef\u4ee5\u4ed8\u8d39\u6765\u5ef6\u957f\u8fd9\u4e00\u671f\u9650\uff0c\u8bf7\u8054\u7cfb \u3002\u4f60\u4e5f\u968f\u65f6\u53ef\u4ee5\u901a\u8fc7 REST API \u5c06\u804a\u5929\u8bb0\u5f55\u540c\u6b65\u5230\u81ea\u5df1\u7684\u670d\u52a1\u5668\u4e0a\u3002 \u5bcc\u5a92\u4f53\u6d88\u606f \u4e3a\u4e86\u65b9\u4fbf\u5f00\u53d1\u8005\u7684\u4f7f\u7528\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u51e0\u79cd\u5c01\u88c5\u597d\u7684\u57fa\u4e8e JSON \u683c\u5f0f\u7684\u5bcc\u5a92\u4f53\u6d88\u606f\u7c7b\u578b\uff08TypedMessage\uff09\uff0c\u8b6c\u5982\uff1a \u6587\u672c\uff08TextMessage\uff09 \u56fe\u7247\uff08ImageMessage\uff09 \u97f3\u9891\uff08AudioMessage\uff09 \u89c6\u9891\uff08VideoMessage\uff09 \u4f4d\u7f6e\uff08LocationMessage\uff09 \u8fd9\u4e9b\u6d88\u606f\u7c7b\u578b\u53ef\u6700\u5927\u7a0b\u5ea6\u5730\u7b80\u5316\u4f7f\u7528\u6b65\u9aa4\uff0c\u80fd\u66f4\u597d\u5730\u6ee1\u8db3\u901a\u7528\u9700\u6c42\u3002\u5f00\u53d1\u8005\u4e5f\u53ef\u4ee5\u57fa\u4e8e\u6211\u4eec\u7684\u6846\u67b6\uff0c\u65b9\u4fbf\u5730\u6269\u5c55\u51fa\u81ea\u5df1\u7684\u6d88\u606f\u7c7b\u578b\u3002 \u8fd9\u4e9b\u6d88\u606f\u7c7b\u578b\u7684\u5c42\u6b21\u5173\u7cfb\u4e3a\uff1a Message | TypedMessage | __________________________________|__________________________________ | | | | | | TextMessage ImageMessage AudioMessage VideoMessage LocationMessage \u3002\u3002\u3002 \u5173\u4e8e\u8fd9\u90e8\u5206\u6d88\u606f\u7684\u683c\u5f0f\u8bf7\u53c2\u8003 \u300a\u5373\u65f6\u901a\u8baf REST API - \u5bcc\u5a92\u4f53\u6d88\u606f\u683c\u5f0f\u8bf4\u660e\u300b \u4e86\u89e3\u3002 \u79bb\u7ebf\u6d88\u606f \u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7 \u63a7\u5236\u53f0 \u6d88\u606f \u5b9e\u65f6\u6d88\u606f \u5e2e\u52a9 \u754c\u9762\u67e5\u8be2\u67d0\u4e2a Client ID \u7684\u5728\u7ebf\u72b6\u6001\u548c\u79bb\u7ebf\u6d88\u606f\u6570\u3002 \u5f53\u7528\u6237\u91cd\u65b0\u767b\u5f55\u540e\uff0cLeanCloud \u63d0\u4f9b\u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\u4e0b\u53d1\u79bb\u7ebf\u6d88\u606f\uff1a \u9ed8\u8ba4\u65b9\u5f0f \uff1a\u4e91\u7aef\u4f1a\u5bf9\u6bcf\u4e2a\u5bf9\u8bdd\u63a8\u9001\u81f3\u591a\u6700\u8fd1 20 \u6761\u6d88\u606f\u3002\u8fd9\u90e8\u5206\u6d88\u606f\u5728\u7528\u6237\u4e0a\u7ebf\u540e\u4f1a\u4ee5\u65b0\u6d88\u606f\u7684\u5f62\u5f0f\u5230\u8fbe\u5ba2\u6237\u7aef\uff0c\u5bf9\u4e8e\u8f7b\u91cf\u7ea7\u7684\u5e94\u7528\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u6ee1\u8db3\u5f00\u53d1\u8005\u5bf9\u79bb\u7ebf\u6d88\u606f\u7684\u9700\u6c42\uff1b \u672a\u8bfb\u6570\u91cf\u65b9\u5f0f \uff1a\u4e91\u7aef\u4f1a\u8fd4\u56de\u79bb\u7ebf\u671f\u95f4\u4ea7\u751f\u672a\u8bfb\u6d88\u606f\u7684\u5bf9\u8bdd\u5217\u8868\u53ca\u672a\u8bfb\u6d88\u606f\u6570\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a\u901a\u77e5\u62c9\u53d6\u79bb\u7ebf\u6d88\u606f\u8bb0\u5f55\u6536\u53d6\u79bb\u7ebf\u6d88\u606f\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4e0b\u5f00\u53d1\u8005\u5bf9\u6d88\u606f\u7684\u6570\u91cf\u53ef\u4ee5\u5b8c\u5168\u7684\u63a7\u5236\uff1b \u6ce8\u610f\uff0c\u8bf7\u4e0d\u8981\u6df7\u5408\u4f7f\u7528\u4e0a\u9762\u4e24\u79cd\u65b9\u5f0f\uff0c\u6bd4\u5982\u5728 iOS \u5e73\u53f0\u4f7f\u7528\u9ed8\u8ba4\u65b9\u5f0f\u83b7\u53d6\u79bb\u7ebf\u6d88\u606f\u800c Android \u5e73\u53f0\u4f7f\u7528\u672a\u8bfb\u6570\u91cf\u65b9\u5f0f\u83b7\u53d6\u79bb\u7ebf\u6d88\u606f\u3002\u8fd9\u79cd\u60c5\u51b5\u53ef\u80fd\u5bfc\u81f4\u79bb\u7ebf\u6d88\u606f\u65e0\u6cd5\u6b63\u5e38\u83b7\u53d6\u3002 \u79bb\u7ebf\u63a8\u9001\u901a\u77e5 \u5bf9\u79bb\u7ebf\u7684 iOS \u548c Windows Phone \u7528\u6237\uff0c\u6bcf\u6b21\u6709\u79bb\u7ebf\u6d88\u606f\u65f6\uff0c\u6211\u4eec\u63d0\u4f9b\u53d1\u9001\u79bb\u7ebf\u63a8\u9001\u901a\u77e5\u7684\u529f\u80fd\u3002\u8981\u60f3\u4f7f\u7528\u672c\u529f\u80fd\uff0c\u7528\u6237\u9700\u8981 \u81ea\u5b9a\u4e49\u63a8\u9001\u7684\u5185\u5bb9 \uff0c\u76ee\u524d\u6709\u4e09\u79cd\u65b9\u5f0f\uff0c\u6309\u4f18\u5148\u7ea7\u4ece\u9ad8\u5230\u4f4e\u4f9d\u6b21\u4e3a\uff1a \u52a8\u6001\u5185\u5bb9\u65b9\u5f0f \u5982\u679c\u5e0c\u671b\u63a8\u9001\u901a\u77e5\u663e\u793a\u52a8\u6001\u5185\u5bb9\uff0c\u6bd4\u5982\u6d88\u606f\u7684\u5b9e\u9645\u5185\u5bb9\uff0c\u6216\u6839\u636e\u6d88\u606f\u5185\u5bb9\u3001\u5bf9\u8bdd\u4fe1\u606f\u7b49\u4e0a\u4e0b\u6587\u4fe1\u606f\u6765\u81ea\u5b9a\u4e49\u5185\u5bb9\uff0c\u5219\u9700\u8981\u901a\u8fc7 \u4e91\u5f15\u64ce Hook _receiversOffline \u6765\u5b9e\u73b0\u3002\u8be5\u7c7b\u578b\u4f18\u5148\u7ea7\u6700\u9ad8\u3002 \u6d88\u606f\u9644\u4ef6\u65b9\u5f0f \u5bf9\u4e8e SDK\uff0c\u901a\u8fc7\u5404\u4e2a SDK \u63d0\u4f9b\u7684 API \u8bbe\u7f6e\u8fd9\u6761\u6d88\u606f\u53ef\u80fd\u4ea7\u751f\u7684\u63a8\u9001\u5185\u5bb9\uff0c\u6bd4\u5982 JS \u7684\u662f pushData \u53c2\u6570 \u5bf9\u4e8e REST\uff0c\u901a\u8fc7 push_data \u53c2\u6570 \u8bbe\u5b9a \u9759\u6001\u5185\u5bb9\u65b9\u5f0f \u7531\u4e8e\u4e0d\u540c\u5e73\u53f0\u7684\u4e0d\u540c\u9650\u5236\uff0c\u4e14\u7528\u6237\u7684\u6d88\u606f\u6b63\u6587\u53ef\u80fd\u8fd8\u5305\u542b\u4e0a\u5c42\u534f\u8bae\uff0c\u6240\u4ee5\u6211\u4eec\u5141\u8bb8\u7528\u6237\u5728\u63a7\u5236\u53f0\u4e2d\u4e3a\u5e94\u7528\u8bbe\u7f6e\u4e00\u4e2a\u9759\u6001\u7684 APNs JSON\uff0c\u63a8\u9001\u4e00\u6761\u5185\u5bb9\u56fa\u5b9a\u7684\u901a\u77e5\u3002 \u8fdb\u5165 \u63a7\u5236\u53f0 \u6d88\u606f \u5b9e\u65f6\u6d88\u606f \u8bbe\u7f6e iOS \u7528\u6237\u79bb\u7ebf\u63a8\u9001\u8bbe\u7f6e \uff0c\u586b\u5165\uff1a { alert : \u60a8\u6709\u65b0\u7684\u6d88\u606f , badge : Increment } \u6ce8\u610f\uff0c Increment \u5927\u5c0f\u5199\u654f\u611f\uff0c\u8868\u793a\u81ea\u52a8\u589e\u52a0\u5e94\u7528 badge \u4e0a\u7684\u6570\u5b57\u8ba1\u6570\u3002\u6e05\u9664 badge \u7684\u64cd\u4f5c\u8bf7\u53c2\u8003 iOS \u63a8\u9001\u6307\u5357 \u6e05\u9664 badge \u3002 \u6b64\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u8bbe\u7f6e\u58f0\u97f3\u7b49\u63a8\u9001\u5c5e\u6027\uff0c\u5177\u4f53\u7684\u5b57\u6bb5\u53ef\u4ee5\u53c2\u8003 \u63a8\u9001 \u6d88\u606f\u5185\u5bb9 Data \u3002 \u9650\u5236 \u901a\u77e5\u7684\u8fc7\u671f\u65f6\u95f4\u662f 7 \u5929\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u4e00\u4e2a\u8bbe\u5907 7 \u5929\u5185\u6ca1\u6709\u8fde\u63a5\u5230 APNs \u6216 MPNs\uff0c\u7cfb\u7edf\u5c06\u4e0d\u4f1a\u518d\u7ed9\u8fd9\u4e2a\u8bbe\u5907\u63a8\u9001\u901a\u77e5\u3002 \u539f\u7406 \u8fd9\u90e8\u5206\u5e73\u53f0\u7684\u7528\u6237\uff0c\u5728\u5b8c\u6210\u767b\u5f55\u65f6\uff0cSDK \u4f1a\u81ea\u52a8\u5173\u8054\u5f53\u524d\u7684 Client ID \u548c\u8bbe\u5907\u3002\u5173\u8054\u7684\u65b9\u5f0f\u662f\u901a\u8fc7\u8bbe\u5907 \u8ba2\u9605 \u540d\u4e3a Client ID \u7684 Channel \u5b9e\u73b0\u7684\u3002\u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u6570\u636e\u5b58\u50a8\u7684 _Installation \u8868\u4e2d\u7684 channels \u5b57\u6bb5\u67e5\u5230\u8fd9\u7ec4\u5173\u8054\u5173\u7cfb\u3002\u5728\u5b9e\u9645\u79bb\u7ebf\u63a8\u9001\u65f6\uff0c\u7cfb\u7edf\u6839\u636e\u7528\u6237 Client ID \u627e\u5230\u5bf9\u5e94\u7684\u5173\u8054\u8bbe\u5907\u8fdb\u884c\u63a8\u9001\u3002\u7531\u4e8e\u5373\u65f6\u901a\u8baf\u89e6\u53d1\u7684\u63a8\u9001\u91cf\u6bd4\u8f83\u5927\uff0c\u5185\u5bb9\u5355\u4e00\uff0c \u6240\u4ee5\u4e91\u7aef\u4e0d\u4f1a\u4fdd\u7559\u8fd9\u90e8\u5206\u8bb0\u5f55\uff0c\u5728 \u63a7\u5236\u53f0 \u6d88\u606f \u63a8\u9001\u8bb0\u5f55 \u4e2d\u4e5f\u65e0\u6cd5\u627e\u5230\u8fd9\u4e9b\u8bb0\u5f55\u3002 \u5176\u4ed6\u8bbe\u7f6e \u63a8\u9001\u9ed8\u8ba4\u4f7f\u7528 \u751f\u4ea7\u8bc1\u4e66 \uff0c\u4f60\u4e5f\u53ef\u4ee5\u5728 JSON \u4e2d\u589e\u52a0\u4e00\u4e2a _profile \u5185\u90e8\u5c5e\u6027\u6765\u9009\u62e9\u5b9e\u9645\u63a8\u9001\u7684\u8bc1\u4e66\uff0c\u5982\uff1a { alert : \u60a8\u6709\u4e00\u6761\u672a\u8bfb\u6d88\u606f , _profile : dev } Apple \u4e0d\u652f\u6301\u5728\u4e00\u6b21\u63a8\u9001\u4e2d\u5411\u591a\u4e2a\u4ece\u5c5e\u4e8e\u4e0d\u540c Team Id \u7684\u8bbe\u5907\u53d1\u63a8\u9001\u3002\u5728\u4f7f\u7528 iOS Token Authentication \u7684\u9274\u6743\u65b9\u5f0f\u540e\uff0c\u5982\u679c\u5e94\u7528\u914d\u7f6e\u4e86\u591a\u4e2a\u4e0d\u540c Team Id \u7684 Private Key\uff0c\u8bf7\u786e\u8ba4\u76ee\u6807\u7528\u6237\u8bbe\u5907\u4f7f\u7528\u7684 APNs Team ID \u5e76\u5c06\u5176\u586b\u5199\u5728 _apns_team_id \u53c2\u6570\u5185\uff0c\u4ee5\u4fdd\u8bc1\u63a8\u9001\u6b63\u5e38\u8fdb\u884c\uff0c\u53ea\u6709\u6307\u5b9a Team ID \u7684\u8bbe\u5907\u80fd\u6536\u5230\u63a8\u9001\u3002\u5982\uff1a { alert : \u60a8\u6709\u4e00\u6761\u672a\u8bfb\u6d88\u606f , _apns_team_id : my_fancy_team_id } _profile \u548c _apns_team_id \u5c5e\u6027\u5747\u4e0d\u4f1a\u5b9e\u9645\u63a8\u9001\u3002 \u76ee\u524d\uff0c\u8bbe\u7f6e\u754c\u9762\u7684\u63a8\u9001\u5185\u5bb9\u652f\u6301\u90e8\u5206\u5185\u7f6e\u53d8\u91cf\uff0c\u4f60\u53ef\u4ee5\u5c06\u4e0a\u4e0b\u6587\u4fe1\u606f\u76f4\u63a5\u8bbe\u7f6e\u5230\u63a8\u9001\u5185\u5bb9\u4e2d\uff1a ${ convId } \u63a8\u9001\u76f8\u5173\u7684\u5bf9\u8bdd ID ${ timestamp } \u89e6\u53d1\u63a8\u9001\u7684\u65f6\u95f4\u6233\uff08Unix \u65f6\u95f4\u6233\uff09 ${ fromClientId } \u6d88\u606f\u53d1\u9001\u8005\u7684 Client ID \u654f\u611f\u8bcd\u8fc7\u6ee4 \u6839\u636e\u653f\u7b56\u7684\u8981\u6c42\uff0c\u6211\u4eec\u4e3a\u591a\u4eba\u7684\u666e\u901a\u5bf9\u8bdd\u3001\u6682\u6001\u5bf9\u8bdd\u548c\u7cfb\u7edf\u5bf9\u8bdd\u8fdb\u884c\u654f\u611f\u8bcd\u8fc7\u6ee4\u3002 \u8fc7\u6ee4\u7684\u8bcd\u5e93\u7531 LeanCloud \u63d0\u4f9b\uff0c\u547d\u4e2d\u7684\u654f\u611f\u8bcd\u5c06\u4f1a\u88ab\u66ff\u6362\u4e3a *** \u3002 \u652f\u6301\u7528\u6237\u81ea\u5b9a\u4e49\u654f\u611f\u8bcd\u8fc7\u6ee4\u6587\u4ef6\u3002\u5728 \u63a7\u5236\u53f0 \u6d88\u606f \u5b9e\u65f6\u6d88\u606f \u8bbe\u7f6e \u4e2d\u5f00\u542f\u300c\u6d88\u606f\u654f\u611f\u8bcd\u5b9e\u65f6\u8fc7\u6ee4\u529f\u80fd\u300d\uff0c\u4e0a\u4f20\u654f\u611f\u8bcd\u6587\u4ef6\u5373\u53ef\u3002 \u5982\u679c\u5f00\u53d1\u8005\u6709\u8f83\u4e3a\u590d\u6742\u7684\u8fc7\u6ee4\u9700\u6c42\uff0c\u6211\u4eec\u63a8\u8350\u4f7f\u7528 \u4e91\u5f15\u64ce hook _messageReceived \u6765\u5b9e\u73b0\u8fc7\u6ee4\uff0c\u5728 hook \u4e2d\u5f00\u53d1\u8005\u5bf9\u6d88\u606f\u7684\u5185\u5bb9\u6709\u5b8c\u5168\u7684\u63a7\u5236\u529b\u3002 \u5e7f\u64ad\u6d88\u606f \u5f53\u5f00\u53d1\u8005\u9700\u8981\u5411\u6240\u6709\u7528\u6237\u53d1\u9001\u5e7f\u64ad\u6d88\u606f\u65f6\uff0c\u53ef\u4ee5\u5229\u7528\u5e7f\u64ad\u6d88\u606f\u7684\u63a5\u53e3\uff0c\u800c\u65e0\u9700\u904d\u5386\u6240\u6709\u7684\u7528\u6237 ID \u9010\u4e2a\u53d1\u9001\u3002 \u5e7f\u64ad\u6d88\u606f\u5177\u6709\u4ee5\u4e0b\u7279\u5f81\uff1a \u5e7f\u64ad\u6d88\u606f\u5fc5\u987b\u4e0e\u7cfb\u7edf\u5bf9\u8bdd\u5173\u8054\uff0c\u5e7f\u64ad\u6d88\u606f\u548c\u4e00\u822c\u7684\u7cfb\u7edf\u5bf9\u8bdd\u6d88\u606f\u4f1a\u6df7\u5408\u5728\u7cfb\u7edf\u5bf9\u8bdd\u7684\u8bb0\u5f55\u4e2d \u7528\u6237\u79bb\u7ebf\u65f6\u53d1\u9001\u7684\u5e7f\u64ad\u6d88\u606f\uff0c\u4e0a\u7ebf\u540e\u4f1a\u4f5c\u4e3a\u79bb\u7ebf\u6d88\u606f\u6536\u5230 \u5e7f\u64ad\u6d88\u606f\u5177\u6709\u5b9e\u6548\u6027\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\uff1b\u8fc7\u671f\u7684\u6d88\u606f\u4e0d\u4f1a\u4f5c\u4e3a\u79bb\u7ebf\u6d88\u606f\u53d1\u9001\u7ed9\u7528\u6237\uff0c\u4e0d\u8fc7\u4ecd\u7136\u53ef\u4ee5\u5728\u5386\u53f2\u6d88\u606f\u4e2d\u83b7\u53d6\u5230 \u65b0\u7528\u6237\u7b2c\u4e00\u6b21\u767b\u5f55\u540e\uff0c\u4f1a\u6536\u5230\u6700\u8fd1\u4e00\u6761\u672a\u8fc7\u671f\u7684\u7cfb\u7edf\u5e7f\u64ad\u6d88\u606f \u9664\u6b64\u4ee5\u5916\u5e7f\u64ad\u6d88\u606f\u4e0e\u666e\u901a\u6d88\u606f\u7684\u5904\u7406\u5b8c\u5168\u4e00\u81f4\u3002\u5e7f\u64ad\u6d88\u606f\u7684\u53d1\u9001\u53ef\u4ee5\u53c2\u8003 \u5e7f\u64ad\u6d88\u606f REST API \u6743\u9650\u548c\u8ba4\u8bc1 \u4f7f\u7528\u7b7e\u540d\u53ef\u4ee5\u4fdd\u8bc1\u804a\u5929\u901a\u9053\u7684\u5b89\u5168\uff0c\u8fd9\u4e00\u529f\u80fd\u9ed8\u8ba4\u662f\u5173\u95ed\u7684\uff0c\u53ef\u4ee5\u5728 \u63a7\u5236\u53f0 \u6d88\u606f \u5b9e\u65f6\u6d88\u606f \u8bbe\u7f6e \u5b9e\u65f6\u6d88\u606f\u9009\u9879 \u4e2d\u8fdb\u884c\u5f00\u542f\uff1a \u767b\u5f55\u542f\u7528\u7b7e\u540d\u8ba4\u8bc1 \uff0c\u7528\u4e8e\u63a7\u5236\u6240\u6709\u7684\u7528\u6237\u767b\u5f55 \u5bf9\u8bdd\u64cd\u4f5c\u542f\u7528\u7b7e\u540d\u8ba4\u8bc1 \uff0c\u7528\u4e8e\u63a7\u5236\u65b0\u5efa\u6216\u52a0\u5165\u5bf9\u8bdd\u3001\u9080\u8bf7/\u8e22\u51fa\u5bf9\u8bdd\u6210\u5458\u7b49\u64cd\u4f5c \u804a\u5929\u8bb0\u5f55\u67e5\u8be2\u542f\u7528\u7b7e\u540d\u8ba4\u8bc1 \uff0c\u7528\u4e8e\u63a7\u5236\u804a\u5929\u8bb0\u5f55\u67e5\u8be2\u64cd\u4f5c \u5f00\u53d1\u8005\u53ef\u6839\u636e\u5b9e\u9645\u9700\u8981\u8fdb\u884c\u9009\u62e9\u3002\u4e00\u822c\u6765\u8bf4\uff0c \u767b\u5f55\u8ba4\u8bc1 \u80fd\u591f\u6ee1\u8db3\u5927\u90e8\u5206\u5b89\u5168\u9700\u6c42\uff0c\u800c\u4e14\u6211\u4eec\u4e5f\u5f3a\u70c8\u5efa\u8bae\u5f00\u53d1\u8005\u5f00\u542f\u767b\u5f55\u8ba4\u8bc1\u3002 \u5bf9\u4e8e\u4f7f\u7528 AVUser \u7684\u5e94\u7528\uff0c\u53ef\u4f7f\u7528 REST API \u83b7\u53d6 Client \u767b\u5f55\u7b7e\u540d \u8fdb\u884c\u767b\u5f55\u8ba4\u8bc1\u3002 \u5ba2\u6237\u7aef\u8fdb\u884c\u767b\u5f55\u6216\u65b0\u5efa\u5bf9\u8bdd\u7b49\u64cd\u4f5c\uff0cSDK \u4f1a\u8c03\u7528 SignatureFactory \u7684\u5b9e\u73b0\uff0c\u5e76\u643a\u5e26\u7528\u6237\u4fe1\u606f\u548c\u7528\u6237\u884c\u4e3a\uff08\u767b\u5f55\u3001\u65b0\u5efa\u5bf9\u8bdd\u6216\u7fa4\u7ec4\u64cd\u4f5c\uff09\u8bf7\u6c42\u7b7e\u540d\uff1b \u5e94\u7528\u81ea\u6709\u7684\u6743\u9650\u7cfb\u7edf\uff0c\u6216\u5e94\u7528\u5728 LeanCloud \u4e91\u5f15\u64ce\u4e0a\u7684\u7b7e\u540d\u7a0b\u5e8f\u6536\u5230\u8bf7\u6c42\uff0c\u8fdb\u884c\u6743\u9650\u9a8c\u8bc1\uff0c\u5982\u679c\u901a\u8fc7\u5219\u5229\u7528\u4e0b\u6587\u6240\u8ff0\u7684 \u7b7e\u540d\u7b97\u6cd5 \u751f\u6210\u65f6\u95f4\u6233\u3001\u968f\u673a\u5b57\u7b26\u4e32\u548c\u7b7e\u540d\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff1b \u5ba2\u6237\u7aef\u83b7\u5f97\u7b7e\u540d\u540e\uff0c\u7f16\u7801\u5230\u8bf7\u6c42\u4e2d\uff0c\u53d1\u7ed9 LeanCloud \u5373\u65f6\u901a\u8baf\u670d\u52a1\u5668\uff1b \u5373\u65f6\u901a\u8baf\u670d\u52a1\u5668\u5bf9\u8bf7\u6c42\u7684\u5185\u5bb9\u548c\u7b7e\u540d\u505a\u4e00\u904d\u9a8c\u8bc1\uff0c\u786e\u8ba4\u8fd9\u4e2a\u64cd\u4f5c\u662f\u88ab\u5e94\u7528\u670d\u52a1\u5668\u5141\u8bb8\u7684\uff0c\u8fdb\u800c\u6267\u884c\u540e\u7eed\u7684\u5b9e\u9645\u64cd\u4f5c\u3002 \u7b7e\u540d\u91c7\u7528 Hmac-sha1 \u7b97\u6cd5\uff0c\u8f93\u51fa\u5b57\u8282\u6d41\u7684\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\uff08hex dump\uff09\u3002\u9488\u5bf9\u4e0d\u540c\u7684\u8bf7\u6c42\uff0c\u5f00\u53d1\u8005\u9700\u8981\u62fc\u88c5\u4e0d\u540c\u7ec4\u5408\u7684\u5b57\u7b26\u4e32\uff0c\u52a0\u4e0a UTC timestamp \u4ee5\u53ca\u968f\u673a\u5b57\u7b26\u4e32\u4f5c\u4e3a\u7b7e\u540d\u7684\u6d88\u606f\u3002 \u4e91\u5f15\u64ce\u7b7e\u540d\u8303\u4f8b \u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a\u8fd0\u884c\u5728 LeanCloud \u4e91\u5f15\u64ce \u4e0a\u7684 \u7b7e\u540d\u8303\u4f8b\u7a0b\u5e8f \uff0c\u5b83\u63d0\u4f9b\u4e86\u57fa\u4e8e Web Hosting \u548c\u4e91\u51fd\u6570\u4e24\u79cd\u65b9\u5f0f\u7684\u7b7e\u540d\u5b9e\u73b0\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u9009\u62e9\u81ea\u5df1\u7684\u5b9e\u73b0\u3002 \u7528\u6237\u767b\u5f55\u7684\u7b7e\u540d \u7b7e\u540d\u7684\u6d88\u606f\u683c\u5f0f\u5982\u4e0b\uff0c\u6ce8\u610f clientid \u4e0e timestamp \u4e4b\u95f4\u662f \u4e24\u4e2a\u5192\u53f7 \uff1a appid : clientid :: timestamp : nonce \u53c2\u6570 \u8bf4\u660e appid \u5e94\u7528\u7684 id clientid \u767b\u5f55\u65f6\u4f7f\u7528\u7684 clientId timestamp \u5f53\u524d\u7684 UTC \u65f6\u95f4\u8ddd\u79bb unix epoch \u7684 \u6beb\u79d2\u6570 nonce \u968f\u673a\u5b57\u7b26\u4e32 \u6ce8\u610f\uff1a\u7b7e\u540d\u7684 key \u5fc5\u987b \u662f\u5e94\u7528\u7684 master key\uff0c\u4f60\u53ef\u4ee5 \u63a7\u5236\u53f0 \u8bbe\u7f6e \u5e94\u7528 Key \u91cc\u627e\u5230\u3002 \u8bf7\u4fdd\u62a4\u597d master key\uff0c\u4e0d\u8981\u6cc4\u9732\u7ed9\u4efb\u4f55\u65e0\u5173\u4eba\u5458\u3002 \u5f00\u53d1\u8005\u53ef\u4ee5\u5b9e\u73b0\u81ea\u5df1\u7684 SignatureFactory\uff0c\u8c03\u7528\u8fdc\u7a0b\u670d\u52a1\u5668\u7684\u7b7e\u540d\u63a5\u53e3\u83b7\u5f97\u7b7e\u540d\u3002\u5982\u679c\u4f60\u6ca1\u6709\u81ea\u5df1\u7684\u670d\u52a1\u5668\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728 LeanCloud \u4e91\u5f15\u64ce\u4e0a\u901a\u8fc7 \u7f51\u7ad9\u6258\u7ba1 \u6765\u5b9e\u73b0\u81ea\u5df1\u7684\u7b7e\u540d\u63a5\u53e3\u3002\u5728\u79fb\u52a8\u5e94\u7528\u4e2d\u76f4\u63a5\u505a\u7b7e\u540d\u7684\u4f5c\u6cd5 \u975e\u5e38\u5371\u9669 \uff0c\u5b83\u53ef\u80fd\u5bfc\u81f4\u4f60\u7684 master key \u6cc4\u6f0f\u3002 \u5f00\u542f\u5bf9\u8bdd\u7b7e\u540d \u65b0\u5efa\u4e00\u4e2a\u5bf9\u8bdd\u7684\u65f6\u5019\uff0c\u7b7e\u540d\u7684\u6d88\u606f\u683c\u5f0f\u4e3a\uff1a appid : clientid : sorted_member_ids : timestamp : nonce appid\u3001clientid\u3001timestamp \u548c nonce \u7684\u542b\u4e49 \u540c\u4e0a \u3002 sorted_member_ids \u662f\u4ee5\u534a\u89d2\u5192\u53f7\uff08:\uff09\u5206\u9694\u3001 \u5347\u5e8f\u6392\u5e8f \u7684 user id\uff0c\u5373\u9080\u8bf7\u53c2\u4e0e\u8be5\u5bf9\u8bdd\u7684\u6210\u5458\u5217\u8868\u3002 \u7fa4\u7ec4\u529f\u80fd\u7684\u7b7e\u540d \u5728\u7fa4\u7ec4\u529f\u80fd\u4e2d\uff0c\u6211\u4eec\u5bf9 \u52a0\u7fa4 \u3001 \u9080\u8bf7 \u548c \u8e22\u51fa\u7fa4 \u8fd9\u4e09\u4e2a\u52a8\u4f5c\u4e5f\u5141\u8bb8\u52a0\u5165\u7b7e\u540d\uff0c\u7b7e\u540d\u683c\u5f0f\u662f\uff1a appid : clientid : convid : sorted_member_ids : timestamp : nonce : action appid\u3001clientid\u3001sorted_member_ids\u3001timestamp \u548c nonce \u7684\u542b\u4e49\u540c\u4e0a\u3002\u5bf9\u521b\u5efa\u7fa4\u7684\u60c5\u51b5\uff0c\u8fd9\u91cc sorted_member_ids \u662f\u7a7a\u5b57\u7b26\u4e32\u3002 convid - \u6b64\u6b21\u884c\u4e3a\u5173\u8054\u7684\u5bf9\u8bdd id\u3002 action - \u6b64\u6b21\u884c\u4e3a\u7684\u52a8\u4f5c\uff0c invite \u8868\u793a\u52a0\u7fa4\u548c\u9080\u8bf7\uff0c kick \u8868\u793a\u8e22\u51fa\u7fa4\u3002 \u67e5\u8be2\u804a\u5929\u8bb0\u5f55\u7684\u7b7e\u540d appid : client_id : convid : nonce : signature_ts * client_id \u67e5\u770b\u8005 id\uff08\u7b7e\u540d\u53c2\u6570\uff09 * nonce \u7b7e\u540d\u968f\u673a\u5b57\u7b26\u4e32\uff08\u7b7e\u540d\u53c2\u6570\uff09 * signature_ts \u7b7e\u540d\u65f6\u95f4\u6233\uff08\u7b7e\u540d\u53c2\u6570\uff09\uff0c\u5355\u4f4d\u662f\u79d2 * signature \u7b7e\u540d\uff08\u7b7e\u540d\u53c2\u6570\uff09 \u9ed1\u540d\u5355\u7684\u7b7e\u540d \u7531\u4e8e\u9ed1\u540d\u5355\u6709\u4e24\u79cd\u60c5\u51b5\uff0c\u6240\u4ee5\u7b7e\u540d\u683c\u5f0f\u4e5f\u6709\u4e24\u79cd\uff1a client \u5bf9 conversation appid : clientid : convid :: timestamp : nonce : action action - \u6b64\u6b21\u884c\u4e3a\u7684\u52a8\u4f5c\uff0cclient-block-conversations \u8868\u793a\u6dfb\u52a0\u9ed1\u540d\u5355\uff0cclient-unblock-conversations \u8868\u793a\u53d6\u6d88\u9ed1\u540d\u5355 conversation \u5bf9 client appid : clientid : convid : sorted_member_ids : timestamp : nonce : action action - \u6b64\u6b21\u884c\u4e3a\u7684\u52a8\u4f5c\uff0cconversation-block-clients \u8868\u793a\u6dfb\u52a0\u9ed1\u540d\u5355\uff0cconversation-unblock-clients \u8868\u793a\u53d6\u6d88\u9ed1\u540d\u5355 sorted_member_ids \u540c\u4e0a \u6d4b\u8bd5\u7b7e\u540d \u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u63a7\u5236\u53f0\u4e2d\u65b9\u4fbf\u5730\u6d4b\u8bd5\u7b7e\u540d\u3002\u8fdb\u5165 \u6d88\u606f \u5b9e\u65f6\u6d88\u606f \u7528\u6237 \uff0c\u8f93\u5165\u4e00\u4e2a clientId \u8fdb\u884c\u67e5\u627e\uff0c\u627e\u5230\u540e\u754c\u9762\u4f1a\u663e\u793a \u6d4b\u8bd5\u7b7e\u540d \u6309\u952e\u53ca\u66f4\u591a\u5185\u5bb9\u3002 \u4e91\u5f15\u64ce Hook \u5bf9\u4e8e\u666e\u901a\u6d88\u606f\uff0c\u5982\u679c\u53d1\u9001\u65f6\u90e8\u5206\u6210\u5458\u4e0d\u5728\u7ebf\uff0cLeanCloud \u63d0\u4f9b\u4e86\u9009\u9879\uff0c\u652f\u6301\u5c06\u79bb\u7ebf\u6d88\u606f\u4ee5\u63a8\u9001\u5f62\u5f0f\u53d1\u9001\u5230\u5ba2\u6237\u7aef\u3002\u5982\u679c\u5f00\u53d1\u8005\u5e0c\u671b\u4fee\u6539\u63a8\u9001\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u4f7f\u7528\u300c\u4e91\u5f15\u64ce Hook\u300d\u3002 \u4e91\u5f15\u64ce Hook \u5141\u8bb8\u4f60\u901a\u8fc7\u81ea\u5b9a\u4e49\u7684\u4e91\u5f15\u64ce\u51fd\u6570\u5904\u7406\u5373\u65f6\u901a\u8baf\u4e2d\u7684\u67d0\u4e9b\u4e8b\u4ef6\uff0c\u4fee\u6539\u9ed8\u8ba4\u7684\u6d41\u7a0b\u7b49\u7b49\u3002\u76ee\u524d\u5f00\u653e\u7684 hook \u4e91\u51fd\u6570\u5305\u62ec\uff1a _messageReceived \u6d88\u606f\u8fbe\u5230\u670d\u52a1\u5668\uff0c\u7fa4\u7ec4\u6210\u5458\u5df2\u89e3\u6790\u5b8c\u6210\u4e4b\u540e\uff0c\u53d1\u9001\u7ed9\u6536\u4ef6\u4eba\u4e4b\u524d\u3002 _receiversOffline \u6d88\u606f\u53d1\u9001\u5b8c\u6210\uff0c\u5b58\u5728\u79bb\u7ebf\u7684\u6536\u4ef6\u4eba\u3002 _messageSent \u6d88\u606f\u53d1\u9001\u5b8c\u6210\u3002 _conversationStart \u521b\u5efa\u5bf9\u8bdd\uff0c\u5728\u7b7e\u540d\u6821\u9a8c\uff08\u5982\u679c\u5f00\u542f\uff09\u4e4b\u540e\uff0c\u5b9e\u9645\u521b\u5efa\u4e4b\u524d\u3002 _conversationStarted \u521b\u5efa\u5bf9\u8bdd\u5b8c\u6210\u3002 _conversationAdd \u5411\u5bf9\u8bdd\u6dfb\u52a0\u6210\u5458\uff0c\u5728\u7b7e\u540d\u6821\u9a8c\uff08\u5982\u679c\u5f00\u542f\uff09\u4e4b\u540e\uff0c\u5b9e\u9645\u52a0\u5165\u4e4b\u524d\uff0c\u5305\u62ec\u4e3b\u52a8\u52a0\u5165\u548c\u88ab\u5176\u4ed6\u7528\u6237\u52a0\u5165\u4e24\u79cd\u60c5\u51b5\u3002 _conversationRemove \u4ece\u5bf9\u8bdd\u4e2d\u8e22\u51fa\u6210\u5458\uff0c\u5728\u7b7e\u540d\u6821\u9a8c\uff08\u5982\u679c\u5f00\u542f\uff09\u4e4b\u540e\uff0c\u5b9e\u9645\u8e22\u51fa\u4e4b\u524d\uff0c\u7528\u6237\u81ea\u5df1\u9000\u51fa\u5bf9\u8bdd\u4e0d\u4f1a\u8c03\u7528\u3002 _conversationUpdate \u4fee\u6539\u5bf9\u8bdd\u5c5e\u6027\u3001\u8bbe\u7f6e\u6216\u53d6\u6d88\u5bf9\u8bdd\u6d88\u606f\u63d0\u9192\uff0c\u5728\u5b9e\u9645\u4fee\u6539\u4e4b\u524d\u8c03\u7528\u3002 \u4f7f\u7528\u573a\u666f \u793a\u4f8b\u5e94\u7528 LeanChat \u4e5f\u7528\u4e86\u4e91\u5f15\u64ce Hook \u529f\u80fd\u6765\u81ea\u5b9a\u4e49\u6d88\u606f\u63a8\u9001\uff0c\u901a\u8fc7\u89e3\u6790\u4e0a\u5c42\u6d88\u606f\u534f\u8bae\u83b7\u53d6\u6d88\u606f\u7c7b\u578b\u548c\u5185\u5bb9\uff0c\u4ee5 fromPeer \u5f97\u5230\u53d1\u9001\u8005\u7684\u540d\u79f0\uff0c\u7ec4\u88c5\u6210 pushMessage \uff0c\u8fd9\u6837\u80fd\u4f7f\u63a8\u9001\u901a\u77e5\u7684\u7528\u6237\u4f53\u9a8c\u66f4\u597d\u3002\u53ef\u53c2\u8003 leanchat-cloudcode \u4ee3\u7801 \u3002 \u4e0e conversation \u76f8\u5173\u7684 hook \u53ef\u4ee5\u5728\u5e94\u7528\u7b7e\u540d\u4e4b\u5916\u589e\u52a0\u989d\u5916\u7684\u6743\u9650\u5224\u65ad\uff0c\u63a7\u5236\u5bf9\u8bdd\u662f\u5426\u5141\u8bb8\u88ab\u5efa\u7acb\u3001\u67d0\u4e9b\u7528\u6237\u662f\u5426\u5141\u8bb8\u88ab\u52a0\u5165\u5bf9\u8bdd\u7b49\u3002\u4f60\u53ef\u4ee5\u7528\u8fd9\u4e00 hook \u5b9e\u73b0\u9ed1\u540d\u5355\u529f\u80fd\u3002 _messageReceived \u8fd9\u4e2a hook \u53d1\u751f\u5728\u6d88\u606f\u5230\u8fbe LeanCloud \u4e91\u7aef\u4e4b\u540e\u3002\u5982\u679c\u662f\u7fa4\u7ec4\u6d88\u606f\uff0c\u6211\u4eec\u4f1a\u89e3\u6790\u51fa\u6240\u6709\u6d88\u606f\u6536\u4ef6\u4eba\u3002 \u4f60\u53ef\u4ee5\u901a\u8fc7\u8fd4\u56de\u53c2\u6570\u63a7\u5236\u6d88\u606f\u662f\u5426\u9700\u8981\u88ab\u4e22\u5f03\uff0c\u5220\u9664\u4e2a\u522b\u6536\u4ef6\u4eba\uff0c\u8fd8\u53ef\u4ee5\u4fee\u6539\u6d88\u606f\u5185\u5bb9\uff0c\u4f8b\u5982\u8fc7\u6ee4\u5e94\u7528\u4e2d\u7684\u654f\u611f\u8bcd\uff08 \u793a\u4f8b \uff09\u3002\u8fd4\u56de\u7a7a\u5bf9\u8c61\uff08 response.success({}) \uff09\u5219\u4f1a\u6267\u884c\u7cfb\u7edf\u9ed8\u8ba4\u7684\u6d41\u7a0b\u3002 \u8bf7\u6ce8\u610f\uff0c\u5728\u8fd9\u4e2a hook \u7684\u4ee3\u7801\u5b9e\u73b0\u7684\u4efb\u4f55\u5206\u652f\u4e0a**\u8bf7\u786e\u4fdd\u6700\u7ec8\u4f1a\u8c03\u7528 response.success \u8fd4\u56de\u7ed3\u679c**\uff0c\u4f7f\u5f97\u6d88\u606f\u53ef\u4ee5\u5c3d\u5feb\u6295\u9012\u7ed9\u6536\u4ef6\u4eba\u3002\u8fd9\u4e2a hook \u5c06**\u963b\u585e\u53d1\u9001\u6d41\u7a0b**\uff0c\u56e0\u6b64\u8bf7\u5c3d\u91cf\u51cf\u5c11\u65e0\u8c13\u7684\u4ee3\u7801\u8c03\u7528\uff0c\u63d0\u5347\u6548\u7387\u3002 \u5982\u679c\u4f60\u4f7f\u7528\u4e86 LeanCloud \u9ed8\u8ba4\u63d0\u4f9b\u7684\u5bcc\u5a92\u4f53\u6d88\u606f\u683c\u5f0f\uff0c\u4e91\u5f15\u64ce\u53c2\u6570\u4e2d\u7684 content \u63a5\u6536\u7684\u662f JSON \u7ed3\u6784\u7684\u5b57\u7b26\u4e32\u5f62\u5f0f\u3002\u5173\u4e8e\u8fd9\u4e2a\u7ed3\u6784\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u8003 \u5373\u65f6\u901a\u8baf REST API \u6307\u5357 - \u5bcc\u5a92\u4f53\u6d88\u606f\u683c\u5f0f\u8bf4\u660e \u3002 \u53c2\u6570 \u53c2\u6570 \u8bf4\u660e fromPeer \u6d88\u606f\u53d1\u9001\u8005\u7684 ID convId \u6d88\u606f\u6240\u5c5e\u5bf9\u8bdd\u7684 ID toPeers \u89e3\u6790\u51fa\u7684\u5bf9\u8bdd\u76f8\u5173\u7684 Client ID transient \u662f\u5426\u662f transient \u6d88\u606f content \u6d88\u606f\u4f53\u5b57\u7b26\u4e32 receipt \u662f\u5426\u8981\u6c42\u56de\u6267 timestamp \u670d\u52a1\u5668\u6536\u5230\u6d88\u606f\u7684\u65f6\u95f4\u6233\uff08\u6beb\u79d2\uff09 sourceIP \u6d88\u606f\u53d1\u9001\u8005\u7684 IP \u8fd4\u56de \u53c2\u6570 \u7ea6\u675f \u8bf4\u660e drop \u53ef\u9009 \u5982\u679c\u8fd4\u56de\u771f\u503c\u6d88\u606f\u5c06\u88ab\u4e22\u5f03 code \u53ef\u9009 \u5f53 drop \u4e3a true \u65f6\u53ef\u4ee5\u4e0b\u53d1\u4e00\u4e2a\u5e94\u7528\u81ea\u5b9a\u4e49\u7684\u6574\u578b\u9519\u8bef\u7801 content \u53ef\u9009 \u4fee\u6539\u540e\u7684 content\uff0c\u5982\u679c\u4e0d\u63d0\u4f9b\u5219\u4fdd\u7559\u539f\u6d88\u606f\u3002 toPeers \u53ef\u9009 \u6570\u7ec4\uff0c\u4fee\u6539\u540e\u7684\u6536\u4ef6\u4eba\uff0c\u5982\u679c\u4e0d\u63d0\u4f9b\u5219\u4fdd\u7559\u539f\u6536\u4ef6\u4eba\u3002 _receiversOffline \u8fd9\u4e2a hook \u53d1\u751f\u5728\u6709\u6536\u4ef6\u4eba\u79bb\u7ebf\u7684\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u5b83\u6765\u81ea\u5b9a\u4e49\u79bb\u7ebf\u63a8\u9001\u884c\u4e3a\uff0c\u5305\u62ec\u63a8\u9001\u5185\u5bb9\u3001\u88ab\u63a8\u9001\u7528\u6237\u6216\u7565\u8fc7\u63a8\u9001\u3002\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728 hook \u4e2d\u89e6\u53d1\u81ea\u5b9a\u4e49\u7684\u63a8\u9001\u3002\u53d1\u5f80\u6682\u6001\u5bf9\u8bdd\u7684\u6d88\u606f\u4e0d\u4f1a\u89e6\u53d1\u6b64 hook\u3002 \u81ea\u5b9a\u4e49\u79bb\u7ebf\u6d88\u606f\u63a8\u9001\u901a\u77e5\u7684\u5185\u5bb9 AV.Cloud.define( _receiversOffline , function(request, response) { var params = request.params; var json = { // \u81ea\u589e\u672a\u8bfb\u6d88\u606f\u7684\u6570\u76ee\uff0c\u4e0d\u60f3\u81ea\u589e\u5c31\u8bbe\u4e3a\u6570\u5b57 badge: Increment , sound: default , // \u4f7f\u7528\u5f00\u53d1\u8bc1\u4e66 _profile: dev , // content \u4e3a\u6d88\u606f\u7684\u5b9e\u9645\u5185\u5bb9 alert: params.content }; var pushMessage = JSON.stringify(json); return { pushMessage : pushMessage}; }) \u6709\u5173\u53ef\u4ee5\u5728\u63a8\u9001\u5185\u5bb9\u4e2d\u52a0\u5165\u7684\u5185\u7f6e\u53d8\u91cf\u548c\u5176\u4ed6\u53ef\u7528\u8bbe\u7f6e\uff0c\u8bf7\u53c2\u8003 \u79bb\u7ebf\u63a8\u9001\u901a\u77e5 \u3002 \u53c2\u6570 \u53c2\u6570 \u8bf4\u660e fromPeer \u6d88\u606f\u53d1\u9001\u8005 ID convId \u6d88\u606f\u6240\u5c5e\u5bf9\u8bdd\u7684 ID offlinePeers \u6570\u7ec4\uff0c\u79bb\u7ebf\u7684\u6536\u4ef6\u4eba\u5217\u8868 content \u6d88\u606f\u5185\u5bb9 timestamp \u670d\u52a1\u5668\u6536\u5230\u6d88\u606f\u7684\u65f6\u95f4\u6233\uff08\u6beb\u79d2\uff09 mentionAll \u5e03\u5c14\u7c7b\u578b\uff0c\u8868\u793a\u672c\u6d88\u606f\u662f\u5426 @ \u4e86\u6240\u6709\u6210\u5458 mentionOfflinePeers \u88ab\u672c\u6d88\u606f @ \u4e14\u79bb\u7ebf\u7684\u6210\u5458 ID\u3002\u5982\u679c mentionAll \u4e3a true\uff0c\u5219\u8be5\u53c2\u6570\u4e3a\u7a7a\uff0c\u8868\u793a\u6240\u6709 offlinePeers \u53c2\u6570\u5185\u7684\u6210\u5458\u5168\u90e8\u88ab @ \u8fd4\u56de \u53c2\u6570 \u7ea6\u675f \u8bf4\u660e skip \u53ef\u9009 \u5982\u679c\u4e3a\u771f\u5c06\u8df3\u8fc7\u63a8\u9001\uff08\u6bd4\u5982\u5df2\u7ecf\u5728\u4e91\u5f15\u64ce\u91cc\u89e6\u53d1\u4e86\u63a8\u9001\u6216\u8005\u5176\u4ed6\u901a\u77e5\uff09 offlinePeers \u53ef\u9009 \u6570\u7ec4\uff0c\u7b5b\u9009\u8fc7\u7684\u63a8\u9001\u6536\u4ef6\u4eba\u3002 pushMessage \u53ef\u9009 \u63a8\u9001\u5185\u5bb9\uff0c\u652f\u6301\u81ea\u5b9a\u4e49 JSON \u7ed3\u6784\u3002 force \u53ef\u9009 \u5982\u679c\u4e3a\u771f\u5c06\u5f3a\u5236\u63a8\u9001\u7ed9 offlinePeers \u91cc mute \u7684\u7528\u6237\uff0c\u9ed8\u8ba4 false\u3002 _messageSent \u5728\u6d88\u606f\u53d1\u9001\u5b8c\u6210\u540e\u6267\u884c\uff0c\u5bf9\u6d88\u606f\u53d1\u9001\u6027\u80fd\u6ca1\u6709\u5f71\u54cd\uff0c\u53ef\u4ee5\u7528\u6765\u6267\u884c\u76f8\u5bf9\u8017\u65f6\u7684\u903b\u8f91\u3002 \u53c2\u6570 \u53c2\u6570 \u8bf4\u660e fromPeer \u6d88\u606f\u53d1\u9001\u8005\u7684 ID convId \u6d88\u606f\u6240\u5c5e\u5bf9\u8bdd\u7684 ID msgId \u6d88\u606f id onlinePeers \u5f53\u524d\u5728\u7ebf\u53d1\u9001\u7684\u7528\u6237 id offlinePeers \u5f53\u524d\u79bb\u7ebf\u7684\u7528\u6237 id transient \u662f\u5426\u662f transient \u6d88\u606f system \u662f\u5426\u662f system conversation bin \u662f\u5426\u662f\u4e8c\u8fdb\u5236\u6d88\u606f content \u6d88\u606f\u4f53\u5b57\u7b26\u4e32 receipt \u662f\u5426\u8981\u6c42\u56de\u6267 timestamp \u670d\u52a1\u5668\u6536\u5230\u6d88\u606f\u7684\u65f6\u95f4\u6233\uff08\u6beb\u79d2\uff09 sourceIP \u6d88\u606f\u53d1\u9001\u8005\u7684 IP \u8fd4\u56de \u8fd9\u4e2a hook \u4e0d\u4f1a\u5bf9\u8fd4\u56de\u503c\u8fdb\u884c\u68c0\u67e5\u3002\u53ea\u9700\u8fd4\u56de {} \u5373\u53ef\u3002 _conversationStart \u5728\u521b\u5efa\u5bf9\u8bdd\u65f6\u8c03\u7528\uff0c\u53d1\u751f\u5728\u7b7e\u540d\u9a8c\u8bc1\u4e4b\u540e\u3001\u521b\u5efa\u5bf9\u8bdd\u4e4b\u524d\u3002 \u53c2\u6570 \u53c2\u6570 \u8bf4\u660e initBy \u7531\u8c01\u53d1\u8d77\u7684 clientId members \u521d\u59cb\u6210\u5458\u6570\u7ec4\uff0c\u5305\u542b\u521d\u59cb\u6210\u5458 attr \u521b\u5efa\u5bf9\u8bdd\u65f6\u7684\u989d\u5916\u5c5e\u6027 \u8fd4\u56de \u53c2\u6570 \u7ea6\u675f \u8bf4\u660e reject \u53ef\u9009 \u662f\u5426\u62d2\u7edd\uff0c\u9ed8\u8ba4\u4e3a false \u3002 code \u53ef\u9009 \u5f53 reject \u4e3a true \u65f6\u53ef\u4ee5\u4e0b\u53d1\u4e00\u4e2a\u5e94\u7528\u81ea\u5b9a\u4e49\u7684\u6574\u578b\u9519\u8bef\u7801\u3002 _conversationStarted \u5bf9\u8bdd\u521b\u5efa\u540e\u8c03\u7528 \u53c2\u6570 \u53c2\u6570 \u8bf4\u660e convId \u65b0\u751f\u6210\u7684\u5bf9\u8bdd Id \u8fd4\u56de \u8fd9\u4e2a hook \u4e0d\u5bf9\u8fd4\u56de\u503c\u8fdb\u884c\u5904\u7406\uff0c\u53ea\u9700\u8fd4\u56de {} \u5373\u53ef\u3002 _conversationAdd \u5728\u5c06\u7528\u6237\u52a0\u5165\u5230\u5bf9\u8bdd\u65f6\u8c03\u7528\uff0c\u53d1\u751f\u5728\u7b7e\u540d\u9a8c\u8bc1\u4e4b\u540e\u3001\u52a0\u5165\u5bf9\u8bdd\u4e4b\u524d\u3002\u5982\u679c\u662f\u81ea\u5df1\u52a0\u5165\uff0c\u90a3\u4e48 initBy \u548c members \u7684\u552f\u4e00\u5143\u7d20\u662f\u4e00\u6837\u7684\u3002 \u53c2\u6570 \u53c2\u6570 \u8bf4\u660e initBy \u7531\u8c01\u53d1\u8d77\u7684 clientId members \u8981\u52a0\u5165\u7684\u6210\u5458\uff0c\u6570\u7ec4 convId \u5bf9\u8bdd id \u8fd4\u56de \u53c2\u6570 \u7ea6\u675f \u8bf4\u660e reject \u53ef\u9009 \u662f\u5426\u62d2\u7edd\uff0c\u9ed8\u8ba4\u4e3a false \u3002 code \u53ef\u9009 \u5f53 reject \u4e3a true \u65f6\u53ef\u4ee5\u4e0b\u53d1\u4e00\u4e2a\u5e94\u7528\u81ea\u5b9a\u4e49\u7684\u6574\u578b\u9519\u8bef\u7801\u3002 _conversationRemove \u5728\u521b\u5efa\u5bf9\u8bdd\u65f6\u8c03\u7528\uff0c\u53d1\u751f\u5728\u7b7e\u540d\u9a8c\u8bc1\u4e4b\u540e\u3001\u4ece\u5bf9\u8bdd\u79fb\u9664\u6210\u5458\u4e4b\u524d\u3002\u79fb\u9664\u81ea\u5df1\u65f6\u4e0d\u4f1a\u89e6\u53d1\u8fd9\u4e2a hook\u3002 \u53c2\u6570 \u53c2\u6570 \u8bf4\u660e initBy \u7531\u8c01\u53d1\u8d77 members \u8981\u8e22\u51fa\u7684\u6210\u5458\uff0c\u6570\u7ec4\u3002 convId \u5bf9\u8bdd id \u8fd4\u56de \u53c2\u6570 \u7ea6\u675f \u8bf4\u660e reject \u53ef\u9009 \u662f\u5426\u62d2\u7edd\uff0c\u9ed8\u8ba4\u4e3a false \u3002 code \u53ef\u9009 \u5f53 reject \u4e3a true \u65f6\u53ef\u4ee5\u4e0b\u53d1\u4e00\u4e2a\u5e94\u7528\u81ea\u5b9a\u4e49\u7684\u6574\u578b\u9519\u8bef\u7801\u3002 _conversationUpdate \u5728\u4fee\u6539\u5bf9\u8bdd\u5c5e\u6027\u3001\u8bbe\u7f6e\u6216\u53d6\u6d88\u5bf9\u8bdd\u6d88\u606f\u63d0\u9192\u4e4b\u524d\u8c03\u7528\u3002 \u53c2\u6570 \u53c2\u6570 \u8bf4\u660e initBy \u7531\u8c01\u53d1\u8d77\u3002 convId \u5bf9\u8bdd id\u3002 mute \u662f\u5426\u5173\u95ed\u5f53\u524d\u5bf9\u8bdd\u63d0\u9192\u3002 attr \u5f85\u8bbe\u7f6e\u7684\u5bf9\u8bdd\u5c5e\u6027\u3002 mute \u548c attr \u53c2\u6570\u4e92\u65a5\uff0c\u4e0d\u4f1a\u540c\u65f6\u4f20\u9012\u3002 \u8fd4\u56de \u53c2\u6570 \u7ea6\u675f \u8bf4\u660e reject \u53ef\u9009 \u662f\u5426\u62d2\u7edd\uff0c\u9ed8\u8ba4\u4e3a false \u3002 code \u53ef\u9009 \u5f53 reject \u4e3a true \u65f6\u53ef\u4ee5\u4e0b\u53d1\u4e00\u4e2a\u5e94\u7528\u81ea\u5b9a\u4e49\u7684\u6574\u578b\u9519\u8bef\u7801\u3002 attr \u53ef\u9009 \u4fee\u6539\u540e\u7684\u5f85\u8bbe\u7f6e\u5bf9\u8bdd\u5c5e\u6027\uff0c\u5982\u679c\u4e0d\u63d0\u4f9b\u5219\u4fdd\u6301\u539f\u53c2\u6570\u4e2d\u7684\u5bf9\u8bdd\u5c5e\u6027\u3002 mute \u53ef\u9009 \u4fee\u6539\u540e\u7684\u5173\u95ed\u5bf9\u8bdd\u63d0\u9192\u8bbe\u7f6e\uff0c\u5982\u679c\u4e0d\u63d0\u4f9b\u5219\u4fdd\u6301\u539f\u53c2\u6570\u4e2d\u7684\u5173\u95ed\u63d0\u9192\u8bbe\u7f6e\u3002 mute \u548c attr \u53c2\u6570\u4e92\u65a5\uff0c\u4e0d\u80fd\u540c\u65f6\u8fd4\u56de\u3002\u5e76\u4e14\u8fd4\u56de\u503c\u5fc5\u987b\u4e0e\u8bf7\u6c42\u5bf9\u5e94\uff0c\u8bf7\u6c42\u4e2d\u5982\u679c\u5e26\u7740 attr\uff0c\u5219\u8fd4\u56de\u503c\u4e2d\u53ea\u6709 attr \u53c2\u6570\u6709\u6548\uff0c\u8fd4\u56de mute \u4f1a\u88ab\u4e22\u5f03\u3002\u540c\u7406\uff0c\u8bf7\u6c42\u4e2d\u5982\u679c\u5e26\u7740 mute\uff0c\u8fd4\u56de\u503c\u4e2d\u5982\u679c\u6709 attr \u5219 attr \u4f1a\u88ab\u4e22\u5f03\u3002 \u90e8\u7f72\u73af\u5883 \u5373\u65f6\u901a\u8baf\u7684\u4e91\u5f15\u64ce Hook \u8981\u6c42\u4e91\u5f15\u64ce\u90e8\u7f72\u5728\u4e91\u5f15\u64ce\u7684 \u751f\u4ea7\u73af\u5883 \uff0c\u6d4b\u8bd5\u73af\u5883\u4ec5\u7528\u4e8e\u5f00\u53d1\u8005\u624b\u52a8\u8c03\u7528\u6d4b\u8bd5\u3002\u7531\u4e8e\u7f13\u5b58\u7684\u539f\u56e0\uff0c\u9996\u6b21\u90e8\u7f72\u7684\u4e91\u5f15\u64ce Hook \u9700\u8981\u81f3\u591a\u4e09\u5206\u949f\u6765\u6b63\u5f0f\u751f\u6548\uff0c\u540e\u7eed\u4fee\u6539\u4f1a\u5b9e\u65f6\u751f\u6548\u3002 \u66f4\u591a\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003 \u4e91\u5f15\u64ce \u00b7 \u4e91\u51fd\u6570 \u3002\u6240\u6709\u4e91\u5f15\u64ce\u8c03\u7528\u90fd\u6709\u9ed8\u8ba4\u8d85\u65f6\u65f6\u95f4\u548c\u5bb9\u9519\u673a\u5236\uff0c\u5728\u51fa\u9519\u60c5\u51b5\u4e0b\u7cfb\u7edf\u5c06\u6309\u7167\u9ed8\u8ba4\u7684\u6d41\u7a0b\u6267\u884c\u540e\u7eed\u64cd\u4f5c\u3002 Android \u5f00\u53d1\u6307\u5357 \u53c2\u8003 Android \u5373\u65f6\u901a\u8baf\u5f00\u53d1\u6307\u5357 iOS \u5f00\u53d1\u6307\u5357 \u53c2\u8003 iOS \u5373\u65f6\u901a\u8baf\u5f00\u53d1\u6307\u5357 JavaScript \u5f00\u53d1\u6307\u5357 \u53c2\u8003 JavaScript \u5373\u65f6\u901a\u8baf\u5f00\u53d1\u6307\u5357 \u3002\u53e6\u5916\uff0c\u6211\u4eec\u5df2\u7ecf\u5f00\u6e90\u4e86 JavaScript Realtime SDK\uff0c \u89c1 LeanCloud JavaScript Realtime SDK - Github \u8d44\u6e90\u5e93 \u3002 REST API \u53c2\u8003 \u5373\u65f6\u901a\u8baf REST API \u3002 \u5bf9\u8bdd\u4e0e\u6d88\u606f\u7ba1\u7406 SDK Python \u4e0e JavaScript \u7684\u6570\u636e\u5b58\u50a8 SDK\uff0c\u57fa\u4e8e REST API \u5c01\u88c5\u4e86\u4e00\u7ec4\u5bf9\u8bdd\u53ca\u6d88\u606f\u7ba1\u7406\u7684\u63a5\u53e3\uff0c\u65b9\u4fbf\u5728\u670d\u52a1\u7aef\u6216\u8005\u4e91\u5f15\u64ce\u4e2d\u8fdb\u884c\u5bf9\u8bdd\u7ba1\u7406\u3001\u53d1\u9001\u6d88\u606f\u3002\u5177\u4f53\u6587\u6863\u53c2\u8003\uff1a \u5373\u65f6\u901a\u8baf\u670d\u52a1\u7aef\u7ba1\u7406\u5f00\u53d1\u6307\u5357 \u3002 \u7cfb\u7edf\u5bf9\u8bdd \u7cfb\u7edf\u5bf9\u8bdd\u53ef\u4ee5\u7528\u4e8e\u5b9e\u73b0\u673a\u5668\u4eba\u81ea\u52a8\u56de\u590d\u3001\u516c\u4f17\u53f7\u3001\u670d\u52a1\u8d26\u53f7\u7b49\u529f\u80fd\u3002\u5728\u6211\u4eec\u7684 \u5b98\u65b9\u804a\u5929 Demo \u4e2d\u5c31\u6709\u4e00\u4e2a\u4f7f\u7528\u7cfb\u7edf\u5bf9\u8bdd hook \u5b9e\u73b0\u7684\u673a\u5668\u4eba MathBot\uff0c\u5b83\u80fd\u8ba1\u7b97\u7528\u6237\u53d1\u9001\u6765\u7684\u6570\u5b66\u8868\u8fbe\u5f0f\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c \u5176\u670d\u52a1\u7aef\u6e90\u7801 \u53ef\u4ee5\u4ece GitHub \u4e0a\u83b7\u53d6\u3002 \u7cfb\u7edf\u5bf9\u8bdd\u7684\u521b\u5efa \u7cfb\u7edf\u5bf9\u8bdd\u4e5f\u662f\u5bf9\u8bdd\u7684\u4e00\u79cd\uff0c\u521b\u5efa\u540e\u4e5f\u662f\u5728 _Conversation \u8868\u4e2d\u589e\u52a0\u4e00\u6761\u8bb0\u5f55\uff0c\u53ea\u662f\u8be5\u8bb0\u5f55 sys \u5217\u7684\u503c\u4e3a true\uff0c\u4ece\u800c\u4e0e\u666e\u901a\u4f1a\u8bdd\u8fdb\u884c\u533a\u522b\u3002\u5177\u4f53\u521b\u5efa\u65b9\u6cd5\u8bf7\u53c2\u8003 REST API \u521b\u5efa\u670d\u52a1\u53f7 \u3002 \u7cfb\u7edf\u5bf9\u8bdd\u6d88\u606f\u7684\u53d1\u9001 \u7cfb\u7edf\u5bf9\u8bdd\u7ed9\u7528\u6237\u53d1\u6d88\u606f\u8bf7\u53c2\u8003\uff1a REST API - \u7ed9\u4efb\u610f\u7528\u6237\u5355\u72ec\u53d1\u6d88\u606f \u3002 \u7528\u6237\u7ed9\u7cfb\u7edf\u5bf9\u8bdd\u53d1\u9001\u6d88\u606f\u8ddf\u7528\u6237\u7ed9\u666e\u901a\u5bf9\u8bdd\u53d1\u6d88\u606f\u65b9\u6cd5\u4e00\u81f4\u3002 \u60a8\u8fd8\u53ef\u4ee5\u5229\u7528\u7cfb\u7edf\u5bf9\u8bdd\u53d1\u9001\u5e7f\u64ad\u6d88\u606f\u7ed9\u5168\u90e8\u7528\u6237\u3002\u76f8\u6bd4\u904d\u5386\u6240\u6709\u7528\u6237 ID \u9010\u4e2a\u53d1\u9001\uff0c\u5e7f\u64ad\u6d88\u606f\u53ea\u9700\u8981\u8c03\u7528\u4e00\u6b21 REST API\u3002 \u5173\u4e8e\u5e7f\u64ad\u6d88\u606f\u7684\u8be6\u7ec6\u7279\u5f81\u53ef\u4ee5\u53c2\u8003 \u6d88\u606f - \u5e7f\u64ad\u6d88\u606f \u3002 \u83b7\u53d6\u7cfb\u7edf\u5bf9\u8bdd\u6d88\u606f\u8bb0\u5f55 \u83b7\u53d6\u7cfb\u7edf\u5bf9\u8bdd\u7ed9\u7528\u6237\u53d1\u9001\u7684\u6d88\u606f\u8bb0\u5f55\u8bf7\u53c2\u8003\uff1a \u67e5\u8be2\u670d\u52a1\u53f7\u7ed9\u67d0\u7528\u6237\u53d1\u7684\u6d88\u606f \u83b7\u53d6\u7528\u6237\u7ed9\u7cfb\u7edf\u5bf9\u8bdd\u53d1\u9001\u7684\u6d88\u606f\u8bb0\u5f55\u6709\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\u5b9e\u73b0\uff1a - _SysMessage \u8868\u65b9\u5f0f\uff0c\u5728\u5e94\u7528\u9996\u6b21\u6709\u7528\u6237\u53d1\u9001\u6d88\u606f\u7ed9\u67d0\u7cfb\u7edf\u5bf9\u8bdd\u65f6\u81ea\u52a8\u521b\u5efa\uff0c\u521b\u5efa\u540e\u6211\u4eec\u5c06\u6240\u6709\u7531\u7528\u6237\u53d1\u9001\u5230\u7cfb\u7edf\u5bf9\u8bdd\u7684\u6d88\u606f\u90fd\u5b58\u50a8\u5728\u8be5\u8868\u4e2d\u3002 - Web Hook \u65b9\u5f0f\uff0c\u8fd9\u79cd\u65b9\u5f0f\u9700\u8981\u5f00\u53d1\u8005\u81ea\u884c\u5b9a\u4e49 Web Hook \uff0c\u7528\u4e8e\u5b9e\u65f6\u63a5\u6536\u7528\u6237\u53d1\u7ed9\u7cfb\u7edf\u5bf9\u8bdd\u7684\u6d88\u606f\u3002 \u7cfb\u7edf\u5bf9\u8bdd\u6d88\u606f\u7ed3\u6784 _SysMessage \u5b58\u50a8\u7528\u6237\u53d1\u7ed9\u7cfb\u7edf\u5bf9\u8bdd\u7684\u6d88\u606f\uff0c\u5404\u5b57\u6bb5\u542b\u4e49\u5982\u4e0b\uff1a \u5b57\u6bb5 \u8bf4\u660e ackAt \u6d88\u606f\u9001\u8fbe\u7684\u65f6\u95f4 bin \u662f\u5426\u4e3a\u4e8c\u8fdb\u5236\u7c7b\u578b\u6d88\u606f conv \u6d88\u606f\u5173\u8054\u7684\u7cfb\u7edf\u5bf9\u8bdd Pointer data \u6d88\u606f\u5185\u5bb9 from \u53d1\u6d88\u606f\u7528\u6237\u7684 Client ID fromIp \u53d1\u6d88\u606f\u7528\u6237\u7684 IP msgId \u6d88\u606f\u7684\u5185\u90e8 ID timestamp \u6d88\u606f\u521b\u5efa\u7684\u65f6\u95f4 Web Hook \u9700\u8981\u5f00\u53d1\u8005\u81ea\u884c\u5728 \u63a7\u5236\u53f0 \u6d88\u606f \u5b9e\u65f6\u6d88\u606f \u8bbe\u7f6e \u7cfb\u7edf\u5bf9\u8bdd\u6d88\u606f\u56de\u8c03\u8bbe\u7f6e \u5b9a\u4e49\uff0c\u6765\u5b9e\u65f6\u63a5\u6536\u7528\u6237\u53d1\u7ed9\u7cfb\u7edf\u5bf9\u8bdd\u7684\u6d88\u606f\uff0c\u6d88\u606f\u7684\u6570\u636e\u7ed3\u6784\u4e0e\u4e0a\u6587\u6240\u8ff0\u7684 _SysMessage \u4e00\u81f4\u3002 \u5f53\u6709\u7528\u6237\u5411\u7cfb\u7edf\u5bf9\u8bdd\u53d1\u9001\u6d88\u606f\u65f6\uff0c\u6211\u4eec\u4f1a\u901a\u8fc7 HTTP POST \u8bf7\u6c42\u5c06 JSON \u683c\u5f0f\u7684\u6570\u636e\u53d1\u9001\u5230\u7528\u6237\u8bbe\u7f6e\u7684 Web Hook \u4e0a\u3002\u8bf7\u6ce8\u610f\uff0c\u6211\u4eec\u8c03\u7528 Web Hook \u65f6\u5e76\u4e0d\u662f\u4e00\u6b21\u8c03\u7528\u53ea\u53d1\u9001\u4e00\u6761\u6d88\u606f\uff0c\u800c\u662f\u4f1a\u4ee5\u6279\u91cf\u7684\u5f62\u5f0f\u5c06\u6d88\u606f\u53d1\u9001\u8fc7\u53bb\u3002\u4ece\u4e0b\u9762\u7684\u53d1\u9001\u6d88\u606f\u683c\u5f0f\u4e2d\u80fd\u770b\u5230\uff0cJSON \u7684\u6700\u5916\u5c42\u662f\u4e2a Array\u3002 \u8d85\u65f6\u65f6\u95f4\u4e3a 5 \u79d2\uff0c\u5f53\u7528\u6237 hook \u5730\u5740\u8d85\u65f6\u6ca1\u6709\u54cd\u5e94\uff0c\u6211\u4eec\u4f1a\u91cd\u8bd5\u81f3\u591a 3 \u6b21\u3002 \u53d1\u9001\u7684\u6d88\u606f\u683c\u5f0f\u4e3a\uff1a [ { fromIp : 121.238.214.92 , conv : { __type : Pointer , className : _Conversation , objectId : 55b99ad700b0387b8a3d7bf0 }, msgId : nYH9iBSBS_uogCEgvZwE7Q , from : A , bin : false , data : \u4f60\u597d\uff0csys , createdAt : { __type : Date , iso : 2015-07-30T14:37:42.584Z }, updatedAt : { __type : Date , iso : 2015-07-30T14:37:42.584Z } } ] \u9ad8\u7ea7\u529f\u80fd \u5bf9\u8bdd\u6743\u9650 \u300c\u5bf9\u8bdd\u6743\u9650\u300d\u529f\u80fd\u4f5c\u4e3a\u5373\u65f6\u901a\u8baf\u7684\u4e00\u9879\u8865\u5145\uff0c\u53ef\u4ee5\u5c06\u5bf9\u8bdd\u5185\u6210\u5458\u5212\u5206\u6210\u4e0d\u540c\u89d2\u8272\uff0c\u5b9e\u73b0\u7c7b\u4f3c QQ \u7fa4\u7ba1\u7406\u5458\u7684\u6548\u679c\u3002\u4f7f\u7528\u8fd9\u4e2a\u529f\u80fd\u9700\u8981\u5728\u63a7\u5236\u53f0 \u5373\u65f6\u901a\u8baf-\u8bbe\u7f6e \u4e2d\u5f00\u542f\u300c\u5bf9\u8bdd\u6210\u5458\u5c5e\u6027\u529f\u80fd\uff08\u6210\u5458\u89d2\u8272\u7ba1\u7406\u529f\u80fd\uff09\u300d\u3002 \u76ee\u524d\u7cfb\u7edf\u5185\u7684\u89d2\u8272\u4e0e\u529f\u80fd\u5bf9\u5e94\u5173\u7cfb\uff1a \u89d2\u8272 \u529f\u80fd\u5217\u8868 Owner \u6c38\u4e45\u6027\u7981\u8a00\u3001\u8e22\u4eba\u3001\u52a0\u4eba\u3001\u62c9\u9ed1\u3001\u66f4\u65b0\u4ed6\u4eba\u6743\u9650 Manager \u6c38\u4e45\u6027\u7981\u8a00\u3001\u8e22\u4eba\u3001\u52a0\u4eba\u3001\u62c9\u9ed1\u3001\u66f4\u65b0\u4ed6\u4eba\u6743\u9650 Member \u52a0\u4eba \u9700\u8981\u6ce8\u610f\u4e00\u70b9\uff0c\u76ee\u524d\u4e0d\u652f\u6301 Owner \u7684\u53d8\u66f4\u3002 \u9ed1\u540d\u5355 \u300c\u9ed1\u540d\u5355\u300d\u529f\u80fd\u53ef\u4ee5\u5b9e\u73b0\u7c7b\u4f3c\u5fae\u4fe1 \u5c4f\u853d \u7684\u6548\u679c\uff0c\u76ee\u524d\u5206\u4e3a\u4e24\u5927\u7c7b \u5bf9\u8bdd \u6210\u5458 \u6210\u5458 \u5bf9\u8bdd \u4f7f\u7528\u8fd9\u4e2a\u529f\u80fd\u9700\u8981\u5728\u63a7\u5236\u53f0 \u5373\u65f6\u901a\u8baf-\u8bbe\u7f6e \u4e2d\u5f00\u542f\u300c\u9ed1\u540d\u5355\u529f\u80fd\u300d\u3002 \u9650\u5236 \u5bf9\u4e8e\u5ba2\u6237\u7aef\u4e3b\u52a8\u53d1\u8d77\u7684\u64cd\u4f5c\u4f1a\u6309\u7167\u64cd\u4f5c\u7c7b\u578b\u9650\u5236\u5176\u9891\u7387\u3002\u53d1\u6d88\u606f\u64cd\u4f5c\u9650\u5236\u4e3a \u6bcf\u5206\u949f 60 \u6b21 \uff0c\u5386\u53f2\u6d88\u606f\u67e5\u8be2\u64cd\u4f5c\u9650\u5236\u4e3a \u6bcf\u5206\u949f 120 \u6b21 \uff0c\u5176\u4ed6\u7c7b\u578b\u64cd\u4f5c\u5305\u62ec\u52a0\u5165\u5bf9\u8bdd\u3001\u79bb\u5f00\u5bf9\u8bdd\u3001\u767b\u5f55\u670d\u52a1\u3001\u9000\u51fa\u670d\u52a1\u7b49\u5747\u9650\u5236\u4e3a \u6bcf\u5206\u949f 30 \u6b21 \u3002\u5f53\u8c03\u7528\u8d85\u8fc7\u9650\u5236\u65f6\uff0c\u4e91\u7aef\u4f1a\u62d2\u7edd\u54cd\u5e94\u8fd9\u4e9b\u8d85\u9650\u7684\u64cd\u4f5c\uff0c\u8fd9\u6837\u5982\u679c\u64cd\u4f5c\u672c\u7531 SDK \u53d1\u8d77\u5219\u8868\u73b0\u4e3a\u4e0d\u4f1a\u8d70\u56de\u8c03\u3002\u5982\u679c\u4f7f\u7528 REST API \u53d1\u8d77\u5404\u79cd\u64cd\u4f5c\uff0c\u5219\u4e0d\u4f1a\u53d7\u5230\u4e0a\u8ff0\u9891\u7387\u7684\u9650\u5236\u3002 \u5e94\u7528\u5168\u5c40\u53d1\u9001\u6d88\u606f\u7684\u901f\u5ea6\u9ed8\u8ba4\u4e3a\u6bcf\u5206\u949f 3 \u4e07\u6b21\uff0c\u5982\u679c\u4f60\u7684\u5e94\u7528\u4f1a\u8d85\u8fc7\u6b64\u9650\u5236\uff0c\u8bf7 \u8054\u7cfb\u6211\u4eec \u3002 \u5ba2\u6237\u7aef\u53d1\u9001\u7684\u5355\u6761\u6d88\u606f\u5927\u5c0f\u4e0d\u5f97\u8d85\u8fc7 5 KB\u3002 \u5355\u4e2a\u666e\u901a\u5bf9\u8bdd\u7684\u6210\u5458\u4e0a\u9650\u4e3a 500 \u4e2a\uff0c\u5982\u679c\u60a8\u901a\u8fc7\u6570\u636e\u5b58\u50a8 API \u5411 m \u5b57\u6bb5\u52a0\u5165\u4e86\u8d85\u8fc7 500 \u4e2a id\uff0c\u6211\u4eec\u53ea\u4f1a\u4f7f\u7528\u5176\u4e2d\u7684\u524d 500 \u4e2a\u3002 \u8bf7\u4e0d\u8981\u4f7f\u7528\u76f8\u540c\u7684 id \u5728\u5927\u91cf\u8bbe\u5907\u4e0a\u540c\u65f6\u767b\u5f55\uff0c\u5982\u679c\u7cfb\u7edf\u68c0\u6d4b\u5230\u67d0\u4e2a id \u540c\u65f6\u5728\u8d85\u8fc7 5 \u4e2a\u4e0d\u540c\u7684 IP \u4e0a\u767b\u5f55\uff0c\u4f1a\u8ba4\u4e3a\u6b64 id \u662f\u91cd\u590d\u4f7f\u7528\u7684 id\uff0c\u4e4b\u540e\u6b64 id \u5f53\u65e5\u7684\u6bcf\u6b21\u767b\u5f55\u4f1a\u6309\u7167 id + IP \u7684\u7ec4\u5408\u4f5c\u4e3a\u8ba1\u8d39\u7684\u72ec\u7acb\u7528\u6237\u3002 \u5982\u679c\u5355\u4e2a\u7528\u6237\u6709\u8d85\u8fc7 50 \u4e2a\u7684\u5bf9\u8bdd\u5b58\u5728\u672a\u63a5\u6536\u7684\u79bb\u7ebf\u6d88\u606f\uff0c\u90a3\u4e48\u5f53\u8be5\u7528\u6237\u767b\u5f55\u65f6\u670d\u52a1\u7aef\u53ea\u4f1a \u968f\u673a \u4e0b\u53d1 50 \u4e2a\u5bf9\u8bdd\u7684\u79bb\u7ebf\u6d88\u606f\u6216\u672a\u8bfb\u6d88\u606f\u6570\u91cf\u3002\u4e5f\u5c31\u662f\u8bf4\u670d\u52a1\u7aef\u4e0d\u4f1a\u518d\u4e0b\u53d1\u8d85\u51fa\u5bf9\u8bdd\u6570\u91cf\u9650\u5236\u7684\u90a3\u90e8\u5206\u79bb\u7ebf\u6d88\u606f\uff0c\u4e5f\u4e0d\u4f1a\u4e0b\u53d1\u79bb\u7ebf\u6d88\u606f\u6570\u91cf\uff0c\u79bb\u7ebf\u6d88\u606f\u4e0d\u4f1a\u4e1f\u5931\u4f46\u9700\u8981\u4ece\u5386\u53f2\u8bb0\u5f55\u4e2d\u62c9\u53d6\u5f97\u5230\u3002 \u5355\u4e2a\u5bf9\u8bdd\u672a\u63a5\u6536\u7684\u79bb\u7ebf\u6d88\u606f\u6570\u6700\u591a 100 \u6761\uff0c\u8d85\u8fc7\u540e\uff0c\u7cfb\u7edf\u4f1a\u4ee5\u5148\u5165\u5148\u51fa\u65b9\u5f0f\u5b58\u50a8\u65b0\u7684\u79bb\u7ebf\u6d88\u606f\uff0c\u540c\u65f6\u79fb\u9664\u5f53\u524d\u5bf9\u8bdd\u5b58\u50a8\u7684\u6700\u65e9\u7684\u4e00\u6761\u79bb\u7ebf\u6d88\u606f\u3002\u88ab\u79fb\u9664\u7684\u79bb\u7ebf\u6d88\u606f\u53ef\u4ee5\u901a\u8fc7\u5386\u53f2\u6d88\u606f\u8bb0\u5f55\u67e5\u8be2\uff0c\u4f46\u4e0d\u4f1a\u4ea7\u751f\u79bb\u7ebf\u6d88\u606f\u63d0\u9192\uff0c\u4e5f\u4e0d\u4f1a\u8ba1\u5165\u5bf9\u8bdd\u7684\u672a\u8bfb\u6d88\u606f\u8ba1\u6570\u3002 \u7cfb\u7edf\u5e7f\u64ad\u6d88\u606f\u4e00\u4e2a\u5e94\u7528\u4e00\u5929\u6700\u591a\u53d1 30 \u6761 \u5bf9\u8bdd\u7684\u6709\u6548\u671f \u4e00\u4e2a\u5bf9\u8bdd\uff08\u5305\u62ec\u666e\u901a\u3001\u6682\u6001\u3001\u7cfb\u7edf\u5bf9\u8bdd\uff09\u5982\u679c 1 \u5e74\u5185 \u6ca1\u6709\u901a\u8fc7 SDK \u6216\u8005 REST API \u53d1\u9001\u8fc7\u65b0\u7684\u6d88\u606f\uff0c\u6216\u8005\u5b83\u5728 _Conversation \u8868\u4e2d\u7684\u4efb\u610f\u5b57\u6bb5\u6ca1\u6709\u88ab\u66f4\u65b0\u8fc7\uff0c\u5373\u88ab\u89c6\u4e3a \u4e0d\u6d3b\u8dc3\u5bf9\u8bdd \uff0c\u4e91\u7aef\u4f1a\u81ea\u52a8\u5c06\u5176\u5220\u9664\u3002\uff08\u67e5\u8be2\u5bf9\u8bdd\u7684\u6d88\u606f\u8bb0\u5f55\u5e76\u4e0d\u4f1a\u66f4\u65b0 _Conversation \u8868\uff0c\u6240\u4ee5\u53ea\u67e5\u8be2\u4e0d\u53d1\u9001\u6d88\u606f\u7684\u5bf9\u8bdd\u4ecd\u4f1a\u88ab\u89c6\u4e3a\u4e0d\u6d3b\u8dc3\u5bf9\u8bdd\u3002\uff09 \u4e0d\u6d3b\u8dc3\u7684\u5bf9\u8bdd\u88ab\u5220\u9664\u540e\uff0c\u5f53\u5ba2\u6237\u7aef\u518d\u6b21\u901a\u8fc7 SDK \u6216 REST API \u5bf9\u5176\u53d1\u9001\u6d88\u606f\u65f6\uff0c\u4f1a\u9047\u5230 4401 INVALID_MESSAGING_TARGET \u9519\u8bef\uff0c\u8868\u793a\u8be5\u5bf9\u8bdd\u5df2\u7ecf\u4e0d\u5b58\u5728\u4e86\u3002\u540c\u65f6\uff0c\u4e0e\u8be5\u5bf9\u8bdd\u76f8\u5173\u7684\u6d88\u606f\u5386\u53f2\u4e5f\u65e0\u6cd5\u83b7\u53d6\u3002 \u53cd\u4e4b\uff0c\u6d3b\u8dc3\u7684\u5bf9\u8bdd\u4f1a\u4e00\u76f4\u4fdd\u5b58\u5728\u4e91\u7aef\u3002 \u76f8\u5173\u53c2\u8003 \u6d88\u606f\u7684\u6709\u6548\u671f \u3002 \u6d88\u606f\u7684\u6709\u6548\u671f \u4e00\u4e2a\u5bf9\u8bdd\u7684\u6d88\u606f\u8bb0\u5f55\u4f1a\u5728\u4e91\u7aef\u4fdd\u7559 6 \u4e2a\u6708 \uff0c\u4e5f\u5c31\u662f\u8bf4\u4e00\u4e2a\u5bf9\u8bdd\u53ef\u4ee5\u67e5\u8be2\u5230\u534a\u5e74\u4e4b\u5185\u7684\u5386\u53f2\u6d88\u606f\u8bb0\u5f55\u3002\u5f00\u53d1\u8005\u53ef\u4ee5\u4ed8\u8d39\u6765\u5ef6\u957f\u8fd9\u4e00\u671f\u9650\uff0c\u8bf7\u8054\u7cfb \u3002\u53e6\u5916\u53ef\u4ee5\u53c2\u8003 \u5bf9\u8bdd\u7684\u6709\u6548\u671f \u3002\u4f60\u4e5f\u968f\u65f6\u53ef\u4ee5\u901a\u8fc7 REST API \u5c06\u804a\u5929\u8bb0\u5f55\u540c\u6b65\u5230\u81ea\u5df1\u7684\u670d\u52a1\u5668\u4e0a\u3002 \u4e91\u7aef\u9519\u8bef\u7801\u8bf4\u660e \u5373\u65f6\u901a\u8baf\u7684\u9519\u8bef\u7801\u4f1a\u4ee5 SDK \u5f02\u5e38\u6216 WebSocket \u5173\u95ed\u72b6\u6001\u7801\u7684\u5f62\u5f0f\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002\u5f53\u51fa\u73b0\u5f02\u5e38\u60c5\u51b5\u65f6\uff0cSDK \u4f1a\u8f93\u51fa\u72b6\u6001\u7801\u5230\u65e5\u5fd7\u91cc\uff0c\u4ee5\u4e0b\u662f\u5bf9\u90e8\u5206\u72b6\u6001\u7801\u7684\u7b80\u5355\u8bf4\u660e\uff1a \u4ee3\u7801 \u6d88\u606f \u8bf4\u660e 0 (\u65e0) WebSocket \u6b63\u5e38\u5173\u95ed\uff0c\u53ef\u80fd\u53d1\u751f\u5728\u670d\u52a1\u5668\u91cd\u542f\uff0c\u6216\u672c\u5730\u7f51\u7edc\u5f02\u5e38\u7684\u60c5\u51b5\u3002SDK \u4f1a\u81ea\u52a8\u91cd\u8fde\uff0c\u65e0\u9700\u4eba\u5de5\u5e72\u9884\u3002 1006 (\u65e0) WebSocket \u8fde\u63a5\u975e\u6b63\u5e38\u5173\u95ed\uff0c\u901a\u5e38\u89c1\u4e8e\u8def\u7531\u5668\u914d\u7f6e\u5bf9\u957f\u8fde\u63a5\u9650\u5236\u7684\u60c5\u51b5\u3002SDK \u4f1a\u81ea\u52a8\u91cd\u8fde\uff0c\u65e0\u9700\u4eba\u5de5\u5e72\u9884\u3002 4100 APP_NOT_AVAILABLE \u5e94\u7528\u4e0d\u5b58\u5728\u6216\u5e94\u7528\u7981\u7528\u4e86\u5373\u65f6\u901a\u8baf\u670d\u52a1\u3002 4101 DUPLICATED_LOGIN \u540c\u4e00\u4e2a\u8bbe\u5907\u91cd\u590d\u767b\u5f55\u63a8\u9001\u670d\u52a1\u3002\u8be5\u9519\u8bef\u7801\u4e0e\u5373\u65f6\u901a\u8baf\u670d\u52a1\u65e0\u5173\u3002 4102 SIGNATURE_FAILED \u767b\u5f55\u7b7e\u540d\u9a8c\u8bc1\u5931\u8d25\u3002 4103 INVALID_LOGIN Client Id \u683c\u5f0f\u9519\u8bef\uff0c\u8d85\u8fc7 64 \u4e2a\u5b57\u7b26\u3002 4105 SESSION_REQUIRED Session \u6ca1\u6709\u6253\u5f00\u5c31\u53d1\u9001\u6d88\u606f\uff0c\u6216\u6267\u884c\u5176\u4ed6\u64cd\u4f5c\u3002\u5e38\u89c1\u7684\u9519\u8bef\u573a\u666f\u662f\u8c03\u7528 open session \u540e\u76f4\u63a5\u53d1\u9001\u6d88\u606f\uff0c\u6b63\u786e\u7684\u7528\u6cd5\u662f\u5728 Session \u6253\u5f00\u7684\u56de\u8c03\u91cc\u6267\u884c\u3002 4107 READ_TIMEOUT \u8bfb\u8d85\u65f6\uff0c\u4e91\u7aef\u957f\u65f6\u95f4\u6ca1\u6709\u6536\u5230\u5ba2\u6237\u7aef\u7684\u6570\u636e\uff0c\u5207\u65ad\u8fde\u63a5\u3002SDK \u5305\u88c5\u4e86\u5fc3\u8df3\u5305\u7684\u673a\u5236\uff0c\u51fa\u73b0\u6b64\u9519\u8bef\u901a\u5e38\u662f\u7f51\u7edc\u95ee\u9898\u3002SDK \u4f1a\u81ea\u52a8\u91cd\u8fde\uff0c\u65e0\u9700\u4eba\u5de5\u5e72\u9884\u3002 4108 LOGIN_TIMEOUT \u767b\u5f55\u8d85\u65f6\uff0c\u8fde\u63a5\u540e\u957f\u65f6\u95f4\u6ca1\u6709\u5b8c\u6210 session open\u3002\u901a\u5e38\u662f\u767b\u5f55\u88ab\u62d2\u7edd\u7b49\u539f\u56e0\uff0c\u51fa\u73b0\u6b64\u95ee\u9898\u53ef\u80fd\u662f\u4f7f\u7528\u65b9\u5f0f\u6709\u8bef\uff0c\u53ef\u4ee5 \u521b\u5efa\u5de5\u5355 \uff0c\u7531\u6211\u4eec\u6280\u672f\u987e\u95ee\u6765\u7ed9\u51fa\u5efa\u8bae\u3002 4109 FRAME_TOO_LONG \u5305\u8fc7\u957f\u3002\u6d88\u606f\u5927\u5c0f\u8d85\u8fc7 5 KB\uff0c\u8bf7\u7f29\u77ed\u6d88\u606f\u6216\u8005\u62c6\u5206\u6d88\u606f\u3002 4110 INVALID_ORIGIN \u8bbe\u7f6e\u5b89\u5168\u57df\u540d\u540e\uff0c\u5f53\u524d\u767b\u5f55\u7684\u57df\u540d\u4e0e\u5b89\u5168\u57df\u540d\u4e0d\u7b26\u5408\u3002 4111 SESSION_CONFLICT \u8bbe\u7f6e\u5355\u8bbe\u5907\u767b\u5f55\u540e\uff0c\u5ba2\u6237\u7aef\u88ab\u5176\u4ed6\u8bbe\u5907\u6324\u4e0b\u7ebf\u3002 4112 SESSION_TOKEN_EXPIRED Session \u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\u3002 4113 APP_QUOTA_EXCEEDED \u5e94\u7528\u5bb9\u91cf\u8d85\u9650\uff0c\u5f53\u5929\u767b\u5f55\u7528\u6237\u6570\u5df2\u7ecf\u8d85\u8fc7\u5e94\u7528\u8bbe\u5b9a\u7684\u6700\u5927\u503c\u3002 4114 UNPARSEABLE_RAW_MESSAGE \u5ba2\u6237\u7aef\u53d1\u9001\u7684\u5e8f\u5217\u5316\u6570\u636e\u670d\u52a1\u5668\u7aef\u65e0\u6cd5\u89e3\u6790\u3002 4115 KICKED_BY_APP \u5ba2\u6237\u7aef\u88ab REST API \u7ba1\u7406\u63a5\u53e3\u5f3a\u5236\u4e0b\u7ebf\u3002 4116 MESSAGE_SENT_QUOTA_EXCEEDED \u5e94\u7528\u5355\u4f4d\u65f6\u95f4\u5185\u53d1\u9001\u6d88\u606f\u91cf\u8d85\u8fc7\u9650\u5236\uff0c\u6d88\u606f\u88ab\u62d2\u7edd\u3002 4200 INTERNAL_ERROR \u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff0c\u5982\u679c\u53cd\u590d\u51fa\u73b0\u8bf7\u6536\u96c6\u76f8\u5173\u7ebf\u7d22\u5e76 \u521b\u5efa\u5de5\u5355 \uff0c\u6211\u4eec\u4f1a\u5c3d\u5feb\u89e3\u51b3\u3002 4201 SEND_MESSAGE_TIMEOUT \u901a\u8fc7 API \u53d1\u9001\u6d88\u606f\u8d85\u65f6\u3002 4301 CONVERSATION_API_FAILED \u4e0a\u6e38 API \u8c03\u7528\u5f02\u5e38\uff0c\u8bf7\u67e5\u770b\u62a5\u9519\u4fe1\u606f\u4e86\u89e3\u9519\u8bef\u8be6\u60c5\u3002 4302 CONVERSATION_SIGNATURE_FAILED \u5bf9\u8bdd\u76f8\u5173\u64cd\u4f5c\u7b7e\u540d\u9519\u8bef 4303 CONVERSATION_NOT_FOUND \u53d1\u9001\u6d88\u606f\uff0c\u6216\u9080\u8bf7\u7b49\u64cd\u4f5c\u5bf9\u5e94\u7684\u5bf9\u8bdd\u4e0d\u5b58\u5728\u3002 4304 CONVERSATION_FULL \u5bf9\u8bdd\u6210\u5458\u5df2\u6ee1\uff0c\u4e0d\u80fd\u518d\u6dfb\u52a0\u3002 4305 CONVERSATION_REJECTED_BY_APP \u5bf9\u8bdd\u64cd\u4f5c\u88ab\u5e94\u7528\u7684\u4e91\u5f15\u64ce Hook \u62d2\u7edd\u3002 4306 CONVERSATION_UPDATE_FAILED \u66f4\u65b0\u5bf9\u8bdd\u64cd\u4f5c\u5931\u8d25\u3002 4307 CONVERSATION_READ_ONLY \u8be5\u5bf9\u8bdd\u4e3a\u53ea\u8bfb\uff0c\u4e0d\u80fd\u66f4\u65b0\u6216\u589e\u5220\u6210\u5458\u3002 4308 CONVERSATION_NOT_ALLOWED \u8be5\u5bf9\u8bdd\u7981\u6b62\u5f53\u524d\u7528\u6237\u53d1\u9001\u6d88\u606f\u3002 4309 CONVERSATION_UPDATE_REJECTED \u66f4\u65b0\u5bf9\u8bdd\u7684\u8bf7\u6c42\u88ab\u62d2\u7edd\uff0c\u5f53\u524d\u7528\u6237\u4e0d\u5728\u5bf9\u8bdd\u4e2d\u3002 4310 CONVERSATION_QUERY_FAILED \u67e5\u8be2\u5bf9\u8bdd\u5931\u8d25\uff0c\u5e38\u89c1\u4e8e\u6162\u67e5\u8be2\u5bfc\u81f4\u7684\u8d85\u65f6\u6216\u53d7\u5176\u4ed6\u6162\u67e5\u8be2\u5bfc\u81f4\u7684\u6570\u636e\u5e93\u54cd\u5e94\u6162\u3002 4311 CONVERSATION_LOG_FAILED \u62c9\u53d6\u5bf9\u8bdd\u6d88\u606f\u8bb0\u5f55\u5931\u8d25\uff0c\u5e38\u89c1\u4e0e\u8d85\u65f6\u7684\u60c5\u51b5\u3002 4312 CONVERSATION_LOG_REJECTED \u62c9\u53d6\u5bf9\u8bdd\u6d88\u606f\u8bb0\u5f55\u88ab\u62d2\u7edd\uff0c\u5f53\u524d\u7528\u6237\u4e0d\u5728\u5bf9\u8bdd\u4e2d\u3002 4313 SYSTEM_CONVERSATION_REQUIRED \u8be5\u529f\u80fd\u4ec5\u5bf9\u7cfb\u7edf\u5bf9\u8bdd\u6709\u6548\u3002 4314 NORMAL_CONVERSATION_REQUIRED \u8be5\u529f\u80fd\u4ec5\u5bf9\u666e\u901a\u5bf9\u8bdd\u6709\u6548\u3002 4315 CONVERSATION_BLACKLISTED \u5f53\u524d\u7528\u6237\u88ab\u52a0\u5165\u6b64\u5bf9\u8bdd\u7684\u9ed1\u540d\u5355\uff0c\u65e0\u6cd5\u53d1\u9001\u6d88\u606f\u3002 4316 TRANSIENT_CONVERSATION_REQUIRED \u8be5\u529f\u80fd\u4ec5\u5bf9\u6682\u6001\u5bf9\u8bdd\u6709\u6548\u3002 4317 CONVERSATION_MEMBERSHIP_REQUIRED \u8be5\u64cd\u4f5c\u8981\u6c42\u7528\u6237\u662f\u5bf9\u8bdd\u6210\u5458\u3002 4318 CONVERSATION_API_QUOTA_EXCEEDED \u5bf9\u8bdd\u64cd\u4f5c\u8d85\u51fa\u4e86 API \u8bf7\u6c42\u9650\u5236\uff0c\u9700\u8981\u63d0\u5347\u5e94\u7528\u7ea7\u522b\u3002 4401 INVALID_MESSAGING_TARGET \u53d1\u9001\u6d88\u606f\u7684\u5bf9\u8bdd\u4e0d\u5b58\u5728\uff0c\u6216\u5f53\u524d\u7528\u6237\u4e0d\u5728\u5bf9\u8bdd\u4e2d\u3002 4402 MESSAGE_REJECTED_BY_APP \u53d1\u9001\u7684\u6d88\u606f\u88ab\u5e94\u7528\u7684\u4e91\u5f15\u64ce Hook \u62d2\u7edd\u3002 4403 MESSAGE_OWNERSHIP_REQUIRED \u6ca1\u6709\u64cd\u4f5c\u76ee\u6807\u6d88\u606f\u7684\u6743\u9650 4404 MESSAGE_NOT_FOUND \u627e\u4e0d\u5230\u88ab\u64cd\u4f5c\u7684\u6d88\u606f \u5e38\u89c1\u95ee\u9898 FAQ \u8981\u8ba9\u5355\u4e2a\u7fa4\u7ec4\u6d88\u606f\u8fdb\u5165\u300c\u514d\u6253\u6270\u6a21\u5f0f\u300d\uff0c\u8be5\u5982\u4f55\u505a \u5bf9\u4e8e\u666e\u901a\u5bf9\u8bdd\u7684\u65b0\u6d88\u606f\uff0cLeanCloud \u5373\u65f6\u901a\u8baf\u670d\u52a1\u6709\u9009\u9879\u652f\u6301\u5c06\u6d88\u606f\u4ee5 Push Notification \u7684\u65b9\u5f0f\u901a\u77e5\u5f53\u524d\u4e0d\u5728\u7ebf\u7684\u6210\u5458\uff0c\u4f46\u662f\u6709\u65f6\u5019\uff0c\u8fd9\u79cd\u63a8\u9001\u4f1a\u975e\u5e38\u9891\u7e41\u5bf9\u7528\u6237\u9020\u6210\u5e72\u6270\u3002LeanCloud \u63d0\u4f9b\u9009\u9879\uff0c\u652f\u6301\u8ba9\u5355\u4e2a\u7528\u6237\u5173\u95ed\u7279\u5b9a\u5bf9\u8bdd\u7684\u79bb\u7ebf\u6d88\u606f\u63a8\u9001\u3002\u5177\u4f53\u53ef\u4ee5\u770b\u76f8\u5e94\u5e73\u53f0\u7684\u5f00\u53d1\u6307\u5357\u6587\u6863\u3002 \u804a\u5929\u597d\u53cb\u5173\u7cfb\u5982\u4f55\u5b9e\u73b0 LeanCloud \u5373\u65f6\u901a\u8baf\u670d\u52a1\u662f\u5b8c\u5168\u72ec\u7acb\u7684\u5373\u65f6\u901a\u8baf\u4e1a\u52a1\u62bd\u8c61\uff0c\u4e13\u6ce8\u5728\u5373\u65f6\u901a\u8baf\u672c\u8eab\uff0c\u6240\u4ee5\u5373\u65f6\u901a\u8baf\u7684\u4e1a\u52a1\u903b\u8f91\u4e2d\uff0c\u5e76\u4e0d\u542b\u6709\u597d\u53cb\u5173\u7cfb\uff0c\u4ee5\u53ca\u5bf9\u5e94\u7684\u804a\u5929\u7528\u6237\u6570\u636e\u4fe1\u606f\uff08\u5982\u5934\u50cf\u3001\u540d\u79f0\u7b49\uff09\u3002\u5373\u65f6\u901a\u8baf\u4e0e\u5176\u4ed6\u4e1a\u52a1\u903b\u8f91\u5b8c\u5168\u9694\u79bb\uff0c\u4e0d\u8026\u5408\uff0c\u552f\u4e00\u5173\u8054\u7684\u5c31\u662f clientId\u3002\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\u663e\u800c\u6613\u89c1\u7684\uff0c\u6bd4\u5982\u4f60\u53ef\u4ee5\u5f88\u5bb9\u6613\u8ba9\u533f\u540d\u7528\u6237\u76f4\u63a5\u901a\u4fe1\uff0c\u4f60\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e00\u4e9b\u597d\u53cb\u903b\u8f91\uff0c\u603b\u4e4b\u53ef\u4ee5\u505a\u6210\u56e0\u4e3a\u4efb\u610f\u903b\u8f91\u800c\u5339\u914d\u4ea7\u751f\u7684\u804a\u5929\u884c\u4e3a\u3002 \u5f53\u7136\uff0c\u5982\u679c\u4f60\u60f3\u7ef4\u62a4\u4e00\u5957\u597d\u53cb\u5173\u7cfb\uff0c\u5b8c\u5168\u53ef\u4ee5\u4f7f\u7528\u4f60\u81ea\u5df1\u7684\u903b\u8f91\uff0c\u53ea\u8981\u5b58\u50a8\u7740\u6bcf\u4e2a\u7528\u6237\u5728\u5373\u65f6\u901a\u8baf\u4e2d\u7684 clientId \u5373\u53ef\u3002\u6211\u4eec\u63a8\u8350\u4f7f\u7528 LeanCloud \u7684\u5b58\u50a8\uff0c\u5373 LeanStorage\uff0c\u8fd9\u6837\u53ef\u4ee5\u7ed3\u5408 LeanCloud \u4e2d\u7684 User \u76f8\u5173\u5bf9\u8c61\u6765\u7b80\u5355\u5730\u5b9e\u73b0\u8d26\u6237\u7cfb\u7edf\uff0c\u4ee5\u53ca\u4e0e\u4e4b\u76f8\u5173\u7684\u5b58\u50a8\uff0c\u8be6\u60c5\u53ef\u4ee5\u9605\u8bfb\u5bf9\u5e94\u7684 SDK \u5f00\u53d1\u6307\u5357\u3002 \u804a\u5929\u8bb0\u5f55\u7684\u4fdd\u5b58\u65f6\u95f4\u548c\u6761\u6570 \u4e00\u4e2a\u5bf9\u8bdd\u7684\u6d88\u606f\u8bb0\u5f55\u4f1a\u5728\u4e91\u7aef\u4fdd\u7559 6 \u4e2a\u6708 \uff0c\u4e5f\u5c31\u662f\u8bf4\u4e00\u4e2a\u5bf9\u8bdd\u53ef\u4ee5\u67e5\u8be2\u5230\u534a\u5e74\u4e4b\u5185\u7684\u5386\u53f2\u6d88\u606f\u8bb0\u5f55\u3002\u5f00\u53d1\u8005\u53ef\u4ee5\u4ed8\u8d39\u6765\u5ef6\u957f\u8fd9\u4e00\u671f\u9650\uff0c\u8bf7\u8054\u7cfb \u3002\u4f60\u4e5f\u968f\u65f6\u53ef\u4ee5\u901a\u8fc7 REST API \u5c06\u804a\u5929\u8bb0\u5f55\u540c\u6b65\u5230\u81ea\u5df1\u7684\u670d\u52a1\u5668\u4e0a\u3002 \u804a\u5929\u6d88\u606f\u6ca1\u6709\u6536\u5230 \u5f53\u51fa\u73b0\u804a\u5929\u6d88\u606f\u6ca1\u6709\u6536\u5230\u7684\u60c5\u51b5\uff0c\u4f60\u53ef\u4ee5\u6309\u7167\u4ee5\u4e0b\u601d\u8def\u6392\u67e5\uff1a \u8c03\u7528\u6d88\u606f\u8bb0\u5f55 API \u67e5\u770b\u6d88\u606f\u662f\u5426\u5230\u8fbe\u4e86\u4e91\u7aef \u5982\u679c\u53ea\u6709\u4e00\u4e2a\u6d88\u606f\u63a5\u6536\u8005\uff0c\u53ef\u4ee5\u68c0\u67e5\u6d88\u606f\u8bb0\u5f55\u4e2d\u5bf9\u5e94\u6761\u76ee\u7684 ack-at \u5b57\u6bb5\u5224\u65ad\u6d88\u606f\u662f\u5426\u5230\u8fbe\u4e86\u5ba2\u6237\u7aef \u5728 \u63a7\u5236\u53f0 \u6d88\u606f \u5b9e\u65f6\u6d88\u606f \u5e2e\u52a9 \u9875\u9762\u7684\u6587\u672c\u6846\u91cc\u8f93\u5165\u5bf9\u5e94\u7684 Client ID\uff0c\u67e5\u770b\u662f\u5426\u5728\u7ebf\uff0c\u4ee5\u53ca\u662f\u5426\u6709\u79bb\u7ebf\u6d88\u606f\u3002 \u4e3a\u4ec0\u4e48\u6211\u7684 iPhone \u6536\u4e0d\u5230\u79bb\u7ebf\u6d88\u606f\u63a8\u9001 \u8bf7\u5148\u53c2\u8003 \u804a\u5929\u6d88\u606f\u6ca1\u6709\u6536\u5230 \u3002\u5728 \u63a7\u5236\u53f0 \u6d88\u606f \u5b9e\u65f6\u6d88\u606f \u8bbe\u7f6e iOS \u7528\u6237\u79bb\u7ebf\u63a8\u9001\u8bbe\u7f6e \u63a8\u9001\u5185\u5bb9 \u586b\u5199\u300c\u60a8\u6709\u65b0\u7684\u672a\u8bfb\u6d88\u606f\u300d\u540e\uff0c\u5f53\u5bf9\u65b9\u4e0d\u5728\u7ebf\u7684\u65f6\u5019\uff0c\u4fbf\u4f1a\u89e6\u53d1\u4e00\u4e2a APNs \u7684\u63a8\u9001\u3002\u9996\u5148\uff0c\u8bf7\u786e\u4fdd\u63a7\u5236\u53f0\u80fd\u5411 iOS \u63a8\u9001\u6d88\u606f\uff0c\u4e5f\u5373\u5982\u4e0b\u56fe\u6240\u793a\u7684\u63a8\u9001\u80fd\u987a\u5229\u5230\u8fbe iOS \u7cfb\u7edf\uff0c\u8bf7\u53c2\u8003 iOS \u63a8\u9001\u5f00\u53d1\u6587\u6863 \u3002 \u4e4b\u540e\uff0c\u8fd8\u8981\u786e\u4fdd\u5bf9\u65b9\u786e\u5b9e\u662f\u79bb\u7ebf\uff0c\u5982\u679c\u5bf9\u65b9\u7a0b\u5e8f\u5728\u524d\u53f0\u5e76\u4e14\u7f51\u7edc\u826f\u597d\uff0c\u5219\u4e0d\u4f1a\u89e6\u53d1\u63a8\u9001\u3002\u5982\u679c\u5bf9\u65b9\u7f51\u7edc\u672a\u8fde\u63a5\uff0c\u5219\u4e0b\u6b21\u8054\u7f51\u7684\u65f6\u5019\u6536\u5230\u56de\u8c03\uff0c\u4e5f\u4e0d\u89e6\u53d1\u63a8\u9001\u3002\u4e5f\u53ef\u4ee5\u5229\u7528\u63a7\u5236\u53f0\u5b9e\u65f6\u6d88\u606f\u9875\u7684\u7528\u6237\u72b6\u6001\u67e5\u8be2\u6765\u786e\u4fdd\u5bf9\u65b9\u5904\u4e8e\u79bb\u7ebf\u72b6\u6001\uff0c\u5982\u4e0b\u56fe\u3002 \u79bb\u7ebf\u6d88\u606f\u63a8\u9001\u9ed8\u8ba4\u7528\u7684\u662f\u751f\u4ea7\u73af\u5883\u7f16\u8f91\u6846\u91cc\u4e0a\u4f20\u7684\u8bc1\u4e66\u3002\u6240\u4ee5\uff0c\u8c03\u8bd5\u65f6\u53ef\u80fd\u8981\u4e0a\u4f20\u5f00\u53d1\u8bc1\u4e66\uff0c\u5e76\u5728\u63a8\u9001\u5185\u5bb9\u4e2d\u8bbe\u7f6e _profile \u5c5e\u6027\u6765\u9009\u62e9\u5f00\u53d1\u8bc1\u4e66\u63a8\u9001\uff0c\u5982 { alert : \u4f60\u6709\u4e00\u6761\u672a\u8bfb\u6d88\u606f , _profile : dev } \u68c0\u67e5\u65b9\u6cd5\u603b\u7ed3\u5982\u4e0b\uff1a \u68c0\u67e5 _Installation \u8868\u4e2d\u662f\u5426\u6709\u8bbe\u5907\u8ba2\u9605\u4e86\u5bf9\u5e94\u7684 Client ID \u68c0\u67e5\u666e\u901a\u7684 iOS \u63a8\u9001\u662f\u5426\u5230\u8fbe \u68c0\u67e5\u8bc1\u4e66\u8bbe\u7f6e \u5728\u63a7\u5236\u53f0\u68c0\u67e5\u63a5\u6536\u65b9\u662f\u5426\u5728\u79bb\u7ebf\u72b6\u6001 Android \u8bbe\u5907\u7cfb\u7edf\u65f6\u95f4\u4e0d\u51c6\uff0c\u4f1a\u5f71\u54cd\u5373\u65f6\u901a\u8baf\u670d\u52a1\u5417\uff1f \u53ef\u80fd\u4f1a\uff0c\u53d6\u51b3\u4e8e\u8bc1\u4e66\u7684\u65f6\u95f4\u3002\u5f53\u9519\u8bef\u7684\u7cfb\u7edf\u65f6\u95f4\u548c\u5f53\u524d\u65f6\u95f4\u7684\u8bef\u5dee\uff0c\u5927\u4e8e\u8bc1\u4e66\u7684\u6709\u6548\u65f6\u95f4\uff0c\u5c31\u4f1a\u5bfc\u81f4 SSL \u63e1\u624b\u5931\u8d25\uff0c\u8fdb\u800c\u8ba9\u5373\u65f6\u901a\u8baf\u670d\u52a1\u6574\u4f53\u4e0d\u53ef\u7528\u3002","title":"\u670d\u52a1\u603b\u89c8"},{"location":"im/im-overview/#_1","text":"\u5373\u65f6\u901a\u8baf\u670d\u52a1\u662f LeanCloud \u6d88\u606f\u670d\u52a1\u4e2d\u7684\u91cd\u8981\u4e00\u73af\u3002\u4f60\u4e0d\u4f46\u53ef\u4ee5\u4e3a\u5e94\u7528\u52a0\u5165\u5373\u65f6\u901a\u8baf\u3001\u79c1\u4fe1\u7b49\u5e38\u7528\u529f\u80fd\uff0c\u8fd8\u80fd\u5b9e\u73b0\u6e38\u620f\u5bf9\u6218\u7b49\u5b9e\u65f6\u4e92\u52a8\u529f\u80fd\u3002 \u76ee\u524d\uff0c\u6211\u4eec\u63d0\u4f9b Android\u3001iOS\u3001JavaScript\u3001Windows Phone \u56db\u4e2a\u4e3b\u8981\u5e73\u53f0\u7684\u5ba2\u6237\u7aef SDK\uff0c\u4e5f\u63d0\u4f9b\u4e86\u4e00\u4e9b Demo \u5e2e\u52a9\u4f60\u5feb\u901f\u5165\u95e8\uff1a iOS \u804a\u5929\u5e94\u7528\uff1a ChatKit\uff0c\u81ea\u5e26 UI \u7684\u804a\u5929\u5de5\u5177\u5305 Android \u804a\u5929\u5e94\u7528\uff1a ChatKit\uff0c\u81ea\u5e26 UI \u7684\u804a\u5929\u5de5\u5177\u5305 LeanChat Android \u7248 JavaScript \u804a\u5929\u5e94\u7528 LeanMessageDemo \u7f51\u9875\u7248 Simple Chatroom \uff08 \u6e90\u7801 \uff09 \u5173\u4e8e\u8fd9\u4e9b\u9879\u76ee\u7684\u66f4\u591a\u4ecb\u7ecd\u3001\u622a\u56fe\u9884\u89c8\uff0c\u53ef\u89c1 LeanCloud Demos \u3002 \u76ee\u524d\u65b0\u7248\u672c\u5373\u65f6\u901a\u8baf\u670d\u52a1\u63a5\u53e3\u4e0e\u65e7\u7248\u672c\u5e76\u4e0d\u517c\u5bb9\uff0c\u4e0d\u80fd\u4e92\u76f8\u901a\u4fe1\u3002\u6211\u4eec\u63a8\u8350\u6240\u6709\u65b0\u7528\u6237\u76f4\u63a5\u4f7f\u7528\u65b0\u7248\u672c\u3002\u5df2\u6709\u7684\u65e7\u7248\u672c\u7528\u6237\u53ef\u4ee5\u7ee7\u7eed\u53c2\u8003 v1 \u7248\u672c\u6587\u6863 \uff0c\u6211\u4eec\u4ecd\u7136\u4f1a\u5bf9\u5df2\u6709\u7248\u672c\u63d0\u4f9b\u652f\u6301\uff0c\u5e76\u53ef\u80fd\u5728\u672a\u6765\u63d0\u4f9b\u65e0\u7f1d\u7684\u8fc1\u79fb\u65b9\u6848\u3002\u5df2\u7ecf\u53d1\u5e03\u7684\u65e7\u7248\u672c\u7528\u6237\u4e0d\u4f1a\u5728\u529f\u80fd\u3001\u8d44\u6e90\u7b49\u5404\u4e2a\u65b9\u9762\u53d7\u5230\u4efb\u4f55\u5f71\u54cd\uff0c\u8bf7\u653e\u5fc3\u4f7f\u7528\u3002","title":"\u5373\u65f6\u901a\u8baf\u670d\u52a1\u603b\u89c8"},{"location":"im/im-overview/#_2","text":"LeanCloud \u5373\u65f6\u901a\u8baf\u670d\u52a1\u5b9a\u4f4d\u4e8e\u5b8c\u7f8e\u5b9e\u73b0\u7f51\u7edc\u5c42\u7684\u901a\u8baf\u80fd\u529b\uff0c\u5176\u8bbe\u8ba1\u76ee\u6807\u805a\u7126\u5728\uff1a \u5feb\u6377 LeanCloud \u4e91\u7aef\u8981\u80fd\u652f\u6301\u4e0a\u4ebf\u7ec8\u7aef\u540c\u65f6\u5728\u7ebf\uff0c\u5e76\u4e14\u6d88\u606f\u4f20\u9012\u5ef6\u65f6\u9700\u8981\u4e25\u683c\u63a7\u5236\u5728\u6beb\u79d2\u4ee5\u5185\u3002 \u7075\u6d3b \u65e2\u8981\u4e3a\u5b8c\u5168\u4f9d\u6258 LeanCloud \u5e73\u53f0\u7684\u5f00\u53d1\u8005\u8003\u8651\uff0c\u4e5f\u8981\u4e3a\u81ea\u6709\u8d26\u6237\u7cfb\u7edf\u7684\u7528\u6237\u8bbe\u8ba1\uff1a\u5982\u679c\u7528\u6237\u81ea\u5df1\u6709\u5b8c\u5907\u7684\u540e\u53f0\u548c\u8d26\u6237\u7cfb\u7edf\uff0c\u5e94\u8be5\u5b8c\u5168\u4e0d\u7528\u66b4\u9732\u5185\u90e8\u6570\u636e\u5c31\u80fd\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u3002\u800c\u4e14\uff0c\u6d88\u606f\u901a\u77e5\u7684\u624b\u6bb5\u8981\u591a\u6837\u5316\uff0c\u8981\u8ba9\u5f00\u53d1\u8005\u6709\u66f4\u591a\u5b9a\u5236\u7684\u80fd\u529b\u3002\u8b6c\u5982\u804a\u5929\u65f6\u5bf9\u65b9\u4e0d\u5728\u7ebf\uff0c\u5e94\u8be5\u80fd\u8d70\u300c\u6d88\u606f\u63a8\u9001\uff08Push Notification\uff09\u300d\u901a\u9053\u6765\u53ca\u65f6\u63d0\u9192\u5bf9\u65b9\uff0c\u5e76\u5141\u8bb8\u5f00\u53d1\u8005\u5bf9\u63a8\u9001\u5185\u5bb9\u8fdb\u884c\u300c\u79c1\u4eba\u5b9a\u5236\u300d\u7b49\u7b49\u3002 \u5b89\u5168 \u9664\u4e86\u7b80\u5355\u7684 appId \u548c secretKey \u4e4b\u5916\uff0c\u8fd8\u5e94\u8be5\u8d4b\u4e88\u5f00\u53d1\u8005\u66f4\u591a\u7684\u5b89\u5168\u63a7\u5236\u80fd\u529b\uff0c\u6765\u4fdd\u8bc1\u804a\u5929\u901a\u9053\u7684\u79c1\u5bc6\u6027\u3002 LeanCloud \u5373\u65f6\u901a\u8baf\u670d\u52a1\u7684\u7279\u6027\u4e3b\u8981\u6709\uff1a \u4e0e\u8d26\u6237\u7cfb\u7edf\u89e3\u8026\u5408 \u4efb\u4f55\u7ec8\u7aef\u7528\u6237\u8981\u52a0\u5165\u804a\u5929\uff0c\u53ea\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u552f\u4e00\u6807\u8bc6\u81ea\u5df1\u7684 clientId \u5373\u53ef\uff0c\u8fd9\u6837\u53ef\u4ee5\u5c3d\u91cf\u907f\u514d\u81ea\u6709\u8d26\u6237\u7cfb\u7edf\u7684\u5e94\u7528\u6570\u636e\u66b4\u9732\uff0c\u4e5f\u53ef\u4ee5\u4fc3\u4f7f\u901a\u4fe1\u670d\u52a1\u4e13\u6ce8\u505a\u597d\u5e95\u5c42\u7684\u300c\u4fe1\u4f7f\u300d\u89d2\u8272\uff1b \u591a\u8d26\u53f7\u767b\u5f55 \u652f\u6301\u5355\u4e2a\u8bbe\u5907\u591a\u4e2a\u8d26\u53f7\u3001\u5355\u4e2a\u8d26\u53f7\u591a\u4e2a\u8bbe\u5907\u540c\u65f6\u767b\u5f55\uff0c\u5b9e\u65f6\u6d88\u606f\u540c\u6b65\u5230\u6240\u6709\u8bbe\u5907\u3002 \u5b8c\u6574\u7684\u804a\u5929\u529f\u80fd \u652f\u6301\u5355\u804a\u3001\u7fa4\u804a\u3001\u804a\u5929\u5ba4\u3001\u8ba2\u9605\u53f7\u7b49\u4e0d\u540c\u804a\u5929\u5f62\u5f0f\uff0c\u5e76\u4e14\u5177\u5907\u5b8c\u5584\u7684\u7fa4\u7ec4\u7ba1\u7406\u529f\u80fd\u3002 \u652f\u6301\u5bcc\u5a92\u4f53\u3001\u81ea\u5b9a\u4e49\u7c7b\u578b\u6d88\u606f \u652f\u6301\u6587\u672c\u3001\u56fe\u7247\u3001\u97f3\u9891\u3001\u89c6\u9891\u548c\u5730\u7406\u4f4d\u7f6e\u7b49\u591a\u79cd\u683c\u5f0f\u7684\u5bcc\u5a92\u4f53\u6d88\u606f\uff0c\u5e76\u4e14\u5f00\u53d1\u8005\u8fd8\u53ef\u65b9\u4fbf\u5730\u81ea\u5b9a\u4e49\u6269\u5c55\u3002 \u79bb\u7ebf\u6d88\u606f\u63a8\u9001 \u6d88\u606f\u5728\u5bf9\u65b9\u79bb\u7ebf\u65f6\uff0c\u4f1a\u81ea\u52a8\u901a\u8fc7 \u6d88\u606f\u63a8\u9001 \u6765\u53ca\u65f6\u9001\u8fbe\u5bf9\u65b9\uff0c\u5e76\u4e14\u63a8\u9001\u7684\u6d88\u606f\u6587\u672c\u53ef\u4ee5\u7531\u5f00\u53d1\u8005\u81ea\u5df1\u63a7\u5236\u3002 \u654f\u611f\u8bcd\u8fc7\u6ee4 \u5b9e\u65f6\u6d88\u606f\u4e2d\u51fa\u73b0\u7684\u654f\u611f\u8bcd\uff0c\u4f1a\u81ea\u52a8\u88ab\u8fc7\u6ee4\u6389\u3002\u8be6\u60c5\u89c1 \u654f\u611f\u8bcd\u8fc7\u6ee4 \u3002 \u804a\u5929\u8bb0\u5f55\u4fdd\u5b58\u5728\u4e91\u7aef \u804a\u5929\u8bb0\u5f55\u81ea\u52a8\u4fdd\u5b58\u5728\u4e91\u7aef\uff0c\u5141\u8bb8\u5f00\u53d1\u8005\u81ea\u7531\u83b7\u53d6\u3002 \u7b2c\u4e09\u65b9\u64cd\u4f5c\u9274\u6743\u673a\u5236 \u4e3a\u4e86\u4fdd\u8bc1\u4fe1\u9053\u7684\u5b89\u5168\uff0c\u4e5f\u7ed9\u5f00\u53d1\u8005\u6700\u5927\u7684\u63a7\u5236\u81ea\u7531\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u64cd\u4f5c\u9274\u6743\u7684\u673a\u5236\uff1a\u5f00\u53d1\u8005\u4f7f\u7528\u81ea\u5df1\u7684\u670d\u52a1\u5668\u6765\u5145\u5f53\u9274\u6743\u670d\u52a1\u5668\uff0c\u5bf9\u6d88\u606f\u6d41\u5411\u8fdb\u884c\u300c\u8bb8\u53ef\u63a7\u5236\u300d\u3002\u5bf9\u4e8e\u6d88\u606f\u8def\u7531\u8fc7\u7a0b\u4e2d\u7684\u91cd\u8981\u64cd\u4f5c\uff08\u8b6c\u5982\u767b\u5f55\u3001\u5f00\u542f\u5bf9\u8bdd\u3001\u9080\u8bf7\u52a0\u5165\u7fa4\u7ec4\u3001\u4ece\u7fa4\u7ec4\u8e22\u51fa\u67d0\u4eba\u7b49\uff09\uff0c\u5b9e\u65f6\u6d88\u606f SDK \u5728\u53d1\u9001\u8bf7\u6c42\u4e4b\u524d\uff0c\u4f1a\u5148\u5230\u9274\u6743\u670d\u52a1\u5668\u83b7\u5f97\u64cd\u4f5c\u7b7e\u540d\uff0cLeanCloud \u4e91\u7aef\u4f1a\u9a8c\u8bc1\u7b7e\u540d\u6709\u6548\u6027\u5e76\u5b8c\u5168\u6309\u7167\u9274\u6743\u7ed3\u679c\u6765\u5bf9\u64cd\u4f5c\u653e\u884c\u6216\u62d2\u7edd\u3002 \u7cfb\u7edf\u8d26\u53f7\u3001\u673a\u5668\u4eba Hook \u548c\u516c\u4f17\u53f7\u540e\u53f0 \u652f\u6301\u7cfb\u7edf\u4e2d\u7684\u5c0f\u52a9\u624b\u3001\u673a\u5668\u4eba\u548c\u516c\u4f17\u53f7\u7b49\u573a\u666f\uff0c\u65b9\u4fbf\u7528\u6237\u5c06\u5373\u65f6\u901a\u8baf\u7cfb\u7edf\u548c\u81ea\u5df1\u5df2\u6709\u7684\u7cfb\u7edf\u65e0\u7f1d\u96c6\u6210\uff0c\u652f\u6301\u4e8c\u6b21\u5f00\u53d1\u673a\u5668\u4eba\u548c\u6d88\u606f\u540e\u53f0\u3002 \u6211\u4eec\u63d0\u4f9b\u51e0\u4e2a\u5c42\u9762\u7528\u6237\u63a5\u53e3\uff1a \u539f\u751f\u7684 Android\u3001iOS\u3001Windows Phone \u548c Web (JavaScript) \u8bed\u8a00\u7684\u5ba2\u6237\u7aef SDK \u5e2e\u52a9\u5f00\u53d1\u8005\u5b8c\u6210\u540e\u53f0\u7ba1\u7406\u548c\u4e91\u7aef\u76f8\u5173\u529f\u80fd\u7684 REST API \u90e8\u7f72\u5728 LeanCloud \u73af\u5883\u4e2d\u7684\u4e91\u5f15\u64ce Hook \u4fbf\u4e8e\u5f00\u53d1\u8005\u4fee\u6539\u9ed8\u8ba4\u7684\u7cfb\u7edf\u884c\u4e3a \u53ef\u4ee5\u5b9e\u65f6\u76d1\u63a7\u5728\u7ebf\u7528\u6237\u6570\u3001\u6d88\u606f\u6570\u7684\u5f00\u53d1\u8005\u63a7\u5236\u53f0","title":"\u529f\u80fd\u548c\u7279\u6027"},{"location":"im/im-overview/#_3","text":"","title":"\u6838\u5fc3\u6982\u5ff5"},{"location":"im/im-overview/#clientid","text":"\u5373\u65f6\u901a\u8baf\u670d\u52a1\u4e2d\u7684\u6bcf\u4e00\u4e2a\u7ec8\u7aef\u79f0\u4e3a\u4e00\u4e2a client\u3002client \u62e5\u6709\u4e00\u4e2a\u5728\u5e94\u7528\u5185\u552f\u4e00\u6807\u8bc6\u81ea\u5df1\u7684 id\u3002\u8fd9\u4e2a id \u7531\u5e94\u7528\u81ea\u5df1\u5b9a\u4e49\uff0c\u5fc5\u987b\u662f\u4e0d\u591a\u4e8e 64 \u4e2a\u5b57\u7b26\u7684\u5b57\u7b26\u4e32\u3002\u5728\u5927\u90e8\u5206\u573a\u5408\uff0cclient \u90fd\u53ef\u4ee5\u5bf9\u5e94\u5230\u5e94\u7528\u4e2d\u7684\u67d0\u4e2a\u300c\u7528\u6237\u300d\uff0c\u4f46\u662f\u5e76\u4e0d\u662f\u53ea\u6709\u771f\u7684\u7528\u6237\u624d\u80fd\u505a\u4e3a client\uff0c\u4f60\u5b8c\u5168\u53ef\u4ee5\u628a\u4e00\u4e2a\u63a2\u6d4b\u5668\u5f53\u6210\u4e00\u4e2a client\uff0c\u628a\u5b83\u6536\u96c6\u5230\u7684\u6570\u636e\u901a\u8fc7\u5373\u65f6\u901a\u8baf\u670d\u52a1\u5e7f\u64ad\u7ed9\u66f4\u591a\u300c\u4eba\u300d\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cLeanCloud \u901a\u4fe1\u670d\u52a1\u5141\u8bb8\u4e00\u4e2a clientId \u5728\u591a\u4e2a\u4e0d\u540c\u7684\u8bbe\u5907\u4e0a\u767b\u5f55\uff0c\u4e5f\u5141\u8bb8\u4e00\u4e2a\u8bbe\u5907\u4e0a\u6709\u591a\u4e2a clientId \u540c\u65f6\u767b\u5f55\u3002\u5982\u679c\u4f7f\u7528\u573a\u666f\u4e2d\u9700\u8981\u9650\u5236\u7528\u6237\u53ea\u5728\u4e00\u5904\u767b\u5f55\uff0c\u53ef\u4ee5\u5728\u767b\u5f55\u65f6\u660e\u786e\u8bbe\u7f6e\u5f53\u524d\u8bbe\u5907\u7684 tag\uff0c \u5f53 LeanCloud \u68c0\u6d4b\u5230\u540c\u4e00\u4e2a tag \u7684\u8bbe\u5907\u51fa\u73b0\u51b2\u7a81\u65f6\uff0c\u4f1a\u81ea\u52a8\u8e22\u51fa\u5df2\u5b58\u5728\u8bbe\u5907\u4e0a\u7684\u767b\u5f55\u72b6\u6001\u3002\u5f00\u53d1\u8005\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u5e94\u7528\u573a\u666f\u9009\u62e9\u5408\u9002\u7684\u4f7f\u7528\u65b9\u5f0f\u3002 \u4f7f\u7528 LeanCloud \u5373\u65f6\u901a\u8baf SDK \u5b8c\u6210\u767b\u5f55\u540e\uff0c\u5f00\u53d1\u8005\u5c31\u4e0d\u5fc5\u5173\u5fc3\u7f51\u7edc\u8fde\u63a5\u7b49\u72b6\u6001\uff0cSDK \u4f1a\u81ea\u52a8\u4e3a\u5f00\u53d1\u8005\u4fdd\u6301\u8fde\u63a5\u72b6\u6001\uff0c\u5e76\u6839\u636e\u7f51\u7edc\u72b6\u6001\u81ea\u52a8\u91cd\u8fde\u3002\u5bf9\u4e8e Android \u5e73\u53f0\uff0c\u6211\u4eec\u4f7f\u7528\u5e38\u9a7b\u540e\u53f0\u7684\u670d\u52a1\u4fdd\u6301\u5728\u7ebf\u72b6\u6001\uff1b\u5bf9\u4e8e iOS \u548c Windows Phone \u7b49\u5e73\u53f0\uff0c\u6211\u4eec\u4f1a\u5728\u5e94\u7528\u4ecd\u5728\u524d\u53f0\u65f6\u4fdd\u6301\u8fde\u63a5\uff0c\u5f53\u5e94\u7528\u9000\u5230\u540e\u53f0\u65f6\uff0c\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u518d\u6fc0\u6d3b\u5e73\u53f0\u539f\u751f\u7684\u63a8\u9001\u670d\u52a1\u3002","title":"ClientID\u3001\u7528\u6237\u548c\u767b\u5f55"},{"location":"im/im-overview/#_4","text":"\u6211\u4eec\u76ee\u524d\u5728 SDK \u548c REST API \u4e0a\u63d0\u4f9b\u4e3b\u52a8\u67e5\u8be2\u7684\u673a\u5236\u5e2e\u52a9\u5f00\u53d1\u8005\u67e5\u8be2\u76ee\u6807\u7528\u6237\u7684\u5728\u7ebf\u72b6\u6001\u3002","title":"\u5728\u7ebf\u72b6\u6001"},{"location":"im/im-overview/#conversation","text":"\u7528\u6237\u767b\u5f55\u4e4b\u540e\uff0c\u4e0e\u5176\u4ed6\u4eba\u8fdb\u884c\u6d88\u606f\u6c9f\u901a\uff0c\u5373\u4e3a\u5f00\u542f\u4e86\u4e00\u4e2a\u5bf9\u8bdd\uff08Conversation\uff09\u3002\u5f00\u59cb\u804a\u5929\u4e4b\u524d\uff0c\u9700\u8981\u5148\u521b\u5efa\u6216\u8005\u52a0\u5165\u4e00\u4e2a\u5bf9\u8bdd\uff0c\u7136\u540e\u518d\u9080\u8bf7\u5176\u4ed6\u4eba\u8fdb\u6765\uff0c\u4e4b\u540e\u6240\u6709\u53c2\u4e0e\u8005\u5728\u8fd9\u4e2a\u5bf9\u8bdd\u5185\u8fdb\u884c\u4ea4\u6d41\u3002\u6240\u6709\u6d88\u606f\u90fd\u662f\u7531\u67d0\u4e00\u4e2a client \u53d1\u5f80\u4e00\u4e2a\u300c\u5bf9\u8bdd\u300d\u3002 \u7cfb\u7edf\u6bcf\u521b\u5efa\u4e00\u4e2a\u5bf9\u8bdd\uff0c\u5c31\u4f1a\u5728\u4e91\u7aef\u7684 _Conversation \u8868\u4e2d\u589e\u52a0\u4e00\u6761\u8bb0\u5f55\uff0c\u53ef\u4ee5\u8fdb\u5165 \u63a7\u5236\u53f0 \u5b58\u50a8 \u6570\u636e \u6765\u67e5\u770b\u8be5\u6570\u636e\u3002 _Conversation \u8868\u4e2d\u5b57\u6bb5\u540d\u4e0e\u5bf9\u8bdd\u7684\u5404\u4e2a\u5c5e\u6027\u7684\u5bf9\u5e94\u5173\u7cfb\u4e3a\uff1a \u8868\u5b57\u6bb5 \u5c5e\u6027\u540d \u7c7b\u578b \u7ea6\u675f \u8bf4\u660e attr attributes Object \u53ef\u9009 \u81ea\u5b9a\u4e49\u5c5e\u6027\uff0c\u4f9b\u5f00\u53d1\u8005\u6269\u5c55\u4f7f\u7528\u3002 objectId conversationId String \u5bf9\u8bdd id\uff08\u53ea\u8bfb\uff09\uff0c\u7531\u4e91\u7aef\u4e3a\u8be5\u5bf9\u8bdd\u751f\u6210\u7684\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684 id\u3002 c creator String \u5bf9\u8bdd\u521b\u5efa\u8005\u7684 clientId\uff08\u53ea\u8bfb\uff09 lm lastMessageAt Date \u5bf9\u8bdd\u4e2d\u6700\u540e\u4e00\u6761\u6d88\u606f\u7684\u53d1\u9001\u6216\u63a5\u6536\u65f6\u95f4 m members Array \u666e\u901a\u5bf9\u8bdd\u7684\u6240\u6709\u53c2\u4e0e\u8005\uff08\u4ec5\u9488\u5bf9\u666e\u901a\u5bf9\u8bdd\uff0c\u6682\u6001\u5bf9\u8bdd\u548c\u7cfb\u7edf\u5bf9\u8bdd\u5e76\u4e0d\u652f\u6301\u6301\u4e45\u5316\u7684\u6210\u5458\u5217\u8868\uff09 mu mute Array \u5c06\u5bf9\u8bdd\u8bbe\u4e3a\u9759\u97f3\u7684\u53c2\u4e0e\u8005\uff0c\u8fd9\u90e8\u5206\u53c2\u4e0e\u8005\u4e0d\u4f1a\u6536\u5230\u63a8\u9001\u3002 \uff08\u4ec5\u9488\u5bf9 iOS \u4ee5\u53ca Windows Phone \u7528\u6237\u6709\u6548\uff09 name name String \u53ef\u9009 \u5bf9\u8bdd\u7684\u540d\u5b57\uff0c\u53ef\u4e3a\u7fa4\u7ec4\u547d\u540d\u3002 tr transient Boolean \u53ef\u9009 \u662f\u5426\u4e3a\u6682\u6001\u5bf9\u8bdd sys system Boolean \u53ef\u9009 \u662f\u5426\u662f\u7cfb\u7edf\u5bf9\u8bdd unique unique Boolean \u53ef\u9009 \u5185\u90e8\u5b57\u6bb5\uff0c\u6807\u8bb0\u6839\u636e\u6210\u5458\u539f\u5b50\u521b\u5efa\u7684\u5bf9\u8bdd\u3002 \u9664\u4e86\u5728\u5404\u5e73\u53f0\u7684 SDK \u91cc\u9762\u53ef\u4ee5\u8c03\u7528 API \u521b\u5efa\u5bf9\u8bdd\u5916\uff0c\u6211\u4eec\u4e5f\u63d0\u4f9b REST API \u53ef\u4ee5\u8ba9\u5927\u5bb6\u9884\u5148\u5efa\u7acb\u5bf9\u8bdd\uff1a\u5bf9\u8bdd\u7684\u4fe1\u606f\u5b58\u50a8\u5728 _Conversation \u8868\u4e2d\u3002 \u8fd9\u91cc\u8981\u7279\u522b\u8ba8\u8bba\u4e00\u4e0b \u5355\u804a \u3001 \u7fa4\u804a \u3001 \u804a\u5929\u5ba4 \u3001 \u516c\u4f17\u53f7 \u7b49\u4f7f\u7528\u573a\u666f\u3002 \u5355\u804a \u5c31\u662f\u4e24\u4e2a client \u4e4b\u95f4\u7684\u5bf9\u8bdd\uff0c\u516c\u5f00\u4e0e\u5426\uff08\u80fd\u5426\u8ba9\u5176\u4ed6\u4eba\u770b\u5230\u8fd9\u4e2a\u5bf9\u8bdd\u5b58\u5728\uff09\u7531\u5e94\u7528\u5c42\u81ea\u5df1\u63a7\u5236\u3002\u4e00\u822c\u800c\u8a00\uff0c\u5b83\u662f\u79c1\u5bc6\u7684\uff0c\u5e76\u4e14\u52a0\u5165\u65b0\u7684\u6210\u5458\u4e4b\u540e\uff0c\u4f1a\u5207\u6362\u5230\u65b0\u7684\u5bf9\u8bdd\uff08\u5f53\u7136\uff0c\u4e5f\u53ef\u4ee5\u4f9d\u7136\u4e0d\u79bb\u5f00\u5f53\u524d\u5bf9\u8bdd\uff0c\u8fd9\u4e00\u70b9\u8fd8\u662f\u7531\u5e94\u7528\u5c42\u6765\u51b3\u5b9a\uff09\u3002 \u7fa4\u804a \u5c31\u662f\u4e24\u4e2a\uff08\u542b\uff09\u4ee5\u4e0a client \u4e4b\u95f4\u7684\u5bf9\u8bdd\uff0c\u4e00\u822c\u800c\u8a00\uff0c\u53ef\u4ee5\u6dfb\u52a0\u548c\u5220\u9664\u6210\u5458\uff0c\u5e76\u4e14\u4f1a\u8d4b\u4e88\u7fa4\u804a\u4e00\u4e2a\u540d\u5b57\u3002\u968f\u7740\u6210\u5458\u7684\u51cf\u5c11\uff0c\u7fa4\u804a\u4e5f\u53ef\u80fd\u53ea\u6709\u4e24\u4e2a\u751a\u81f3\u4e00\u4e2a\u6210\u5458\uff08\u6210\u5458\u7684\u591a\u5c11\u5e76\u4e0d\u662f\u533a\u5206\u7fa4\u804a\u548c\u5355\u804a\u7684\u5173\u952e\uff09\u3002\u7fa4\u804a\u80fd\u5426\u516c\u5f00\uff08\u8b6c\u5982\u652f\u6301\u540d\u5b57\u641c\u7d22\uff09\uff0c\u7531\u5e94\u7528\u81ea\u5df1\u51b3\u5b9a\u3002 \u804a\u5929\u5ba4 \u5f88\u591a\u5e94\u7528\u4f7f\u7528\u7684\u804a\u5929\u5ba4\u3001\u5f39\u5e55\u3001\u7f51\u9875\u76f4\u64ad\u7b49\u90fd\u53ef\u4ee5\u62bd\u8c61\u6210\u300c\u804a\u5929\u5ba4\u300d\uff0c\u5b83\u4e0e\u7fa4\u804a\u7c7b\u4f3c\uff0c\u90fd\u662f\u591a\u4eba\u53c2\u4e0e\u7684\u7fa4\u7ec4\uff0c\u4f46\u662f\u4e5f\u6709\u4e00\u4e9b\u533a\u522b\uff1a\u5176\u4e00\u5728\u4e8e\u804a\u5929\u5ba4\u4eba\u6570\u53ef\u80fd\u8fdc\u5927\u4e8e\u7fa4\u804a\u4eba\u6570\uff1b\u5176\u4e8c\u5728\u4e8e\u804a\u5929\u5ba4\u5f3a\u8c03\u7684\u662f\u5728\u7ebf\u4eba\u6570\uff0c\u6240\u6709\u53c2\u4e0e\u8005\u8fdb\u5165\u804a\u5929\u754c\u9762\u5c31\u7b97\u52a0\u5165\uff0c\u5173\u95ed\u754c\u9762\u5c31\u7b97\u9000\u51fa\uff0c\u6240\u4ee5\u804a\u5929\u5ba4\u4e0d\u9700\u8981\u79bb\u7ebf\u6d88\u606f\u548c\u63a8\u9001\u901a\u77e5\uff0c\u5728\u7ebf\u6210\u5458\u6570\u6bd4\u5177\u4f53\u6210\u5458\u5217\u8868\u66f4\u6709\u610f\u4e49\u3002 \u516c\u4f17\u53f7\u3001\u673a\u5668\u4eba \u5bf9\u5168\u90e8\u6216\u8005\u90e8\u5206\u7528\u6237\u53ef\u89c1\uff08\u7531\u5e94\u7528\u5f00\u53d1\u8005\u51b3\u5b9a\uff09\u7684\u8d26\u53f7\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u8d26\u53f7\u7ed9\u7528\u6237\u53d1\u5e7f\u64ad\u901a\u77e5\uff0c\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u8d26\u53f7\u53cd\u9988\u5185\u5bb9\u7ed9\u5f00\u53d1\u8005\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u540e\u53f0\u770b\u5230\u6d88\u606f\uff0c\u4e5f\u53ef\u4ee5\u5229\u7528 API \u6216 Web Hook \u5c06\u81ea\u5df1\u7684\u4e1a\u52a1\u7cfb\u7edf\u96c6\u6210\u8fdb\u6765\u3002 \u6211\u4eec\u5c06\u4ee5\u4e0a\u573a\u666f\u62bd\u8c61\u4e3a\u300c\u5bf9\u8bdd\u300d\u8fd9\u4e00\u6982\u5ff5\uff0c\u5e76\u5206\u79bb\u51fa\u4ee5\u4e0b\u7c7b\u578b\u7684\u5bf9\u8bdd\uff1a","title":"\u5bf9\u8bdd\uff08Conversation\uff09"},{"location":"im/im-overview/#normal-conversation","text":"\u8fd9\u662f\u6211\u4eec\u7ecf\u5e38\u4f1a\u7528\u5230\u7684\u300c\u5bf9\u8bdd\u300d\uff0c\u5355\u804a\u548c\u7fa4\u804a\u90fd\u901a\u8fc7\u5b83\u6765\u5b9e\u73b0\u3002\u6211\u4eec\u5efa\u8bae\u5f00\u53d1\u8005\u5c06\u5355\u804a/\u7fa4\u804a\u3001\u79c1\u5bc6/\u516c\u5f00\u7b49\u5c5e\u6027\u5b58\u5165\u5230 Conversation.attributes \u4e4b\u4e2d\uff0c\u5728\u5e94\u7528\u5c42\u8fdb\u884c\u533a\u522b\u5bf9\u5f85\u3002 \u4e3a\u4e86\u63d0\u9ad8\u7cfb\u7edf\u7684\u7075\u6d3b\u6027\uff0c\u6211\u4eec\u5141\u8bb8\u591a\u4e2a\u5bf9\u8bdd\u4fdd\u6301\u76f8\u540c\u7684\u6210\u5458\uff0c\u56e0\u6b64\u521b\u5efa\u5bf9\u8bdd\u65f6\u7cfb\u7edf\u603b\u662f\u9ed8\u8ba4\u521b\u5efa\u65b0\u7684\u5bf9\u8bdd\u3002 \u5982\u679c\u5f00\u53d1\u8005\u5e0c\u671b\u4f7f\u7528\u56fa\u5b9a\u7684\u5bf9\u8bdd\uff0c\u53ef\u4ee5\u5728\u521b\u5efa\u5bf9\u8bdd\u65f6\u8bbe\u7f6e\u76f8\u5e94 SDK \u4e0a\u7684 unique \u9009\u9879\uff0c\u7cfb\u7edf\u5c06\u67e5\u627e\u5bf9\u5e94\u6210\u5458\u76f8\u540c\u4e14 unique \u9009\u9879\u4e3a true \u7684\u5bf9\u8bdd\uff0c\u5982\u679c\u627e\u5230\u5373\u8fd4\u56de\u5df2\u6709\u7684\u5bf9\u8bdd\uff0c\u5982\u679c\u6ca1\u6709\u5219\u81ea\u52a8\u521b\u5efa\u3002 \uff08\u6ce8\u610f\uff0c\u8fd9\u79cd\u65b9\u5f0f\u67e5\u627e\u7684\u5bf9\u8bdd\u4ec5\u5bf9\u5df2\u7ecf\u4f7f\u7528 unique \u9009\u9879\u7684\u5bf9\u8bdd\u6709\u6548\uff0c\u5e76\u4e14\u521b\u5efa\u5bf9\u8bdd\u65f6\u4e0d\u4f1a\u89e6\u53d1 _Conversation \u8868\u5728\u4e91\u5f15\u64ce\u4e0a\u7684 beforeSave \u7b49 hook\uff09 REST API \u5728\u521b\u5efa\u5bf9\u8bdd\u65f6\u540c\u6837\u652f\u6301 unique \u53c2\u6570\u3002 \u5bf9\u4e8e\u5e94\u7528\u4e2d\u5b58\u5728\u7cfb\u7edf\u5e10\u53f7\u7684\u573a\u666f\uff0c\u6211\u4eec\u5efa\u8bae\u60a8\u901a\u8fc7\u4e0b\u6587\u63d0\u5230\u7684 \u7cfb\u7edf\u5bf9\u8bdd \u6765\u5b9e\u73b0\uff0c\u4ee5\u907f\u514d\u5bf9\u5355\u4e00\u5e10\u53f7\u521b\u5efa\u8fc7\u591a\u7684\u5bf9\u8bdd\u5f71\u54cd\u60a8\u5e94\u7528\u7684\u6027\u80fd\u3002","title":"\u666e\u901a\u5bf9\u8bdd\uff08Normal Conversation\uff09"},{"location":"im/im-overview/#transient-conversation","text":"\u4e13\u95e8\u7528\u6765\u5904\u7406\u300c\u804a\u5929\u5ba4\u300d\u8fd9\u79cd\u9700\u6c42\u3002\u4e0e\u666e\u901a\u5bf9\u8bdd\u4e00\u6837\uff0c\u5b83\u652f\u6301\u521b\u5efa\u3001\u81ea\u8eab\u4e3b\u52a8\u52a0\u5165\u3001\u81ea\u8eab\u4e3b\u52a8\u9000\u51fa\u5bf9\u8bdd\u7b49\u64cd\u4f5c\uff1b\u6d88\u606f\u8bb0\u5f55\u4f1a\u88ab\u4fdd\u5b58\u5e76\u53ef\u4f9b\u83b7\u53d6\uff1b\u4f46\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff1a \u4e0d\u9650\u6210\u5458\u4e0a\u9650 \uff0c\u6ca1\u6709\u56fa\u5b9a\u6210\u5458\u6982\u5ff5\uff0c\u52a0\u5165\u5373\u4e3a\u6210\u5458\uff0c\u65ad\u7ebf\u5373\u4e3a\u9000\u51fa \u4e0d\u652f\u6301\u67e5\u8be2\u6210\u5458\u5217\u8868\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u76f8\u5173 API \u67e5\u8be2\u5728\u7ebf\u4eba\u6570\u3002 \u4e0d\u652f\u6301\u79bb\u7ebf\u6d88\u606f\u3001\u79bb\u7ebf\u63a8\u9001\u901a\u77e5\u7b49\u529f\u80fd\u3002 \u6ca1\u6709\u6210\u5458\u52a0\u5165\u3001\u79bb\u5f00\u7684\u901a\u77e5\u3002 \u4e0d\u652f\u6301\u9080\u8bf7\u52a0\u5165\u3001\u8e22\u51fa\u6210\u5458\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u3002 \u4e00\u4e2a\u7528\u6237\u4e00\u6b21\u767b\u5f55\u53ea\u80fd\u52a0\u5165\u4e00\u4e2a\u6682\u6001\u5bf9\u8bdd\uff0c\u52a0\u5165\u65b0\u7684\u6682\u6001\u5bf9\u8bdd\u540e\u4f1a\u81ea\u52a8\u79bb\u5f00\u65e7\u7684\u6682\u6001\u5bf9\u8bdd\u3002 \u52a0\u5165\u6682\u6001\u5bf9\u8bdd\u540e\u534a\u5c0f\u65f6\u5185\u65ad\u7f51\u91cd\u8fde\u4f1a\u81ea\u52a8\u52a0\u5165\u539f\u6682\u6001\u5bf9\u8bdd\uff0c\u8d85\u8fc7\u8fd9\u4e2a\u65f6\u95f4\u5219\u9700\u8981\u91cd\u65b0\u52a0\u5165\u3002 \u5728 _Conversation \u8868\u4e2d\uff0c\u4ee5 tr \u4e3a true \u6765\u6807\u8bb0\uff08 m \u5217\u5728\u6682\u6001\u5bf9\u8bdd\u4e2d\u5c06\u88ab\u5ffd\u7565\uff09 \u6ce8\u610f\u6682\u6001\u5bf9\u8bdd\u6ca1\u6709\u6301\u4e45\u5316\u7684\u6210\u5458\u6982\u5ff5\uff0c\u56e0\u6b64\u5bf9\u666e\u901a\u5bf9\u8bdd\u7684 m \u5b57\u6bb5\u7684\u64cd\u4f5c\u5bf9\u6682\u6001\u5bf9\u8bdd\u65e0\u6548\u3002","title":"\u6682\u6001\u5bf9\u8bdd\uff08Transient Conversation\uff09"},{"location":"im/im-overview/#system-conversation","text":"\u8fd9\u662f\u7528\u4e8e\u5b9e\u73b0\u673a\u5668\u4eba\u3001\u516c\u4f17\u53f7\u3001\u670d\u52a1\u8d26\u53f7\u7b49\u573a\u666f\u7684\u5bf9\u8bdd\uff0c\u4e5f\u53ef\u4ee5\u7528\u4f5c\u53d1\u9001\u5e94\u7528\u5185\u901a\u77e5\u7684\u901a\u9053\u3002\u8fd9\u79cd\u5bf9\u8bdd\u5177\u6709\u4ee5\u4e0b\u7279\u70b9\uff1a \u52a0\u5165\u5373\u8ba2\u9605\uff0c\u79bb\u5f00\u5373\u9000\u8ba2\uff0c\u652f\u6301\u65e0\u9650\u7684\u8ba2\u9605\u4eba\u6570 \u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7 REST API \u4ee5\u7cfb\u7edf\u5bf9\u8bdd\u7684\u6e20\u9053\u7ed9\u6240\u6709\u7528\u6237\u3001\u8ba2\u9605\u7528\u6237\u6216\u6307\u5b9a\u7528\u6237\uff08\u4e0d\u8981\u6c42\u7528\u6237\u8ba2\u9605\uff09\u53d1\u6d88\u606f \u7528\u6237\u53ef\u4ee5\u7ed9\u7cfb\u7edf\u5bf9\u8bdd\u53d1\u6d88\u606f\uff0c\u6d88\u606f\u548c\u76f8\u5173\u4fe1\u606f\u4f1a\u5b58\u50a8\u5728\u6570\u636e\u5b58\u50a8\u4e2d\u7684 _SysMessage \u8868\uff0c\u5e76\u4e0d\u4f1a\u88ab\u5176\u4ed6\u8ba2\u9605\u7528\u6237\u6536\u5230 \u5f00\u53d1\u8005\u53ef\u4ee5\u914d\u7f6e Web Hook \u5730\u5740\u63a5\u6536\u7528\u6237\u53d1\u7ed9\u7cfb\u7edf\u5bf9\u8bdd\u7684\u6d88\u606f\uff0c\u5e76\u5229\u7528 REST API \u53d1\u6d88\u606f\u56de\u590d \u5728 SDK \u5c42\u9762\uff0c\u7cfb\u7edf\u5bf9\u8bdd\u7684\u63a5\u53e3\u4e0e\u666e\u901a\u5bf9\u8bdd\u5b8c\u5168\u4e00\u81f4 \u5728 _Conversation \u8868\u4e2d\uff0c\u4ee5 sys \u4e3a true \u6765\u6807\u8bb0\uff08 m \u5217\u5728\u7cfb\u7edf\u5bf9\u8bdd\u4e2d\u5c06\u88ab\u5ffd\u7565\uff09","title":"\u7cfb\u7edf\u5bf9\u8bdd\uff08System Conversation\uff09"},{"location":"im/im-overview/#_5","text":"\u529f\u80fd\u70b9 \u666e\u901a\u5bf9\u8bdd \u6682\u6001\u5bf9\u8bdd \u7cfb\u7edf\u5bf9\u8bdd \u4f7f\u7528\u573a\u666f \u5355\u804a\u3001\u7fa4\u804a \u804a\u5929\u5ba4\u3001\u5f39\u5e55\u3001\u7f51\u9875\u5b9e\u65f6\u8bc4\u8bba \u516c\u4f17\u53f7\u3001\u673a\u5668\u4eba\u3001\u4e0b\u53d1\u52a0\u597d\u53cb\u901a\u77e5\u3001\u81ea\u5b9a\u4e49\u6d88\u606f \u6210\u5458\u7ba1\u7406 \u6210\u5458\u6301\u4e45\u5316\u4fdd\u5b58\uff0c \u6700\u9ad8\u652f\u6301 500 \u4e2a\u6210\u5458 \u6ca1\u6709\u6301\u4e45\u5316\u7684\u6210\u5458\u6570\u636e\uff0c \u4f46\u652f\u6301\u6210\u5458\u6ca1\u6709\u4e0a\u9650 \u6ca1\u6709\u6210\u5458\u6982\u5ff5\uff0c \u5f00\u53d1\u8005\u7ef4\u62a4\u8ba2\u9605\u5173\u7cfb\uff0c \u8ba2\u9605\u4eba\u6570\u6ca1\u6709\u4e0a\u9650 \u6536\u53d1\u6d88\u606f \u53ea\u6709\u6210\u5458\u53ef\u4ee5\u6536\u53d1\u6d88\u606f \u6240\u6709\u7528\u6237\u90fd\u53ef\u4ee5\u53d1\u6d88\u606f\uff0c \u5f53\u524d\u5728\u7ebf\u7684\u6210\u5458\u53ef\u4ee5\u6536\u5230\u6d88\u606f \u5f00\u53d1\u8005\u901a\u8fc7 API \u7ed9\u7279\u5b9a\u7528\u6237\u53d1\u6d88\u606f\uff0c \u7528\u6237\u53d1\u9001\u7684\u6d88\u606f\u5230\u8fbe\u6570\u636e\u5e93\u548c Web Hook \u6d88\u606f\u8bb0\u5f55 \u652f\u6301 \u652f\u6301 \u652f\u6301","title":"\u5bf9\u8bdd\u7c7b\u578b\u6bd4\u8f83"},{"location":"im/im-overview/#_6","text":"\u5bf9\u8bdd\u53ef\u4ee5\u901a\u8fc7 SDK \u548c REST API \u521b\u5efa\u3002 \u5728\u5927\u90e8\u5206\u4f7f\u7528\u573a\u666f\u4e2d\uff0c\u666e\u901a\u5bf9\u8bdd\u901a\u8fc7 SDK \u521b\u5efa\uff0c\u7528\u4e8e\u6700\u7ec8\u7528\u6237\u4e4b\u95f4\u81ea\u53d1\u7684\u901a\u4fe1\u3002 \u6682\u6001\u5bf9\u8bdd\u548c\u7cfb\u7edf\u5bf9\u8bdd\u901a\u5e38\u548c\u5e94\u7528\u4e2d\u7684\u7279\u5b9a\u5b9e\u4f53\u7ed1\u5b9a\uff0c\u53ef\u4ee5\u901a\u8fc7 REST API \u63d0\u524d\u521b\u5efa\uff0c\u901a\u8fc7\u5e94\u7528\u4e2d\u7684\u4e1a\u52a1\u903b\u8f91 \u628a\u5bf9\u8bdd ID \u4e0b\u53d1\u7ed9\u6700\u7ec8\u7528\u6237\u3002","title":"\u521b\u5efa\u5bf9\u8bdd"},{"location":"im/im-overview/#message","text":"\u5373\u65f6\u901a\u8baf\u670d\u52a1\u7684\u6d88\u606f\u3002\u6211\u4eec\u7684\u6d88\u606f\u5141\u8bb8\u7528\u6237\u4e00\u6b21\u4f20\u8f93\u4e0d\u8d85\u8fc7 5 KB \u7684\u6587\u672c\u6570\u636e\u3002\u5728\u5e95\u5c42\u5373\u65f6\u901a\u8baf\u5141\u8bb8\u5f00\u53d1\u8005\u4f20\u8f93\u4efb\u4f55\u57fa\u4e8e\u6587\u672c\u7684\u6d88\u606f\u6570\u636e\uff0c\u7cfb\u7edf\u5bf9\u6d88\u606f\u683c\u5f0f\u6ca1\u6709\u4efb\u4f55\u8981\u6c42\uff0c \u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u6587\u672c\u534f\u8bae\u57fa\u7840\u4e0a\u5b9a\u4e49\u81ea\u5df1\u7684\u5e94\u7528\u5c42\u534f\u8bae\u3002 \u6d88\u606f\u5206\u4e3a\u300c\u666e\u901a\u6d88\u606f\u300d\u548c\u300c\u6682\u6001\u6d88\u606f\u300d\u3002LeanCloud \u4e91\u7aef\u5bf9\u4e8e\u666e\u901a\u6d88\u606f\u4f1a\u63d0\u4f9b\u63a5\u6536\u56de\u6267\u3001\u81ea\u52a8\u6301\u4e45\u5316\u5b58\u50a8\u3001\u79bb\u7ebf\u63a8\u9001\u7b49\u529f\u80fd\u3002 \u4f46\u662f\u6682\u6001\u6d88\u606f\uff0c\u5219\u4e0d\u4f1a\u88ab\u81ea\u52a8\u4fdd\u5b58\uff0c\u4e5f\u4e0d\u652f\u6301\u5ef6\u8fdf\u63a5\u6536\uff0c\u79bb\u7ebf\u7528\u6237\u66f4\u4e0d\u4f1a\u6536\u5230\u63a8\u9001\u901a\u77e5\uff0c\u6240\u4ee5\u9002\u5408\u7528\u6765\u505a\u63a7\u5236\u534f\u8bae\u3002 \u8b6c\u5982\u804a\u5929\u8fc7\u7a0b\u4e2d\u300c\u67d0\u67d0\u6b63\u5728\u8f93\u5165\u4e2d \u300d\u8fd9\u6837\u7684\u72b6\u6001\u4fe1\u606f\uff0c\u5c31\u9002\u5408\u901a\u8fc7\u6682\u6001\u6d88\u606f\u6765\u53d1\u9001\uff0c\u800c\u7528\u6237\u8f93\u5165\u7684\u6b63\u5f0f\u6d88\u606f\uff0c\u5219\u5e94\u8be5\u7528\u666e\u901a\u6d88\u606f\u6765\u53d1\u9001\u3002 LeanCloud \u5bf9\u666e\u901a\u6d88\u606f\u63d0\u4f9b\u300c\u81f3\u5c11\u4e00\u6b21\u300d\u7684\u5230\u8fbe\u4fdd\u8bc1\uff0c\u5e76\u4e14\u5728\u5b98\u65b9 SDK \u4e2d\u652f\u6301\u5bf9\u6d88\u606f\u7684\u53bb\u91cd\uff0c\u5f00\u53d1\u8005\u65e0\u9700\u5173\u5fc3\u3002\u9664\u4e86\u57fa\u4e8e\u300c\u63a8\u300d\u6a21\u578b\u7684\u6d88\u606f\u673a\u5236\uff0c\u6211\u4eec\u8fd8\u63d0\u4f9b\u6d88\u606f\u8bb0\u5f55\u7684\u673a\u5236\u5141\u8bb8 SDK \u548c REST API \u901a\u8fc7\u300c\u62c9\u300d\u7684\u65b9\u5f0f\u83b7\u53d6\u4efb\u610f\u65f6\u95f4\u70b9\u524d\u7684\u6d88\u606f\u3002 \u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7 SDK \u6216 REST API \u53d1\u9001\u6d88\u606f\u3002 SDK \u901a\u5e38\u7528\u4e8e\u6700\u7ec8\u7528\u6237\u53d1\u9001\u6d88\u606f\uff0c\u800c REST API \u662f\u5f00\u53d1\u8005\u4ece\u4e91\u7aef\u53d1\u9001\u6d88\u606f\u7684\u63a5\u53e3\u3002\u5f53\u4ece REST API \u53d1\u9001\u6d88\u606f\u65f6\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u6307\u5b9a\u6d88\u606f\u7684\u53d1\u9001\u8005\u3001\u5bf9\u8bdd ID\uff0c\u5bf9\u4e8e\u7cfb\u7edf\u5bf9\u8bdd\u8fd8\u53ef\u4ee5\u6307\u5b9a\u6d88\u606f\u7684\u63a5\u6536\u8005\u3002 \u4e00\u4e2a\u5bf9\u8bdd\u7684\u6d88\u606f\u8bb0\u5f55\u4f1a\u5728\u4e91\u7aef\u4fdd\u7559 6 \u4e2a\u6708 \uff0c\u4e5f\u5c31\u662f\u8bf4\u4e00\u4e2a\u5bf9\u8bdd\u53ef\u4ee5\u67e5\u8be2\u5230\u534a\u5e74\u4e4b\u5185\u7684\u5386\u53f2\u6d88\u606f\u8bb0\u5f55\u3002\u5f00\u53d1\u8005\u53ef\u4ee5\u4ed8\u8d39\u6765\u5ef6\u957f\u8fd9\u4e00\u671f\u9650\uff0c\u8bf7\u8054\u7cfb \u3002\u4f60\u4e5f\u968f\u65f6\u53ef\u4ee5\u901a\u8fc7 REST API \u5c06\u804a\u5929\u8bb0\u5f55\u540c\u6b65\u5230\u81ea\u5df1\u7684\u670d\u52a1\u5668\u4e0a\u3002","title":"\u6d88\u606f\uff08Message\uff09"},{"location":"im/im-overview/#_7","text":"\u4e3a\u4e86\u65b9\u4fbf\u5f00\u53d1\u8005\u7684\u4f7f\u7528\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u51e0\u79cd\u5c01\u88c5\u597d\u7684\u57fa\u4e8e JSON \u683c\u5f0f\u7684\u5bcc\u5a92\u4f53\u6d88\u606f\u7c7b\u578b\uff08TypedMessage\uff09\uff0c\u8b6c\u5982\uff1a \u6587\u672c\uff08TextMessage\uff09 \u56fe\u7247\uff08ImageMessage\uff09 \u97f3\u9891\uff08AudioMessage\uff09 \u89c6\u9891\uff08VideoMessage\uff09 \u4f4d\u7f6e\uff08LocationMessage\uff09 \u8fd9\u4e9b\u6d88\u606f\u7c7b\u578b\u53ef\u6700\u5927\u7a0b\u5ea6\u5730\u7b80\u5316\u4f7f\u7528\u6b65\u9aa4\uff0c\u80fd\u66f4\u597d\u5730\u6ee1\u8db3\u901a\u7528\u9700\u6c42\u3002\u5f00\u53d1\u8005\u4e5f\u53ef\u4ee5\u57fa\u4e8e\u6211\u4eec\u7684\u6846\u67b6\uff0c\u65b9\u4fbf\u5730\u6269\u5c55\u51fa\u81ea\u5df1\u7684\u6d88\u606f\u7c7b\u578b\u3002 \u8fd9\u4e9b\u6d88\u606f\u7c7b\u578b\u7684\u5c42\u6b21\u5173\u7cfb\u4e3a\uff1a Message | TypedMessage | __________________________________|__________________________________ | | | | | | TextMessage ImageMessage AudioMessage VideoMessage LocationMessage \u3002\u3002\u3002 \u5173\u4e8e\u8fd9\u90e8\u5206\u6d88\u606f\u7684\u683c\u5f0f\u8bf7\u53c2\u8003 \u300a\u5373\u65f6\u901a\u8baf REST API - \u5bcc\u5a92\u4f53\u6d88\u606f\u683c\u5f0f\u8bf4\u660e\u300b \u4e86\u89e3\u3002","title":"\u5bcc\u5a92\u4f53\u6d88\u606f"},{"location":"im/im-overview/#_8","text":"\u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7 \u63a7\u5236\u53f0 \u6d88\u606f \u5b9e\u65f6\u6d88\u606f \u5e2e\u52a9 \u754c\u9762\u67e5\u8be2\u67d0\u4e2a Client ID \u7684\u5728\u7ebf\u72b6\u6001\u548c\u79bb\u7ebf\u6d88\u606f\u6570\u3002 \u5f53\u7528\u6237\u91cd\u65b0\u767b\u5f55\u540e\uff0cLeanCloud \u63d0\u4f9b\u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\u4e0b\u53d1\u79bb\u7ebf\u6d88\u606f\uff1a \u9ed8\u8ba4\u65b9\u5f0f \uff1a\u4e91\u7aef\u4f1a\u5bf9\u6bcf\u4e2a\u5bf9\u8bdd\u63a8\u9001\u81f3\u591a\u6700\u8fd1 20 \u6761\u6d88\u606f\u3002\u8fd9\u90e8\u5206\u6d88\u606f\u5728\u7528\u6237\u4e0a\u7ebf\u540e\u4f1a\u4ee5\u65b0\u6d88\u606f\u7684\u5f62\u5f0f\u5230\u8fbe\u5ba2\u6237\u7aef\uff0c\u5bf9\u4e8e\u8f7b\u91cf\u7ea7\u7684\u5e94\u7528\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u6ee1\u8db3\u5f00\u53d1\u8005\u5bf9\u79bb\u7ebf\u6d88\u606f\u7684\u9700\u6c42\uff1b \u672a\u8bfb\u6570\u91cf\u65b9\u5f0f \uff1a\u4e91\u7aef\u4f1a\u8fd4\u56de\u79bb\u7ebf\u671f\u95f4\u4ea7\u751f\u672a\u8bfb\u6d88\u606f\u7684\u5bf9\u8bdd\u5217\u8868\u53ca\u672a\u8bfb\u6d88\u606f\u6570\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a\u901a\u77e5\u62c9\u53d6\u79bb\u7ebf\u6d88\u606f\u8bb0\u5f55\u6536\u53d6\u79bb\u7ebf\u6d88\u606f\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4e0b\u5f00\u53d1\u8005\u5bf9\u6d88\u606f\u7684\u6570\u91cf\u53ef\u4ee5\u5b8c\u5168\u7684\u63a7\u5236\uff1b \u6ce8\u610f\uff0c\u8bf7\u4e0d\u8981\u6df7\u5408\u4f7f\u7528\u4e0a\u9762\u4e24\u79cd\u65b9\u5f0f\uff0c\u6bd4\u5982\u5728 iOS \u5e73\u53f0\u4f7f\u7528\u9ed8\u8ba4\u65b9\u5f0f\u83b7\u53d6\u79bb\u7ebf\u6d88\u606f\u800c Android \u5e73\u53f0\u4f7f\u7528\u672a\u8bfb\u6570\u91cf\u65b9\u5f0f\u83b7\u53d6\u79bb\u7ebf\u6d88\u606f\u3002\u8fd9\u79cd\u60c5\u51b5\u53ef\u80fd\u5bfc\u81f4\u79bb\u7ebf\u6d88\u606f\u65e0\u6cd5\u6b63\u5e38\u83b7\u53d6\u3002","title":"\u79bb\u7ebf\u6d88\u606f"},{"location":"im/im-overview/#_9","text":"\u5bf9\u79bb\u7ebf\u7684 iOS \u548c Windows Phone \u7528\u6237\uff0c\u6bcf\u6b21\u6709\u79bb\u7ebf\u6d88\u606f\u65f6\uff0c\u6211\u4eec\u63d0\u4f9b\u53d1\u9001\u79bb\u7ebf\u63a8\u9001\u901a\u77e5\u7684\u529f\u80fd\u3002\u8981\u60f3\u4f7f\u7528\u672c\u529f\u80fd\uff0c\u7528\u6237\u9700\u8981 \u81ea\u5b9a\u4e49\u63a8\u9001\u7684\u5185\u5bb9 \uff0c\u76ee\u524d\u6709\u4e09\u79cd\u65b9\u5f0f\uff0c\u6309\u4f18\u5148\u7ea7\u4ece\u9ad8\u5230\u4f4e\u4f9d\u6b21\u4e3a\uff1a \u52a8\u6001\u5185\u5bb9\u65b9\u5f0f \u5982\u679c\u5e0c\u671b\u63a8\u9001\u901a\u77e5\u663e\u793a\u52a8\u6001\u5185\u5bb9\uff0c\u6bd4\u5982\u6d88\u606f\u7684\u5b9e\u9645\u5185\u5bb9\uff0c\u6216\u6839\u636e\u6d88\u606f\u5185\u5bb9\u3001\u5bf9\u8bdd\u4fe1\u606f\u7b49\u4e0a\u4e0b\u6587\u4fe1\u606f\u6765\u81ea\u5b9a\u4e49\u5185\u5bb9\uff0c\u5219\u9700\u8981\u901a\u8fc7 \u4e91\u5f15\u64ce Hook _receiversOffline \u6765\u5b9e\u73b0\u3002\u8be5\u7c7b\u578b\u4f18\u5148\u7ea7\u6700\u9ad8\u3002 \u6d88\u606f\u9644\u4ef6\u65b9\u5f0f \u5bf9\u4e8e SDK\uff0c\u901a\u8fc7\u5404\u4e2a SDK \u63d0\u4f9b\u7684 API \u8bbe\u7f6e\u8fd9\u6761\u6d88\u606f\u53ef\u80fd\u4ea7\u751f\u7684\u63a8\u9001\u5185\u5bb9\uff0c\u6bd4\u5982 JS \u7684\u662f pushData \u53c2\u6570 \u5bf9\u4e8e REST\uff0c\u901a\u8fc7 push_data \u53c2\u6570 \u8bbe\u5b9a \u9759\u6001\u5185\u5bb9\u65b9\u5f0f \u7531\u4e8e\u4e0d\u540c\u5e73\u53f0\u7684\u4e0d\u540c\u9650\u5236\uff0c\u4e14\u7528\u6237\u7684\u6d88\u606f\u6b63\u6587\u53ef\u80fd\u8fd8\u5305\u542b\u4e0a\u5c42\u534f\u8bae\uff0c\u6240\u4ee5\u6211\u4eec\u5141\u8bb8\u7528\u6237\u5728\u63a7\u5236\u53f0\u4e2d\u4e3a\u5e94\u7528\u8bbe\u7f6e\u4e00\u4e2a\u9759\u6001\u7684 APNs JSON\uff0c\u63a8\u9001\u4e00\u6761\u5185\u5bb9\u56fa\u5b9a\u7684\u901a\u77e5\u3002 \u8fdb\u5165 \u63a7\u5236\u53f0 \u6d88\u606f \u5b9e\u65f6\u6d88\u606f \u8bbe\u7f6e iOS \u7528\u6237\u79bb\u7ebf\u63a8\u9001\u8bbe\u7f6e \uff0c\u586b\u5165\uff1a { alert : \u60a8\u6709\u65b0\u7684\u6d88\u606f , badge : Increment } \u6ce8\u610f\uff0c Increment \u5927\u5c0f\u5199\u654f\u611f\uff0c\u8868\u793a\u81ea\u52a8\u589e\u52a0\u5e94\u7528 badge \u4e0a\u7684\u6570\u5b57\u8ba1\u6570\u3002\u6e05\u9664 badge \u7684\u64cd\u4f5c\u8bf7\u53c2\u8003 iOS \u63a8\u9001\u6307\u5357 \u6e05\u9664 badge \u3002 \u6b64\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u8bbe\u7f6e\u58f0\u97f3\u7b49\u63a8\u9001\u5c5e\u6027\uff0c\u5177\u4f53\u7684\u5b57\u6bb5\u53ef\u4ee5\u53c2\u8003 \u63a8\u9001 \u6d88\u606f\u5185\u5bb9 Data \u3002","title":"\u79bb\u7ebf\u63a8\u9001\u901a\u77e5"},{"location":"im/im-overview/#_10","text":"\u901a\u77e5\u7684\u8fc7\u671f\u65f6\u95f4\u662f 7 \u5929\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u4e00\u4e2a\u8bbe\u5907 7 \u5929\u5185\u6ca1\u6709\u8fde\u63a5\u5230 APNs \u6216 MPNs\uff0c\u7cfb\u7edf\u5c06\u4e0d\u4f1a\u518d\u7ed9\u8fd9\u4e2a\u8bbe\u5907\u63a8\u9001\u901a\u77e5\u3002","title":"\u9650\u5236"},{"location":"im/im-overview/#_11","text":"\u8fd9\u90e8\u5206\u5e73\u53f0\u7684\u7528\u6237\uff0c\u5728\u5b8c\u6210\u767b\u5f55\u65f6\uff0cSDK \u4f1a\u81ea\u52a8\u5173\u8054\u5f53\u524d\u7684 Client ID \u548c\u8bbe\u5907\u3002\u5173\u8054\u7684\u65b9\u5f0f\u662f\u901a\u8fc7\u8bbe\u5907 \u8ba2\u9605 \u540d\u4e3a Client ID \u7684 Channel \u5b9e\u73b0\u7684\u3002\u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u6570\u636e\u5b58\u50a8\u7684 _Installation \u8868\u4e2d\u7684 channels \u5b57\u6bb5\u67e5\u5230\u8fd9\u7ec4\u5173\u8054\u5173\u7cfb\u3002\u5728\u5b9e\u9645\u79bb\u7ebf\u63a8\u9001\u65f6\uff0c\u7cfb\u7edf\u6839\u636e\u7528\u6237 Client ID \u627e\u5230\u5bf9\u5e94\u7684\u5173\u8054\u8bbe\u5907\u8fdb\u884c\u63a8\u9001\u3002\u7531\u4e8e\u5373\u65f6\u901a\u8baf\u89e6\u53d1\u7684\u63a8\u9001\u91cf\u6bd4\u8f83\u5927\uff0c\u5185\u5bb9\u5355\u4e00\uff0c \u6240\u4ee5\u4e91\u7aef\u4e0d\u4f1a\u4fdd\u7559\u8fd9\u90e8\u5206\u8bb0\u5f55\uff0c\u5728 \u63a7\u5236\u53f0 \u6d88\u606f \u63a8\u9001\u8bb0\u5f55 \u4e2d\u4e5f\u65e0\u6cd5\u627e\u5230\u8fd9\u4e9b\u8bb0\u5f55\u3002","title":"\u539f\u7406"},{"location":"im/im-overview/#_12","text":"\u63a8\u9001\u9ed8\u8ba4\u4f7f\u7528 \u751f\u4ea7\u8bc1\u4e66 \uff0c\u4f60\u4e5f\u53ef\u4ee5\u5728 JSON \u4e2d\u589e\u52a0\u4e00\u4e2a _profile \u5185\u90e8\u5c5e\u6027\u6765\u9009\u62e9\u5b9e\u9645\u63a8\u9001\u7684\u8bc1\u4e66\uff0c\u5982\uff1a { alert : \u60a8\u6709\u4e00\u6761\u672a\u8bfb\u6d88\u606f , _profile : dev } Apple \u4e0d\u652f\u6301\u5728\u4e00\u6b21\u63a8\u9001\u4e2d\u5411\u591a\u4e2a\u4ece\u5c5e\u4e8e\u4e0d\u540c Team Id \u7684\u8bbe\u5907\u53d1\u63a8\u9001\u3002\u5728\u4f7f\u7528 iOS Token Authentication \u7684\u9274\u6743\u65b9\u5f0f\u540e\uff0c\u5982\u679c\u5e94\u7528\u914d\u7f6e\u4e86\u591a\u4e2a\u4e0d\u540c Team Id \u7684 Private Key\uff0c\u8bf7\u786e\u8ba4\u76ee\u6807\u7528\u6237\u8bbe\u5907\u4f7f\u7528\u7684 APNs Team ID \u5e76\u5c06\u5176\u586b\u5199\u5728 _apns_team_id \u53c2\u6570\u5185\uff0c\u4ee5\u4fdd\u8bc1\u63a8\u9001\u6b63\u5e38\u8fdb\u884c\uff0c\u53ea\u6709\u6307\u5b9a Team ID \u7684\u8bbe\u5907\u80fd\u6536\u5230\u63a8\u9001\u3002\u5982\uff1a { alert : \u60a8\u6709\u4e00\u6761\u672a\u8bfb\u6d88\u606f , _apns_team_id : my_fancy_team_id } _profile \u548c _apns_team_id \u5c5e\u6027\u5747\u4e0d\u4f1a\u5b9e\u9645\u63a8\u9001\u3002 \u76ee\u524d\uff0c\u8bbe\u7f6e\u754c\u9762\u7684\u63a8\u9001\u5185\u5bb9\u652f\u6301\u90e8\u5206\u5185\u7f6e\u53d8\u91cf\uff0c\u4f60\u53ef\u4ee5\u5c06\u4e0a\u4e0b\u6587\u4fe1\u606f\u76f4\u63a5\u8bbe\u7f6e\u5230\u63a8\u9001\u5185\u5bb9\u4e2d\uff1a ${ convId } \u63a8\u9001\u76f8\u5173\u7684\u5bf9\u8bdd ID ${ timestamp } \u89e6\u53d1\u63a8\u9001\u7684\u65f6\u95f4\u6233\uff08Unix \u65f6\u95f4\u6233\uff09 ${ fromClientId } \u6d88\u606f\u53d1\u9001\u8005\u7684 Client ID","title":"\u5176\u4ed6\u8bbe\u7f6e"},{"location":"im/im-overview/#_13","text":"\u6839\u636e\u653f\u7b56\u7684\u8981\u6c42\uff0c\u6211\u4eec\u4e3a\u591a\u4eba\u7684\u666e\u901a\u5bf9\u8bdd\u3001\u6682\u6001\u5bf9\u8bdd\u548c\u7cfb\u7edf\u5bf9\u8bdd\u8fdb\u884c\u654f\u611f\u8bcd\u8fc7\u6ee4\u3002 \u8fc7\u6ee4\u7684\u8bcd\u5e93\u7531 LeanCloud \u63d0\u4f9b\uff0c\u547d\u4e2d\u7684\u654f\u611f\u8bcd\u5c06\u4f1a\u88ab\u66ff\u6362\u4e3a *** \u3002 \u652f\u6301\u7528\u6237\u81ea\u5b9a\u4e49\u654f\u611f\u8bcd\u8fc7\u6ee4\u6587\u4ef6\u3002\u5728 \u63a7\u5236\u53f0 \u6d88\u606f \u5b9e\u65f6\u6d88\u606f \u8bbe\u7f6e \u4e2d\u5f00\u542f\u300c\u6d88\u606f\u654f\u611f\u8bcd\u5b9e\u65f6\u8fc7\u6ee4\u529f\u80fd\u300d\uff0c\u4e0a\u4f20\u654f\u611f\u8bcd\u6587\u4ef6\u5373\u53ef\u3002 \u5982\u679c\u5f00\u53d1\u8005\u6709\u8f83\u4e3a\u590d\u6742\u7684\u8fc7\u6ee4\u9700\u6c42\uff0c\u6211\u4eec\u63a8\u8350\u4f7f\u7528 \u4e91\u5f15\u64ce hook _messageReceived \u6765\u5b9e\u73b0\u8fc7\u6ee4\uff0c\u5728 hook \u4e2d\u5f00\u53d1\u8005\u5bf9\u6d88\u606f\u7684\u5185\u5bb9\u6709\u5b8c\u5168\u7684\u63a7\u5236\u529b\u3002","title":"\u654f\u611f\u8bcd\u8fc7\u6ee4"},{"location":"im/im-overview/#_14","text":"\u5f53\u5f00\u53d1\u8005\u9700\u8981\u5411\u6240\u6709\u7528\u6237\u53d1\u9001\u5e7f\u64ad\u6d88\u606f\u65f6\uff0c\u53ef\u4ee5\u5229\u7528\u5e7f\u64ad\u6d88\u606f\u7684\u63a5\u53e3\uff0c\u800c\u65e0\u9700\u904d\u5386\u6240\u6709\u7684\u7528\u6237 ID \u9010\u4e2a\u53d1\u9001\u3002 \u5e7f\u64ad\u6d88\u606f\u5177\u6709\u4ee5\u4e0b\u7279\u5f81\uff1a \u5e7f\u64ad\u6d88\u606f\u5fc5\u987b\u4e0e\u7cfb\u7edf\u5bf9\u8bdd\u5173\u8054\uff0c\u5e7f\u64ad\u6d88\u606f\u548c\u4e00\u822c\u7684\u7cfb\u7edf\u5bf9\u8bdd\u6d88\u606f\u4f1a\u6df7\u5408\u5728\u7cfb\u7edf\u5bf9\u8bdd\u7684\u8bb0\u5f55\u4e2d \u7528\u6237\u79bb\u7ebf\u65f6\u53d1\u9001\u7684\u5e7f\u64ad\u6d88\u606f\uff0c\u4e0a\u7ebf\u540e\u4f1a\u4f5c\u4e3a\u79bb\u7ebf\u6d88\u606f\u6536\u5230 \u5e7f\u64ad\u6d88\u606f\u5177\u6709\u5b9e\u6548\u6027\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\uff1b\u8fc7\u671f\u7684\u6d88\u606f\u4e0d\u4f1a\u4f5c\u4e3a\u79bb\u7ebf\u6d88\u606f\u53d1\u9001\u7ed9\u7528\u6237\uff0c\u4e0d\u8fc7\u4ecd\u7136\u53ef\u4ee5\u5728\u5386\u53f2\u6d88\u606f\u4e2d\u83b7\u53d6\u5230 \u65b0\u7528\u6237\u7b2c\u4e00\u6b21\u767b\u5f55\u540e\uff0c\u4f1a\u6536\u5230\u6700\u8fd1\u4e00\u6761\u672a\u8fc7\u671f\u7684\u7cfb\u7edf\u5e7f\u64ad\u6d88\u606f \u9664\u6b64\u4ee5\u5916\u5e7f\u64ad\u6d88\u606f\u4e0e\u666e\u901a\u6d88\u606f\u7684\u5904\u7406\u5b8c\u5168\u4e00\u81f4\u3002\u5e7f\u64ad\u6d88\u606f\u7684\u53d1\u9001\u53ef\u4ee5\u53c2\u8003 \u5e7f\u64ad\u6d88\u606f REST API","title":"\u5e7f\u64ad\u6d88\u606f"},{"location":"im/im-overview/#_15","text":"\u4f7f\u7528\u7b7e\u540d\u53ef\u4ee5\u4fdd\u8bc1\u804a\u5929\u901a\u9053\u7684\u5b89\u5168\uff0c\u8fd9\u4e00\u529f\u80fd\u9ed8\u8ba4\u662f\u5173\u95ed\u7684\uff0c\u53ef\u4ee5\u5728 \u63a7\u5236\u53f0 \u6d88\u606f \u5b9e\u65f6\u6d88\u606f \u8bbe\u7f6e \u5b9e\u65f6\u6d88\u606f\u9009\u9879 \u4e2d\u8fdb\u884c\u5f00\u542f\uff1a \u767b\u5f55\u542f\u7528\u7b7e\u540d\u8ba4\u8bc1 \uff0c\u7528\u4e8e\u63a7\u5236\u6240\u6709\u7684\u7528\u6237\u767b\u5f55 \u5bf9\u8bdd\u64cd\u4f5c\u542f\u7528\u7b7e\u540d\u8ba4\u8bc1 \uff0c\u7528\u4e8e\u63a7\u5236\u65b0\u5efa\u6216\u52a0\u5165\u5bf9\u8bdd\u3001\u9080\u8bf7/\u8e22\u51fa\u5bf9\u8bdd\u6210\u5458\u7b49\u64cd\u4f5c \u804a\u5929\u8bb0\u5f55\u67e5\u8be2\u542f\u7528\u7b7e\u540d\u8ba4\u8bc1 \uff0c\u7528\u4e8e\u63a7\u5236\u804a\u5929\u8bb0\u5f55\u67e5\u8be2\u64cd\u4f5c \u5f00\u53d1\u8005\u53ef\u6839\u636e\u5b9e\u9645\u9700\u8981\u8fdb\u884c\u9009\u62e9\u3002\u4e00\u822c\u6765\u8bf4\uff0c \u767b\u5f55\u8ba4\u8bc1 \u80fd\u591f\u6ee1\u8db3\u5927\u90e8\u5206\u5b89\u5168\u9700\u6c42\uff0c\u800c\u4e14\u6211\u4eec\u4e5f\u5f3a\u70c8\u5efa\u8bae\u5f00\u53d1\u8005\u5f00\u542f\u767b\u5f55\u8ba4\u8bc1\u3002 \u5bf9\u4e8e\u4f7f\u7528 AVUser \u7684\u5e94\u7528\uff0c\u53ef\u4f7f\u7528 REST API \u83b7\u53d6 Client \u767b\u5f55\u7b7e\u540d \u8fdb\u884c\u767b\u5f55\u8ba4\u8bc1\u3002 \u5ba2\u6237\u7aef\u8fdb\u884c\u767b\u5f55\u6216\u65b0\u5efa\u5bf9\u8bdd\u7b49\u64cd\u4f5c\uff0cSDK \u4f1a\u8c03\u7528 SignatureFactory \u7684\u5b9e\u73b0\uff0c\u5e76\u643a\u5e26\u7528\u6237\u4fe1\u606f\u548c\u7528\u6237\u884c\u4e3a\uff08\u767b\u5f55\u3001\u65b0\u5efa\u5bf9\u8bdd\u6216\u7fa4\u7ec4\u64cd\u4f5c\uff09\u8bf7\u6c42\u7b7e\u540d\uff1b \u5e94\u7528\u81ea\u6709\u7684\u6743\u9650\u7cfb\u7edf\uff0c\u6216\u5e94\u7528\u5728 LeanCloud \u4e91\u5f15\u64ce\u4e0a\u7684\u7b7e\u540d\u7a0b\u5e8f\u6536\u5230\u8bf7\u6c42\uff0c\u8fdb\u884c\u6743\u9650\u9a8c\u8bc1\uff0c\u5982\u679c\u901a\u8fc7\u5219\u5229\u7528\u4e0b\u6587\u6240\u8ff0\u7684 \u7b7e\u540d\u7b97\u6cd5 \u751f\u6210\u65f6\u95f4\u6233\u3001\u968f\u673a\u5b57\u7b26\u4e32\u548c\u7b7e\u540d\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff1b \u5ba2\u6237\u7aef\u83b7\u5f97\u7b7e\u540d\u540e\uff0c\u7f16\u7801\u5230\u8bf7\u6c42\u4e2d\uff0c\u53d1\u7ed9 LeanCloud \u5373\u65f6\u901a\u8baf\u670d\u52a1\u5668\uff1b \u5373\u65f6\u901a\u8baf\u670d\u52a1\u5668\u5bf9\u8bf7\u6c42\u7684\u5185\u5bb9\u548c\u7b7e\u540d\u505a\u4e00\u904d\u9a8c\u8bc1\uff0c\u786e\u8ba4\u8fd9\u4e2a\u64cd\u4f5c\u662f\u88ab\u5e94\u7528\u670d\u52a1\u5668\u5141\u8bb8\u7684\uff0c\u8fdb\u800c\u6267\u884c\u540e\u7eed\u7684\u5b9e\u9645\u64cd\u4f5c\u3002 \u7b7e\u540d\u91c7\u7528 Hmac-sha1 \u7b97\u6cd5\uff0c\u8f93\u51fa\u5b57\u8282\u6d41\u7684\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\uff08hex dump\uff09\u3002\u9488\u5bf9\u4e0d\u540c\u7684\u8bf7\u6c42\uff0c\u5f00\u53d1\u8005\u9700\u8981\u62fc\u88c5\u4e0d\u540c\u7ec4\u5408\u7684\u5b57\u7b26\u4e32\uff0c\u52a0\u4e0a UTC timestamp \u4ee5\u53ca\u968f\u673a\u5b57\u7b26\u4e32\u4f5c\u4e3a\u7b7e\u540d\u7684\u6d88\u606f\u3002","title":"\u6743\u9650\u548c\u8ba4\u8bc1"},{"location":"im/im-overview/#_16","text":"\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a\u8fd0\u884c\u5728 LeanCloud \u4e91\u5f15\u64ce \u4e0a\u7684 \u7b7e\u540d\u8303\u4f8b\u7a0b\u5e8f \uff0c\u5b83\u63d0\u4f9b\u4e86\u57fa\u4e8e Web Hosting \u548c\u4e91\u51fd\u6570\u4e24\u79cd\u65b9\u5f0f\u7684\u7b7e\u540d\u5b9e\u73b0\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u9009\u62e9\u81ea\u5df1\u7684\u5b9e\u73b0\u3002","title":"\u4e91\u5f15\u64ce\u7b7e\u540d\u8303\u4f8b"},{"location":"im/im-overview/#_17","text":"\u7b7e\u540d\u7684\u6d88\u606f\u683c\u5f0f\u5982\u4e0b\uff0c\u6ce8\u610f clientid \u4e0e timestamp \u4e4b\u95f4\u662f \u4e24\u4e2a\u5192\u53f7 \uff1a appid : clientid :: timestamp : nonce \u53c2\u6570 \u8bf4\u660e appid \u5e94\u7528\u7684 id clientid \u767b\u5f55\u65f6\u4f7f\u7528\u7684 clientId timestamp \u5f53\u524d\u7684 UTC \u65f6\u95f4\u8ddd\u79bb unix epoch \u7684 \u6beb\u79d2\u6570 nonce \u968f\u673a\u5b57\u7b26\u4e32 \u6ce8\u610f\uff1a\u7b7e\u540d\u7684 key \u5fc5\u987b \u662f\u5e94\u7528\u7684 master key\uff0c\u4f60\u53ef\u4ee5 \u63a7\u5236\u53f0 \u8bbe\u7f6e \u5e94\u7528 Key \u91cc\u627e\u5230\u3002 \u8bf7\u4fdd\u62a4\u597d master key\uff0c\u4e0d\u8981\u6cc4\u9732\u7ed9\u4efb\u4f55\u65e0\u5173\u4eba\u5458\u3002 \u5f00\u53d1\u8005\u53ef\u4ee5\u5b9e\u73b0\u81ea\u5df1\u7684 SignatureFactory\uff0c\u8c03\u7528\u8fdc\u7a0b\u670d\u52a1\u5668\u7684\u7b7e\u540d\u63a5\u53e3\u83b7\u5f97\u7b7e\u540d\u3002\u5982\u679c\u4f60\u6ca1\u6709\u81ea\u5df1\u7684\u670d\u52a1\u5668\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728 LeanCloud \u4e91\u5f15\u64ce\u4e0a\u901a\u8fc7 \u7f51\u7ad9\u6258\u7ba1 \u6765\u5b9e\u73b0\u81ea\u5df1\u7684\u7b7e\u540d\u63a5\u53e3\u3002\u5728\u79fb\u52a8\u5e94\u7528\u4e2d\u76f4\u63a5\u505a\u7b7e\u540d\u7684\u4f5c\u6cd5 \u975e\u5e38\u5371\u9669 \uff0c\u5b83\u53ef\u80fd\u5bfc\u81f4\u4f60\u7684 master key \u6cc4\u6f0f\u3002","title":"\u7528\u6237\u767b\u5f55\u7684\u7b7e\u540d"},{"location":"im/im-overview/#_18","text":"\u65b0\u5efa\u4e00\u4e2a\u5bf9\u8bdd\u7684\u65f6\u5019\uff0c\u7b7e\u540d\u7684\u6d88\u606f\u683c\u5f0f\u4e3a\uff1a appid : clientid : sorted_member_ids : timestamp : nonce appid\u3001clientid\u3001timestamp \u548c nonce \u7684\u542b\u4e49 \u540c\u4e0a \u3002 sorted_member_ids \u662f\u4ee5\u534a\u89d2\u5192\u53f7\uff08:\uff09\u5206\u9694\u3001 \u5347\u5e8f\u6392\u5e8f \u7684 user id\uff0c\u5373\u9080\u8bf7\u53c2\u4e0e\u8be5\u5bf9\u8bdd\u7684\u6210\u5458\u5217\u8868\u3002","title":"\u5f00\u542f\u5bf9\u8bdd\u7b7e\u540d"},{"location":"im/im-overview/#_19","text":"\u5728\u7fa4\u7ec4\u529f\u80fd\u4e2d\uff0c\u6211\u4eec\u5bf9 \u52a0\u7fa4 \u3001 \u9080\u8bf7 \u548c \u8e22\u51fa\u7fa4 \u8fd9\u4e09\u4e2a\u52a8\u4f5c\u4e5f\u5141\u8bb8\u52a0\u5165\u7b7e\u540d\uff0c\u7b7e\u540d\u683c\u5f0f\u662f\uff1a appid : clientid : convid : sorted_member_ids : timestamp : nonce : action appid\u3001clientid\u3001sorted_member_ids\u3001timestamp \u548c nonce \u7684\u542b\u4e49\u540c\u4e0a\u3002\u5bf9\u521b\u5efa\u7fa4\u7684\u60c5\u51b5\uff0c\u8fd9\u91cc sorted_member_ids \u662f\u7a7a\u5b57\u7b26\u4e32\u3002 convid - \u6b64\u6b21\u884c\u4e3a\u5173\u8054\u7684\u5bf9\u8bdd id\u3002 action - \u6b64\u6b21\u884c\u4e3a\u7684\u52a8\u4f5c\uff0c invite \u8868\u793a\u52a0\u7fa4\u548c\u9080\u8bf7\uff0c kick \u8868\u793a\u8e22\u51fa\u7fa4\u3002","title":"\u7fa4\u7ec4\u529f\u80fd\u7684\u7b7e\u540d"},{"location":"im/im-overview/#_20","text":"appid : client_id : convid : nonce : signature_ts * client_id \u67e5\u770b\u8005 id\uff08\u7b7e\u540d\u53c2\u6570\uff09 * nonce \u7b7e\u540d\u968f\u673a\u5b57\u7b26\u4e32\uff08\u7b7e\u540d\u53c2\u6570\uff09 * signature_ts \u7b7e\u540d\u65f6\u95f4\u6233\uff08\u7b7e\u540d\u53c2\u6570\uff09\uff0c\u5355\u4f4d\u662f\u79d2 * signature \u7b7e\u540d\uff08\u7b7e\u540d\u53c2\u6570\uff09","title":"\u67e5\u8be2\u804a\u5929\u8bb0\u5f55\u7684\u7b7e\u540d"},{"location":"im/im-overview/#_21","text":"\u7531\u4e8e\u9ed1\u540d\u5355\u6709\u4e24\u79cd\u60c5\u51b5\uff0c\u6240\u4ee5\u7b7e\u540d\u683c\u5f0f\u4e5f\u6709\u4e24\u79cd\uff1a client \u5bf9 conversation appid : clientid : convid :: timestamp : nonce : action action - \u6b64\u6b21\u884c\u4e3a\u7684\u52a8\u4f5c\uff0cclient-block-conversations \u8868\u793a\u6dfb\u52a0\u9ed1\u540d\u5355\uff0cclient-unblock-conversations \u8868\u793a\u53d6\u6d88\u9ed1\u540d\u5355 conversation \u5bf9 client appid : clientid : convid : sorted_member_ids : timestamp : nonce : action action - \u6b64\u6b21\u884c\u4e3a\u7684\u52a8\u4f5c\uff0cconversation-block-clients \u8868\u793a\u6dfb\u52a0\u9ed1\u540d\u5355\uff0cconversation-unblock-clients \u8868\u793a\u53d6\u6d88\u9ed1\u540d\u5355 sorted_member_ids \u540c\u4e0a","title":"\u9ed1\u540d\u5355\u7684\u7b7e\u540d"},{"location":"im/im-overview/#_22","text":"\u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u63a7\u5236\u53f0\u4e2d\u65b9\u4fbf\u5730\u6d4b\u8bd5\u7b7e\u540d\u3002\u8fdb\u5165 \u6d88\u606f \u5b9e\u65f6\u6d88\u606f \u7528\u6237 \uff0c\u8f93\u5165\u4e00\u4e2a clientId \u8fdb\u884c\u67e5\u627e\uff0c\u627e\u5230\u540e\u754c\u9762\u4f1a\u663e\u793a \u6d4b\u8bd5\u7b7e\u540d \u6309\u952e\u53ca\u66f4\u591a\u5185\u5bb9\u3002","title":"\u6d4b\u8bd5\u7b7e\u540d"},{"location":"im/im-overview/#hook","text":"\u5bf9\u4e8e\u666e\u901a\u6d88\u606f\uff0c\u5982\u679c\u53d1\u9001\u65f6\u90e8\u5206\u6210\u5458\u4e0d\u5728\u7ebf\uff0cLeanCloud \u63d0\u4f9b\u4e86\u9009\u9879\uff0c\u652f\u6301\u5c06\u79bb\u7ebf\u6d88\u606f\u4ee5\u63a8\u9001\u5f62\u5f0f\u53d1\u9001\u5230\u5ba2\u6237\u7aef\u3002\u5982\u679c\u5f00\u53d1\u8005\u5e0c\u671b\u4fee\u6539\u63a8\u9001\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u4f7f\u7528\u300c\u4e91\u5f15\u64ce Hook\u300d\u3002 \u4e91\u5f15\u64ce Hook \u5141\u8bb8\u4f60\u901a\u8fc7\u81ea\u5b9a\u4e49\u7684\u4e91\u5f15\u64ce\u51fd\u6570\u5904\u7406\u5373\u65f6\u901a\u8baf\u4e2d\u7684\u67d0\u4e9b\u4e8b\u4ef6\uff0c\u4fee\u6539\u9ed8\u8ba4\u7684\u6d41\u7a0b\u7b49\u7b49\u3002\u76ee\u524d\u5f00\u653e\u7684 hook \u4e91\u51fd\u6570\u5305\u62ec\uff1a _messageReceived \u6d88\u606f\u8fbe\u5230\u670d\u52a1\u5668\uff0c\u7fa4\u7ec4\u6210\u5458\u5df2\u89e3\u6790\u5b8c\u6210\u4e4b\u540e\uff0c\u53d1\u9001\u7ed9\u6536\u4ef6\u4eba\u4e4b\u524d\u3002 _receiversOffline \u6d88\u606f\u53d1\u9001\u5b8c\u6210\uff0c\u5b58\u5728\u79bb\u7ebf\u7684\u6536\u4ef6\u4eba\u3002 _messageSent \u6d88\u606f\u53d1\u9001\u5b8c\u6210\u3002 _conversationStart \u521b\u5efa\u5bf9\u8bdd\uff0c\u5728\u7b7e\u540d\u6821\u9a8c\uff08\u5982\u679c\u5f00\u542f\uff09\u4e4b\u540e\uff0c\u5b9e\u9645\u521b\u5efa\u4e4b\u524d\u3002 _conversationStarted \u521b\u5efa\u5bf9\u8bdd\u5b8c\u6210\u3002 _conversationAdd \u5411\u5bf9\u8bdd\u6dfb\u52a0\u6210\u5458\uff0c\u5728\u7b7e\u540d\u6821\u9a8c\uff08\u5982\u679c\u5f00\u542f\uff09\u4e4b\u540e\uff0c\u5b9e\u9645\u52a0\u5165\u4e4b\u524d\uff0c\u5305\u62ec\u4e3b\u52a8\u52a0\u5165\u548c\u88ab\u5176\u4ed6\u7528\u6237\u52a0\u5165\u4e24\u79cd\u60c5\u51b5\u3002 _conversationRemove \u4ece\u5bf9\u8bdd\u4e2d\u8e22\u51fa\u6210\u5458\uff0c\u5728\u7b7e\u540d\u6821\u9a8c\uff08\u5982\u679c\u5f00\u542f\uff09\u4e4b\u540e\uff0c\u5b9e\u9645\u8e22\u51fa\u4e4b\u524d\uff0c\u7528\u6237\u81ea\u5df1\u9000\u51fa\u5bf9\u8bdd\u4e0d\u4f1a\u8c03\u7528\u3002 _conversationUpdate \u4fee\u6539\u5bf9\u8bdd\u5c5e\u6027\u3001\u8bbe\u7f6e\u6216\u53d6\u6d88\u5bf9\u8bdd\u6d88\u606f\u63d0\u9192\uff0c\u5728\u5b9e\u9645\u4fee\u6539\u4e4b\u524d\u8c03\u7528\u3002","title":"\u4e91\u5f15\u64ce Hook"},{"location":"im/im-overview/#_23","text":"\u793a\u4f8b\u5e94\u7528 LeanChat \u4e5f\u7528\u4e86\u4e91\u5f15\u64ce Hook \u529f\u80fd\u6765\u81ea\u5b9a\u4e49\u6d88\u606f\u63a8\u9001\uff0c\u901a\u8fc7\u89e3\u6790\u4e0a\u5c42\u6d88\u606f\u534f\u8bae\u83b7\u53d6\u6d88\u606f\u7c7b\u578b\u548c\u5185\u5bb9\uff0c\u4ee5 fromPeer \u5f97\u5230\u53d1\u9001\u8005\u7684\u540d\u79f0\uff0c\u7ec4\u88c5\u6210 pushMessage \uff0c\u8fd9\u6837\u80fd\u4f7f\u63a8\u9001\u901a\u77e5\u7684\u7528\u6237\u4f53\u9a8c\u66f4\u597d\u3002\u53ef\u53c2\u8003 leanchat-cloudcode \u4ee3\u7801 \u3002 \u4e0e conversation \u76f8\u5173\u7684 hook \u53ef\u4ee5\u5728\u5e94\u7528\u7b7e\u540d\u4e4b\u5916\u589e\u52a0\u989d\u5916\u7684\u6743\u9650\u5224\u65ad\uff0c\u63a7\u5236\u5bf9\u8bdd\u662f\u5426\u5141\u8bb8\u88ab\u5efa\u7acb\u3001\u67d0\u4e9b\u7528\u6237\u662f\u5426\u5141\u8bb8\u88ab\u52a0\u5165\u5bf9\u8bdd\u7b49\u3002\u4f60\u53ef\u4ee5\u7528\u8fd9\u4e00 hook \u5b9e\u73b0\u9ed1\u540d\u5355\u529f\u80fd\u3002","title":"\u4f7f\u7528\u573a\u666f"},{"location":"im/im-overview/#_messagereceived","text":"\u8fd9\u4e2a hook \u53d1\u751f\u5728\u6d88\u606f\u5230\u8fbe LeanCloud \u4e91\u7aef\u4e4b\u540e\u3002\u5982\u679c\u662f\u7fa4\u7ec4\u6d88\u606f\uff0c\u6211\u4eec\u4f1a\u89e3\u6790\u51fa\u6240\u6709\u6d88\u606f\u6536\u4ef6\u4eba\u3002 \u4f60\u53ef\u4ee5\u901a\u8fc7\u8fd4\u56de\u53c2\u6570\u63a7\u5236\u6d88\u606f\u662f\u5426\u9700\u8981\u88ab\u4e22\u5f03\uff0c\u5220\u9664\u4e2a\u522b\u6536\u4ef6\u4eba\uff0c\u8fd8\u53ef\u4ee5\u4fee\u6539\u6d88\u606f\u5185\u5bb9\uff0c\u4f8b\u5982\u8fc7\u6ee4\u5e94\u7528\u4e2d\u7684\u654f\u611f\u8bcd\uff08 \u793a\u4f8b \uff09\u3002\u8fd4\u56de\u7a7a\u5bf9\u8c61\uff08 response.success({}) \uff09\u5219\u4f1a\u6267\u884c\u7cfb\u7edf\u9ed8\u8ba4\u7684\u6d41\u7a0b\u3002 \u8bf7\u6ce8\u610f\uff0c\u5728\u8fd9\u4e2a hook \u7684\u4ee3\u7801\u5b9e\u73b0\u7684\u4efb\u4f55\u5206\u652f\u4e0a**\u8bf7\u786e\u4fdd\u6700\u7ec8\u4f1a\u8c03\u7528 response.success \u8fd4\u56de\u7ed3\u679c**\uff0c\u4f7f\u5f97\u6d88\u606f\u53ef\u4ee5\u5c3d\u5feb\u6295\u9012\u7ed9\u6536\u4ef6\u4eba\u3002\u8fd9\u4e2a hook \u5c06**\u963b\u585e\u53d1\u9001\u6d41\u7a0b**\uff0c\u56e0\u6b64\u8bf7\u5c3d\u91cf\u51cf\u5c11\u65e0\u8c13\u7684\u4ee3\u7801\u8c03\u7528\uff0c\u63d0\u5347\u6548\u7387\u3002 \u5982\u679c\u4f60\u4f7f\u7528\u4e86 LeanCloud \u9ed8\u8ba4\u63d0\u4f9b\u7684\u5bcc\u5a92\u4f53\u6d88\u606f\u683c\u5f0f\uff0c\u4e91\u5f15\u64ce\u53c2\u6570\u4e2d\u7684 content \u63a5\u6536\u7684\u662f JSON \u7ed3\u6784\u7684\u5b57\u7b26\u4e32\u5f62\u5f0f\u3002\u5173\u4e8e\u8fd9\u4e2a\u7ed3\u6784\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u8003 \u5373\u65f6\u901a\u8baf REST API \u6307\u5357 - \u5bcc\u5a92\u4f53\u6d88\u606f\u683c\u5f0f\u8bf4\u660e \u3002","title":"_messageReceived"},{"location":"im/im-overview/#_24","text":"\u53c2\u6570 \u8bf4\u660e fromPeer \u6d88\u606f\u53d1\u9001\u8005\u7684 ID convId \u6d88\u606f\u6240\u5c5e\u5bf9\u8bdd\u7684 ID toPeers \u89e3\u6790\u51fa\u7684\u5bf9\u8bdd\u76f8\u5173\u7684 Client ID transient \u662f\u5426\u662f transient \u6d88\u606f content \u6d88\u606f\u4f53\u5b57\u7b26\u4e32 receipt \u662f\u5426\u8981\u6c42\u56de\u6267 timestamp \u670d\u52a1\u5668\u6536\u5230\u6d88\u606f\u7684\u65f6\u95f4\u6233\uff08\u6beb\u79d2\uff09 sourceIP \u6d88\u606f\u53d1\u9001\u8005\u7684 IP","title":"\u53c2\u6570"},{"location":"im/im-overview/#_25","text":"\u53c2\u6570 \u7ea6\u675f \u8bf4\u660e drop \u53ef\u9009 \u5982\u679c\u8fd4\u56de\u771f\u503c\u6d88\u606f\u5c06\u88ab\u4e22\u5f03 code \u53ef\u9009 \u5f53 drop \u4e3a true \u65f6\u53ef\u4ee5\u4e0b\u53d1\u4e00\u4e2a\u5e94\u7528\u81ea\u5b9a\u4e49\u7684\u6574\u578b\u9519\u8bef\u7801 content \u53ef\u9009 \u4fee\u6539\u540e\u7684 content\uff0c\u5982\u679c\u4e0d\u63d0\u4f9b\u5219\u4fdd\u7559\u539f\u6d88\u606f\u3002 toPeers \u53ef\u9009 \u6570\u7ec4\uff0c\u4fee\u6539\u540e\u7684\u6536\u4ef6\u4eba\uff0c\u5982\u679c\u4e0d\u63d0\u4f9b\u5219\u4fdd\u7559\u539f\u6536\u4ef6\u4eba\u3002","title":"\u8fd4\u56de"},{"location":"im/im-overview/#_receiversoffline","text":"\u8fd9\u4e2a hook \u53d1\u751f\u5728\u6709\u6536\u4ef6\u4eba\u79bb\u7ebf\u7684\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u5b83\u6765\u81ea\u5b9a\u4e49\u79bb\u7ebf\u63a8\u9001\u884c\u4e3a\uff0c\u5305\u62ec\u63a8\u9001\u5185\u5bb9\u3001\u88ab\u63a8\u9001\u7528\u6237\u6216\u7565\u8fc7\u63a8\u9001\u3002\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728 hook \u4e2d\u89e6\u53d1\u81ea\u5b9a\u4e49\u7684\u63a8\u9001\u3002\u53d1\u5f80\u6682\u6001\u5bf9\u8bdd\u7684\u6d88\u606f\u4e0d\u4f1a\u89e6\u53d1\u6b64 hook\u3002","title":"_receiversOffline"},{"location":"im/im-overview/#_26","text":"AV.Cloud.define( _receiversOffline , function(request, response) { var params = request.params; var json = { // \u81ea\u589e\u672a\u8bfb\u6d88\u606f\u7684\u6570\u76ee\uff0c\u4e0d\u60f3\u81ea\u589e\u5c31\u8bbe\u4e3a\u6570\u5b57 badge: Increment , sound: default , // \u4f7f\u7528\u5f00\u53d1\u8bc1\u4e66 _profile: dev , // content \u4e3a\u6d88\u606f\u7684\u5b9e\u9645\u5185\u5bb9 alert: params.content }; var pushMessage = JSON.stringify(json); return { pushMessage : pushMessage}; }) \u6709\u5173\u53ef\u4ee5\u5728\u63a8\u9001\u5185\u5bb9\u4e2d\u52a0\u5165\u7684\u5185\u7f6e\u53d8\u91cf\u548c\u5176\u4ed6\u53ef\u7528\u8bbe\u7f6e\uff0c\u8bf7\u53c2\u8003 \u79bb\u7ebf\u63a8\u9001\u901a\u77e5 \u3002","title":"\u81ea\u5b9a\u4e49\u79bb\u7ebf\u6d88\u606f\u63a8\u9001\u901a\u77e5\u7684\u5185\u5bb9"},{"location":"im/im-overview/#_27","text":"\u53c2\u6570 \u8bf4\u660e fromPeer \u6d88\u606f\u53d1\u9001\u8005 ID convId \u6d88\u606f\u6240\u5c5e\u5bf9\u8bdd\u7684 ID offlinePeers \u6570\u7ec4\uff0c\u79bb\u7ebf\u7684\u6536\u4ef6\u4eba\u5217\u8868 content \u6d88\u606f\u5185\u5bb9 timestamp \u670d\u52a1\u5668\u6536\u5230\u6d88\u606f\u7684\u65f6\u95f4\u6233\uff08\u6beb\u79d2\uff09 mentionAll \u5e03\u5c14\u7c7b\u578b\uff0c\u8868\u793a\u672c\u6d88\u606f\u662f\u5426 @ \u4e86\u6240\u6709\u6210\u5458 mentionOfflinePeers \u88ab\u672c\u6d88\u606f @ \u4e14\u79bb\u7ebf\u7684\u6210\u5458 ID\u3002\u5982\u679c mentionAll \u4e3a true\uff0c\u5219\u8be5\u53c2\u6570\u4e3a\u7a7a\uff0c\u8868\u793a\u6240\u6709 offlinePeers \u53c2\u6570\u5185\u7684\u6210\u5458\u5168\u90e8\u88ab @","title":"\u53c2\u6570"},{"location":"im/im-overview/#_28","text":"\u53c2\u6570 \u7ea6\u675f \u8bf4\u660e skip \u53ef\u9009 \u5982\u679c\u4e3a\u771f\u5c06\u8df3\u8fc7\u63a8\u9001\uff08\u6bd4\u5982\u5df2\u7ecf\u5728\u4e91\u5f15\u64ce\u91cc\u89e6\u53d1\u4e86\u63a8\u9001\u6216\u8005\u5176\u4ed6\u901a\u77e5\uff09 offlinePeers \u53ef\u9009 \u6570\u7ec4\uff0c\u7b5b\u9009\u8fc7\u7684\u63a8\u9001\u6536\u4ef6\u4eba\u3002 pushMessage \u53ef\u9009 \u63a8\u9001\u5185\u5bb9\uff0c\u652f\u6301\u81ea\u5b9a\u4e49 JSON \u7ed3\u6784\u3002 force \u53ef\u9009 \u5982\u679c\u4e3a\u771f\u5c06\u5f3a\u5236\u63a8\u9001\u7ed9 offlinePeers \u91cc mute \u7684\u7528\u6237\uff0c\u9ed8\u8ba4 false\u3002","title":"\u8fd4\u56de"},{"location":"im/im-overview/#_messagesent","text":"\u5728\u6d88\u606f\u53d1\u9001\u5b8c\u6210\u540e\u6267\u884c\uff0c\u5bf9\u6d88\u606f\u53d1\u9001\u6027\u80fd\u6ca1\u6709\u5f71\u54cd\uff0c\u53ef\u4ee5\u7528\u6765\u6267\u884c\u76f8\u5bf9\u8017\u65f6\u7684\u903b\u8f91\u3002","title":"_messageSent"},{"location":"im/im-overview/#_29","text":"\u53c2\u6570 \u8bf4\u660e fromPeer \u6d88\u606f\u53d1\u9001\u8005\u7684 ID convId \u6d88\u606f\u6240\u5c5e\u5bf9\u8bdd\u7684 ID msgId \u6d88\u606f id onlinePeers \u5f53\u524d\u5728\u7ebf\u53d1\u9001\u7684\u7528\u6237 id offlinePeers \u5f53\u524d\u79bb\u7ebf\u7684\u7528\u6237 id transient \u662f\u5426\u662f transient \u6d88\u606f system \u662f\u5426\u662f system conversation bin \u662f\u5426\u662f\u4e8c\u8fdb\u5236\u6d88\u606f content \u6d88\u606f\u4f53\u5b57\u7b26\u4e32 receipt \u662f\u5426\u8981\u6c42\u56de\u6267 timestamp \u670d\u52a1\u5668\u6536\u5230\u6d88\u606f\u7684\u65f6\u95f4\u6233\uff08\u6beb\u79d2\uff09 sourceIP \u6d88\u606f\u53d1\u9001\u8005\u7684 IP","title":"\u53c2\u6570"},{"location":"im/im-overview/#_30","text":"\u8fd9\u4e2a hook \u4e0d\u4f1a\u5bf9\u8fd4\u56de\u503c\u8fdb\u884c\u68c0\u67e5\u3002\u53ea\u9700\u8fd4\u56de {} \u5373\u53ef\u3002","title":"\u8fd4\u56de"},{"location":"im/im-overview/#_conversationstart","text":"\u5728\u521b\u5efa\u5bf9\u8bdd\u65f6\u8c03\u7528\uff0c\u53d1\u751f\u5728\u7b7e\u540d\u9a8c\u8bc1\u4e4b\u540e\u3001\u521b\u5efa\u5bf9\u8bdd\u4e4b\u524d\u3002","title":"_conversationStart"},{"location":"im/im-overview/#_31","text":"\u53c2\u6570 \u8bf4\u660e initBy \u7531\u8c01\u53d1\u8d77\u7684 clientId members \u521d\u59cb\u6210\u5458\u6570\u7ec4\uff0c\u5305\u542b\u521d\u59cb\u6210\u5458 attr \u521b\u5efa\u5bf9\u8bdd\u65f6\u7684\u989d\u5916\u5c5e\u6027","title":"\u53c2\u6570"},{"location":"im/im-overview/#_32","text":"\u53c2\u6570 \u7ea6\u675f \u8bf4\u660e reject \u53ef\u9009 \u662f\u5426\u62d2\u7edd\uff0c\u9ed8\u8ba4\u4e3a false \u3002 code \u53ef\u9009 \u5f53 reject \u4e3a true \u65f6\u53ef\u4ee5\u4e0b\u53d1\u4e00\u4e2a\u5e94\u7528\u81ea\u5b9a\u4e49\u7684\u6574\u578b\u9519\u8bef\u7801\u3002","title":"\u8fd4\u56de"},{"location":"im/im-overview/#_conversationstarted","text":"\u5bf9\u8bdd\u521b\u5efa\u540e\u8c03\u7528","title":"_conversationStarted"},{"location":"im/im-overview/#_33","text":"\u53c2\u6570 \u8bf4\u660e convId \u65b0\u751f\u6210\u7684\u5bf9\u8bdd Id","title":"\u53c2\u6570"},{"location":"im/im-overview/#_34","text":"\u8fd9\u4e2a hook \u4e0d\u5bf9\u8fd4\u56de\u503c\u8fdb\u884c\u5904\u7406\uff0c\u53ea\u9700\u8fd4\u56de {} \u5373\u53ef\u3002","title":"\u8fd4\u56de"},{"location":"im/im-overview/#_conversationadd","text":"\u5728\u5c06\u7528\u6237\u52a0\u5165\u5230\u5bf9\u8bdd\u65f6\u8c03\u7528\uff0c\u53d1\u751f\u5728\u7b7e\u540d\u9a8c\u8bc1\u4e4b\u540e\u3001\u52a0\u5165\u5bf9\u8bdd\u4e4b\u524d\u3002\u5982\u679c\u662f\u81ea\u5df1\u52a0\u5165\uff0c\u90a3\u4e48 initBy \u548c members \u7684\u552f\u4e00\u5143\u7d20\u662f\u4e00\u6837\u7684\u3002","title":"_conversationAdd"},{"location":"im/im-overview/#_35","text":"\u53c2\u6570 \u8bf4\u660e initBy \u7531\u8c01\u53d1\u8d77\u7684 clientId members \u8981\u52a0\u5165\u7684\u6210\u5458\uff0c\u6570\u7ec4 convId \u5bf9\u8bdd id","title":"\u53c2\u6570"},{"location":"im/im-overview/#_36","text":"\u53c2\u6570 \u7ea6\u675f \u8bf4\u660e reject \u53ef\u9009 \u662f\u5426\u62d2\u7edd\uff0c\u9ed8\u8ba4\u4e3a false \u3002 code \u53ef\u9009 \u5f53 reject \u4e3a true \u65f6\u53ef\u4ee5\u4e0b\u53d1\u4e00\u4e2a\u5e94\u7528\u81ea\u5b9a\u4e49\u7684\u6574\u578b\u9519\u8bef\u7801\u3002","title":"\u8fd4\u56de"},{"location":"im/im-overview/#_conversationremove","text":"\u5728\u521b\u5efa\u5bf9\u8bdd\u65f6\u8c03\u7528\uff0c\u53d1\u751f\u5728\u7b7e\u540d\u9a8c\u8bc1\u4e4b\u540e\u3001\u4ece\u5bf9\u8bdd\u79fb\u9664\u6210\u5458\u4e4b\u524d\u3002\u79fb\u9664\u81ea\u5df1\u65f6\u4e0d\u4f1a\u89e6\u53d1\u8fd9\u4e2a hook\u3002","title":"_conversationRemove"},{"location":"im/im-overview/#_37","text":"\u53c2\u6570 \u8bf4\u660e initBy \u7531\u8c01\u53d1\u8d77 members \u8981\u8e22\u51fa\u7684\u6210\u5458\uff0c\u6570\u7ec4\u3002 convId \u5bf9\u8bdd id","title":"\u53c2\u6570"},{"location":"im/im-overview/#_38","text":"\u53c2\u6570 \u7ea6\u675f \u8bf4\u660e reject \u53ef\u9009 \u662f\u5426\u62d2\u7edd\uff0c\u9ed8\u8ba4\u4e3a false \u3002 code \u53ef\u9009 \u5f53 reject \u4e3a true \u65f6\u53ef\u4ee5\u4e0b\u53d1\u4e00\u4e2a\u5e94\u7528\u81ea\u5b9a\u4e49\u7684\u6574\u578b\u9519\u8bef\u7801\u3002","title":"\u8fd4\u56de"},{"location":"im/im-overview/#_conversationupdate","text":"\u5728\u4fee\u6539\u5bf9\u8bdd\u5c5e\u6027\u3001\u8bbe\u7f6e\u6216\u53d6\u6d88\u5bf9\u8bdd\u6d88\u606f\u63d0\u9192\u4e4b\u524d\u8c03\u7528\u3002","title":"_conversationUpdate"},{"location":"im/im-overview/#_39","text":"\u53c2\u6570 \u8bf4\u660e initBy \u7531\u8c01\u53d1\u8d77\u3002 convId \u5bf9\u8bdd id\u3002 mute \u662f\u5426\u5173\u95ed\u5f53\u524d\u5bf9\u8bdd\u63d0\u9192\u3002 attr \u5f85\u8bbe\u7f6e\u7684\u5bf9\u8bdd\u5c5e\u6027\u3002 mute \u548c attr \u53c2\u6570\u4e92\u65a5\uff0c\u4e0d\u4f1a\u540c\u65f6\u4f20\u9012\u3002","title":"\u53c2\u6570"},{"location":"im/im-overview/#_40","text":"\u53c2\u6570 \u7ea6\u675f \u8bf4\u660e reject \u53ef\u9009 \u662f\u5426\u62d2\u7edd\uff0c\u9ed8\u8ba4\u4e3a false \u3002 code \u53ef\u9009 \u5f53 reject \u4e3a true \u65f6\u53ef\u4ee5\u4e0b\u53d1\u4e00\u4e2a\u5e94\u7528\u81ea\u5b9a\u4e49\u7684\u6574\u578b\u9519\u8bef\u7801\u3002 attr \u53ef\u9009 \u4fee\u6539\u540e\u7684\u5f85\u8bbe\u7f6e\u5bf9\u8bdd\u5c5e\u6027\uff0c\u5982\u679c\u4e0d\u63d0\u4f9b\u5219\u4fdd\u6301\u539f\u53c2\u6570\u4e2d\u7684\u5bf9\u8bdd\u5c5e\u6027\u3002 mute \u53ef\u9009 \u4fee\u6539\u540e\u7684\u5173\u95ed\u5bf9\u8bdd\u63d0\u9192\u8bbe\u7f6e\uff0c\u5982\u679c\u4e0d\u63d0\u4f9b\u5219\u4fdd\u6301\u539f\u53c2\u6570\u4e2d\u7684\u5173\u95ed\u63d0\u9192\u8bbe\u7f6e\u3002 mute \u548c attr \u53c2\u6570\u4e92\u65a5\uff0c\u4e0d\u80fd\u540c\u65f6\u8fd4\u56de\u3002\u5e76\u4e14\u8fd4\u56de\u503c\u5fc5\u987b\u4e0e\u8bf7\u6c42\u5bf9\u5e94\uff0c\u8bf7\u6c42\u4e2d\u5982\u679c\u5e26\u7740 attr\uff0c\u5219\u8fd4\u56de\u503c\u4e2d\u53ea\u6709 attr \u53c2\u6570\u6709\u6548\uff0c\u8fd4\u56de mute \u4f1a\u88ab\u4e22\u5f03\u3002\u540c\u7406\uff0c\u8bf7\u6c42\u4e2d\u5982\u679c\u5e26\u7740 mute\uff0c\u8fd4\u56de\u503c\u4e2d\u5982\u679c\u6709 attr \u5219 attr \u4f1a\u88ab\u4e22\u5f03\u3002","title":"\u8fd4\u56de"},{"location":"im/im-overview/#_41","text":"\u5373\u65f6\u901a\u8baf\u7684\u4e91\u5f15\u64ce Hook \u8981\u6c42\u4e91\u5f15\u64ce\u90e8\u7f72\u5728\u4e91\u5f15\u64ce\u7684 \u751f\u4ea7\u73af\u5883 \uff0c\u6d4b\u8bd5\u73af\u5883\u4ec5\u7528\u4e8e\u5f00\u53d1\u8005\u624b\u52a8\u8c03\u7528\u6d4b\u8bd5\u3002\u7531\u4e8e\u7f13\u5b58\u7684\u539f\u56e0\uff0c\u9996\u6b21\u90e8\u7f72\u7684\u4e91\u5f15\u64ce Hook \u9700\u8981\u81f3\u591a\u4e09\u5206\u949f\u6765\u6b63\u5f0f\u751f\u6548\uff0c\u540e\u7eed\u4fee\u6539\u4f1a\u5b9e\u65f6\u751f\u6548\u3002 \u66f4\u591a\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003 \u4e91\u5f15\u64ce \u00b7 \u4e91\u51fd\u6570 \u3002\u6240\u6709\u4e91\u5f15\u64ce\u8c03\u7528\u90fd\u6709\u9ed8\u8ba4\u8d85\u65f6\u65f6\u95f4\u548c\u5bb9\u9519\u673a\u5236\uff0c\u5728\u51fa\u9519\u60c5\u51b5\u4e0b\u7cfb\u7edf\u5c06\u6309\u7167\u9ed8\u8ba4\u7684\u6d41\u7a0b\u6267\u884c\u540e\u7eed\u64cd\u4f5c\u3002","title":"\u90e8\u7f72\u73af\u5883"},{"location":"im/im-overview/#android","text":"\u53c2\u8003 Android \u5373\u65f6\u901a\u8baf\u5f00\u53d1\u6307\u5357","title":"Android \u5f00\u53d1\u6307\u5357"},{"location":"im/im-overview/#ios","text":"\u53c2\u8003 iOS \u5373\u65f6\u901a\u8baf\u5f00\u53d1\u6307\u5357","title":"iOS \u5f00\u53d1\u6307\u5357"},{"location":"im/im-overview/#javascript","text":"\u53c2\u8003 JavaScript \u5373\u65f6\u901a\u8baf\u5f00\u53d1\u6307\u5357 \u3002\u53e6\u5916\uff0c\u6211\u4eec\u5df2\u7ecf\u5f00\u6e90\u4e86 JavaScript Realtime SDK\uff0c \u89c1 LeanCloud JavaScript Realtime SDK - Github \u8d44\u6e90\u5e93 \u3002","title":"JavaScript \u5f00\u53d1\u6307\u5357"},{"location":"im/im-overview/#rest-api","text":"\u53c2\u8003 \u5373\u65f6\u901a\u8baf REST API \u3002","title":"REST API"},{"location":"im/im-overview/#sdk","text":"Python \u4e0e JavaScript \u7684\u6570\u636e\u5b58\u50a8 SDK\uff0c\u57fa\u4e8e REST API \u5c01\u88c5\u4e86\u4e00\u7ec4\u5bf9\u8bdd\u53ca\u6d88\u606f\u7ba1\u7406\u7684\u63a5\u53e3\uff0c\u65b9\u4fbf\u5728\u670d\u52a1\u7aef\u6216\u8005\u4e91\u5f15\u64ce\u4e2d\u8fdb\u884c\u5bf9\u8bdd\u7ba1\u7406\u3001\u53d1\u9001\u6d88\u606f\u3002\u5177\u4f53\u6587\u6863\u53c2\u8003\uff1a \u5373\u65f6\u901a\u8baf\u670d\u52a1\u7aef\u7ba1\u7406\u5f00\u53d1\u6307\u5357 \u3002","title":"\u5bf9\u8bdd\u4e0e\u6d88\u606f\u7ba1\u7406 SDK"},{"location":"im/im-overview/#_42","text":"\u7cfb\u7edf\u5bf9\u8bdd\u53ef\u4ee5\u7528\u4e8e\u5b9e\u73b0\u673a\u5668\u4eba\u81ea\u52a8\u56de\u590d\u3001\u516c\u4f17\u53f7\u3001\u670d\u52a1\u8d26\u53f7\u7b49\u529f\u80fd\u3002\u5728\u6211\u4eec\u7684 \u5b98\u65b9\u804a\u5929 Demo \u4e2d\u5c31\u6709\u4e00\u4e2a\u4f7f\u7528\u7cfb\u7edf\u5bf9\u8bdd hook \u5b9e\u73b0\u7684\u673a\u5668\u4eba MathBot\uff0c\u5b83\u80fd\u8ba1\u7b97\u7528\u6237\u53d1\u9001\u6765\u7684\u6570\u5b66\u8868\u8fbe\u5f0f\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c \u5176\u670d\u52a1\u7aef\u6e90\u7801 \u53ef\u4ee5\u4ece GitHub \u4e0a\u83b7\u53d6\u3002","title":"\u7cfb\u7edf\u5bf9\u8bdd"},{"location":"im/im-overview/#_43","text":"\u7cfb\u7edf\u5bf9\u8bdd\u4e5f\u662f\u5bf9\u8bdd\u7684\u4e00\u79cd\uff0c\u521b\u5efa\u540e\u4e5f\u662f\u5728 _Conversation \u8868\u4e2d\u589e\u52a0\u4e00\u6761\u8bb0\u5f55\uff0c\u53ea\u662f\u8be5\u8bb0\u5f55 sys \u5217\u7684\u503c\u4e3a true\uff0c\u4ece\u800c\u4e0e\u666e\u901a\u4f1a\u8bdd\u8fdb\u884c\u533a\u522b\u3002\u5177\u4f53\u521b\u5efa\u65b9\u6cd5\u8bf7\u53c2\u8003 REST API \u521b\u5efa\u670d\u52a1\u53f7 \u3002","title":"\u7cfb\u7edf\u5bf9\u8bdd\u7684\u521b\u5efa"},{"location":"im/im-overview/#_44","text":"\u7cfb\u7edf\u5bf9\u8bdd\u7ed9\u7528\u6237\u53d1\u6d88\u606f\u8bf7\u53c2\u8003\uff1a REST API - \u7ed9\u4efb\u610f\u7528\u6237\u5355\u72ec\u53d1\u6d88\u606f \u3002 \u7528\u6237\u7ed9\u7cfb\u7edf\u5bf9\u8bdd\u53d1\u9001\u6d88\u606f\u8ddf\u7528\u6237\u7ed9\u666e\u901a\u5bf9\u8bdd\u53d1\u6d88\u606f\u65b9\u6cd5\u4e00\u81f4\u3002 \u60a8\u8fd8\u53ef\u4ee5\u5229\u7528\u7cfb\u7edf\u5bf9\u8bdd\u53d1\u9001\u5e7f\u64ad\u6d88\u606f\u7ed9\u5168\u90e8\u7528\u6237\u3002\u76f8\u6bd4\u904d\u5386\u6240\u6709\u7528\u6237 ID \u9010\u4e2a\u53d1\u9001\uff0c\u5e7f\u64ad\u6d88\u606f\u53ea\u9700\u8981\u8c03\u7528\u4e00\u6b21 REST API\u3002 \u5173\u4e8e\u5e7f\u64ad\u6d88\u606f\u7684\u8be6\u7ec6\u7279\u5f81\u53ef\u4ee5\u53c2\u8003 \u6d88\u606f - \u5e7f\u64ad\u6d88\u606f \u3002","title":"\u7cfb\u7edf\u5bf9\u8bdd\u6d88\u606f\u7684\u53d1\u9001"},{"location":"im/im-overview/#_45","text":"\u83b7\u53d6\u7cfb\u7edf\u5bf9\u8bdd\u7ed9\u7528\u6237\u53d1\u9001\u7684\u6d88\u606f\u8bb0\u5f55\u8bf7\u53c2\u8003\uff1a \u67e5\u8be2\u670d\u52a1\u53f7\u7ed9\u67d0\u7528\u6237\u53d1\u7684\u6d88\u606f \u83b7\u53d6\u7528\u6237\u7ed9\u7cfb\u7edf\u5bf9\u8bdd\u53d1\u9001\u7684\u6d88\u606f\u8bb0\u5f55\u6709\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\u5b9e\u73b0\uff1a - _SysMessage \u8868\u65b9\u5f0f\uff0c\u5728\u5e94\u7528\u9996\u6b21\u6709\u7528\u6237\u53d1\u9001\u6d88\u606f\u7ed9\u67d0\u7cfb\u7edf\u5bf9\u8bdd\u65f6\u81ea\u52a8\u521b\u5efa\uff0c\u521b\u5efa\u540e\u6211\u4eec\u5c06\u6240\u6709\u7531\u7528\u6237\u53d1\u9001\u5230\u7cfb\u7edf\u5bf9\u8bdd\u7684\u6d88\u606f\u90fd\u5b58\u50a8\u5728\u8be5\u8868\u4e2d\u3002 - Web Hook \u65b9\u5f0f\uff0c\u8fd9\u79cd\u65b9\u5f0f\u9700\u8981\u5f00\u53d1\u8005\u81ea\u884c\u5b9a\u4e49 Web Hook \uff0c\u7528\u4e8e\u5b9e\u65f6\u63a5\u6536\u7528\u6237\u53d1\u7ed9\u7cfb\u7edf\u5bf9\u8bdd\u7684\u6d88\u606f\u3002","title":"\u83b7\u53d6\u7cfb\u7edf\u5bf9\u8bdd\u6d88\u606f\u8bb0\u5f55"},{"location":"im/im-overview/#_46","text":"","title":"\u7cfb\u7edf\u5bf9\u8bdd\u6d88\u606f\u7ed3\u6784"},{"location":"im/im-overview/#_sysmessage","text":"\u5b58\u50a8\u7528\u6237\u53d1\u7ed9\u7cfb\u7edf\u5bf9\u8bdd\u7684\u6d88\u606f\uff0c\u5404\u5b57\u6bb5\u542b\u4e49\u5982\u4e0b\uff1a \u5b57\u6bb5 \u8bf4\u660e ackAt \u6d88\u606f\u9001\u8fbe\u7684\u65f6\u95f4 bin \u662f\u5426\u4e3a\u4e8c\u8fdb\u5236\u7c7b\u578b\u6d88\u606f conv \u6d88\u606f\u5173\u8054\u7684\u7cfb\u7edf\u5bf9\u8bdd Pointer data \u6d88\u606f\u5185\u5bb9 from \u53d1\u6d88\u606f\u7528\u6237\u7684 Client ID fromIp \u53d1\u6d88\u606f\u7528\u6237\u7684 IP msgId \u6d88\u606f\u7684\u5185\u90e8 ID timestamp \u6d88\u606f\u521b\u5efa\u7684\u65f6\u95f4","title":"_SysMessage"},{"location":"im/im-overview/#web-hook","text":"\u9700\u8981\u5f00\u53d1\u8005\u81ea\u884c\u5728 \u63a7\u5236\u53f0 \u6d88\u606f \u5b9e\u65f6\u6d88\u606f \u8bbe\u7f6e \u7cfb\u7edf\u5bf9\u8bdd\u6d88\u606f\u56de\u8c03\u8bbe\u7f6e \u5b9a\u4e49\uff0c\u6765\u5b9e\u65f6\u63a5\u6536\u7528\u6237\u53d1\u7ed9\u7cfb\u7edf\u5bf9\u8bdd\u7684\u6d88\u606f\uff0c\u6d88\u606f\u7684\u6570\u636e\u7ed3\u6784\u4e0e\u4e0a\u6587\u6240\u8ff0\u7684 _SysMessage \u4e00\u81f4\u3002 \u5f53\u6709\u7528\u6237\u5411\u7cfb\u7edf\u5bf9\u8bdd\u53d1\u9001\u6d88\u606f\u65f6\uff0c\u6211\u4eec\u4f1a\u901a\u8fc7 HTTP POST \u8bf7\u6c42\u5c06 JSON \u683c\u5f0f\u7684\u6570\u636e\u53d1\u9001\u5230\u7528\u6237\u8bbe\u7f6e\u7684 Web Hook \u4e0a\u3002\u8bf7\u6ce8\u610f\uff0c\u6211\u4eec\u8c03\u7528 Web Hook \u65f6\u5e76\u4e0d\u662f\u4e00\u6b21\u8c03\u7528\u53ea\u53d1\u9001\u4e00\u6761\u6d88\u606f\uff0c\u800c\u662f\u4f1a\u4ee5\u6279\u91cf\u7684\u5f62\u5f0f\u5c06\u6d88\u606f\u53d1\u9001\u8fc7\u53bb\u3002\u4ece\u4e0b\u9762\u7684\u53d1\u9001\u6d88\u606f\u683c\u5f0f\u4e2d\u80fd\u770b\u5230\uff0cJSON \u7684\u6700\u5916\u5c42\u662f\u4e2a Array\u3002 \u8d85\u65f6\u65f6\u95f4\u4e3a 5 \u79d2\uff0c\u5f53\u7528\u6237 hook \u5730\u5740\u8d85\u65f6\u6ca1\u6709\u54cd\u5e94\uff0c\u6211\u4eec\u4f1a\u91cd\u8bd5\u81f3\u591a 3 \u6b21\u3002 \u53d1\u9001\u7684\u6d88\u606f\u683c\u5f0f\u4e3a\uff1a [ { fromIp : 121.238.214.92 , conv : { __type : Pointer , className : _Conversation , objectId : 55b99ad700b0387b8a3d7bf0 }, msgId : nYH9iBSBS_uogCEgvZwE7Q , from : A , bin : false , data : \u4f60\u597d\uff0csys , createdAt : { __type : Date , iso : 2015-07-30T14:37:42.584Z }, updatedAt : { __type : Date , iso : 2015-07-30T14:37:42.584Z } } ]","title":"Web Hook"},{"location":"im/im-overview/#_47","text":"","title":"\u9ad8\u7ea7\u529f\u80fd"},{"location":"im/im-overview/#_48","text":"\u300c\u5bf9\u8bdd\u6743\u9650\u300d\u529f\u80fd\u4f5c\u4e3a\u5373\u65f6\u901a\u8baf\u7684\u4e00\u9879\u8865\u5145\uff0c\u53ef\u4ee5\u5c06\u5bf9\u8bdd\u5185\u6210\u5458\u5212\u5206\u6210\u4e0d\u540c\u89d2\u8272\uff0c\u5b9e\u73b0\u7c7b\u4f3c QQ \u7fa4\u7ba1\u7406\u5458\u7684\u6548\u679c\u3002\u4f7f\u7528\u8fd9\u4e2a\u529f\u80fd\u9700\u8981\u5728\u63a7\u5236\u53f0 \u5373\u65f6\u901a\u8baf-\u8bbe\u7f6e \u4e2d\u5f00\u542f\u300c\u5bf9\u8bdd\u6210\u5458\u5c5e\u6027\u529f\u80fd\uff08\u6210\u5458\u89d2\u8272\u7ba1\u7406\u529f\u80fd\uff09\u300d\u3002 \u76ee\u524d\u7cfb\u7edf\u5185\u7684\u89d2\u8272\u4e0e\u529f\u80fd\u5bf9\u5e94\u5173\u7cfb\uff1a \u89d2\u8272 \u529f\u80fd\u5217\u8868 Owner \u6c38\u4e45\u6027\u7981\u8a00\u3001\u8e22\u4eba\u3001\u52a0\u4eba\u3001\u62c9\u9ed1\u3001\u66f4\u65b0\u4ed6\u4eba\u6743\u9650 Manager \u6c38\u4e45\u6027\u7981\u8a00\u3001\u8e22\u4eba\u3001\u52a0\u4eba\u3001\u62c9\u9ed1\u3001\u66f4\u65b0\u4ed6\u4eba\u6743\u9650 Member \u52a0\u4eba \u9700\u8981\u6ce8\u610f\u4e00\u70b9\uff0c\u76ee\u524d\u4e0d\u652f\u6301 Owner \u7684\u53d8\u66f4\u3002","title":"\u5bf9\u8bdd\u6743\u9650"},{"location":"im/im-overview/#_49","text":"\u300c\u9ed1\u540d\u5355\u300d\u529f\u80fd\u53ef\u4ee5\u5b9e\u73b0\u7c7b\u4f3c\u5fae\u4fe1 \u5c4f\u853d \u7684\u6548\u679c\uff0c\u76ee\u524d\u5206\u4e3a\u4e24\u5927\u7c7b \u5bf9\u8bdd \u6210\u5458 \u6210\u5458 \u5bf9\u8bdd \u4f7f\u7528\u8fd9\u4e2a\u529f\u80fd\u9700\u8981\u5728\u63a7\u5236\u53f0 \u5373\u65f6\u901a\u8baf-\u8bbe\u7f6e \u4e2d\u5f00\u542f\u300c\u9ed1\u540d\u5355\u529f\u80fd\u300d\u3002","title":"\u9ed1\u540d\u5355"},{"location":"im/im-overview/#_50","text":"\u5bf9\u4e8e\u5ba2\u6237\u7aef\u4e3b\u52a8\u53d1\u8d77\u7684\u64cd\u4f5c\u4f1a\u6309\u7167\u64cd\u4f5c\u7c7b\u578b\u9650\u5236\u5176\u9891\u7387\u3002\u53d1\u6d88\u606f\u64cd\u4f5c\u9650\u5236\u4e3a \u6bcf\u5206\u949f 60 \u6b21 \uff0c\u5386\u53f2\u6d88\u606f\u67e5\u8be2\u64cd\u4f5c\u9650\u5236\u4e3a \u6bcf\u5206\u949f 120 \u6b21 \uff0c\u5176\u4ed6\u7c7b\u578b\u64cd\u4f5c\u5305\u62ec\u52a0\u5165\u5bf9\u8bdd\u3001\u79bb\u5f00\u5bf9\u8bdd\u3001\u767b\u5f55\u670d\u52a1\u3001\u9000\u51fa\u670d\u52a1\u7b49\u5747\u9650\u5236\u4e3a \u6bcf\u5206\u949f 30 \u6b21 \u3002\u5f53\u8c03\u7528\u8d85\u8fc7\u9650\u5236\u65f6\uff0c\u4e91\u7aef\u4f1a\u62d2\u7edd\u54cd\u5e94\u8fd9\u4e9b\u8d85\u9650\u7684\u64cd\u4f5c\uff0c\u8fd9\u6837\u5982\u679c\u64cd\u4f5c\u672c\u7531 SDK \u53d1\u8d77\u5219\u8868\u73b0\u4e3a\u4e0d\u4f1a\u8d70\u56de\u8c03\u3002\u5982\u679c\u4f7f\u7528 REST API \u53d1\u8d77\u5404\u79cd\u64cd\u4f5c\uff0c\u5219\u4e0d\u4f1a\u53d7\u5230\u4e0a\u8ff0\u9891\u7387\u7684\u9650\u5236\u3002 \u5e94\u7528\u5168\u5c40\u53d1\u9001\u6d88\u606f\u7684\u901f\u5ea6\u9ed8\u8ba4\u4e3a\u6bcf\u5206\u949f 3 \u4e07\u6b21\uff0c\u5982\u679c\u4f60\u7684\u5e94\u7528\u4f1a\u8d85\u8fc7\u6b64\u9650\u5236\uff0c\u8bf7 \u8054\u7cfb\u6211\u4eec \u3002 \u5ba2\u6237\u7aef\u53d1\u9001\u7684\u5355\u6761\u6d88\u606f\u5927\u5c0f\u4e0d\u5f97\u8d85\u8fc7 5 KB\u3002 \u5355\u4e2a\u666e\u901a\u5bf9\u8bdd\u7684\u6210\u5458\u4e0a\u9650\u4e3a 500 \u4e2a\uff0c\u5982\u679c\u60a8\u901a\u8fc7\u6570\u636e\u5b58\u50a8 API \u5411 m \u5b57\u6bb5\u52a0\u5165\u4e86\u8d85\u8fc7 500 \u4e2a id\uff0c\u6211\u4eec\u53ea\u4f1a\u4f7f\u7528\u5176\u4e2d\u7684\u524d 500 \u4e2a\u3002 \u8bf7\u4e0d\u8981\u4f7f\u7528\u76f8\u540c\u7684 id \u5728\u5927\u91cf\u8bbe\u5907\u4e0a\u540c\u65f6\u767b\u5f55\uff0c\u5982\u679c\u7cfb\u7edf\u68c0\u6d4b\u5230\u67d0\u4e2a id \u540c\u65f6\u5728\u8d85\u8fc7 5 \u4e2a\u4e0d\u540c\u7684 IP \u4e0a\u767b\u5f55\uff0c\u4f1a\u8ba4\u4e3a\u6b64 id \u662f\u91cd\u590d\u4f7f\u7528\u7684 id\uff0c\u4e4b\u540e\u6b64 id \u5f53\u65e5\u7684\u6bcf\u6b21\u767b\u5f55\u4f1a\u6309\u7167 id + IP \u7684\u7ec4\u5408\u4f5c\u4e3a\u8ba1\u8d39\u7684\u72ec\u7acb\u7528\u6237\u3002 \u5982\u679c\u5355\u4e2a\u7528\u6237\u6709\u8d85\u8fc7 50 \u4e2a\u7684\u5bf9\u8bdd\u5b58\u5728\u672a\u63a5\u6536\u7684\u79bb\u7ebf\u6d88\u606f\uff0c\u90a3\u4e48\u5f53\u8be5\u7528\u6237\u767b\u5f55\u65f6\u670d\u52a1\u7aef\u53ea\u4f1a \u968f\u673a \u4e0b\u53d1 50 \u4e2a\u5bf9\u8bdd\u7684\u79bb\u7ebf\u6d88\u606f\u6216\u672a\u8bfb\u6d88\u606f\u6570\u91cf\u3002\u4e5f\u5c31\u662f\u8bf4\u670d\u52a1\u7aef\u4e0d\u4f1a\u518d\u4e0b\u53d1\u8d85\u51fa\u5bf9\u8bdd\u6570\u91cf\u9650\u5236\u7684\u90a3\u90e8\u5206\u79bb\u7ebf\u6d88\u606f\uff0c\u4e5f\u4e0d\u4f1a\u4e0b\u53d1\u79bb\u7ebf\u6d88\u606f\u6570\u91cf\uff0c\u79bb\u7ebf\u6d88\u606f\u4e0d\u4f1a\u4e1f\u5931\u4f46\u9700\u8981\u4ece\u5386\u53f2\u8bb0\u5f55\u4e2d\u62c9\u53d6\u5f97\u5230\u3002 \u5355\u4e2a\u5bf9\u8bdd\u672a\u63a5\u6536\u7684\u79bb\u7ebf\u6d88\u606f\u6570\u6700\u591a 100 \u6761\uff0c\u8d85\u8fc7\u540e\uff0c\u7cfb\u7edf\u4f1a\u4ee5\u5148\u5165\u5148\u51fa\u65b9\u5f0f\u5b58\u50a8\u65b0\u7684\u79bb\u7ebf\u6d88\u606f\uff0c\u540c\u65f6\u79fb\u9664\u5f53\u524d\u5bf9\u8bdd\u5b58\u50a8\u7684\u6700\u65e9\u7684\u4e00\u6761\u79bb\u7ebf\u6d88\u606f\u3002\u88ab\u79fb\u9664\u7684\u79bb\u7ebf\u6d88\u606f\u53ef\u4ee5\u901a\u8fc7\u5386\u53f2\u6d88\u606f\u8bb0\u5f55\u67e5\u8be2\uff0c\u4f46\u4e0d\u4f1a\u4ea7\u751f\u79bb\u7ebf\u6d88\u606f\u63d0\u9192\uff0c\u4e5f\u4e0d\u4f1a\u8ba1\u5165\u5bf9\u8bdd\u7684\u672a\u8bfb\u6d88\u606f\u8ba1\u6570\u3002 \u7cfb\u7edf\u5e7f\u64ad\u6d88\u606f\u4e00\u4e2a\u5e94\u7528\u4e00\u5929\u6700\u591a\u53d1 30 \u6761","title":"\u9650\u5236"},{"location":"im/im-overview/#_51","text":"\u4e00\u4e2a\u5bf9\u8bdd\uff08\u5305\u62ec\u666e\u901a\u3001\u6682\u6001\u3001\u7cfb\u7edf\u5bf9\u8bdd\uff09\u5982\u679c 1 \u5e74\u5185 \u6ca1\u6709\u901a\u8fc7 SDK \u6216\u8005 REST API \u53d1\u9001\u8fc7\u65b0\u7684\u6d88\u606f\uff0c\u6216\u8005\u5b83\u5728 _Conversation \u8868\u4e2d\u7684\u4efb\u610f\u5b57\u6bb5\u6ca1\u6709\u88ab\u66f4\u65b0\u8fc7\uff0c\u5373\u88ab\u89c6\u4e3a \u4e0d\u6d3b\u8dc3\u5bf9\u8bdd \uff0c\u4e91\u7aef\u4f1a\u81ea\u52a8\u5c06\u5176\u5220\u9664\u3002\uff08\u67e5\u8be2\u5bf9\u8bdd\u7684\u6d88\u606f\u8bb0\u5f55\u5e76\u4e0d\u4f1a\u66f4\u65b0 _Conversation \u8868\uff0c\u6240\u4ee5\u53ea\u67e5\u8be2\u4e0d\u53d1\u9001\u6d88\u606f\u7684\u5bf9\u8bdd\u4ecd\u4f1a\u88ab\u89c6\u4e3a\u4e0d\u6d3b\u8dc3\u5bf9\u8bdd\u3002\uff09 \u4e0d\u6d3b\u8dc3\u7684\u5bf9\u8bdd\u88ab\u5220\u9664\u540e\uff0c\u5f53\u5ba2\u6237\u7aef\u518d\u6b21\u901a\u8fc7 SDK \u6216 REST API \u5bf9\u5176\u53d1\u9001\u6d88\u606f\u65f6\uff0c\u4f1a\u9047\u5230 4401 INVALID_MESSAGING_TARGET \u9519\u8bef\uff0c\u8868\u793a\u8be5\u5bf9\u8bdd\u5df2\u7ecf\u4e0d\u5b58\u5728\u4e86\u3002\u540c\u65f6\uff0c\u4e0e\u8be5\u5bf9\u8bdd\u76f8\u5173\u7684\u6d88\u606f\u5386\u53f2\u4e5f\u65e0\u6cd5\u83b7\u53d6\u3002 \u53cd\u4e4b\uff0c\u6d3b\u8dc3\u7684\u5bf9\u8bdd\u4f1a\u4e00\u76f4\u4fdd\u5b58\u5728\u4e91\u7aef\u3002 \u76f8\u5173\u53c2\u8003 \u6d88\u606f\u7684\u6709\u6548\u671f \u3002","title":"\u5bf9\u8bdd\u7684\u6709\u6548\u671f"},{"location":"im/im-overview/#_52","text":"\u4e00\u4e2a\u5bf9\u8bdd\u7684\u6d88\u606f\u8bb0\u5f55\u4f1a\u5728\u4e91\u7aef\u4fdd\u7559 6 \u4e2a\u6708 \uff0c\u4e5f\u5c31\u662f\u8bf4\u4e00\u4e2a\u5bf9\u8bdd\u53ef\u4ee5\u67e5\u8be2\u5230\u534a\u5e74\u4e4b\u5185\u7684\u5386\u53f2\u6d88\u606f\u8bb0\u5f55\u3002\u5f00\u53d1\u8005\u53ef\u4ee5\u4ed8\u8d39\u6765\u5ef6\u957f\u8fd9\u4e00\u671f\u9650\uff0c\u8bf7\u8054\u7cfb \u3002\u53e6\u5916\u53ef\u4ee5\u53c2\u8003 \u5bf9\u8bdd\u7684\u6709\u6548\u671f \u3002\u4f60\u4e5f\u968f\u65f6\u53ef\u4ee5\u901a\u8fc7 REST API \u5c06\u804a\u5929\u8bb0\u5f55\u540c\u6b65\u5230\u81ea\u5df1\u7684\u670d\u52a1\u5668\u4e0a\u3002","title":"\u6d88\u606f\u7684\u6709\u6548\u671f"},{"location":"im/im-overview/#_53","text":"\u5373\u65f6\u901a\u8baf\u7684\u9519\u8bef\u7801\u4f1a\u4ee5 SDK \u5f02\u5e38\u6216 WebSocket \u5173\u95ed\u72b6\u6001\u7801\u7684\u5f62\u5f0f\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002\u5f53\u51fa\u73b0\u5f02\u5e38\u60c5\u51b5\u65f6\uff0cSDK \u4f1a\u8f93\u51fa\u72b6\u6001\u7801\u5230\u65e5\u5fd7\u91cc\uff0c\u4ee5\u4e0b\u662f\u5bf9\u90e8\u5206\u72b6\u6001\u7801\u7684\u7b80\u5355\u8bf4\u660e\uff1a \u4ee3\u7801 \u6d88\u606f \u8bf4\u660e 0 (\u65e0) WebSocket \u6b63\u5e38\u5173\u95ed\uff0c\u53ef\u80fd\u53d1\u751f\u5728\u670d\u52a1\u5668\u91cd\u542f\uff0c\u6216\u672c\u5730\u7f51\u7edc\u5f02\u5e38\u7684\u60c5\u51b5\u3002SDK \u4f1a\u81ea\u52a8\u91cd\u8fde\uff0c\u65e0\u9700\u4eba\u5de5\u5e72\u9884\u3002 1006 (\u65e0) WebSocket \u8fde\u63a5\u975e\u6b63\u5e38\u5173\u95ed\uff0c\u901a\u5e38\u89c1\u4e8e\u8def\u7531\u5668\u914d\u7f6e\u5bf9\u957f\u8fde\u63a5\u9650\u5236\u7684\u60c5\u51b5\u3002SDK \u4f1a\u81ea\u52a8\u91cd\u8fde\uff0c\u65e0\u9700\u4eba\u5de5\u5e72\u9884\u3002 4100 APP_NOT_AVAILABLE \u5e94\u7528\u4e0d\u5b58\u5728\u6216\u5e94\u7528\u7981\u7528\u4e86\u5373\u65f6\u901a\u8baf\u670d\u52a1\u3002 4101 DUPLICATED_LOGIN \u540c\u4e00\u4e2a\u8bbe\u5907\u91cd\u590d\u767b\u5f55\u63a8\u9001\u670d\u52a1\u3002\u8be5\u9519\u8bef\u7801\u4e0e\u5373\u65f6\u901a\u8baf\u670d\u52a1\u65e0\u5173\u3002 4102 SIGNATURE_FAILED \u767b\u5f55\u7b7e\u540d\u9a8c\u8bc1\u5931\u8d25\u3002 4103 INVALID_LOGIN Client Id \u683c\u5f0f\u9519\u8bef\uff0c\u8d85\u8fc7 64 \u4e2a\u5b57\u7b26\u3002 4105 SESSION_REQUIRED Session \u6ca1\u6709\u6253\u5f00\u5c31\u53d1\u9001\u6d88\u606f\uff0c\u6216\u6267\u884c\u5176\u4ed6\u64cd\u4f5c\u3002\u5e38\u89c1\u7684\u9519\u8bef\u573a\u666f\u662f\u8c03\u7528 open session \u540e\u76f4\u63a5\u53d1\u9001\u6d88\u606f\uff0c\u6b63\u786e\u7684\u7528\u6cd5\u662f\u5728 Session \u6253\u5f00\u7684\u56de\u8c03\u91cc\u6267\u884c\u3002 4107 READ_TIMEOUT \u8bfb\u8d85\u65f6\uff0c\u4e91\u7aef\u957f\u65f6\u95f4\u6ca1\u6709\u6536\u5230\u5ba2\u6237\u7aef\u7684\u6570\u636e\uff0c\u5207\u65ad\u8fde\u63a5\u3002SDK \u5305\u88c5\u4e86\u5fc3\u8df3\u5305\u7684\u673a\u5236\uff0c\u51fa\u73b0\u6b64\u9519\u8bef\u901a\u5e38\u662f\u7f51\u7edc\u95ee\u9898\u3002SDK \u4f1a\u81ea\u52a8\u91cd\u8fde\uff0c\u65e0\u9700\u4eba\u5de5\u5e72\u9884\u3002 4108 LOGIN_TIMEOUT \u767b\u5f55\u8d85\u65f6\uff0c\u8fde\u63a5\u540e\u957f\u65f6\u95f4\u6ca1\u6709\u5b8c\u6210 session open\u3002\u901a\u5e38\u662f\u767b\u5f55\u88ab\u62d2\u7edd\u7b49\u539f\u56e0\uff0c\u51fa\u73b0\u6b64\u95ee\u9898\u53ef\u80fd\u662f\u4f7f\u7528\u65b9\u5f0f\u6709\u8bef\uff0c\u53ef\u4ee5 \u521b\u5efa\u5de5\u5355 \uff0c\u7531\u6211\u4eec\u6280\u672f\u987e\u95ee\u6765\u7ed9\u51fa\u5efa\u8bae\u3002 4109 FRAME_TOO_LONG \u5305\u8fc7\u957f\u3002\u6d88\u606f\u5927\u5c0f\u8d85\u8fc7 5 KB\uff0c\u8bf7\u7f29\u77ed\u6d88\u606f\u6216\u8005\u62c6\u5206\u6d88\u606f\u3002 4110 INVALID_ORIGIN \u8bbe\u7f6e\u5b89\u5168\u57df\u540d\u540e\uff0c\u5f53\u524d\u767b\u5f55\u7684\u57df\u540d\u4e0e\u5b89\u5168\u57df\u540d\u4e0d\u7b26\u5408\u3002 4111 SESSION_CONFLICT \u8bbe\u7f6e\u5355\u8bbe\u5907\u767b\u5f55\u540e\uff0c\u5ba2\u6237\u7aef\u88ab\u5176\u4ed6\u8bbe\u5907\u6324\u4e0b\u7ebf\u3002 4112 SESSION_TOKEN_EXPIRED Session \u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\u3002 4113 APP_QUOTA_EXCEEDED \u5e94\u7528\u5bb9\u91cf\u8d85\u9650\uff0c\u5f53\u5929\u767b\u5f55\u7528\u6237\u6570\u5df2\u7ecf\u8d85\u8fc7\u5e94\u7528\u8bbe\u5b9a\u7684\u6700\u5927\u503c\u3002 4114 UNPARSEABLE_RAW_MESSAGE \u5ba2\u6237\u7aef\u53d1\u9001\u7684\u5e8f\u5217\u5316\u6570\u636e\u670d\u52a1\u5668\u7aef\u65e0\u6cd5\u89e3\u6790\u3002 4115 KICKED_BY_APP \u5ba2\u6237\u7aef\u88ab REST API \u7ba1\u7406\u63a5\u53e3\u5f3a\u5236\u4e0b\u7ebf\u3002 4116 MESSAGE_SENT_QUOTA_EXCEEDED \u5e94\u7528\u5355\u4f4d\u65f6\u95f4\u5185\u53d1\u9001\u6d88\u606f\u91cf\u8d85\u8fc7\u9650\u5236\uff0c\u6d88\u606f\u88ab\u62d2\u7edd\u3002 4200 INTERNAL_ERROR \u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff0c\u5982\u679c\u53cd\u590d\u51fa\u73b0\u8bf7\u6536\u96c6\u76f8\u5173\u7ebf\u7d22\u5e76 \u521b\u5efa\u5de5\u5355 \uff0c\u6211\u4eec\u4f1a\u5c3d\u5feb\u89e3\u51b3\u3002 4201 SEND_MESSAGE_TIMEOUT \u901a\u8fc7 API \u53d1\u9001\u6d88\u606f\u8d85\u65f6\u3002 4301 CONVERSATION_API_FAILED \u4e0a\u6e38 API \u8c03\u7528\u5f02\u5e38\uff0c\u8bf7\u67e5\u770b\u62a5\u9519\u4fe1\u606f\u4e86\u89e3\u9519\u8bef\u8be6\u60c5\u3002 4302 CONVERSATION_SIGNATURE_FAILED \u5bf9\u8bdd\u76f8\u5173\u64cd\u4f5c\u7b7e\u540d\u9519\u8bef 4303 CONVERSATION_NOT_FOUND \u53d1\u9001\u6d88\u606f\uff0c\u6216\u9080\u8bf7\u7b49\u64cd\u4f5c\u5bf9\u5e94\u7684\u5bf9\u8bdd\u4e0d\u5b58\u5728\u3002 4304 CONVERSATION_FULL \u5bf9\u8bdd\u6210\u5458\u5df2\u6ee1\uff0c\u4e0d\u80fd\u518d\u6dfb\u52a0\u3002 4305 CONVERSATION_REJECTED_BY_APP \u5bf9\u8bdd\u64cd\u4f5c\u88ab\u5e94\u7528\u7684\u4e91\u5f15\u64ce Hook \u62d2\u7edd\u3002 4306 CONVERSATION_UPDATE_FAILED \u66f4\u65b0\u5bf9\u8bdd\u64cd\u4f5c\u5931\u8d25\u3002 4307 CONVERSATION_READ_ONLY \u8be5\u5bf9\u8bdd\u4e3a\u53ea\u8bfb\uff0c\u4e0d\u80fd\u66f4\u65b0\u6216\u589e\u5220\u6210\u5458\u3002 4308 CONVERSATION_NOT_ALLOWED \u8be5\u5bf9\u8bdd\u7981\u6b62\u5f53\u524d\u7528\u6237\u53d1\u9001\u6d88\u606f\u3002 4309 CONVERSATION_UPDATE_REJECTED \u66f4\u65b0\u5bf9\u8bdd\u7684\u8bf7\u6c42\u88ab\u62d2\u7edd\uff0c\u5f53\u524d\u7528\u6237\u4e0d\u5728\u5bf9\u8bdd\u4e2d\u3002 4310 CONVERSATION_QUERY_FAILED \u67e5\u8be2\u5bf9\u8bdd\u5931\u8d25\uff0c\u5e38\u89c1\u4e8e\u6162\u67e5\u8be2\u5bfc\u81f4\u7684\u8d85\u65f6\u6216\u53d7\u5176\u4ed6\u6162\u67e5\u8be2\u5bfc\u81f4\u7684\u6570\u636e\u5e93\u54cd\u5e94\u6162\u3002 4311 CONVERSATION_LOG_FAILED \u62c9\u53d6\u5bf9\u8bdd\u6d88\u606f\u8bb0\u5f55\u5931\u8d25\uff0c\u5e38\u89c1\u4e0e\u8d85\u65f6\u7684\u60c5\u51b5\u3002 4312 CONVERSATION_LOG_REJECTED \u62c9\u53d6\u5bf9\u8bdd\u6d88\u606f\u8bb0\u5f55\u88ab\u62d2\u7edd\uff0c\u5f53\u524d\u7528\u6237\u4e0d\u5728\u5bf9\u8bdd\u4e2d\u3002 4313 SYSTEM_CONVERSATION_REQUIRED \u8be5\u529f\u80fd\u4ec5\u5bf9\u7cfb\u7edf\u5bf9\u8bdd\u6709\u6548\u3002 4314 NORMAL_CONVERSATION_REQUIRED \u8be5\u529f\u80fd\u4ec5\u5bf9\u666e\u901a\u5bf9\u8bdd\u6709\u6548\u3002 4315 CONVERSATION_BLACKLISTED \u5f53\u524d\u7528\u6237\u88ab\u52a0\u5165\u6b64\u5bf9\u8bdd\u7684\u9ed1\u540d\u5355\uff0c\u65e0\u6cd5\u53d1\u9001\u6d88\u606f\u3002 4316 TRANSIENT_CONVERSATION_REQUIRED \u8be5\u529f\u80fd\u4ec5\u5bf9\u6682\u6001\u5bf9\u8bdd\u6709\u6548\u3002 4317 CONVERSATION_MEMBERSHIP_REQUIRED \u8be5\u64cd\u4f5c\u8981\u6c42\u7528\u6237\u662f\u5bf9\u8bdd\u6210\u5458\u3002 4318 CONVERSATION_API_QUOTA_EXCEEDED \u5bf9\u8bdd\u64cd\u4f5c\u8d85\u51fa\u4e86 API \u8bf7\u6c42\u9650\u5236\uff0c\u9700\u8981\u63d0\u5347\u5e94\u7528\u7ea7\u522b\u3002 4401 INVALID_MESSAGING_TARGET \u53d1\u9001\u6d88\u606f\u7684\u5bf9\u8bdd\u4e0d\u5b58\u5728\uff0c\u6216\u5f53\u524d\u7528\u6237\u4e0d\u5728\u5bf9\u8bdd\u4e2d\u3002 4402 MESSAGE_REJECTED_BY_APP \u53d1\u9001\u7684\u6d88\u606f\u88ab\u5e94\u7528\u7684\u4e91\u5f15\u64ce Hook \u62d2\u7edd\u3002 4403 MESSAGE_OWNERSHIP_REQUIRED \u6ca1\u6709\u64cd\u4f5c\u76ee\u6807\u6d88\u606f\u7684\u6743\u9650 4404 MESSAGE_NOT_FOUND \u627e\u4e0d\u5230\u88ab\u64cd\u4f5c\u7684\u6d88\u606f","title":"\u4e91\u7aef\u9519\u8bef\u7801\u8bf4\u660e"},{"location":"im/im-overview/#faq","text":"","title":"\u5e38\u89c1\u95ee\u9898 FAQ"},{"location":"im/im-overview/#_54","text":"\u5bf9\u4e8e\u666e\u901a\u5bf9\u8bdd\u7684\u65b0\u6d88\u606f\uff0cLeanCloud \u5373\u65f6\u901a\u8baf\u670d\u52a1\u6709\u9009\u9879\u652f\u6301\u5c06\u6d88\u606f\u4ee5 Push Notification \u7684\u65b9\u5f0f\u901a\u77e5\u5f53\u524d\u4e0d\u5728\u7ebf\u7684\u6210\u5458\uff0c\u4f46\u662f\u6709\u65f6\u5019\uff0c\u8fd9\u79cd\u63a8\u9001\u4f1a\u975e\u5e38\u9891\u7e41\u5bf9\u7528\u6237\u9020\u6210\u5e72\u6270\u3002LeanCloud \u63d0\u4f9b\u9009\u9879\uff0c\u652f\u6301\u8ba9\u5355\u4e2a\u7528\u6237\u5173\u95ed\u7279\u5b9a\u5bf9\u8bdd\u7684\u79bb\u7ebf\u6d88\u606f\u63a8\u9001\u3002\u5177\u4f53\u53ef\u4ee5\u770b\u76f8\u5e94\u5e73\u53f0\u7684\u5f00\u53d1\u6307\u5357\u6587\u6863\u3002","title":"\u8981\u8ba9\u5355\u4e2a\u7fa4\u7ec4\u6d88\u606f\u8fdb\u5165\u300c\u514d\u6253\u6270\u6a21\u5f0f\u300d\uff0c\u8be5\u5982\u4f55\u505a"},{"location":"im/im-overview/#_55","text":"LeanCloud \u5373\u65f6\u901a\u8baf\u670d\u52a1\u662f\u5b8c\u5168\u72ec\u7acb\u7684\u5373\u65f6\u901a\u8baf\u4e1a\u52a1\u62bd\u8c61\uff0c\u4e13\u6ce8\u5728\u5373\u65f6\u901a\u8baf\u672c\u8eab\uff0c\u6240\u4ee5\u5373\u65f6\u901a\u8baf\u7684\u4e1a\u52a1\u903b\u8f91\u4e2d\uff0c\u5e76\u4e0d\u542b\u6709\u597d\u53cb\u5173\u7cfb\uff0c\u4ee5\u53ca\u5bf9\u5e94\u7684\u804a\u5929\u7528\u6237\u6570\u636e\u4fe1\u606f\uff08\u5982\u5934\u50cf\u3001\u540d\u79f0\u7b49\uff09\u3002\u5373\u65f6\u901a\u8baf\u4e0e\u5176\u4ed6\u4e1a\u52a1\u903b\u8f91\u5b8c\u5168\u9694\u79bb\uff0c\u4e0d\u8026\u5408\uff0c\u552f\u4e00\u5173\u8054\u7684\u5c31\u662f clientId\u3002\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\u663e\u800c\u6613\u89c1\u7684\uff0c\u6bd4\u5982\u4f60\u53ef\u4ee5\u5f88\u5bb9\u6613\u8ba9\u533f\u540d\u7528\u6237\u76f4\u63a5\u901a\u4fe1\uff0c\u4f60\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e00\u4e9b\u597d\u53cb\u903b\u8f91\uff0c\u603b\u4e4b\u53ef\u4ee5\u505a\u6210\u56e0\u4e3a\u4efb\u610f\u903b\u8f91\u800c\u5339\u914d\u4ea7\u751f\u7684\u804a\u5929\u884c\u4e3a\u3002 \u5f53\u7136\uff0c\u5982\u679c\u4f60\u60f3\u7ef4\u62a4\u4e00\u5957\u597d\u53cb\u5173\u7cfb\uff0c\u5b8c\u5168\u53ef\u4ee5\u4f7f\u7528\u4f60\u81ea\u5df1\u7684\u903b\u8f91\uff0c\u53ea\u8981\u5b58\u50a8\u7740\u6bcf\u4e2a\u7528\u6237\u5728\u5373\u65f6\u901a\u8baf\u4e2d\u7684 clientId \u5373\u53ef\u3002\u6211\u4eec\u63a8\u8350\u4f7f\u7528 LeanCloud \u7684\u5b58\u50a8\uff0c\u5373 LeanStorage\uff0c\u8fd9\u6837\u53ef\u4ee5\u7ed3\u5408 LeanCloud \u4e2d\u7684 User \u76f8\u5173\u5bf9\u8c61\u6765\u7b80\u5355\u5730\u5b9e\u73b0\u8d26\u6237\u7cfb\u7edf\uff0c\u4ee5\u53ca\u4e0e\u4e4b\u76f8\u5173\u7684\u5b58\u50a8\uff0c\u8be6\u60c5\u53ef\u4ee5\u9605\u8bfb\u5bf9\u5e94\u7684 SDK \u5f00\u53d1\u6307\u5357\u3002","title":"\u804a\u5929\u597d\u53cb\u5173\u7cfb\u5982\u4f55\u5b9e\u73b0"},{"location":"im/im-overview/#_56","text":"\u4e00\u4e2a\u5bf9\u8bdd\u7684\u6d88\u606f\u8bb0\u5f55\u4f1a\u5728\u4e91\u7aef\u4fdd\u7559 6 \u4e2a\u6708 \uff0c\u4e5f\u5c31\u662f\u8bf4\u4e00\u4e2a\u5bf9\u8bdd\u53ef\u4ee5\u67e5\u8be2\u5230\u534a\u5e74\u4e4b\u5185\u7684\u5386\u53f2\u6d88\u606f\u8bb0\u5f55\u3002\u5f00\u53d1\u8005\u53ef\u4ee5\u4ed8\u8d39\u6765\u5ef6\u957f\u8fd9\u4e00\u671f\u9650\uff0c\u8bf7\u8054\u7cfb \u3002\u4f60\u4e5f\u968f\u65f6\u53ef\u4ee5\u901a\u8fc7 REST API \u5c06\u804a\u5929\u8bb0\u5f55\u540c\u6b65\u5230\u81ea\u5df1\u7684\u670d\u52a1\u5668\u4e0a\u3002","title":"\u804a\u5929\u8bb0\u5f55\u7684\u4fdd\u5b58\u65f6\u95f4\u548c\u6761\u6570"},{"location":"im/im-overview/#_57","text":"\u5f53\u51fa\u73b0\u804a\u5929\u6d88\u606f\u6ca1\u6709\u6536\u5230\u7684\u60c5\u51b5\uff0c\u4f60\u53ef\u4ee5\u6309\u7167\u4ee5\u4e0b\u601d\u8def\u6392\u67e5\uff1a \u8c03\u7528\u6d88\u606f\u8bb0\u5f55 API \u67e5\u770b\u6d88\u606f\u662f\u5426\u5230\u8fbe\u4e86\u4e91\u7aef \u5982\u679c\u53ea\u6709\u4e00\u4e2a\u6d88\u606f\u63a5\u6536\u8005\uff0c\u53ef\u4ee5\u68c0\u67e5\u6d88\u606f\u8bb0\u5f55\u4e2d\u5bf9\u5e94\u6761\u76ee\u7684 ack-at \u5b57\u6bb5\u5224\u65ad\u6d88\u606f\u662f\u5426\u5230\u8fbe\u4e86\u5ba2\u6237\u7aef \u5728 \u63a7\u5236\u53f0 \u6d88\u606f \u5b9e\u65f6\u6d88\u606f \u5e2e\u52a9 \u9875\u9762\u7684\u6587\u672c\u6846\u91cc\u8f93\u5165\u5bf9\u5e94\u7684 Client ID\uff0c\u67e5\u770b\u662f\u5426\u5728\u7ebf\uff0c\u4ee5\u53ca\u662f\u5426\u6709\u79bb\u7ebf\u6d88\u606f\u3002","title":"\u804a\u5929\u6d88\u606f\u6ca1\u6709\u6536\u5230"},{"location":"im/im-overview/#iphone","text":"\u8bf7\u5148\u53c2\u8003 \u804a\u5929\u6d88\u606f\u6ca1\u6709\u6536\u5230 \u3002\u5728 \u63a7\u5236\u53f0 \u6d88\u606f \u5b9e\u65f6\u6d88\u606f \u8bbe\u7f6e iOS \u7528\u6237\u79bb\u7ebf\u63a8\u9001\u8bbe\u7f6e \u63a8\u9001\u5185\u5bb9 \u586b\u5199\u300c\u60a8\u6709\u65b0\u7684\u672a\u8bfb\u6d88\u606f\u300d\u540e\uff0c\u5f53\u5bf9\u65b9\u4e0d\u5728\u7ebf\u7684\u65f6\u5019\uff0c\u4fbf\u4f1a\u89e6\u53d1\u4e00\u4e2a APNs \u7684\u63a8\u9001\u3002\u9996\u5148\uff0c\u8bf7\u786e\u4fdd\u63a7\u5236\u53f0\u80fd\u5411 iOS \u63a8\u9001\u6d88\u606f\uff0c\u4e5f\u5373\u5982\u4e0b\u56fe\u6240\u793a\u7684\u63a8\u9001\u80fd\u987a\u5229\u5230\u8fbe iOS \u7cfb\u7edf\uff0c\u8bf7\u53c2\u8003 iOS \u63a8\u9001\u5f00\u53d1\u6587\u6863 \u3002 \u4e4b\u540e\uff0c\u8fd8\u8981\u786e\u4fdd\u5bf9\u65b9\u786e\u5b9e\u662f\u79bb\u7ebf\uff0c\u5982\u679c\u5bf9\u65b9\u7a0b\u5e8f\u5728\u524d\u53f0\u5e76\u4e14\u7f51\u7edc\u826f\u597d\uff0c\u5219\u4e0d\u4f1a\u89e6\u53d1\u63a8\u9001\u3002\u5982\u679c\u5bf9\u65b9\u7f51\u7edc\u672a\u8fde\u63a5\uff0c\u5219\u4e0b\u6b21\u8054\u7f51\u7684\u65f6\u5019\u6536\u5230\u56de\u8c03\uff0c\u4e5f\u4e0d\u89e6\u53d1\u63a8\u9001\u3002\u4e5f\u53ef\u4ee5\u5229\u7528\u63a7\u5236\u53f0\u5b9e\u65f6\u6d88\u606f\u9875\u7684\u7528\u6237\u72b6\u6001\u67e5\u8be2\u6765\u786e\u4fdd\u5bf9\u65b9\u5904\u4e8e\u79bb\u7ebf\u72b6\u6001\uff0c\u5982\u4e0b\u56fe\u3002 \u79bb\u7ebf\u6d88\u606f\u63a8\u9001\u9ed8\u8ba4\u7528\u7684\u662f\u751f\u4ea7\u73af\u5883\u7f16\u8f91\u6846\u91cc\u4e0a\u4f20\u7684\u8bc1\u4e66\u3002\u6240\u4ee5\uff0c\u8c03\u8bd5\u65f6\u53ef\u80fd\u8981\u4e0a\u4f20\u5f00\u53d1\u8bc1\u4e66\uff0c\u5e76\u5728\u63a8\u9001\u5185\u5bb9\u4e2d\u8bbe\u7f6e _profile \u5c5e\u6027\u6765\u9009\u62e9\u5f00\u53d1\u8bc1\u4e66\u63a8\u9001\uff0c\u5982 { alert : \u4f60\u6709\u4e00\u6761\u672a\u8bfb\u6d88\u606f , _profile : dev } \u68c0\u67e5\u65b9\u6cd5\u603b\u7ed3\u5982\u4e0b\uff1a \u68c0\u67e5 _Installation \u8868\u4e2d\u662f\u5426\u6709\u8bbe\u5907\u8ba2\u9605\u4e86\u5bf9\u5e94\u7684 Client ID \u68c0\u67e5\u666e\u901a\u7684 iOS \u63a8\u9001\u662f\u5426\u5230\u8fbe \u68c0\u67e5\u8bc1\u4e66\u8bbe\u7f6e \u5728\u63a7\u5236\u53f0\u68c0\u67e5\u63a5\u6536\u65b9\u662f\u5426\u5728\u79bb\u7ebf\u72b6\u6001","title":"\u4e3a\u4ec0\u4e48\u6211\u7684 iPhone \u6536\u4e0d\u5230\u79bb\u7ebf\u6d88\u606f\u63a8\u9001"},{"location":"im/im-overview/#android_1","text":"\u53ef\u80fd\u4f1a\uff0c\u53d6\u51b3\u4e8e\u8bc1\u4e66\u7684\u65f6\u95f4\u3002\u5f53\u9519\u8bef\u7684\u7cfb\u7edf\u65f6\u95f4\u548c\u5f53\u524d\u65f6\u95f4\u7684\u8bef\u5dee\uff0c\u5927\u4e8e\u8bc1\u4e66\u7684\u6709\u6548\u65f6\u95f4\uff0c\u5c31\u4f1a\u5bfc\u81f4 SSL \u63e1\u624b\u5931\u8d25\uff0c\u8fdb\u800c\u8ba9\u5373\u65f6\u901a\u8baf\u670d\u52a1\u6574\u4f53\u4e0d\u53ef\u7528\u3002","title":"Android \u8bbe\u5907\u7cfb\u7edf\u65f6\u95f4\u4e0d\u51c6\uff0c\u4f1a\u5f71\u54cd\u5373\u65f6\u901a\u8baf\u670d\u52a1\u5417\uff1f"},{"location":"push/android-mixpush/","text":"","title":"Android \u6df7\u5408\u63a8\u9001"},{"location":"push/apns-cert/","text":"","title":"APNS \u8bc1\u4e66\u914d\u7f6e"},{"location":"push/push-overview/","text":"","title":"\u670d\u52a1\u603b\u89c8"},{"location":"sdk-setup/","text":"","title":"Home"},{"location":"sdk-setup/android/","text":"Android SDK \u5b89\u88c5\u6307\u5357 \u83b7\u53d6 SDK \u83b7\u53d6 SDK \u6709\u591a\u79cd\u65b9\u5f0f\uff0c\u8f83\u4e3a\u63a8\u8350\u7684\u65b9\u5f0f\u662f\u901a\u8fc7\u5305\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u3002 \u5305\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u5b89\u88c5 Gradle Gradle \u662f Google \u5b98\u65b9\u63a8\u8350\u7684\u6784\u5efa Android \u7a0b\u5e8f\u7684\u5de5\u5177\uff0c\u4f7f\u7528 Android Studio \u8fdb\u884c\u5f00\u53d1\u7684\u65f6\u5019\uff0c\u5b83\u4f1a\u81ea\u52a8\u5728\u65b0\u5efa\u7684\u9879\u76ee\u4e2d\u5305\u542b\u4e00\u4e2a\u81ea\u5e26\u7684\u547d\u4ee4\u884c\u5de5\u5177 gradlew \u3002\u6211\u4eec\u63a8\u8350\u5f00\u53d1\u8005\u4f7f\u7528\u8fd9\u4e2a\u81ea\u5e26\u7684\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u8fd9\u662f\u56e0\u4e3a Gradle \u5b58\u5728\u7248\u672c\u517c\u5bb9\u7684\u95ee\u9898\uff0c\u5f88\u591a\u5f00\u53d1\u8005\u5373\u4f7f\u6b63\u786e\u914d\u7f6e\u4e86 Gradle \u811a\u672c\uff0c\u4f46\u7531\u4e8e\u4f7f\u7528\u4e86\u6700\u65b0\u7248\u672c\u6216\u4e0d\u517c\u5bb9\u7684 Gradle \u7248\u672c\u800c\u4ecd\u7136\u65e0\u6cd5\u6210\u529f\u52a0\u8f7d\u4f9d\u8d56\u5305\u3002 Android Studio \u4f7f\u7528 Android Studio \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u9879\u76ee\u7684\u65f6\u5019\uff0c\u5b83\u7684\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\uff1a . \u251c\u2500\u2500 app // \u5e94\u7528\u6e90\u4ee3\u7801 \u251c\u2500\u2500 ... \u251c\u2500\u2500 build.gradle // \u5e94\u7528 Gradle \u6784\u5efa\u811a\u672c \u251c\u2500\u2500 ... \u251c\u2500\u2500 build.gradle // \u9879\u76ee Gradle \u6784\u5efa\u811a\u672c \u251c\u2500\u2500 YOUR-APP-NAME.iml // YOUR-APP-NAME \u4e3a\u4f60\u7684\u5e94\u7528\u540d\u79f0 \u251c\u2500\u2500 gradle \u2514\u2500\u2500 settings.gradle \u9996\u5148\u6253\u5f00\u6839\u76ee\u5f55\u4e0b\u7684 build.gradle \u8fdb\u884c\u5982\u4e0b\u6807\u51c6\u914d\u7f6e\uff1a buildscript { repositories { jcenter() //\u8fd9\u91cc\u662f LeanCloud \u7684\u5305\u4ed3\u5e93 maven { url \"http://mvn.leancloud.cn/nexus/content/repositories/public\" } } dependencies { classpath 'com.android.tools.build:gradle:1.0.0' } } allprojects { repositories { jcenter() //\u8fd9\u91cc\u662f LeanCloud \u7684\u5305\u4ed3\u5e93 maven { url \"http://mvn.leancloud.cn/nexus/content/repositories/public\" } } } \u7136\u540e\u6253\u5f00 app \u76ee\u5f55\u4e0b\u7684 build.gradle \u8fdb\u884c\u5982\u4e0b\u914d\u7f6e\uff1a android { //\u4e3a\u4e86\u89e3\u51b3\u90e8\u5206\u7b2c\u4e09\u65b9\u5e93\u91cd\u590d\u6253\u5305\u4e86META-INF\u7684\u95ee\u9898 packagingOptions{ exclude META-INF/LICENSE.txt exclude META-INF/NOTICE.txt } lintOptions { abortOnError false } } dependencies { compile ( com.android.support:support-v4:21.0.3 ) // LeanCloud \u57fa\u7840\u5305 compile ( cn.leancloud.android:avoscloud-sdk:v4.7.3 ) // \u63a8\u9001\u4e0e\u5373\u65f6\u901a\u8baf\u9700\u8981\u7684\u5305 compile ( cn.leancloud.android:avoscloud-push:v4.7.3@aar ){transitive = true} // LeanCloud \u7edf\u8ba1\u5305 compile ( cn.leancloud.android:avoscloud-statistics:v4.7.3 ) // LeanCloud \u7528\u6237\u53cd\u9988\u5305 compile ( cn.leancloud.android:avoscloud-feedback:v4.7.3@aar ) // avoscloud-sns\uff1aLeanCloud \u7b2c\u4e09\u65b9\u767b\u5f55\u5305 compile ( cn.leancloud.android:avoscloud-sns:v4.7.3@aar ) compile ( cn.leancloud.android:qq-sdk:1.6.1-leancloud ) // \u65b0\u6d6a\u5fae\u535a SDK compile( com.sina.weibo.sdk:core:4.1.4:openDefaultRelease@aar ) // LeanCloud \u5e94\u7528\u5185\u641c\u7d22\u5305 compile ( cn.leancloud.android:avoscloud-search:v4.7.3@aar ) } \u6211\u4eec\u5df2\u7ecf\u63d0\u4f9b\u4e86\u5b98\u65b9\u7684 maven \u4ed3\u5e93 \uff0c\u63a8\u8350\u5927\u5bb6\u4f7f\u7528\u3002 Eclipse Eclipse \u7528\u6237\u9996\u5148 \u4e0b\u8f7d SDK \uff0c\u7136\u540e\u6309\u7167 \u624b\u52a8\u5b89\u88c5\u6b65\u9aa4 \u5c06 SDK \u5bfc\u5165\u5230\u9879\u76ee\u91cc\u3002 \u624b\u52a8\u5b89\u88c5 \u4e0b\u8f7d SDK \u5bf9\u7167\u4ee5\u4e0b\u5305\u6587\u4ef6\u53ca\u5176\u5bf9\u5e94\u7684\u529f\u80fd\u6a21\u5757\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u81ea\u884c \u7f16\u8bd1\u6e90\u4ee3\u7801 \u6765\u5f97\u5230\u6240\u9700\u7684\u5305\u6587\u4ef6\u3002 \u251c\u2500\u2500 avoscloud-feedback-v4.7.3.zip // LeanCloud \u7528\u6237\u53cd\u9988\u6a21\u5757 \u251c\u2500\u2500 avoscloud-push-v4.7.3.jar // LeanCloud \u63a8\u9001\u6a21\u5757\u548c\u5373\u65f6\u901a\u8baf\u6a21\u5757 \u251c\u2500\u2500 avoscloud-sdk-v4.7.3.jar // LeanCloud \u57fa\u672c\u5b58\u50a8\u6a21\u5757 \u251c\u2500\u2500 avoscloud-search-v4.7.3.zip // LeanCloud \u5e94\u7528\u5185\u641c\u7d22\u6a21\u5757 \u251c\u2500\u2500 avoscloud-sns-v4.7.3.zip // LeanCloud SNS \u6a21\u5757 \u251c\u2500\u2500 avoscloud-statistics-v4.7.3.jar // LeanCloud \u7edf\u8ba1\u6a21\u5757 \u251c\u2500\u2500 fastjson-1.2.37.jar // LeanCloud \u57fa\u672c\u5b58\u50a8\u6a21\u5757 \u251c\u2500\u2500 Java-WebSocket-1.3.2-leancloud.jar // LeanCloud \u63a8\u9001\u6a21\u5757\u548c\u5373\u65f6\u901a\u8baf\u6a21\u5757 \u251c\u2500\u2500 protobuf-java-3.4.0.jar // LeanCloud \u63a8\u9001\u6a21\u5757\u548c\u5373\u65f6\u901a\u8baf\u6a21\u5757 \u251c\u2500\u2500 okhttp-3.8.0.jar // LeanCloud \u57fa\u672c\u5b58\u50a8\u6a21\u5757 \u251c\u2500\u2500 okio-1.13.0.jar // LeanCloud \u57fa\u672c\u5b58\u50a8\u6a21\u5757 \u251c\u2500\u2500 qq.sdk.1.6.1.jar // LeanCloud SNS \u6a21\u5757 \u2514\u2500\u2500 weibo.sdk.android.sso.3.0.1-leancloud.jar // LeanCloud SNS \u6a21\u5757 LeanCloud \u57fa\u672c\u5b58\u50a8\u6a21\u5757 avoscloud-v4.7.3.jar okhttp-3.8.0.jar okio-1.13.0.jar fastjson-1.2.37.jar LeanCloud \u63a8\u9001\u6a21\u5757\u548c\u5373\u65f6\u901a\u8baf\u6a21\u5757 LeanCloud \u57fa\u7840\u5b58\u50a8\u6a21\u5757 avospush-v4.7.3.jar Java-WebSocket-1.3.2-leancloud.jar protobuf-java-3.4.0.jar LeanCloud \u7edf\u8ba1\u6a21\u5757 LeanCloud \u57fa\u7840\u5b58\u50a8\u6a21\u5757 avosstatistics-v4.7.3.jar LeanCloud SNS \u6a21\u5757 LeanCloud \u57fa\u7840\u5b58\u50a8\u6a21\u5757 weibo.sdk.android.sso.jar qq.sdk.1.6.1.jar \u6211\u4eec\u63d0\u4f9b\u7684\u4e0b\u8f7d\u5305\u91cc\u5305\u542b\u4e86\u5fc5\u987b\u7684\u4f9d\u8d56\u5e93\uff0c\u81ea\u5df1\u4e0b\u8f7d\u5b98\u65b9\u5e93\u4e5f\u53ef\u4ee5\uff0c\u4e0d\u8fc7\u8bf7\u786e\u4fdd\u7248\u672c\u4e00\u81f4\u3002 \u6ce8\u610f\uff1a\u5982\u679c\u9700\u8981\u4f7f\u7528\u7f8e\u56fd\u7ad9\u70b9\uff0c\u5e76\u4e14 SDK \u7248\u672c\u662f 3.3 \u53ca\u4ee5\u4e0a\uff0c\u5219\u4e0d\u9700\u8981\u5f15\u5165 SSL \u8bc1\u4e66\u3002\u5176\u4ed6\u4f4e\u7248\u672c\u7684\u7528\u6237\uff0c\u9700\u8981\u4e0b\u8f7d SSL \u8bc1\u4e66 \uff0c\u5c06\u5176\u62f7\u8d1d\u5230\u9879\u76ee\u7684 res/raw/ \u4e4b\u4e0b\u3002 Android Studio \u9996\u5148\u672c\u5730\u5df2\u7ecf\u4e0b\u8f7d\u597d\u4e86\u9879\u76ee\u9700\u8981\u7684 SDK \u5305\uff0c\u7136\u540e\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u5bfc\u5165\uff1a \u6253\u5f00 File Project Structure Modules \u5bf9\u8bdd\u6846\uff0c\u70b9\u51fb Dependencies \uff1b \u70b9\u51fb\u4e0b\u65b9\u7684 + \uff08\u52a0\u53f7\uff09\uff0c\u9009\u62e9\u8981\u5bfc\u5165\u7684 SDK \u5305\uff08xxxx.jar\uff09\uff0c\u8bb0\u5f97 Scope \u9009\u4e3a Compile \uff1b \u91cd\u590d\u7b2c 2 \u6b65\uff0c\u76f4\u5230\u6240\u6709\u9700\u8981\u7684\u5305\u5747\u5df2\u6b63\u786e\u5bfc\u5165\u3002 Eclipse \u7684\u5bfc\u5165\u4e0e\u4e00\u822c\u7684 jar \u5bfc\u5165\u65e0\u672c\u8d28\u533a\u522b\uff0c\u56e0\u6b64\u4e0d\u518d\u8d58\u8ff0\u3002 \u521d\u59cb\u5316 \u9996\u5148\u8fdb\u5165 \u63a7\u5236\u53f0 \u8bbe\u7f6e \u5e94\u7528 Key \u6765\u83b7\u53d6 App ID \u4ee5\u53ca App Key\u3002 \u7136\u540e\u65b0\u5efa\u4e00\u4e2a Java Class \uff0c\u540d\u5b57\u53eb\u505a MyLeanCloudApp ,\u8ba9\u5b83\u7ee7\u627f\u81ea Application \u7c7b\uff0c\u5b9e\u4f8b\u4ee3\u7801\u5982\u4e0b: public class MyLeanCloudApp extends Application { @Override public void onCreate () { super . onCreate (); // \u521d\u59cb\u5316\u53c2\u6570\u4f9d\u6b21\u4e3a this, AppId, AppKey AVOSCloud . initialize ( this , {{appid}} , {{appkey}} ); } } \u5c06\u4e0a\u8ff0\u4ee3\u7801\u4e2d\u7684 App ID \u4ee5\u53ca App Key \u66ff\u6362\u6210\u4ece\u63a7\u5236\u53f0\u590d\u5236\u7c98\u8d34\u7684\u5bf9\u5e94\u7684\u6570\u636e\u5373\u53ef\u3002 \u7136\u540e\u6253\u5f00 AndroidManifest.xml \u6587\u4ef6\u6765\u914d\u7f6e SDK \u6240\u9700\u8981\u7684\u624b\u673a\u7684\u8bbf\u95ee\u6743\u9650\u4ee5\u53ca\u58f0\u660e\u521a\u624d\u6211\u4eec\u521b\u5efa\u7684 MyLeanCloudApp \u7c7b\uff1a !-- \u57fa\u7840\u6a21\u5757\uff08\u5fc5\u987b\u52a0\u5165\u4ee5\u4e0b\u58f0\u660e\uff09START -- uses-permission android:name= android.permission.WRITE_EXTERNAL_STORAGE / uses-permission android:name= android.permission.INTERNET / uses-permission android:name= android.permission.ACCESS_NETWORK_STATE / uses-permission android:name= android.permission.READ_PHONE_STATE / uses-permission android:name= android.permission.ACCESS_WIFI_STATE / !-- \u57fa\u7840\u6a21\u5757 END -- application ... android:name= .MyLeanCloudApp !-- \u5373\u65f6\u901a\u8baf\u6a21\u5757\u3001\u63a8\u9001\uff08\u5747\u9700\u8981\u52a0\u5165\u4ee5\u4e0b\u58f0\u660e\uff09 START -- !-- \u5373\u65f6\u901a\u8baf\u6a21\u5757\u3001\u63a8\u9001\u90fd\u8981\u4f7f\u7528 PushService -- service android:name= com.avos.avoscloud.PushService / receiver android:name= com.avos.avoscloud.AVBroadcastReceiver intent-filter action android:name= android.intent.action.BOOT_COMPLETED / action android:name= android.intent.action.USER_PRESENT / action android:name= android.net.conn.CONNECTIVITY_CHANGE / /intent-filter /receiver !-- \u5373\u65f6\u901a\u8baf\u6a21\u5757\u3001\u63a8\u9001 END -- !-- \u53cd\u9988\u7ec4\u4ef6\uff08\u9700\u8981\u52a0\u5165\u4ee5\u4e0b\u58f0\u660e\uff09START -- activity android:name= com.avos.avoscloud.feedback.ThreadActivity /activity !-- \u53cd\u9988\u7ec4\u4ef6 END -- /application \u5f00\u542f\u8c03\u8bd5\u65e5\u5fd7 \u5728\u5e94\u7528\u5f00\u53d1\u9636\u6bb5\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u5f00\u542f SDK \u7684\u8c03\u8bd5\u65e5\u5fd7\uff08debug log\uff09\u6765\u65b9\u4fbf\u8ffd\u8e2a\u95ee\u9898\u3002\u8c03\u8bd5\u65e5\u5fd7\u5f00\u542f\u540e\uff0cSDK \u4f1a\u628a\u7f51\u7edc\u8bf7\u6c42\u3001\u9519\u8bef\u6d88\u606f\u7b49\u4fe1\u606f\u8f93\u51fa\u5230 IDE \u7684\u65e5\u5fd7\u7a97\u53e3\uff0c\u6216\u662f\u6d4f\u89c8\u5668 Console \u6216\u662f LeanCloud \u63a7\u5236\u53f0\u7684 \u4e91\u5f15\u64ce\u65e5\u5fd7 \u4e2d\u3002 // \u653e\u5728 SDK \u521d\u59cb\u5316\u8bed\u53e5 AVOSCloud.initialize() \u540e\u9762\uff0c\u53ea\u9700\u8981\u8c03\u7528\u4e00\u6b21\u5373\u53ef AVOSCloud . setDebugLogEnabled ( true ); \u5728\u5e94\u7528\u53d1\u5e03\u4e4b\u524d\uff0c\u8bf7\u5173\u95ed\u8c03\u8bd5\u65e5\u5fd7\uff0c\u4ee5\u514d\u66b4\u9732\u654f\u611f\u6570\u636e\u3002 \u542f\u7528\u6307\u5b9a\u8282\u70b9 SDK \u7684\u521d\u59cb\u5316\u65b9\u6cd5\u9ed8\u8ba4\u4f7f\u7528 \u4e2d\u56fd\u5927\u9646\u8282\u70b9 \uff0c\u5982\u9700\u5207\u6362\u5230 \u5176\u4ed6\u53ef\u7528\u8282\u70b9 \uff0c\u8bf7\u53c2\u8003\u5982\u4e0b\u7528\u6cd5\uff1a public class MyLeanCloudApp extends Application { @Override public void onCreate () { super . onCreate (); // \u542f\u7528\u5317\u7f8e\u8282\u70b9, \u9700\u8981\u5728 initialize \u4e4b\u524d\u8c03\u7528 AVOSCloud . useAVCloudUS (); // \u521d\u59cb\u5316\u53c2\u6570\u4f9d\u6b21\u4e3a this, AppId, AppKey AVOSCloud . initialize ( this , {{appid}} , {{appkey}} ); } } \u5168\u7403\u8282\u70b9 \u4e2d\u56fd\u5927\u9646\u8282\u70b9 leancloud.cn \uff08SDK \u521d\u59cb\u5316\u65b9\u6cd5 \u9ed8\u8ba4 \u4f7f\u7528\u8be5\u8282\u70b9\uff09 \u5317\u7f8e\u8282\u70b9 us.leancloud.cn \uff08\u670d\u52a1\u5317\u7f8e\u5e02\u573a\uff09 \u5404\u4e2a\u8282\u70b9\u5f7c\u6b64\u72ec\u7acb\uff0c\u5f00\u53d1\u8005\u8d26\u53f7\u65e0\u6cd5\u8de8\u8282\u70b9\u6765\u521b\u5efa\u5e94\u7528\u6216\u8c03\u7528 API\u3002 \u9a8c\u8bc1 \u9996\u5148\uff0c\u786e\u8ba4\u672c\u5730\u7f51\u7edc\u73af\u5883\u662f\u53ef\u4ee5\u8bbf\u95ee LeanCloud \u670d\u52a1\u5668\u7684\uff0c\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u884c\uff1a ping {{domainN1}} \u5982\u679c\u5f53\u524d\u7f51\u8def\u6b63\u5e38\u5c06\u4f1a\u5f97\u5230\u5982\u4e0b\u54cd\u5e94\uff1a PING api-ucloud.leancloud.cn ( 123 .59.41.31 ) : 56 data bytes 64 bytes from 123 .59.41.31: icmp_seq = 0 ttl = 51 time = 9 .032 ms 64 bytes from 123 .59.41.31: icmp_seq = 1 ttl = 51 time = 7 .290 ms 64 bytes from 123 .59.41.31: icmp_seq = 2 ttl = 51 time = 8 .131 ms 64 bytes from 123 .59.41.31: icmp_seq = 3 ttl = 51 time = 9 .689 ms 64 bytes from 123 .59.41.31: icmp_seq = 4 ttl = 51 time = 6 .559 ms 64 bytes from 123 .59.41.31: icmp_seq = 5 ttl = 51 time = 8 .665 ms 64 bytes from 123 .59.41.31: icmp_seq = 6 ttl = 51 time = 8 .041 ms 64 bytes from 123 .59.41.31: icmp_seq = 7 ttl = 51 time = 8 .203 ms 64 bytes from 123 .59.41.31: icmp_seq = 8 ttl = 51 time = 6 .288 ms 64 bytes from 123 .59.41.31: icmp_seq = 9 ttl = 51 time = 7 .938 ms --- api-ucloud.leancloud.cn ping statistics --- 10 packets transmitted, 10 packets received, 0 .0% packet loss round-trip min/avg/max/stddev = 6 .288/7.984/9.689/0.997 ms \u7136\u540e\u5728\u9879\u76ee\u4e2d\u7f16\u5199\u5982\u4e0b\u6d4b\u8bd5\u4ee3\u7801\uff1a \u5728 MainActivity.java \u4e2d\u7684 onCreate \u65b9\u6cd5\u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801\uff1a @Override protected void onCreate ( Bundle savedInstanceState ) { super . onCreate ( savedInstanceState ); setContentView ( R . layout . activity_main ); ... // \u6d4b\u8bd5 SDK \u662f\u5426\u6b63\u5e38\u5de5\u4f5c\u7684\u4ee3\u7801 AVObject testObject = new AVObject ( TestObject ); testObject . put ( words , Hello World! ); testObject . saveInBackground ( new SaveCallback () { @Override public void done ( AVException e ) { if ( e == null ){ Log . d ( saved , success! ); } } }); ... } \u7136\u540e\uff0c\u70b9\u51fb Run \u8fd0\u884c\u8c03\u8bd5\uff0c\u771f\u673a\u548c\u865a\u62df\u673a\u5747\u53ef\u3002 \u7136\u540e\u6253\u5f00 \u63a7\u5236\u53f0 \u5b58\u50a8 \u6570\u636e TestObject \uff0c\u5982\u679c\u770b\u5230\u5982\u4e0b\u5185\u5bb9\uff0c\u8bf4\u660e SDK \u5df2\u7ecf\u6b63\u786e\u5730\u6267\u884c\u4e86\u4e0a\u8ff0\u4ee3\u7801\uff0c\u5b89\u88c5\u5b8c\u6bd5\u3002 \u5982\u679c\u63a7\u5236\u53f0\u6ca1\u6709\u53d1\u73b0\u5bf9\u5e94\u7684\u6570\u636e\uff0c\u8bf7\u53c2\u8003 \u95ee\u9898\u6392\u67e5 \u3002 \u95ee\u9898\u6392\u67e5 401 Unauthorized \u5982\u679c SDK \u629b\u51fa 401 \u5f02\u5e38\u6216\u8005\u67e5\u770b\u672c\u5730\u7f51\u7edc\u8bbf\u95ee\u65e5\u5fd7\u5b58\u5728\uff1a { code : 401 , error : Unauthorized. } \u5219\u53ef\u8ba4\u5b9a\u4e3a App ID \u6216\u8005 App Key \u8f93\u5165\u6709\u8bef\uff0c\u6216\u8005\u662f\u4e0d\u5339\u914d\uff0c\u5f88\u591a\u5f00\u53d1\u8005\u540c\u65f6\u6ce8\u518c\u4e86\u591a\u4e2a\u5e94\u7528\uff0c\u5bfc\u81f4\u62f7\u8d1d\u7c98\u8d34\u7684\u65f6\u5019\uff0c\u7528 A \u5e94\u7528\u7684 App ID \u5339\u914d B \u5e94\u7528\u7684 App Key\uff0c\u8fd9\u6837\u5c31\u4f1a\u51fa\u73b0\u670d\u52a1\u7aef\u9274\u6743\u5931\u8d25\u7684\u9519\u8bef\u3002 \u5ba2\u6237\u7aef\u65e0\u6cd5\u8bbf\u95ee\u7f51\u7edc \u5ba2\u6237\u7aef\u5c24\u5176\u662f\u624b\u673a\u7aef\uff0c\u5e94\u7528\u5728\u8bbf\u95ee\u7f51\u7edc\u7684\u65f6\u5019\u9700\u8981\u7533\u8bf7\u4e00\u5b9a\u7684\u6743\u9650\u3002","title":"Android SDK \u5b89\u88c5\u6307\u5357"},{"location":"sdk-setup/android/#android-sdk","text":"","title":"Android SDK \u5b89\u88c5\u6307\u5357"},{"location":"sdk-setup/android/#sdk","text":"\u83b7\u53d6 SDK \u6709\u591a\u79cd\u65b9\u5f0f\uff0c\u8f83\u4e3a\u63a8\u8350\u7684\u65b9\u5f0f\u662f\u901a\u8fc7\u5305\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u3002","title":"\u83b7\u53d6 SDK"},{"location":"sdk-setup/android/#_1","text":"","title":"\u5305\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u5b89\u88c5"},{"location":"sdk-setup/android/#gradle","text":"Gradle \u662f Google \u5b98\u65b9\u63a8\u8350\u7684\u6784\u5efa Android \u7a0b\u5e8f\u7684\u5de5\u5177\uff0c\u4f7f\u7528 Android Studio \u8fdb\u884c\u5f00\u53d1\u7684\u65f6\u5019\uff0c\u5b83\u4f1a\u81ea\u52a8\u5728\u65b0\u5efa\u7684\u9879\u76ee\u4e2d\u5305\u542b\u4e00\u4e2a\u81ea\u5e26\u7684\u547d\u4ee4\u884c\u5de5\u5177 gradlew \u3002\u6211\u4eec\u63a8\u8350\u5f00\u53d1\u8005\u4f7f\u7528\u8fd9\u4e2a\u81ea\u5e26\u7684\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u8fd9\u662f\u56e0\u4e3a Gradle \u5b58\u5728\u7248\u672c\u517c\u5bb9\u7684\u95ee\u9898\uff0c\u5f88\u591a\u5f00\u53d1\u8005\u5373\u4f7f\u6b63\u786e\u914d\u7f6e\u4e86 Gradle \u811a\u672c\uff0c\u4f46\u7531\u4e8e\u4f7f\u7528\u4e86\u6700\u65b0\u7248\u672c\u6216\u4e0d\u517c\u5bb9\u7684 Gradle \u7248\u672c\u800c\u4ecd\u7136\u65e0\u6cd5\u6210\u529f\u52a0\u8f7d\u4f9d\u8d56\u5305\u3002","title":"Gradle"},{"location":"sdk-setup/android/#android-studio","text":"\u4f7f\u7528 Android Studio \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u9879\u76ee\u7684\u65f6\u5019\uff0c\u5b83\u7684\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\uff1a . \u251c\u2500\u2500 app // \u5e94\u7528\u6e90\u4ee3\u7801 \u251c\u2500\u2500 ... \u251c\u2500\u2500 build.gradle // \u5e94\u7528 Gradle \u6784\u5efa\u811a\u672c \u251c\u2500\u2500 ... \u251c\u2500\u2500 build.gradle // \u9879\u76ee Gradle \u6784\u5efa\u811a\u672c \u251c\u2500\u2500 YOUR-APP-NAME.iml // YOUR-APP-NAME \u4e3a\u4f60\u7684\u5e94\u7528\u540d\u79f0 \u251c\u2500\u2500 gradle \u2514\u2500\u2500 settings.gradle \u9996\u5148\u6253\u5f00\u6839\u76ee\u5f55\u4e0b\u7684 build.gradle \u8fdb\u884c\u5982\u4e0b\u6807\u51c6\u914d\u7f6e\uff1a buildscript { repositories { jcenter() //\u8fd9\u91cc\u662f LeanCloud \u7684\u5305\u4ed3\u5e93 maven { url \"http://mvn.leancloud.cn/nexus/content/repositories/public\" } } dependencies { classpath 'com.android.tools.build:gradle:1.0.0' } } allprojects { repositories { jcenter() //\u8fd9\u91cc\u662f LeanCloud \u7684\u5305\u4ed3\u5e93 maven { url \"http://mvn.leancloud.cn/nexus/content/repositories/public\" } } } \u7136\u540e\u6253\u5f00 app \u76ee\u5f55\u4e0b\u7684 build.gradle \u8fdb\u884c\u5982\u4e0b\u914d\u7f6e\uff1a android { //\u4e3a\u4e86\u89e3\u51b3\u90e8\u5206\u7b2c\u4e09\u65b9\u5e93\u91cd\u590d\u6253\u5305\u4e86META-INF\u7684\u95ee\u9898 packagingOptions{ exclude META-INF/LICENSE.txt exclude META-INF/NOTICE.txt } lintOptions { abortOnError false } } dependencies { compile ( com.android.support:support-v4:21.0.3 ) // LeanCloud \u57fa\u7840\u5305 compile ( cn.leancloud.android:avoscloud-sdk:v4.7.3 ) // \u63a8\u9001\u4e0e\u5373\u65f6\u901a\u8baf\u9700\u8981\u7684\u5305 compile ( cn.leancloud.android:avoscloud-push:v4.7.3@aar ){transitive = true} // LeanCloud \u7edf\u8ba1\u5305 compile ( cn.leancloud.android:avoscloud-statistics:v4.7.3 ) // LeanCloud \u7528\u6237\u53cd\u9988\u5305 compile ( cn.leancloud.android:avoscloud-feedback:v4.7.3@aar ) // avoscloud-sns\uff1aLeanCloud \u7b2c\u4e09\u65b9\u767b\u5f55\u5305 compile ( cn.leancloud.android:avoscloud-sns:v4.7.3@aar ) compile ( cn.leancloud.android:qq-sdk:1.6.1-leancloud ) // \u65b0\u6d6a\u5fae\u535a SDK compile( com.sina.weibo.sdk:core:4.1.4:openDefaultRelease@aar ) // LeanCloud \u5e94\u7528\u5185\u641c\u7d22\u5305 compile ( cn.leancloud.android:avoscloud-search:v4.7.3@aar ) } \u6211\u4eec\u5df2\u7ecf\u63d0\u4f9b\u4e86\u5b98\u65b9\u7684 maven \u4ed3\u5e93 \uff0c\u63a8\u8350\u5927\u5bb6\u4f7f\u7528\u3002","title":"Android Studio"},{"location":"sdk-setup/android/#eclipse","text":"Eclipse \u7528\u6237\u9996\u5148 \u4e0b\u8f7d SDK \uff0c\u7136\u540e\u6309\u7167 \u624b\u52a8\u5b89\u88c5\u6b65\u9aa4 \u5c06 SDK \u5bfc\u5165\u5230\u9879\u76ee\u91cc\u3002","title":"Eclipse"},{"location":"sdk-setup/android/#_2","text":"\u4e0b\u8f7d SDK \u5bf9\u7167\u4ee5\u4e0b\u5305\u6587\u4ef6\u53ca\u5176\u5bf9\u5e94\u7684\u529f\u80fd\u6a21\u5757\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u81ea\u884c \u7f16\u8bd1\u6e90\u4ee3\u7801 \u6765\u5f97\u5230\u6240\u9700\u7684\u5305\u6587\u4ef6\u3002 \u251c\u2500\u2500 avoscloud-feedback-v4.7.3.zip // LeanCloud \u7528\u6237\u53cd\u9988\u6a21\u5757 \u251c\u2500\u2500 avoscloud-push-v4.7.3.jar // LeanCloud \u63a8\u9001\u6a21\u5757\u548c\u5373\u65f6\u901a\u8baf\u6a21\u5757 \u251c\u2500\u2500 avoscloud-sdk-v4.7.3.jar // LeanCloud \u57fa\u672c\u5b58\u50a8\u6a21\u5757 \u251c\u2500\u2500 avoscloud-search-v4.7.3.zip // LeanCloud \u5e94\u7528\u5185\u641c\u7d22\u6a21\u5757 \u251c\u2500\u2500 avoscloud-sns-v4.7.3.zip // LeanCloud SNS \u6a21\u5757 \u251c\u2500\u2500 avoscloud-statistics-v4.7.3.jar // LeanCloud \u7edf\u8ba1\u6a21\u5757 \u251c\u2500\u2500 fastjson-1.2.37.jar // LeanCloud \u57fa\u672c\u5b58\u50a8\u6a21\u5757 \u251c\u2500\u2500 Java-WebSocket-1.3.2-leancloud.jar // LeanCloud \u63a8\u9001\u6a21\u5757\u548c\u5373\u65f6\u901a\u8baf\u6a21\u5757 \u251c\u2500\u2500 protobuf-java-3.4.0.jar // LeanCloud \u63a8\u9001\u6a21\u5757\u548c\u5373\u65f6\u901a\u8baf\u6a21\u5757 \u251c\u2500\u2500 okhttp-3.8.0.jar // LeanCloud \u57fa\u672c\u5b58\u50a8\u6a21\u5757 \u251c\u2500\u2500 okio-1.13.0.jar // LeanCloud \u57fa\u672c\u5b58\u50a8\u6a21\u5757 \u251c\u2500\u2500 qq.sdk.1.6.1.jar // LeanCloud SNS \u6a21\u5757 \u2514\u2500\u2500 weibo.sdk.android.sso.3.0.1-leancloud.jar // LeanCloud SNS \u6a21\u5757","title":"\u624b\u52a8\u5b89\u88c5"},{"location":"sdk-setup/android/#leancloud","text":"avoscloud-v4.7.3.jar okhttp-3.8.0.jar okio-1.13.0.jar fastjson-1.2.37.jar","title":"LeanCloud \u57fa\u672c\u5b58\u50a8\u6a21\u5757"},{"location":"sdk-setup/android/#leancloud_1","text":"LeanCloud \u57fa\u7840\u5b58\u50a8\u6a21\u5757 avospush-v4.7.3.jar Java-WebSocket-1.3.2-leancloud.jar protobuf-java-3.4.0.jar","title":"LeanCloud \u63a8\u9001\u6a21\u5757\u548c\u5373\u65f6\u901a\u8baf\u6a21\u5757"},{"location":"sdk-setup/android/#leancloud_2","text":"LeanCloud \u57fa\u7840\u5b58\u50a8\u6a21\u5757 avosstatistics-v4.7.3.jar","title":"LeanCloud \u7edf\u8ba1\u6a21\u5757"},{"location":"sdk-setup/android/#leancloud-sns","text":"LeanCloud \u57fa\u7840\u5b58\u50a8\u6a21\u5757 weibo.sdk.android.sso.jar qq.sdk.1.6.1.jar \u6211\u4eec\u63d0\u4f9b\u7684\u4e0b\u8f7d\u5305\u91cc\u5305\u542b\u4e86\u5fc5\u987b\u7684\u4f9d\u8d56\u5e93\uff0c\u81ea\u5df1\u4e0b\u8f7d\u5b98\u65b9\u5e93\u4e5f\u53ef\u4ee5\uff0c\u4e0d\u8fc7\u8bf7\u786e\u4fdd\u7248\u672c\u4e00\u81f4\u3002 \u6ce8\u610f\uff1a\u5982\u679c\u9700\u8981\u4f7f\u7528\u7f8e\u56fd\u7ad9\u70b9\uff0c\u5e76\u4e14 SDK \u7248\u672c\u662f 3.3 \u53ca\u4ee5\u4e0a\uff0c\u5219\u4e0d\u9700\u8981\u5f15\u5165 SSL \u8bc1\u4e66\u3002\u5176\u4ed6\u4f4e\u7248\u672c\u7684\u7528\u6237\uff0c\u9700\u8981\u4e0b\u8f7d SSL \u8bc1\u4e66 \uff0c\u5c06\u5176\u62f7\u8d1d\u5230\u9879\u76ee\u7684 res/raw/ \u4e4b\u4e0b\u3002","title":"LeanCloud SNS \u6a21\u5757"},{"location":"sdk-setup/android/#android-studio_1","text":"\u9996\u5148\u672c\u5730\u5df2\u7ecf\u4e0b\u8f7d\u597d\u4e86\u9879\u76ee\u9700\u8981\u7684 SDK \u5305\uff0c\u7136\u540e\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u5bfc\u5165\uff1a \u6253\u5f00 File Project Structure Modules \u5bf9\u8bdd\u6846\uff0c\u70b9\u51fb Dependencies \uff1b \u70b9\u51fb\u4e0b\u65b9\u7684 + \uff08\u52a0\u53f7\uff09\uff0c\u9009\u62e9\u8981\u5bfc\u5165\u7684 SDK \u5305\uff08xxxx.jar\uff09\uff0c\u8bb0\u5f97 Scope \u9009\u4e3a Compile \uff1b \u91cd\u590d\u7b2c 2 \u6b65\uff0c\u76f4\u5230\u6240\u6709\u9700\u8981\u7684\u5305\u5747\u5df2\u6b63\u786e\u5bfc\u5165\u3002 Eclipse \u7684\u5bfc\u5165\u4e0e\u4e00\u822c\u7684 jar \u5bfc\u5165\u65e0\u672c\u8d28\u533a\u522b\uff0c\u56e0\u6b64\u4e0d\u518d\u8d58\u8ff0\u3002","title":"Android Studio"},{"location":"sdk-setup/android/#_3","text":"\u9996\u5148\u8fdb\u5165 \u63a7\u5236\u53f0 \u8bbe\u7f6e \u5e94\u7528 Key \u6765\u83b7\u53d6 App ID \u4ee5\u53ca App Key\u3002 \u7136\u540e\u65b0\u5efa\u4e00\u4e2a Java Class \uff0c\u540d\u5b57\u53eb\u505a MyLeanCloudApp ,\u8ba9\u5b83\u7ee7\u627f\u81ea Application \u7c7b\uff0c\u5b9e\u4f8b\u4ee3\u7801\u5982\u4e0b: public class MyLeanCloudApp extends Application { @Override public void onCreate () { super . onCreate (); // \u521d\u59cb\u5316\u53c2\u6570\u4f9d\u6b21\u4e3a this, AppId, AppKey AVOSCloud . initialize ( this , {{appid}} , {{appkey}} ); } } \u5c06\u4e0a\u8ff0\u4ee3\u7801\u4e2d\u7684 App ID \u4ee5\u53ca App Key \u66ff\u6362\u6210\u4ece\u63a7\u5236\u53f0\u590d\u5236\u7c98\u8d34\u7684\u5bf9\u5e94\u7684\u6570\u636e\u5373\u53ef\u3002 \u7136\u540e\u6253\u5f00 AndroidManifest.xml \u6587\u4ef6\u6765\u914d\u7f6e SDK \u6240\u9700\u8981\u7684\u624b\u673a\u7684\u8bbf\u95ee\u6743\u9650\u4ee5\u53ca\u58f0\u660e\u521a\u624d\u6211\u4eec\u521b\u5efa\u7684 MyLeanCloudApp \u7c7b\uff1a !-- \u57fa\u7840\u6a21\u5757\uff08\u5fc5\u987b\u52a0\u5165\u4ee5\u4e0b\u58f0\u660e\uff09START -- uses-permission android:name= android.permission.WRITE_EXTERNAL_STORAGE / uses-permission android:name= android.permission.INTERNET / uses-permission android:name= android.permission.ACCESS_NETWORK_STATE / uses-permission android:name= android.permission.READ_PHONE_STATE / uses-permission android:name= android.permission.ACCESS_WIFI_STATE / !-- \u57fa\u7840\u6a21\u5757 END -- application ... android:name= .MyLeanCloudApp !-- \u5373\u65f6\u901a\u8baf\u6a21\u5757\u3001\u63a8\u9001\uff08\u5747\u9700\u8981\u52a0\u5165\u4ee5\u4e0b\u58f0\u660e\uff09 START -- !-- \u5373\u65f6\u901a\u8baf\u6a21\u5757\u3001\u63a8\u9001\u90fd\u8981\u4f7f\u7528 PushService -- service android:name= com.avos.avoscloud.PushService / receiver android:name= com.avos.avoscloud.AVBroadcastReceiver intent-filter action android:name= android.intent.action.BOOT_COMPLETED / action android:name= android.intent.action.USER_PRESENT / action android:name= android.net.conn.CONNECTIVITY_CHANGE / /intent-filter /receiver !-- \u5373\u65f6\u901a\u8baf\u6a21\u5757\u3001\u63a8\u9001 END -- !-- \u53cd\u9988\u7ec4\u4ef6\uff08\u9700\u8981\u52a0\u5165\u4ee5\u4e0b\u58f0\u660e\uff09START -- activity android:name= com.avos.avoscloud.feedback.ThreadActivity /activity !-- \u53cd\u9988\u7ec4\u4ef6 END -- /application","title":"\u521d\u59cb\u5316"},{"location":"sdk-setup/android/#_4","text":"\u5728\u5e94\u7528\u5f00\u53d1\u9636\u6bb5\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u5f00\u542f SDK \u7684\u8c03\u8bd5\u65e5\u5fd7\uff08debug log\uff09\u6765\u65b9\u4fbf\u8ffd\u8e2a\u95ee\u9898\u3002\u8c03\u8bd5\u65e5\u5fd7\u5f00\u542f\u540e\uff0cSDK \u4f1a\u628a\u7f51\u7edc\u8bf7\u6c42\u3001\u9519\u8bef\u6d88\u606f\u7b49\u4fe1\u606f\u8f93\u51fa\u5230 IDE \u7684\u65e5\u5fd7\u7a97\u53e3\uff0c\u6216\u662f\u6d4f\u89c8\u5668 Console \u6216\u662f LeanCloud \u63a7\u5236\u53f0\u7684 \u4e91\u5f15\u64ce\u65e5\u5fd7 \u4e2d\u3002 // \u653e\u5728 SDK \u521d\u59cb\u5316\u8bed\u53e5 AVOSCloud.initialize() \u540e\u9762\uff0c\u53ea\u9700\u8981\u8c03\u7528\u4e00\u6b21\u5373\u53ef AVOSCloud . setDebugLogEnabled ( true ); \u5728\u5e94\u7528\u53d1\u5e03\u4e4b\u524d\uff0c\u8bf7\u5173\u95ed\u8c03\u8bd5\u65e5\u5fd7\uff0c\u4ee5\u514d\u66b4\u9732\u654f\u611f\u6570\u636e\u3002","title":"\u5f00\u542f\u8c03\u8bd5\u65e5\u5fd7"},{"location":"sdk-setup/android/#_5","text":"SDK \u7684\u521d\u59cb\u5316\u65b9\u6cd5\u9ed8\u8ba4\u4f7f\u7528 \u4e2d\u56fd\u5927\u9646\u8282\u70b9 \uff0c\u5982\u9700\u5207\u6362\u5230 \u5176\u4ed6\u53ef\u7528\u8282\u70b9 \uff0c\u8bf7\u53c2\u8003\u5982\u4e0b\u7528\u6cd5\uff1a public class MyLeanCloudApp extends Application { @Override public void onCreate () { super . onCreate (); // \u542f\u7528\u5317\u7f8e\u8282\u70b9, \u9700\u8981\u5728 initialize \u4e4b\u524d\u8c03\u7528 AVOSCloud . useAVCloudUS (); // \u521d\u59cb\u5316\u53c2\u6570\u4f9d\u6b21\u4e3a this, AppId, AppKey AVOSCloud . initialize ( this , {{appid}} , {{appkey}} ); } }","title":"\u542f\u7528\u6307\u5b9a\u8282\u70b9"},{"location":"sdk-setup/android/#_6","text":"\u4e2d\u56fd\u5927\u9646\u8282\u70b9 leancloud.cn \uff08SDK \u521d\u59cb\u5316\u65b9\u6cd5 \u9ed8\u8ba4 \u4f7f\u7528\u8be5\u8282\u70b9\uff09 \u5317\u7f8e\u8282\u70b9 us.leancloud.cn \uff08\u670d\u52a1\u5317\u7f8e\u5e02\u573a\uff09 \u5404\u4e2a\u8282\u70b9\u5f7c\u6b64\u72ec\u7acb\uff0c\u5f00\u53d1\u8005\u8d26\u53f7\u65e0\u6cd5\u8de8\u8282\u70b9\u6765\u521b\u5efa\u5e94\u7528\u6216\u8c03\u7528 API\u3002","title":"\u5168\u7403\u8282\u70b9"},{"location":"sdk-setup/android/#_7","text":"\u9996\u5148\uff0c\u786e\u8ba4\u672c\u5730\u7f51\u7edc\u73af\u5883\u662f\u53ef\u4ee5\u8bbf\u95ee LeanCloud \u670d\u52a1\u5668\u7684\uff0c\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u884c\uff1a ping {{domainN1}} \u5982\u679c\u5f53\u524d\u7f51\u8def\u6b63\u5e38\u5c06\u4f1a\u5f97\u5230\u5982\u4e0b\u54cd\u5e94\uff1a PING api-ucloud.leancloud.cn ( 123 .59.41.31 ) : 56 data bytes 64 bytes from 123 .59.41.31: icmp_seq = 0 ttl = 51 time = 9 .032 ms 64 bytes from 123 .59.41.31: icmp_seq = 1 ttl = 51 time = 7 .290 ms 64 bytes from 123 .59.41.31: icmp_seq = 2 ttl = 51 time = 8 .131 ms 64 bytes from 123 .59.41.31: icmp_seq = 3 ttl = 51 time = 9 .689 ms 64 bytes from 123 .59.41.31: icmp_seq = 4 ttl = 51 time = 6 .559 ms 64 bytes from 123 .59.41.31: icmp_seq = 5 ttl = 51 time = 8 .665 ms 64 bytes from 123 .59.41.31: icmp_seq = 6 ttl = 51 time = 8 .041 ms 64 bytes from 123 .59.41.31: icmp_seq = 7 ttl = 51 time = 8 .203 ms 64 bytes from 123 .59.41.31: icmp_seq = 8 ttl = 51 time = 6 .288 ms 64 bytes from 123 .59.41.31: icmp_seq = 9 ttl = 51 time = 7 .938 ms --- api-ucloud.leancloud.cn ping statistics --- 10 packets transmitted, 10 packets received, 0 .0% packet loss round-trip min/avg/max/stddev = 6 .288/7.984/9.689/0.997 ms \u7136\u540e\u5728\u9879\u76ee\u4e2d\u7f16\u5199\u5982\u4e0b\u6d4b\u8bd5\u4ee3\u7801\uff1a \u5728 MainActivity.java \u4e2d\u7684 onCreate \u65b9\u6cd5\u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801\uff1a @Override protected void onCreate ( Bundle savedInstanceState ) { super . onCreate ( savedInstanceState ); setContentView ( R . layout . activity_main ); ... // \u6d4b\u8bd5 SDK \u662f\u5426\u6b63\u5e38\u5de5\u4f5c\u7684\u4ee3\u7801 AVObject testObject = new AVObject ( TestObject ); testObject . put ( words , Hello World! ); testObject . saveInBackground ( new SaveCallback () { @Override public void done ( AVException e ) { if ( e == null ){ Log . d ( saved , success! ); } } }); ... } \u7136\u540e\uff0c\u70b9\u51fb Run \u8fd0\u884c\u8c03\u8bd5\uff0c\u771f\u673a\u548c\u865a\u62df\u673a\u5747\u53ef\u3002 \u7136\u540e\u6253\u5f00 \u63a7\u5236\u53f0 \u5b58\u50a8 \u6570\u636e TestObject \uff0c\u5982\u679c\u770b\u5230\u5982\u4e0b\u5185\u5bb9\uff0c\u8bf4\u660e SDK \u5df2\u7ecf\u6b63\u786e\u5730\u6267\u884c\u4e86\u4e0a\u8ff0\u4ee3\u7801\uff0c\u5b89\u88c5\u5b8c\u6bd5\u3002 \u5982\u679c\u63a7\u5236\u53f0\u6ca1\u6709\u53d1\u73b0\u5bf9\u5e94\u7684\u6570\u636e\uff0c\u8bf7\u53c2\u8003 \u95ee\u9898\u6392\u67e5 \u3002","title":"\u9a8c\u8bc1"},{"location":"sdk-setup/android/#_8","text":"","title":"\u95ee\u9898\u6392\u67e5"},{"location":"sdk-setup/android/#401-unauthorized","text":"\u5982\u679c SDK \u629b\u51fa 401 \u5f02\u5e38\u6216\u8005\u67e5\u770b\u672c\u5730\u7f51\u7edc\u8bbf\u95ee\u65e5\u5fd7\u5b58\u5728\uff1a { code : 401 , error : Unauthorized. } \u5219\u53ef\u8ba4\u5b9a\u4e3a App ID \u6216\u8005 App Key \u8f93\u5165\u6709\u8bef\uff0c\u6216\u8005\u662f\u4e0d\u5339\u914d\uff0c\u5f88\u591a\u5f00\u53d1\u8005\u540c\u65f6\u6ce8\u518c\u4e86\u591a\u4e2a\u5e94\u7528\uff0c\u5bfc\u81f4\u62f7\u8d1d\u7c98\u8d34\u7684\u65f6\u5019\uff0c\u7528 A \u5e94\u7528\u7684 App ID \u5339\u914d B \u5e94\u7528\u7684 App Key\uff0c\u8fd9\u6837\u5c31\u4f1a\u51fa\u73b0\u670d\u52a1\u7aef\u9274\u6743\u5931\u8d25\u7684\u9519\u8bef\u3002","title":"401 Unauthorized"},{"location":"sdk-setup/android/#_9","text":"\u5ba2\u6237\u7aef\u5c24\u5176\u662f\u624b\u673a\u7aef\uff0c\u5e94\u7528\u5728\u8bbf\u95ee\u7f51\u7edc\u7684\u65f6\u5019\u9700\u8981\u7533\u8bf7\u4e00\u5b9a\u7684\u6743\u9650\u3002","title":"\u5ba2\u6237\u7aef\u65e0\u6cd5\u8bbf\u95ee\u7f51\u7edc"},{"location":"sdk-setup/dotnet/","text":"C# SDK \u5b89\u88c5\u6307\u5357 \u5b89\u88c5 .NET Framework .NET Framework \u652f\u6301\u4ee5\u4e0b\u8fd0\u884c\u65f6\uff1a Classic Desktop 4.5+ Windows 10 Windows Phone \u4e0d\u518d\u652f\u6301 UWP 4.5+ .NET Core 2.0+ \u5728 Visual Studio \u6267\u884c\u5b89\u88c5 nuget \u4f9d\u8d56\uff1a PM Install-Package LeanCloud Xamarin \u8bf7\u786e\u4fdd\u4f60\u7684\u9879\u76ee\u81f3\u5c11\u6ee1\u8db3\u5982\u4e0b\u7248\u672c\u9700\u6c42\uff1a Xamarin.Android 4.7+ Xamarin.iOS 6.3 \u5728 Xamarin Studio \u6216\u8005 Visual Studio for Mac \u4e0a\u6267\u884c\u5982\u4e0b nuget \u6307\u4ee4\uff1a PM Install-Package LeanCloud Mono for Unity Unity 5.3+ \u4e0d\u652f\u6301 Unity 5.3 \u4ee5\u4e0b\u7248\u672c\u7684\u539f\u56e0\u662f\uff1aUnity \u5b98\u65b9\u5728 5.3 \u4e4b\u540e\u652f\u6301\u4e86 UnityWebRequest \u7c7b\uff0c\u5e76\u4e14\u5efa\u8bae\u5f00\u53d1\u8005\u90fd\u4f7f\u7528\u6b64\u7c7b\u8fdb\u884c HTTP \u8bf7\u6c42\u7684\u53d1\u9001\uff0c\u56e0\u6b64\u6211\u4eec\u9075\u7167\u5b98\u65b9\u8bbe\u5b9a\uff0c\u6452\u5f03\u539f\u6765\u7684 WWW\uff0c\u6539\u7528\u65b0\u7684 UnityWebRequest \u6765\u5b9e\u73b0\u5e95\u5c42\u7684 HTTP Client\u3002 \u8bf7\u524d\u5f80 Unity Storage \u4ee5\u53ca Unity Realtime \u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u7684 zip \u5305\uff0c\u89e3\u538b\u4e4b\u540e\u5bfc\u5165\u5230\u4f60\u7684 Unity \u9879\u76ee\u4e2d\u3002 Unity Storage \u548c Unity Realtime \u672c\u8d28\u4e0a\u53ea\u76f8\u5dee\u4e00\u4e2a DLL \u6587\u4ef6\uff1a LeanCloud.Realtime.dll \uff0c\u56e0\u6b64\u5982\u679c\u4f60\u4e0d\u9700\u8981\u4f7f\u7528\u5373\u65f6\u901a\u8baf\u6a21\u5757\uff0c\u53ef\u4ee5\u53ea\u4e0b\u8f7d Unity Storage \u3002 \u4f9d\u8d56\u8be6\u89e3 \u5b89\u88c5\u4e4b\u540e\uff0c\u4f60\u7684\u9879\u76ee\u4f1a\u4f9d\u8d56\u5982\u4e0b\u5185\u5bb9\uff1a \u540d\u79f0 \u6a21\u5757\u63cf\u8ff0 \u5fc5\u9009 AssemblyLister.dll LeanCloud \u4f9d\u8d56\u68c0\u6d4b\u6a21\u5757\uff0c\u5b83\u8d1f\u8d23\u68c0\u67e5\u76f8\u5173\u4f9d\u8d56\u662f\u5426\u6b63\u786e\u52a0\u8f7d \u662f LeanCloud.Core.dll \u6838\u5fc3\u5e93\uff0c\u91cc\u9762\u5305\u542b\u4e86 AVObject \u548c AVUser \u7b49\u6240\u6709\u5185\u7f6e\u7c7b\u578b\u7684\u5b9a\u4e49\u548c\u5e8f\u5217\u5316\u76f8\u5173\u64cd\u4f5c\u7684\u529f\u80fd \u662f LeanCloud.Storage.dll \u5b58\u50a8\u5e93\uff0c\u91cc\u9762\u5305\u542b\u672c\u5730\u7f13\u5b58\u4ee5\u53ca HTTP \u8bf7\u6c42\u53d1\u9001\u7684\u5b9e\u73b0 \u662f LeanCloud.Realtime.dll \u5373\u65f6\u901a\u8baf\u5e93\uff0c\u91cc\u9762\u5305\u542b\u4e86\u5373\u65f6\u901a\u8baf\u534f\u8bae\u7684\u5b9e\u73b0\u4ee5\u53ca\u76f8\u5173\u63a5\u53e3 \u5426 LeanCloud.LiveQuery.dll LiveQuery \u5e93\uff0c\u91cc\u9762\u5305\u542b\u5b9e\u65f6\u6570\u636e\u540c\u6b65\u7684\u5b9e\u73b0\u548c\u76f8\u5173\u63a5\u53e3 \u5426 LeanCloud.Analytics.dll \u6570\u636e\u7edf\u8ba1\u5e93\uff0c\u91cc\u9762\u5305\u542b\u4e86\u5b9e\u73b0\u6570\u636e\u7edf\u8ba1\u5206\u6790\u7684\u5b9e\u73b0\u548c\u76f8\u5173\u63a5\u53e3 \u5426 \u5982\u679c\u4f60\u7684\u9879\u76ee\u4e0d\u9700\u8981\u4f7f\u7528\u5373\u65f6\u901a\u8baf\uff0c\u5c31\u53ef\u4ee5\u5220\u9664\u5bf9 LeanCloud.Realtime.dll \u7684\u4f9d\u8d56\uff0c\u6216\u8005\u5728\u5f15\u5165\u7684\u65f6\u5019\u5728 nuget \u91cc\u9762\u6267\u884c\u5982\u4e0b\u6307\u4ee4\uff0c\u5219 IDE \u53ea\u4f1a\u52a0\u8f7d\u6838\u5fc3\u548c\u5b58\u50a8\u6a21\u5757\uff0c\u5e76\u4e0d\u4f1a\u5bfc\u5165\u5373\u65f6\u901a\u8baf\u6a21\u5757\uff1a PM Install-Package LeanCloud.Storage \u53e6\u5916\u6211\u4eec\u4e5f\u63d0\u4f9b\u4e86\u6307\u5b9a\u5b89\u88c5\u5373\u65f6\u901a\u8baf\u6a21\u5757\u7684 nuget \u5305\uff1a PM Install-Package LeanCloud.Realtime \u5982\u679c\u5e0c\u671b\u4f7f\u7528\u5b9e\u65f6\u6570\u636e\u540c\u6b65\u529f\u80fd\uff08 LiveQuery \uff09\uff0c\u8bf7\u6267\u884c\u5982\u4e0b nuget \u547d\u4ee4\u884c\u6765\u81ea\u52a8\u5b89\u88c5\u6240\u6709\u5fc5\u8981\u7684\u4f9d\u8d56\uff08\u4f8b\u5982\u5373\u65f6\u901a\u8baf\u6a21\u5757\uff09\uff1a Install-Package LeanCloud.LiveQuery \u5b89\u88c5\u6570\u636e\u7edf\u8ba1\u5206\u6790\u5e93\u9700\u8981\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u884c\uff1a Install-Package LeanCloud.Analytics \u914d\u7f6e SDK .NET Framework Xamarin \u5728\u5e94\u7528\u7a0b\u5e8f\u5165\u53e3\u51fd\u6570\u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801\uff1a // \u5982\u679c\u53ea\u4f7f\u7528\u5b58\u50a8\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u521d\u59cb\u5316\u4ee3\u7801 AVClient.Initialize( \u6b64\u5904\u586b\u5199\u5e94\u7528\u7684 appId , \u6b64\u5904\u586b\u5199\u5e94\u7528\u7684 appKey ); \u5047\u8bbe\u8fd8\u9700\u8981\u4f7f\u7528\u804a\u5929\uff0c\u8bf7\u4f7f\u7528\u5982\u4e0b\u4ee3\u7801\uff1a var realtime = new AVRealtime( \u6b64\u5904\u586b\u5199\u5e94\u7528\u7684 appId , \u6b64\u5904\u586b\u5199\u5e94\u7528\u7684 appKey ); \u5982\u679c\u4f7f\u7528\u4e86\u5373\u65f6\u901a\u8baf\u521d\u59cb\u5316\u7684\u4ee3\u7801\uff0c\u5c31\u4e0d\u9700\u8981\u518d\u6b21\u8c03\u7528 AVClient.Initialize \uff0c\u56e0\u4e3a\u5728\u804a\u5929\u521d\u59cb\u5316\u7684\u65f6\u5019\u4f1a\u8c03\u7528\u5b83\u3002 \u79c1\u6709\u90e8\u7f72 \u9488\u5bf9\u79c1\u6709\u90e8\u7f72\u7684\u670d\u52a1\u5668\u5730\u5740\u662f\u6839\u636e\u90e8\u7f72\u4e4b\u540e\u7684\u57df\u540d\u800c\u5bf9\u5e94\u751f\u6210\u7684\uff0c\u56e0\u6b64\u5728\u521d\u59cb\u5316 SDK \u7684\u65f6\u5019\u9700\u8981\u5355\u72ec\u914d\u7f6e\u670d\u52a1\u5668\u5730\u5740\u3002 AVClient.Configuration \u5305\u542b\u4e86\u5982\u4e0b\u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u542b\u4e49 \u793a\u4f8b ApiServer \u6570\u636e\u5b58\u50a8\u670d\u52a1\u7684\u79c1\u6709\u90e8\u7f72\u5730\u5740 https://abc-api.xyz.com PushServer \u63a8\u9001\u670d\u52a1\u7684\u79c1\u6709\u90e8\u7f72\u5730\u5740 https://abc-push.xyz.com StatsServer \u7edf\u8ba1\u670d\u52a1\u7684\u79c1\u6709\u90e8\u7f72\u5730\u5740 https://abc-stats.xyz.com EngineServer \u4e91\u5f15\u64ce\uff08\u4e91\u51fd\u6570\uff09\u79c1\u6709\u90e8\u7f72\u5730\u5740 https://engine-stats.xyz.com \u4e0e\u5373\u65f6\u901a\u8baf\u76f8\u5173\u7684\u79c1\u6709\u90e8\u7f72\u914d\u7f6e AVRealtime.Configuration \u5305\u542b\u4e86\u5982\u4e0b\u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u542b\u4e49 \u793a\u4f8b RTMRouter \u5206\u914d\u6700\u7ec8 WebSocket \u5730\u5740\u7684\u4e91\u7aef\u8def\u7531\u5730\u5740 https://abc-rtmrouter.xyz.com RealtimeServer \u6700\u7ec8\u7684 WebSocket \u5730\u5740 wss://abc-wss.xyz.com \u6ce8\u610f\uff1a\u5f53\u8bbe\u7f6e\u4e86 RealtimeServer \u4e4b\u540e\uff0c\u5b83\u62e5\u6709\u6700\u9ad8\u4f18\u5148\u7ea7\uff0cSDK \u4e0d\u4f1a\u518d\u53bb\u8bf7\u6c42 RTMRouter \u6765\u7533\u8bf7\u52a8\u6001\uff08\u8d1f\u8f7d\u5747\u8861\uff09\u7684 WebSocket \u5730\u5740\u3002 \u79c1\u6709\u90e8\u7f72\u793a\u4f8b \u5047\u8bbe\u8d2d\u4e70\u4e86\u6570\u636e\u5b58\u50a8\u548c\u5373\u65f6\u901a\u8baf\u7684\u79c1\u6709\u90e8\u7f72\uff0c\u5728\u79c1\u6709\u90e8\u7f72\u7684\u76f8\u5173\u914d\u7f6e\u624b\u518c\u4e0a\u6211\u4eec\u4f1a\u7ed9\u51fa\u6700\u7ec8\u751f\u4ea7\u73af\u5883\u7684\u5730\u5740\uff0c\u4f8b\u5982\uff1a \u6570\u636e\u5b58\u50a8\u5730\u5740 (Api Server)\uff1a https://abc-api.xyz.com \u5373\u65f6\u901a\u8baf\u5730\u5740\u4e91\u7aef\u8def\u7531\u5730\u5740\u4e3a (RTM Router)\uff1a https://abc-rtmrouter.xyz.com \u5728 SDK \u521d\u59cb\u5316\u65f6\u9700\u8981\u8fdb\u884c\u5982\u4e0b\u8bbe\u7f6e\uff1a \u6570\u636e\u5b58\u50a8\u670d\u52a1\uff1a AVClient.Initialize(new AVClient.Configuration { ApplicationId = \u4f60\u7684 app id , ApplicationKey = \u4f60\u7684 app key , ApiServer = new Uri( https://abc-api.xyz.com ) // \u544a\u77e5 SDK \u6240\u6709\u7684\u6570\u636e\u5b58\u50a8\u670d\u52a1\u8bf7\u6c42\u90fd\u53d1\u5f80\u8fd9\u4e2a\u5730\u5740 }); \u5373\u65f6\u901a\u8baf\u670d\u52a1\uff1a var realtime = new AVRealtime(new AVRealtime.Configuration { ApplicationId = \u4f60\u7684 app id , ApplicationKey = \u4f60\u7684 app key , RTMRouter = new Uri( https://abc-rtmrouter.xyz.com ) // \u544a\u77e5 SDK \u53bb\u8fd9\u4e2a\u5730\u5740\u8bf7\u6c42\u52a8\u6001\u7684 WebSocket \u5730\u5740 }); \u4e5f\u5b58\u5728\u4e00\u79cd\u53ef\u80fd\u6027\uff0c\u79c1\u6709\u90e8\u7f72\u4e2d\u6839\u636e\u7528\u6237\u9700\u6c42\u53ea\u90e8\u7f72\u4e86\u4e00\u53f0 WebSocket \u670d\u52a1\u5668\u4f5c\u4e3a\u5373\u65f6\u901a\u8baf\u670d\u52a1\u5668\u3002\u5047\u5982\u914d\u7f6e\u624b\u518c\u4e0a\u7ed9\u51fa\u7684\u5185\u5bb9\u5982\u4e0b\uff1a \u6570\u636e\u5b58\u50a8\u5730\u5740(Api Server)\uff1a https://abc-api.xyz.com \u5373\u65f6\u901a\u8baf\u5730\u5740(RTM Router): wss://abc-wss.xyz.com \u5728\u914d\u7f6e\u5373\u65f6\u901a\u8baf\u7684\u65f6\u5019\u9700\u8981\u505a\u5982\u4e0b\u4fee\u6539\uff1a var realtime = new AVRealtime(new AVRealtime.Configuration { ApplicationId = \u4f60\u7684 app id , ApplicationKey = \u4f60\u7684 app key , RealtimeServer = new Uri( wss://abc-wss.xyz.com ) // \u544a\u77e5 SDK \u76f4\u63a5\u8fde\u8fd9\u4e2a\u5730\u5740\u7684 WebSocket \u670d\u52a1\uff0c\u4e0d\u7528\u518d\u53bb\u8bf7\u6c42 RTMRouter \u4e86 }); Unity \u521d\u59cb\u5316 \u5fc5\u987b \u5728 Unity Editor \u4e0a\u5c06 AVInitializeBehaviour \u6302\u8f7d\u5728\u67d0\u4e00\u4e2a GameObject \u4e0b\uff0c\u5982\u4e0b\u56fe\uff1a \u5047\u8bbe\u8fd8\u9700\u8981\u4f7f\u7528\u5373\u65f6\u901a\u8baf\uff0c\u8bf7\u5728\u4efb\u610f\u4e00\u4e2a MonoBehaviour \u542f\u52a8\u7684\u65f6\u5019\u8c03\u7528\u5982\u4e0b\u4ee3\u7801\uff1a var realtime = new AVRealtime( \u6b64\u5904\u586b\u5199\u5e94\u7528\u7684 appId , \u6b64\u5904\u586b\u5199\u5e94\u7528\u7684 appKey ); \u5728 Unity \u4e2d\u4f7f\u7528\u5373\u65f6\u901a\u8baf\uff0c\u4e00\u5b9a\u5148\u8981\u5148\u521d\u59cb\u5316\u5b58\u50a8\u6a21\u5757\uff0c\u7136\u540e\u521d\u59cb\u5316\u5373\u65f6\u901a\u8baf\u6a21\u5757\uff0c \u8fd9\u4e24\u6b65\u90fd\u5fc5\u987b\u505a\u3002","title":"C# SDK \u5b89\u88c5\u6307\u5357"},{"location":"sdk-setup/dotnet/#c-sdk","text":"","title":"C# SDK \u5b89\u88c5\u6307\u5357"},{"location":"sdk-setup/dotnet/#_1","text":"","title":"\u5b89\u88c5"},{"location":"sdk-setup/dotnet/#net-framework","text":".NET Framework \u652f\u6301\u4ee5\u4e0b\u8fd0\u884c\u65f6\uff1a Classic Desktop 4.5+ Windows 10 Windows Phone \u4e0d\u518d\u652f\u6301 UWP 4.5+ .NET Core 2.0+ \u5728 Visual Studio \u6267\u884c\u5b89\u88c5 nuget \u4f9d\u8d56\uff1a PM Install-Package LeanCloud","title":".NET Framework"},{"location":"sdk-setup/dotnet/#xamarin","text":"\u8bf7\u786e\u4fdd\u4f60\u7684\u9879\u76ee\u81f3\u5c11\u6ee1\u8db3\u5982\u4e0b\u7248\u672c\u9700\u6c42\uff1a Xamarin.Android 4.7+ Xamarin.iOS 6.3 \u5728 Xamarin Studio \u6216\u8005 Visual Studio for Mac \u4e0a\u6267\u884c\u5982\u4e0b nuget \u6307\u4ee4\uff1a PM Install-Package LeanCloud","title":"Xamarin"},{"location":"sdk-setup/dotnet/#mono-for-unity","text":"Unity 5.3+ \u4e0d\u652f\u6301 Unity 5.3 \u4ee5\u4e0b\u7248\u672c\u7684\u539f\u56e0\u662f\uff1aUnity \u5b98\u65b9\u5728 5.3 \u4e4b\u540e\u652f\u6301\u4e86 UnityWebRequest \u7c7b\uff0c\u5e76\u4e14\u5efa\u8bae\u5f00\u53d1\u8005\u90fd\u4f7f\u7528\u6b64\u7c7b\u8fdb\u884c HTTP \u8bf7\u6c42\u7684\u53d1\u9001\uff0c\u56e0\u6b64\u6211\u4eec\u9075\u7167\u5b98\u65b9\u8bbe\u5b9a\uff0c\u6452\u5f03\u539f\u6765\u7684 WWW\uff0c\u6539\u7528\u65b0\u7684 UnityWebRequest \u6765\u5b9e\u73b0\u5e95\u5c42\u7684 HTTP Client\u3002 \u8bf7\u524d\u5f80 Unity Storage \u4ee5\u53ca Unity Realtime \u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u7684 zip \u5305\uff0c\u89e3\u538b\u4e4b\u540e\u5bfc\u5165\u5230\u4f60\u7684 Unity \u9879\u76ee\u4e2d\u3002 Unity Storage \u548c Unity Realtime \u672c\u8d28\u4e0a\u53ea\u76f8\u5dee\u4e00\u4e2a DLL \u6587\u4ef6\uff1a LeanCloud.Realtime.dll \uff0c\u56e0\u6b64\u5982\u679c\u4f60\u4e0d\u9700\u8981\u4f7f\u7528\u5373\u65f6\u901a\u8baf\u6a21\u5757\uff0c\u53ef\u4ee5\u53ea\u4e0b\u8f7d Unity Storage \u3002","title":"Mono for Unity"},{"location":"sdk-setup/dotnet/#_2","text":"\u5b89\u88c5\u4e4b\u540e\uff0c\u4f60\u7684\u9879\u76ee\u4f1a\u4f9d\u8d56\u5982\u4e0b\u5185\u5bb9\uff1a \u540d\u79f0 \u6a21\u5757\u63cf\u8ff0 \u5fc5\u9009 AssemblyLister.dll LeanCloud \u4f9d\u8d56\u68c0\u6d4b\u6a21\u5757\uff0c\u5b83\u8d1f\u8d23\u68c0\u67e5\u76f8\u5173\u4f9d\u8d56\u662f\u5426\u6b63\u786e\u52a0\u8f7d \u662f LeanCloud.Core.dll \u6838\u5fc3\u5e93\uff0c\u91cc\u9762\u5305\u542b\u4e86 AVObject \u548c AVUser \u7b49\u6240\u6709\u5185\u7f6e\u7c7b\u578b\u7684\u5b9a\u4e49\u548c\u5e8f\u5217\u5316\u76f8\u5173\u64cd\u4f5c\u7684\u529f\u80fd \u662f LeanCloud.Storage.dll \u5b58\u50a8\u5e93\uff0c\u91cc\u9762\u5305\u542b\u672c\u5730\u7f13\u5b58\u4ee5\u53ca HTTP \u8bf7\u6c42\u53d1\u9001\u7684\u5b9e\u73b0 \u662f LeanCloud.Realtime.dll \u5373\u65f6\u901a\u8baf\u5e93\uff0c\u91cc\u9762\u5305\u542b\u4e86\u5373\u65f6\u901a\u8baf\u534f\u8bae\u7684\u5b9e\u73b0\u4ee5\u53ca\u76f8\u5173\u63a5\u53e3 \u5426 LeanCloud.LiveQuery.dll LiveQuery \u5e93\uff0c\u91cc\u9762\u5305\u542b\u5b9e\u65f6\u6570\u636e\u540c\u6b65\u7684\u5b9e\u73b0\u548c\u76f8\u5173\u63a5\u53e3 \u5426 LeanCloud.Analytics.dll \u6570\u636e\u7edf\u8ba1\u5e93\uff0c\u91cc\u9762\u5305\u542b\u4e86\u5b9e\u73b0\u6570\u636e\u7edf\u8ba1\u5206\u6790\u7684\u5b9e\u73b0\u548c\u76f8\u5173\u63a5\u53e3 \u5426 \u5982\u679c\u4f60\u7684\u9879\u76ee\u4e0d\u9700\u8981\u4f7f\u7528\u5373\u65f6\u901a\u8baf\uff0c\u5c31\u53ef\u4ee5\u5220\u9664\u5bf9 LeanCloud.Realtime.dll \u7684\u4f9d\u8d56\uff0c\u6216\u8005\u5728\u5f15\u5165\u7684\u65f6\u5019\u5728 nuget \u91cc\u9762\u6267\u884c\u5982\u4e0b\u6307\u4ee4\uff0c\u5219 IDE \u53ea\u4f1a\u52a0\u8f7d\u6838\u5fc3\u548c\u5b58\u50a8\u6a21\u5757\uff0c\u5e76\u4e0d\u4f1a\u5bfc\u5165\u5373\u65f6\u901a\u8baf\u6a21\u5757\uff1a PM Install-Package LeanCloud.Storage \u53e6\u5916\u6211\u4eec\u4e5f\u63d0\u4f9b\u4e86\u6307\u5b9a\u5b89\u88c5\u5373\u65f6\u901a\u8baf\u6a21\u5757\u7684 nuget \u5305\uff1a PM Install-Package LeanCloud.Realtime \u5982\u679c\u5e0c\u671b\u4f7f\u7528\u5b9e\u65f6\u6570\u636e\u540c\u6b65\u529f\u80fd\uff08 LiveQuery \uff09\uff0c\u8bf7\u6267\u884c\u5982\u4e0b nuget \u547d\u4ee4\u884c\u6765\u81ea\u52a8\u5b89\u88c5\u6240\u6709\u5fc5\u8981\u7684\u4f9d\u8d56\uff08\u4f8b\u5982\u5373\u65f6\u901a\u8baf\u6a21\u5757\uff09\uff1a Install-Package LeanCloud.LiveQuery \u5b89\u88c5\u6570\u636e\u7edf\u8ba1\u5206\u6790\u5e93\u9700\u8981\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u884c\uff1a Install-Package LeanCloud.Analytics","title":"\u4f9d\u8d56\u8be6\u89e3"},{"location":"sdk-setup/dotnet/#sdk","text":"","title":"\u914d\u7f6e SDK"},{"location":"sdk-setup/dotnet/#net-framework-xamarin","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u5165\u53e3\u51fd\u6570\u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801\uff1a // \u5982\u679c\u53ea\u4f7f\u7528\u5b58\u50a8\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u521d\u59cb\u5316\u4ee3\u7801 AVClient.Initialize( \u6b64\u5904\u586b\u5199\u5e94\u7528\u7684 appId , \u6b64\u5904\u586b\u5199\u5e94\u7528\u7684 appKey ); \u5047\u8bbe\u8fd8\u9700\u8981\u4f7f\u7528\u804a\u5929\uff0c\u8bf7\u4f7f\u7528\u5982\u4e0b\u4ee3\u7801\uff1a var realtime = new AVRealtime( \u6b64\u5904\u586b\u5199\u5e94\u7528\u7684 appId , \u6b64\u5904\u586b\u5199\u5e94\u7528\u7684 appKey ); \u5982\u679c\u4f7f\u7528\u4e86\u5373\u65f6\u901a\u8baf\u521d\u59cb\u5316\u7684\u4ee3\u7801\uff0c\u5c31\u4e0d\u9700\u8981\u518d\u6b21\u8c03\u7528 AVClient.Initialize \uff0c\u56e0\u4e3a\u5728\u804a\u5929\u521d\u59cb\u5316\u7684\u65f6\u5019\u4f1a\u8c03\u7528\u5b83\u3002","title":".NET Framework &amp; Xamarin"},{"location":"sdk-setup/dotnet/#_3","text":"\u9488\u5bf9\u79c1\u6709\u90e8\u7f72\u7684\u670d\u52a1\u5668\u5730\u5740\u662f\u6839\u636e\u90e8\u7f72\u4e4b\u540e\u7684\u57df\u540d\u800c\u5bf9\u5e94\u751f\u6210\u7684\uff0c\u56e0\u6b64\u5728\u521d\u59cb\u5316 SDK \u7684\u65f6\u5019\u9700\u8981\u5355\u72ec\u914d\u7f6e\u670d\u52a1\u5668\u5730\u5740\u3002 AVClient.Configuration \u5305\u542b\u4e86\u5982\u4e0b\u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u542b\u4e49 \u793a\u4f8b ApiServer \u6570\u636e\u5b58\u50a8\u670d\u52a1\u7684\u79c1\u6709\u90e8\u7f72\u5730\u5740 https://abc-api.xyz.com PushServer \u63a8\u9001\u670d\u52a1\u7684\u79c1\u6709\u90e8\u7f72\u5730\u5740 https://abc-push.xyz.com StatsServer \u7edf\u8ba1\u670d\u52a1\u7684\u79c1\u6709\u90e8\u7f72\u5730\u5740 https://abc-stats.xyz.com EngineServer \u4e91\u5f15\u64ce\uff08\u4e91\u51fd\u6570\uff09\u79c1\u6709\u90e8\u7f72\u5730\u5740 https://engine-stats.xyz.com \u4e0e\u5373\u65f6\u901a\u8baf\u76f8\u5173\u7684\u79c1\u6709\u90e8\u7f72\u914d\u7f6e AVRealtime.Configuration \u5305\u542b\u4e86\u5982\u4e0b\u5c5e\u6027\uff1a \u5c5e\u6027\u540d \u542b\u4e49 \u793a\u4f8b RTMRouter \u5206\u914d\u6700\u7ec8 WebSocket \u5730\u5740\u7684\u4e91\u7aef\u8def\u7531\u5730\u5740 https://abc-rtmrouter.xyz.com RealtimeServer \u6700\u7ec8\u7684 WebSocket \u5730\u5740 wss://abc-wss.xyz.com \u6ce8\u610f\uff1a\u5f53\u8bbe\u7f6e\u4e86 RealtimeServer \u4e4b\u540e\uff0c\u5b83\u62e5\u6709\u6700\u9ad8\u4f18\u5148\u7ea7\uff0cSDK \u4e0d\u4f1a\u518d\u53bb\u8bf7\u6c42 RTMRouter \u6765\u7533\u8bf7\u52a8\u6001\uff08\u8d1f\u8f7d\u5747\u8861\uff09\u7684 WebSocket \u5730\u5740\u3002","title":"\u79c1\u6709\u90e8\u7f72"},{"location":"sdk-setup/dotnet/#_4","text":"\u5047\u8bbe\u8d2d\u4e70\u4e86\u6570\u636e\u5b58\u50a8\u548c\u5373\u65f6\u901a\u8baf\u7684\u79c1\u6709\u90e8\u7f72\uff0c\u5728\u79c1\u6709\u90e8\u7f72\u7684\u76f8\u5173\u914d\u7f6e\u624b\u518c\u4e0a\u6211\u4eec\u4f1a\u7ed9\u51fa\u6700\u7ec8\u751f\u4ea7\u73af\u5883\u7684\u5730\u5740\uff0c\u4f8b\u5982\uff1a \u6570\u636e\u5b58\u50a8\u5730\u5740 (Api Server)\uff1a https://abc-api.xyz.com \u5373\u65f6\u901a\u8baf\u5730\u5740\u4e91\u7aef\u8def\u7531\u5730\u5740\u4e3a (RTM Router)\uff1a https://abc-rtmrouter.xyz.com \u5728 SDK \u521d\u59cb\u5316\u65f6\u9700\u8981\u8fdb\u884c\u5982\u4e0b\u8bbe\u7f6e\uff1a \u6570\u636e\u5b58\u50a8\u670d\u52a1\uff1a AVClient.Initialize(new AVClient.Configuration { ApplicationId = \u4f60\u7684 app id , ApplicationKey = \u4f60\u7684 app key , ApiServer = new Uri( https://abc-api.xyz.com ) // \u544a\u77e5 SDK \u6240\u6709\u7684\u6570\u636e\u5b58\u50a8\u670d\u52a1\u8bf7\u6c42\u90fd\u53d1\u5f80\u8fd9\u4e2a\u5730\u5740 }); \u5373\u65f6\u901a\u8baf\u670d\u52a1\uff1a var realtime = new AVRealtime(new AVRealtime.Configuration { ApplicationId = \u4f60\u7684 app id , ApplicationKey = \u4f60\u7684 app key , RTMRouter = new Uri( https://abc-rtmrouter.xyz.com ) // \u544a\u77e5 SDK \u53bb\u8fd9\u4e2a\u5730\u5740\u8bf7\u6c42\u52a8\u6001\u7684 WebSocket \u5730\u5740 }); \u4e5f\u5b58\u5728\u4e00\u79cd\u53ef\u80fd\u6027\uff0c\u79c1\u6709\u90e8\u7f72\u4e2d\u6839\u636e\u7528\u6237\u9700\u6c42\u53ea\u90e8\u7f72\u4e86\u4e00\u53f0 WebSocket \u670d\u52a1\u5668\u4f5c\u4e3a\u5373\u65f6\u901a\u8baf\u670d\u52a1\u5668\u3002\u5047\u5982\u914d\u7f6e\u624b\u518c\u4e0a\u7ed9\u51fa\u7684\u5185\u5bb9\u5982\u4e0b\uff1a \u6570\u636e\u5b58\u50a8\u5730\u5740(Api Server)\uff1a https://abc-api.xyz.com \u5373\u65f6\u901a\u8baf\u5730\u5740(RTM Router): wss://abc-wss.xyz.com \u5728\u914d\u7f6e\u5373\u65f6\u901a\u8baf\u7684\u65f6\u5019\u9700\u8981\u505a\u5982\u4e0b\u4fee\u6539\uff1a var realtime = new AVRealtime(new AVRealtime.Configuration { ApplicationId = \u4f60\u7684 app id , ApplicationKey = \u4f60\u7684 app key , RealtimeServer = new Uri( wss://abc-wss.xyz.com ) // \u544a\u77e5 SDK \u76f4\u63a5\u8fde\u8fd9\u4e2a\u5730\u5740\u7684 WebSocket \u670d\u52a1\uff0c\u4e0d\u7528\u518d\u53bb\u8bf7\u6c42 RTMRouter \u4e86 });","title":"\u79c1\u6709\u90e8\u7f72\u793a\u4f8b"},{"location":"sdk-setup/dotnet/#unity","text":"\u521d\u59cb\u5316 \u5fc5\u987b \u5728 Unity Editor \u4e0a\u5c06 AVInitializeBehaviour \u6302\u8f7d\u5728\u67d0\u4e00\u4e2a GameObject \u4e0b\uff0c\u5982\u4e0b\u56fe\uff1a \u5047\u8bbe\u8fd8\u9700\u8981\u4f7f\u7528\u5373\u65f6\u901a\u8baf\uff0c\u8bf7\u5728\u4efb\u610f\u4e00\u4e2a MonoBehaviour \u542f\u52a8\u7684\u65f6\u5019\u8c03\u7528\u5982\u4e0b\u4ee3\u7801\uff1a var realtime = new AVRealtime( \u6b64\u5904\u586b\u5199\u5e94\u7528\u7684 appId , \u6b64\u5904\u586b\u5199\u5e94\u7528\u7684 appKey ); \u5728 Unity \u4e2d\u4f7f\u7528\u5373\u65f6\u901a\u8baf\uff0c\u4e00\u5b9a\u5148\u8981\u5148\u521d\u59cb\u5316\u5b58\u50a8\u6a21\u5757\uff0c\u7136\u540e\u521d\u59cb\u5316\u5373\u65f6\u901a\u8baf\u6a21\u5757\uff0c \u8fd9\u4e24\u6b65\u90fd\u5fc5\u987b\u505a\u3002","title":"Unity"},{"location":"sdk-setup/ios/","text":"Objective-C SDK \u5b89\u88c5\u6307\u5357 \u81ea\u52a8\u5b89\u88c5 \u901a\u8fc7 CocoaPods \u5b89\u88c5\u53ef\u4ee5\u6700\u5927\u5316\u5730\u7b80\u5316\u5b89\u88c5\u8fc7\u7a0b\u3002 \u9996\u5148\uff0c\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u7684 Podfile \u6587\u4ef6\u4e2d\u6dfb\u52a0\u4ee5\u4e0b pods\uff1a pod AVOSCloud # \u6570\u636e\u5b58\u50a8\u3001\u77ed\u4fe1\u3001\u4e91\u5f15\u64ce\u8c03\u7528\u7b49\u57fa\u7840\u670d\u52a1\u6a21\u5757 pod AVOSCloudIM # \u5373\u65f6\u901a\u8baf\u6a21\u5757 Note \u4ece v3.4.0 \u5f00\u59cb\uff0c\u4e0d\u518d\u6839\u636e\u5e73\u53f0\u533a\u5206 pod \u540d\u79f0\u3002\u540c\u4e00\u4e2a\u6a21\u5757\u5728\u6240\u6709\u5e73\u53f0\u4e0a\u7684 pod \u540d\u79f0\u76f8\u540c\u3002CocoaPods \u4f1a\u6839\u636e Podfile \u4e2d\u7684 platform \u4fe1\u606f\u5b89\u88c5\u76f8\u5e94\u7684\u6e90\u6587\u4ef6\u3002\u5e26\u6709\u5e73\u53f0\u540e\u7f00\u7684\u65e7\u7684 pod\uff0c\u4f8b\u5982 AVOSCloud-watchOS\u3001AVOSCloudIM-OSX \u7b49\u4e0d\u518d\u66f4\u65b0\u3002\u5982\u679c\u8981\u66f4\u65b0\u5230 v3.4.0 \u53ca\u4ee5\u540e\u7684\u7248\u672c\uff0c\u8bf7\u5c06 pod \u7684\u5e73\u53f0\u540e\u7f00\u53bb\u6389\u3002 \u7136\u540e\u5728\u9879\u76ee\u6839\u76ee\u5f55\u6267\u884c pod install \u547d\u4ee4\uff0c\u6267\u884c\u6210\u529f\u540e\uff0cSDK \u5c31\u96c6\u6210\u5230\u9879\u76ee\u4e2d\u4e86\u3002 \u624b\u52a8\u5b89\u88c5 \u4e0b\u8f7d\u6e90\u7801 \u9996\u5148\u5c06 SDK \u4ed3\u5e93 clone \u5230\u9879\u76ee\u6839\u76ee\u5f55\uff1a git clone https://github.com/leancloud/objc-sdk.git leancloud-objc-sdk \u7136\u540e checkout \u7248\u672c\u3002SDK \u7684\u7248\u672c\u53f7\u662f\u901a\u8fc7 tag \u6807\u8bb0\u7684\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4 checkout \u6700\u65b0\u7248\u672c\uff1a cd leancloud-objc-sdk git checkout $( git describe --tags $( git rev-list --tags --max-count = 1 )) \u96c6\u6210 SDK \u5c06 SDK \u96c6\u6210\u5230\u5230\u9879\u76ee\u4e2d\u6709\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\uff0c \u4efb\u9009\u4e00\u79cd\u5373\u53ef \uff1a \u5c06 SDK \u7684 xcodeproj \u6587\u4ef6\u76f4\u63a5\u6dfb\u52a0\u5230\u9879\u76ee\u4e2d\u3002 \u5c06 SDK \u7f16\u8bd1\u6210 framework \u518d\u6dfb\u52a0\u5230\u9879\u76ee\u4e2d\u3002 \u96c6\u6210 xcodeproj \u5c06 AVOS/AVOS.xcodeproj \u9879\u76ee\u6587\u4ef6\u62d6\u5165\u9879\u76ee\uff0c\u4f5c\u4e3a subproject\uff1a \u63a5\u7740\u4e3a\u8be5\u9879\u76ee\u8bbe\u7f6e Build Phases\uff0c\u6dfb\u52a0 Link Binary With Libraries \uff1a \u4e0a\u56fe\u9009\u62e9\u4e86\u652f\u6301 iOS \u5e73\u53f0\u7684 AVOSCloud \u4e0e AVOSCloudIM \u4e24\u4e2a frameworks \u7528\u6765\u4e3e\u4f8b\u3002\u8bf7\u6839\u636e\u5b9e\u9645\u9700\u8981\u6765\u9009\u62e9\u652f\u6301\u7684\u5e73\u53f0\u4ee5\u53ca\u8981\u4f7f\u7528\u7684\u6a21\u5757\u3002 \u7f16\u8bd1 framework \u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u952e\u7f16\u8bd1\u811a\u672c\u5c06 SDK \u7f16\u8bd1\u6210 framework\uff0c\u5728 SDK \u6240\u5728\u7684\u6839\u76ee\u5f55\u6267\u884c\uff1a ruby build-framework.rb \u5f85\u547d\u4ee4\u6267\u884c\u5b8c\u6bd5\uff0c\u5728 AVOS/AVOS.xcodeproj/build \u76ee\u5f55\u4e0b\u627e\u5230\u7f16\u8bd1\u597d\u7684 framework \u6587\u4ef6\u3002 Danger \u4e3a\u4e86\u533a\u5206\u5e73\u53f0\uff0cframeworks \u6dfb\u52a0\u4e86\u5e73\u53f0\u540e\u7f00\uff0c\u4f8b\u5982 AVOSCloud-iOS.framework \u3002\u8bf7 \u5148\u5220\u6389\u5e73\u53f0\u540e\u7f00 \u518d\u5c06\u5176\u52a0\u5165\u9879\u76ee\uff0c\u5426\u5219\u4f1a\u4ea7\u751f\u7f16\u8bd1\u9519\u8bef\u3002 \u6dfb\u52a0\u7cfb\u7edf\u4f9d\u8d56 \u7136\u540e\u6dfb\u52a0 SDK \u4f9d\u8d56\u7684\u7cfb\u7edf framework \u548c library\uff1a libz libc++ libicucore libsqlite3 SystemConfiguration.framework MobileCoreServices.framework CoreTelephony.framework CoreLocation.framework \u5c31\u50cf\u4e0b\u9762\u8fd9\u6837\uff1a \u6700\u540e\u5728 Other Linker Flags \u4e2d\u6dfb\u52a0 -ObjC \u3002 \u8fd9\u6837\u5c31\u96c6\u6210\u5b8c\u6bd5\u4e86\u3002 \u521d\u59cb\u5316 SDK \u6253\u5f00 AppDelegate \u6587\u4ef6\uff0c\u5bfc\u5165\u57fa\u7840\u6a21\u5757\uff1a #import AVOSCloud/AVOSCloud.h \u7136\u540e\u7c98\u8d34\u4e0b\u5217\u4ee3\u7801\u5230 application : didFinishLaunchingWithOptions : \u65b9\u6cd5\u4e2d\uff1a [ AVOSCloud setApplicationId : @ {{appid}} clientKey : @ {{appkey}} ]; \u4f7f\u7528 \u7f8e\u56fd\u8282\u70b9 \u9700\u8981\u589e\u52a0\u4ee5\u4e0b\u4ee3\u7801\uff1a [ AVOSCloud setServiceRegion : AVServiceRegionUS ]; \u5982\u679c\u60f3\u8ddf\u8e2a\u7edf\u8ba1\u5e94\u7528\u7684\u6253\u5f00\u60c5\u51b5\uff0c\u540e\u9762\u8fd8\u53ef\u4ee5\u6dfb\u52a0\u4e0b\u5217\u4ee3\u7801\uff1a [ AVAnalytics trackAppOpenedWithLaunchOptions : launchOptions ]; \u521b\u5efa\u5e94\u7528\u540e\uff0c\u53ef\u4ee5\u5728 \u63a7\u5236\u53f0 \u5e94\u7528\u8bbe\u7f6e \u5e94\u7528 Key \u4e2d\u627e\u5230\u5e94\u7528\u5bf9\u5e94\u7684 id \u548c key\u3002 \u786e\u4fdd\u9879\u76ee\u6e90\u6587\u4ef6\u4e2d\u5305\u542b\u4e86 SDK \u5e93\u6587\u4ef6\uff1a #import AVOSCloud/AVOSCloud.h \u4e0b\u9762\u6765\u8bd5\u7740\u5411 LeanCloud \u4e91\u7aef\u4fdd\u5b58\u4e00\u6761\u6570\u636e\uff0c\u5c06\u4e0b\u9762\u7684\u4ee3\u7801\u62f7\u8d1d\u5230 viewDidLoad \u65b9\u6cd5\u6216\u5176\u4ed6\u5728\u5e94\u7528\u8fd0\u884c\u65f6\u4f1a\u88ab\u8c03\u7528\u7684\u65b9\u6cd5\u4e2d\uff1a AVObject * testObject = [ AVObject objectWithClassName : @ TestObject ]; [ testObject setObject : @ bar forKey : @ foo ]; [ testObject save ]; \u8fd0\u884c App\uff0c\u4e00\u4e2a\u7c7b\u540d\u4e3a TestObject \u7684\u65b0\u5bf9\u8c61\u4f1a\u88ab\u53d1\u9001\u5230 LeanCloud \u5e76\u4fdd\u5b58\u4e0b\u6765\u3002\u5f53\u505a\u5b8c\u8fd9\u4e00\u5207\uff0c\u8bbf\u95ee \u63a7\u5236\u53f0 \u5b58\u50a8 \u6570\u636e \u53ef\u4ee5\u770b\u5230\u4e0a\u9762\u521b\u5efa\u7684 TestObject \u7684\u76f8\u5173\u6570\u636e\u3002 \u5f00\u542f\u8c03\u8bd5\u65e5\u5fd7 \u5728\u5e94\u7528\u5f00\u53d1\u9636\u6bb5\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u5f00\u542f SDK \u7684\u8c03\u8bd5\u65e5\u5fd7\uff08debug log\uff09\u6765\u65b9\u4fbf\u8ffd\u8e2a\u95ee\u9898\u3002\u8c03\u8bd5\u65e5\u5fd7\u5f00\u542f\u540e\uff0cSDK \u4f1a\u628a\u7f51\u7edc\u8bf7\u6c42\u3001\u9519\u8bef\u6d88\u606f\u7b49\u4fe1\u606f\u8f93\u51fa\u5230 IDE \u7684\u65e5\u5fd7\u7a97\u53e3\uff0c\u6216\u662f\u6d4f\u89c8\u5668 Console \u6216\u662f LeanCloud \u63a7\u5236\u53f0\u7684 \u4e91\u5f15\u64ce\u65e5\u5fd7 \u4e2d\u3002 // \u653e\u5728 SDK \u521d\u59cb\u5316\u8bed\u53e5 [AVOSCloud setApplicationId:] \u540e\u9762\uff0c\u53ea\u9700\u8981\u8c03\u7528\u4e00\u6b21\u5373\u53ef [ AVOSCloud setAllLogsEnabled : YES ]; \u5728\u5e94\u7528\u53d1\u5e03\u4e4b\u524d\uff0c\u8bf7\u5173\u95ed\u8c03\u8bd5\u65e5\u5fd7\uff0c\u4ee5\u514d\u66b4\u9732\u654f\u611f\u6570\u636e\u3002 \u67e5\u770b\u670d\u52a1\u5668\u8fd4\u56de\u7684\u9519\u8bef \u67d0\u4e2a\u8bf7\u6c42\u51fa\u9519\uff0cSDK \u4f1a\u8fd4\u56de\u5bf9\u5e94\u7684\u9519\u8bef\u4fe1\u606f\u3002\u9519\u8bef\u4fe1\u606f\u683c\u5f0f\u5982\u4e0b\uff1a error.code \uff1a\u9519\u8bef\u7801\uff0c\u8be6\u89c1 \u6587\u6863 \u3002 error.domain \uff1a\u9519\u8bef\u57df\u540d\uff0c\u53ea\u6709\u5f53 error.domain = kLeanCloudErrorDomain \u65f6\uff0c\u624d\u662f LeanCloud \u8fd4\u56de\u7684\u9519\u8bef\u3002 error.localizedFailureReason \uff1a\u9519\u8bef\u4fe1\u606f\u8be6\u60c5 error.userInfo \uff1a\u5176\u4ed6\u4fe1\u606f\uff0c\u5982\u5386\u53f2\u7248\u672c\u7684\u517c\u5bb9\u4fe1\u606f\u7b49\u3002 \u4f8b\u5982 User \u8868\u4e2d\u5df2\u7ecf\u5b58\u5728\u4e00\u4e2a\u53eb Tom \u7684\u7528\u6237\uff0c\u518d\u6b21\u6ce8\u518c\u7528\u6237\u540d\u4e3a Tom \u4f1a\u62a5\u9519\u300c\u7528\u6237\u5df2\u7ecf\u5b58\u5728\u300d\uff0c\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a AVUser * user = [ AVUser user ]; user . username = @ Tom ; user . password = @ cat!@#123 ; [ user signUpInBackgroundWithBlock : ^ ( BOOL succeeded , NSError * error ) { // \u83b7\u53d6 RESTAPI \u8fd4\u56de\u7684\u9519\u8bef\u4fe1\u606f\u8be6\u60c5\uff08SDK 11.0.0 \u53ca\u4ee5\u4e0a\u7684\u7248\u672c\u9002\u7528\uff09 if ([ error . domain isEqualToString : kLeanCloudErrorDomain ] error . code == 202 ) { NSString * errorMessage = error . localizedFailureReason ; if ( errorMessage ) { // handle error message } } }]; \u793e\u4ea4\u7ec4\u4ef6 \u5982\u679c\u9700\u8981\u4f7f\u7528\u793e\u4ea4\u7ec4\u4ef6\u529f\u80fd\uff0c\u53ef\u4ee5\u4f7f\u7528\u6211\u4eec\u7684\u5f00\u6e90\u7ec4\u4ef6\uff1a leancloud-social-ios \u3002","title":"Objective-C SDK \u5b89\u88c5\u6307\u5357"},{"location":"sdk-setup/ios/#objective-c-sdk","text":"","title":"Objective-C SDK \u5b89\u88c5\u6307\u5357"},{"location":"sdk-setup/ios/#_1","text":"\u901a\u8fc7 CocoaPods \u5b89\u88c5\u53ef\u4ee5\u6700\u5927\u5316\u5730\u7b80\u5316\u5b89\u88c5\u8fc7\u7a0b\u3002 \u9996\u5148\uff0c\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u7684 Podfile \u6587\u4ef6\u4e2d\u6dfb\u52a0\u4ee5\u4e0b pods\uff1a pod AVOSCloud # \u6570\u636e\u5b58\u50a8\u3001\u77ed\u4fe1\u3001\u4e91\u5f15\u64ce\u8c03\u7528\u7b49\u57fa\u7840\u670d\u52a1\u6a21\u5757 pod AVOSCloudIM # \u5373\u65f6\u901a\u8baf\u6a21\u5757 Note \u4ece v3.4.0 \u5f00\u59cb\uff0c\u4e0d\u518d\u6839\u636e\u5e73\u53f0\u533a\u5206 pod \u540d\u79f0\u3002\u540c\u4e00\u4e2a\u6a21\u5757\u5728\u6240\u6709\u5e73\u53f0\u4e0a\u7684 pod \u540d\u79f0\u76f8\u540c\u3002CocoaPods \u4f1a\u6839\u636e Podfile \u4e2d\u7684 platform \u4fe1\u606f\u5b89\u88c5\u76f8\u5e94\u7684\u6e90\u6587\u4ef6\u3002\u5e26\u6709\u5e73\u53f0\u540e\u7f00\u7684\u65e7\u7684 pod\uff0c\u4f8b\u5982 AVOSCloud-watchOS\u3001AVOSCloudIM-OSX \u7b49\u4e0d\u518d\u66f4\u65b0\u3002\u5982\u679c\u8981\u66f4\u65b0\u5230 v3.4.0 \u53ca\u4ee5\u540e\u7684\u7248\u672c\uff0c\u8bf7\u5c06 pod \u7684\u5e73\u53f0\u540e\u7f00\u53bb\u6389\u3002 \u7136\u540e\u5728\u9879\u76ee\u6839\u76ee\u5f55\u6267\u884c pod install \u547d\u4ee4\uff0c\u6267\u884c\u6210\u529f\u540e\uff0cSDK \u5c31\u96c6\u6210\u5230\u9879\u76ee\u4e2d\u4e86\u3002","title":"\u81ea\u52a8\u5b89\u88c5"},{"location":"sdk-setup/ios/#_2","text":"","title":"\u624b\u52a8\u5b89\u88c5"},{"location":"sdk-setup/ios/#_3","text":"\u9996\u5148\u5c06 SDK \u4ed3\u5e93 clone \u5230\u9879\u76ee\u6839\u76ee\u5f55\uff1a git clone https://github.com/leancloud/objc-sdk.git leancloud-objc-sdk \u7136\u540e checkout \u7248\u672c\u3002SDK \u7684\u7248\u672c\u53f7\u662f\u901a\u8fc7 tag \u6807\u8bb0\u7684\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4 checkout \u6700\u65b0\u7248\u672c\uff1a cd leancloud-objc-sdk git checkout $( git describe --tags $( git rev-list --tags --max-count = 1 ))","title":"\u4e0b\u8f7d\u6e90\u7801"},{"location":"sdk-setup/ios/#sdk","text":"\u5c06 SDK \u96c6\u6210\u5230\u5230\u9879\u76ee\u4e2d\u6709\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\uff0c \u4efb\u9009\u4e00\u79cd\u5373\u53ef \uff1a \u5c06 SDK \u7684 xcodeproj \u6587\u4ef6\u76f4\u63a5\u6dfb\u52a0\u5230\u9879\u76ee\u4e2d\u3002 \u5c06 SDK \u7f16\u8bd1\u6210 framework \u518d\u6dfb\u52a0\u5230\u9879\u76ee\u4e2d\u3002","title":"\u96c6\u6210 SDK"},{"location":"sdk-setup/ios/#xcodeproj","text":"\u5c06 AVOS/AVOS.xcodeproj \u9879\u76ee\u6587\u4ef6\u62d6\u5165\u9879\u76ee\uff0c\u4f5c\u4e3a subproject\uff1a \u63a5\u7740\u4e3a\u8be5\u9879\u76ee\u8bbe\u7f6e Build Phases\uff0c\u6dfb\u52a0 Link Binary With Libraries \uff1a \u4e0a\u56fe\u9009\u62e9\u4e86\u652f\u6301 iOS \u5e73\u53f0\u7684 AVOSCloud \u4e0e AVOSCloudIM \u4e24\u4e2a frameworks \u7528\u6765\u4e3e\u4f8b\u3002\u8bf7\u6839\u636e\u5b9e\u9645\u9700\u8981\u6765\u9009\u62e9\u652f\u6301\u7684\u5e73\u53f0\u4ee5\u53ca\u8981\u4f7f\u7528\u7684\u6a21\u5757\u3002","title":"\u96c6\u6210 xcodeproj"},{"location":"sdk-setup/ios/#framework","text":"\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u952e\u7f16\u8bd1\u811a\u672c\u5c06 SDK \u7f16\u8bd1\u6210 framework\uff0c\u5728 SDK \u6240\u5728\u7684\u6839\u76ee\u5f55\u6267\u884c\uff1a ruby build-framework.rb \u5f85\u547d\u4ee4\u6267\u884c\u5b8c\u6bd5\uff0c\u5728 AVOS/AVOS.xcodeproj/build \u76ee\u5f55\u4e0b\u627e\u5230\u7f16\u8bd1\u597d\u7684 framework \u6587\u4ef6\u3002 Danger \u4e3a\u4e86\u533a\u5206\u5e73\u53f0\uff0cframeworks \u6dfb\u52a0\u4e86\u5e73\u53f0\u540e\u7f00\uff0c\u4f8b\u5982 AVOSCloud-iOS.framework \u3002\u8bf7 \u5148\u5220\u6389\u5e73\u53f0\u540e\u7f00 \u518d\u5c06\u5176\u52a0\u5165\u9879\u76ee\uff0c\u5426\u5219\u4f1a\u4ea7\u751f\u7f16\u8bd1\u9519\u8bef\u3002","title":"\u7f16\u8bd1 framework"},{"location":"sdk-setup/ios/#_4","text":"\u7136\u540e\u6dfb\u52a0 SDK \u4f9d\u8d56\u7684\u7cfb\u7edf framework \u548c library\uff1a libz libc++ libicucore libsqlite3 SystemConfiguration.framework MobileCoreServices.framework CoreTelephony.framework CoreLocation.framework \u5c31\u50cf\u4e0b\u9762\u8fd9\u6837\uff1a \u6700\u540e\u5728 Other Linker Flags \u4e2d\u6dfb\u52a0 -ObjC \u3002 \u8fd9\u6837\u5c31\u96c6\u6210\u5b8c\u6bd5\u4e86\u3002","title":"\u6dfb\u52a0\u7cfb\u7edf\u4f9d\u8d56"},{"location":"sdk-setup/ios/#sdk_1","text":"\u6253\u5f00 AppDelegate \u6587\u4ef6\uff0c\u5bfc\u5165\u57fa\u7840\u6a21\u5757\uff1a #import AVOSCloud/AVOSCloud.h \u7136\u540e\u7c98\u8d34\u4e0b\u5217\u4ee3\u7801\u5230 application : didFinishLaunchingWithOptions : \u65b9\u6cd5\u4e2d\uff1a [ AVOSCloud setApplicationId : @ {{appid}} clientKey : @ {{appkey}} ]; \u4f7f\u7528 \u7f8e\u56fd\u8282\u70b9 \u9700\u8981\u589e\u52a0\u4ee5\u4e0b\u4ee3\u7801\uff1a [ AVOSCloud setServiceRegion : AVServiceRegionUS ]; \u5982\u679c\u60f3\u8ddf\u8e2a\u7edf\u8ba1\u5e94\u7528\u7684\u6253\u5f00\u60c5\u51b5\uff0c\u540e\u9762\u8fd8\u53ef\u4ee5\u6dfb\u52a0\u4e0b\u5217\u4ee3\u7801\uff1a [ AVAnalytics trackAppOpenedWithLaunchOptions : launchOptions ]; \u521b\u5efa\u5e94\u7528\u540e\uff0c\u53ef\u4ee5\u5728 \u63a7\u5236\u53f0 \u5e94\u7528\u8bbe\u7f6e \u5e94\u7528 Key \u4e2d\u627e\u5230\u5e94\u7528\u5bf9\u5e94\u7684 id \u548c key\u3002 \u786e\u4fdd\u9879\u76ee\u6e90\u6587\u4ef6\u4e2d\u5305\u542b\u4e86 SDK \u5e93\u6587\u4ef6\uff1a #import AVOSCloud/AVOSCloud.h \u4e0b\u9762\u6765\u8bd5\u7740\u5411 LeanCloud \u4e91\u7aef\u4fdd\u5b58\u4e00\u6761\u6570\u636e\uff0c\u5c06\u4e0b\u9762\u7684\u4ee3\u7801\u62f7\u8d1d\u5230 viewDidLoad \u65b9\u6cd5\u6216\u5176\u4ed6\u5728\u5e94\u7528\u8fd0\u884c\u65f6\u4f1a\u88ab\u8c03\u7528\u7684\u65b9\u6cd5\u4e2d\uff1a AVObject * testObject = [ AVObject objectWithClassName : @ TestObject ]; [ testObject setObject : @ bar forKey : @ foo ]; [ testObject save ]; \u8fd0\u884c App\uff0c\u4e00\u4e2a\u7c7b\u540d\u4e3a TestObject \u7684\u65b0\u5bf9\u8c61\u4f1a\u88ab\u53d1\u9001\u5230 LeanCloud \u5e76\u4fdd\u5b58\u4e0b\u6765\u3002\u5f53\u505a\u5b8c\u8fd9\u4e00\u5207\uff0c\u8bbf\u95ee \u63a7\u5236\u53f0 \u5b58\u50a8 \u6570\u636e \u53ef\u4ee5\u770b\u5230\u4e0a\u9762\u521b\u5efa\u7684 TestObject \u7684\u76f8\u5173\u6570\u636e\u3002","title":"\u521d\u59cb\u5316 SDK"},{"location":"sdk-setup/ios/#_5","text":"\u5728\u5e94\u7528\u5f00\u53d1\u9636\u6bb5\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u5f00\u542f SDK \u7684\u8c03\u8bd5\u65e5\u5fd7\uff08debug log\uff09\u6765\u65b9\u4fbf\u8ffd\u8e2a\u95ee\u9898\u3002\u8c03\u8bd5\u65e5\u5fd7\u5f00\u542f\u540e\uff0cSDK \u4f1a\u628a\u7f51\u7edc\u8bf7\u6c42\u3001\u9519\u8bef\u6d88\u606f\u7b49\u4fe1\u606f\u8f93\u51fa\u5230 IDE \u7684\u65e5\u5fd7\u7a97\u53e3\uff0c\u6216\u662f\u6d4f\u89c8\u5668 Console \u6216\u662f LeanCloud \u63a7\u5236\u53f0\u7684 \u4e91\u5f15\u64ce\u65e5\u5fd7 \u4e2d\u3002 // \u653e\u5728 SDK \u521d\u59cb\u5316\u8bed\u53e5 [AVOSCloud setApplicationId:] \u540e\u9762\uff0c\u53ea\u9700\u8981\u8c03\u7528\u4e00\u6b21\u5373\u53ef [ AVOSCloud setAllLogsEnabled : YES ]; \u5728\u5e94\u7528\u53d1\u5e03\u4e4b\u524d\uff0c\u8bf7\u5173\u95ed\u8c03\u8bd5\u65e5\u5fd7\uff0c\u4ee5\u514d\u66b4\u9732\u654f\u611f\u6570\u636e\u3002","title":"\u5f00\u542f\u8c03\u8bd5\u65e5\u5fd7"},{"location":"sdk-setup/ios/#_6","text":"\u67d0\u4e2a\u8bf7\u6c42\u51fa\u9519\uff0cSDK \u4f1a\u8fd4\u56de\u5bf9\u5e94\u7684\u9519\u8bef\u4fe1\u606f\u3002\u9519\u8bef\u4fe1\u606f\u683c\u5f0f\u5982\u4e0b\uff1a error.code \uff1a\u9519\u8bef\u7801\uff0c\u8be6\u89c1 \u6587\u6863 \u3002 error.domain \uff1a\u9519\u8bef\u57df\u540d\uff0c\u53ea\u6709\u5f53 error.domain = kLeanCloudErrorDomain \u65f6\uff0c\u624d\u662f LeanCloud \u8fd4\u56de\u7684\u9519\u8bef\u3002 error.localizedFailureReason \uff1a\u9519\u8bef\u4fe1\u606f\u8be6\u60c5 error.userInfo \uff1a\u5176\u4ed6\u4fe1\u606f\uff0c\u5982\u5386\u53f2\u7248\u672c\u7684\u517c\u5bb9\u4fe1\u606f\u7b49\u3002 \u4f8b\u5982 User \u8868\u4e2d\u5df2\u7ecf\u5b58\u5728\u4e00\u4e2a\u53eb Tom \u7684\u7528\u6237\uff0c\u518d\u6b21\u6ce8\u518c\u7528\u6237\u540d\u4e3a Tom \u4f1a\u62a5\u9519\u300c\u7528\u6237\u5df2\u7ecf\u5b58\u5728\u300d\uff0c\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a AVUser * user = [ AVUser user ]; user . username = @ Tom ; user . password = @ cat!@#123 ; [ user signUpInBackgroundWithBlock : ^ ( BOOL succeeded , NSError * error ) { // \u83b7\u53d6 RESTAPI \u8fd4\u56de\u7684\u9519\u8bef\u4fe1\u606f\u8be6\u60c5\uff08SDK 11.0.0 \u53ca\u4ee5\u4e0a\u7684\u7248\u672c\u9002\u7528\uff09 if ([ error . domain isEqualToString : kLeanCloudErrorDomain ] error . code == 202 ) { NSString * errorMessage = error . localizedFailureReason ; if ( errorMessage ) { // handle error message } } }];","title":"\u67e5\u770b\u670d\u52a1\u5668\u8fd4\u56de\u7684\u9519\u8bef"},{"location":"sdk-setup/ios/#_7","text":"\u5982\u679c\u9700\u8981\u4f7f\u7528\u793e\u4ea4\u7ec4\u4ef6\u529f\u80fd\uff0c\u53ef\u4ee5\u4f7f\u7528\u6211\u4eec\u7684\u5f00\u6e90\u7ec4\u4ef6\uff1a leancloud-social-ios \u3002","title":"\u793e\u4ea4\u7ec4\u4ef6"},{"location":"sdk-setup/java/","text":"Java SDK \u5b89\u88c5\u6307\u5357 \u83b7\u53d6 SDK \u83b7\u53d6 SDK \u6709\u591a\u79cd\u65b9\u5f0f\uff0c\u8f83\u4e3a\u63a8\u8350\u7684\u65b9\u5f0f\u662f\u901a\u8fc7\u5305\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u3002 \u5305\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u5b89\u88c5 \u901a\u8fc7 maven \u914d\u7f6e\u76f8\u5173\u4f9d\u8d56 dependencies dependency groupId cn.leancloud /groupId artifactId java-sdk /artifactId version 0.1.6 /version /dependency /dependencies \u6216\u8005\u901a\u8fc7 gradle \u914d\u7f6e\u76f8\u5173\u4f9d\u8d56 dependencies { compile ( cn.leancloud:java-sdk:0.1.6 ) } \u624b\u52a8\u5b89\u88c5 \u4e0b\u8f7d SDK \u521d\u59cb\u5316 \u9996\u5148\u8fdb\u5165 \u63a7\u5236\u53f0 \u8bbe\u7f6e \u5e94\u7528 Key \u6765\u83b7\u53d6 App ID \u4ee5\u53ca App Key\u3002 \u7136\u540e\u5bfc\u5165 leancloud\uff0c\u5e76\u5728 main \u51fd\u6570\u4e2d\u8c03\u7528 AVOSCloud.initialize \u65b9\u6cd5\u8fdb\u884c\u521d\u59cb\u5316\uff1a public static void main ( String [] args ){ // \u53c2\u6570\u4f9d\u6b21\u4e3a AppId\u3001AppKey\u3001MasterKey AVOSCloud . initialize ( {{appid}} , {{appkey}} , {{masterkey}} ); } \u5f00\u542f\u8c03\u8bd5\u65e5\u5fd7 \u5728\u5e94\u7528\u5f00\u53d1\u9636\u6bb5\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u5f00\u542f SDK \u7684\u8c03\u8bd5\u65e5\u5fd7\uff08debug log\uff09\u6765\u65b9\u4fbf\u8ffd\u8e2a\u95ee\u9898\u3002\u8c03\u8bd5\u65e5\u5fd7\u5f00\u542f\u540e\uff0cSDK \u4f1a\u628a\u7f51\u7edc\u8bf7\u6c42\u3001\u9519\u8bef\u6d88\u606f\u7b49\u4fe1\u606f\u8f93\u51fa\u5230 IDE \u7684\u65e5\u5fd7\u7a97\u53e3\uff0c\u6216\u662f\u6d4f\u89c8\u5668 Console \u6216\u662f LeanCloud \u63a7\u5236\u53f0\u7684 \u4e91\u5f15\u64ce\u65e5\u5fd7 \u4e2d\u3002 // \u653e\u5728 SDK \u521d\u59cb\u5316\u8bed\u53e5 AVOSCloud.initialize() \u540e\u9762\uff0c\u53ea\u9700\u8981\u8c03\u7528\u4e00\u6b21\u5373\u53ef AVOSCloud . setDebugLogEnabled ( true ); Note \u5728\u5e94\u7528\u53d1\u5e03\u4e4b\u524d\uff0c\u8bf7\u5173\u95ed\u8c03\u8bd5\u65e5\u5fd7\uff0c\u4ee5\u514d\u66b4\u9732\u654f\u611f\u6570\u636e\u3002 \u542f\u7528\u6307\u5b9a\u8282\u70b9 SDK \u7684\u521d\u59cb\u5316\u65b9\u6cd5\u9ed8\u8ba4\u4f7f\u7528 \u4e2d\u56fd\u5927\u9646\u8282\u70b9 \uff0c\u5982\u9700\u5207\u6362\u5230 \u5176\u4ed6\u53ef\u7528\u8282\u70b9 \uff0c\u8bf7\u53c2\u8003\u5982\u4e0b\u7528\u6cd5\uff1a public static void main ( String [] args ){ // \u542f\u7528\u5317\u7f8e\u8282\u70b9 AVOSCloud . useAVCloudUS (); // \u521d\u59cb\u5316\u53c2\u6570\u4f9d\u6b21\u4e3a AppId, AppKey, MasterKey AVOSCloud . initialize ( {{appid}} , {{appkey}} , {{masterkey}} ); } \u5168\u7403\u8282\u70b9 \u4e2d\u56fd\u5927\u9646\u8282\u70b9 leancloud.cn \uff08SDK \u521d\u59cb\u5316\u65b9\u6cd5 \u9ed8\u8ba4 \u4f7f\u7528\u8be5\u8282\u70b9\uff09 \u5317\u7f8e\u8282\u70b9 us.leancloud.cn \uff08\u670d\u52a1\u5317\u7f8e\u5e02\u573a\uff09 \u5404\u4e2a\u8282\u70b9\u5f7c\u6b64\u72ec\u7acb\uff0c\u5f00\u53d1\u8005\u8d26\u53f7\u65e0\u6cd5\u8de8\u8282\u70b9\u6765\u521b\u5efa\u5e94\u7528\u6216\u8c03\u7528 API\u3002 \u9a8c\u8bc1 \u9996\u5148\uff0c\u786e\u8ba4\u672c\u5730\u7f51\u7edc\u73af\u5883\u662f\u53ef\u4ee5\u8bbf\u95ee LeanCloud \u670d\u52a1\u5668\u7684\uff0c\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u884c\uff1a ping {{domainN1}} \u5982\u679c\u5f53\u524d\u7f51\u8def\u6b63\u5e38\u5c06\u4f1a\u5f97\u5230\u5982\u4e0b\u54cd\u5e94\uff1a PING api-ucloud.leancloud.cn ( 123 .59.41.31 ) : 56 data bytes 64 bytes from 123 .59.41.31: icmp_seq = 0 ttl = 51 time = 9 .032 ms 64 bytes from 123 .59.41.31: icmp_seq = 1 ttl = 51 time = 7 .290 ms 64 bytes from 123 .59.41.31: icmp_seq = 2 ttl = 51 time = 8 .131 ms 64 bytes from 123 .59.41.31: icmp_seq = 3 ttl = 51 time = 9 .689 ms 64 bytes from 123 .59.41.31: icmp_seq = 4 ttl = 51 time = 6 .559 ms 64 bytes from 123 .59.41.31: icmp_seq = 5 ttl = 51 time = 8 .665 ms 64 bytes from 123 .59.41.31: icmp_seq = 6 ttl = 51 time = 8 .041 ms 64 bytes from 123 .59.41.31: icmp_seq = 7 ttl = 51 time = 8 .203 ms 64 bytes from 123 .59.41.31: icmp_seq = 8 ttl = 51 time = 6 .288 ms 64 bytes from 123 .59.41.31: icmp_seq = 9 ttl = 51 time = 7 .938 ms --- api-ucloud.leancloud.cn ping statistics --- 10 packets transmitted, 10 packets received, 0 .0% packet loss round-trip min/avg/max/stddev = 6 .288/7.984/9.689/0.997 ms \u7136\u540e\u5728\u9879\u76ee\u4e2d\u7f16\u5199\u5982\u4e0b\u6d4b\u8bd5\u4ee3\u7801\uff1a AVObject testObject = new AVObject ( TestObject ); testObject . put ( words , Hello World! ); testObject . save (); \u7136\u540e\u6253\u5f00 \u63a7\u5236\u53f0 \u5b58\u50a8 \u6570\u636e TestObject \uff0c\u5982\u679c\u770b\u5230\u5982\u4e0b\u5185\u5bb9\uff0c\u8bf4\u660e SDK \u5df2\u7ecf\u6b63\u786e\u5730\u6267\u884c\u4e86\u4e0a\u8ff0\u4ee3\u7801\uff0c\u5b89\u88c5\u5b8c\u6bd5\u3002 \u5982\u679c\u63a7\u5236\u53f0\u6ca1\u6709\u53d1\u73b0\u5bf9\u5e94\u7684\u6570\u636e\uff0c\u8bf7\u53c2\u8003 \u95ee\u9898\u6392\u67e5 \u3002 \u95ee\u9898\u6392\u67e5 401 Unauthorized \u5982\u679c SDK \u629b\u51fa 401 \u5f02\u5e38\u6216\u8005\u67e5\u770b\u672c\u5730\u7f51\u7edc\u8bbf\u95ee\u65e5\u5fd7\u5b58\u5728\uff1a { code : 401 , error : Unauthorized. } \u5219\u53ef\u8ba4\u5b9a\u4e3a App ID \u6216\u8005 App Key \u8f93\u5165\u6709\u8bef\uff0c\u6216\u8005\u662f\u4e0d\u5339\u914d\uff0c\u5f88\u591a\u5f00\u53d1\u8005\u540c\u65f6\u6ce8\u518c\u4e86\u591a\u4e2a\u5e94\u7528\uff0c\u5bfc\u81f4\u62f7\u8d1d\u7c98\u8d34\u7684\u65f6\u5019\uff0c\u7528 A \u5e94\u7528\u7684 App ID \u5339\u914d B \u5e94\u7528\u7684 App Key\uff0c\u8fd9\u6837\u5c31\u4f1a\u51fa\u73b0\u670d\u52a1\u7aef\u9274\u6743\u5931\u8d25\u7684\u9519\u8bef\u3002 \u5ba2\u6237\u7aef\u65e0\u6cd5\u8bbf\u95ee\u7f51\u7edc \u5ba2\u6237\u7aef\u5c24\u5176\u662f\u624b\u673a\u7aef\uff0c\u5e94\u7528\u5728\u8bbf\u95ee\u7f51\u7edc\u7684\u65f6\u5019\u9700\u8981\u7533\u8bf7\u4e00\u5b9a\u7684\u6743\u9650\u3002","title":"Java SDK \u5b89\u88c5\u6307\u5357"},{"location":"sdk-setup/java/#java-sdk","text":"","title":"Java SDK \u5b89\u88c5\u6307\u5357"},{"location":"sdk-setup/java/#sdk","text":"\u83b7\u53d6 SDK \u6709\u591a\u79cd\u65b9\u5f0f\uff0c\u8f83\u4e3a\u63a8\u8350\u7684\u65b9\u5f0f\u662f\u901a\u8fc7\u5305\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u3002","title":"\u83b7\u53d6 SDK"},{"location":"sdk-setup/java/#_1","text":"\u901a\u8fc7 maven \u914d\u7f6e\u76f8\u5173\u4f9d\u8d56 dependencies dependency groupId cn.leancloud /groupId artifactId java-sdk /artifactId version 0.1.6 /version /dependency /dependencies \u6216\u8005\u901a\u8fc7 gradle \u914d\u7f6e\u76f8\u5173\u4f9d\u8d56 dependencies { compile ( cn.leancloud:java-sdk:0.1.6 ) }","title":"\u5305\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u5b89\u88c5"},{"location":"sdk-setup/java/#_2","text":"\u4e0b\u8f7d SDK","title":"\u624b\u52a8\u5b89\u88c5"},{"location":"sdk-setup/java/#_3","text":"\u9996\u5148\u8fdb\u5165 \u63a7\u5236\u53f0 \u8bbe\u7f6e \u5e94\u7528 Key \u6765\u83b7\u53d6 App ID \u4ee5\u53ca App Key\u3002 \u7136\u540e\u5bfc\u5165 leancloud\uff0c\u5e76\u5728 main \u51fd\u6570\u4e2d\u8c03\u7528 AVOSCloud.initialize \u65b9\u6cd5\u8fdb\u884c\u521d\u59cb\u5316\uff1a public static void main ( String [] args ){ // \u53c2\u6570\u4f9d\u6b21\u4e3a AppId\u3001AppKey\u3001MasterKey AVOSCloud . initialize ( {{appid}} , {{appkey}} , {{masterkey}} ); }","title":"\u521d\u59cb\u5316"},{"location":"sdk-setup/java/#_4","text":"\u5728\u5e94\u7528\u5f00\u53d1\u9636\u6bb5\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u5f00\u542f SDK \u7684\u8c03\u8bd5\u65e5\u5fd7\uff08debug log\uff09\u6765\u65b9\u4fbf\u8ffd\u8e2a\u95ee\u9898\u3002\u8c03\u8bd5\u65e5\u5fd7\u5f00\u542f\u540e\uff0cSDK \u4f1a\u628a\u7f51\u7edc\u8bf7\u6c42\u3001\u9519\u8bef\u6d88\u606f\u7b49\u4fe1\u606f\u8f93\u51fa\u5230 IDE \u7684\u65e5\u5fd7\u7a97\u53e3\uff0c\u6216\u662f\u6d4f\u89c8\u5668 Console \u6216\u662f LeanCloud \u63a7\u5236\u53f0\u7684 \u4e91\u5f15\u64ce\u65e5\u5fd7 \u4e2d\u3002 // \u653e\u5728 SDK \u521d\u59cb\u5316\u8bed\u53e5 AVOSCloud.initialize() \u540e\u9762\uff0c\u53ea\u9700\u8981\u8c03\u7528\u4e00\u6b21\u5373\u53ef AVOSCloud . setDebugLogEnabled ( true ); Note \u5728\u5e94\u7528\u53d1\u5e03\u4e4b\u524d\uff0c\u8bf7\u5173\u95ed\u8c03\u8bd5\u65e5\u5fd7\uff0c\u4ee5\u514d\u66b4\u9732\u654f\u611f\u6570\u636e\u3002","title":"\u5f00\u542f\u8c03\u8bd5\u65e5\u5fd7"},{"location":"sdk-setup/java/#_5","text":"SDK \u7684\u521d\u59cb\u5316\u65b9\u6cd5\u9ed8\u8ba4\u4f7f\u7528 \u4e2d\u56fd\u5927\u9646\u8282\u70b9 \uff0c\u5982\u9700\u5207\u6362\u5230 \u5176\u4ed6\u53ef\u7528\u8282\u70b9 \uff0c\u8bf7\u53c2\u8003\u5982\u4e0b\u7528\u6cd5\uff1a public static void main ( String [] args ){ // \u542f\u7528\u5317\u7f8e\u8282\u70b9 AVOSCloud . useAVCloudUS (); // \u521d\u59cb\u5316\u53c2\u6570\u4f9d\u6b21\u4e3a AppId, AppKey, MasterKey AVOSCloud . initialize ( {{appid}} , {{appkey}} , {{masterkey}} ); }","title":"\u542f\u7528\u6307\u5b9a\u8282\u70b9"},{"location":"sdk-setup/java/#_6","text":"\u4e2d\u56fd\u5927\u9646\u8282\u70b9 leancloud.cn \uff08SDK \u521d\u59cb\u5316\u65b9\u6cd5 \u9ed8\u8ba4 \u4f7f\u7528\u8be5\u8282\u70b9\uff09 \u5317\u7f8e\u8282\u70b9 us.leancloud.cn \uff08\u670d\u52a1\u5317\u7f8e\u5e02\u573a\uff09 \u5404\u4e2a\u8282\u70b9\u5f7c\u6b64\u72ec\u7acb\uff0c\u5f00\u53d1\u8005\u8d26\u53f7\u65e0\u6cd5\u8de8\u8282\u70b9\u6765\u521b\u5efa\u5e94\u7528\u6216\u8c03\u7528 API\u3002","title":"\u5168\u7403\u8282\u70b9"},{"location":"sdk-setup/java/#_7","text":"\u9996\u5148\uff0c\u786e\u8ba4\u672c\u5730\u7f51\u7edc\u73af\u5883\u662f\u53ef\u4ee5\u8bbf\u95ee LeanCloud \u670d\u52a1\u5668\u7684\uff0c\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u884c\uff1a ping {{domainN1}} \u5982\u679c\u5f53\u524d\u7f51\u8def\u6b63\u5e38\u5c06\u4f1a\u5f97\u5230\u5982\u4e0b\u54cd\u5e94\uff1a PING api-ucloud.leancloud.cn ( 123 .59.41.31 ) : 56 data bytes 64 bytes from 123 .59.41.31: icmp_seq = 0 ttl = 51 time = 9 .032 ms 64 bytes from 123 .59.41.31: icmp_seq = 1 ttl = 51 time = 7 .290 ms 64 bytes from 123 .59.41.31: icmp_seq = 2 ttl = 51 time = 8 .131 ms 64 bytes from 123 .59.41.31: icmp_seq = 3 ttl = 51 time = 9 .689 ms 64 bytes from 123 .59.41.31: icmp_seq = 4 ttl = 51 time = 6 .559 ms 64 bytes from 123 .59.41.31: icmp_seq = 5 ttl = 51 time = 8 .665 ms 64 bytes from 123 .59.41.31: icmp_seq = 6 ttl = 51 time = 8 .041 ms 64 bytes from 123 .59.41.31: icmp_seq = 7 ttl = 51 time = 8 .203 ms 64 bytes from 123 .59.41.31: icmp_seq = 8 ttl = 51 time = 6 .288 ms 64 bytes from 123 .59.41.31: icmp_seq = 9 ttl = 51 time = 7 .938 ms --- api-ucloud.leancloud.cn ping statistics --- 10 packets transmitted, 10 packets received, 0 .0% packet loss round-trip min/avg/max/stddev = 6 .288/7.984/9.689/0.997 ms \u7136\u540e\u5728\u9879\u76ee\u4e2d\u7f16\u5199\u5982\u4e0b\u6d4b\u8bd5\u4ee3\u7801\uff1a AVObject testObject = new AVObject ( TestObject ); testObject . put ( words , Hello World! ); testObject . save (); \u7136\u540e\u6253\u5f00 \u63a7\u5236\u53f0 \u5b58\u50a8 \u6570\u636e TestObject \uff0c\u5982\u679c\u770b\u5230\u5982\u4e0b\u5185\u5bb9\uff0c\u8bf4\u660e SDK \u5df2\u7ecf\u6b63\u786e\u5730\u6267\u884c\u4e86\u4e0a\u8ff0\u4ee3\u7801\uff0c\u5b89\u88c5\u5b8c\u6bd5\u3002 \u5982\u679c\u63a7\u5236\u53f0\u6ca1\u6709\u53d1\u73b0\u5bf9\u5e94\u7684\u6570\u636e\uff0c\u8bf7\u53c2\u8003 \u95ee\u9898\u6392\u67e5 \u3002","title":"\u9a8c\u8bc1"},{"location":"sdk-setup/java/#_8","text":"","title":"\u95ee\u9898\u6392\u67e5"},{"location":"sdk-setup/java/#401-unauthorized","text":"\u5982\u679c SDK \u629b\u51fa 401 \u5f02\u5e38\u6216\u8005\u67e5\u770b\u672c\u5730\u7f51\u7edc\u8bbf\u95ee\u65e5\u5fd7\u5b58\u5728\uff1a { code : 401 , error : Unauthorized. } \u5219\u53ef\u8ba4\u5b9a\u4e3a App ID \u6216\u8005 App Key \u8f93\u5165\u6709\u8bef\uff0c\u6216\u8005\u662f\u4e0d\u5339\u914d\uff0c\u5f88\u591a\u5f00\u53d1\u8005\u540c\u65f6\u6ce8\u518c\u4e86\u591a\u4e2a\u5e94\u7528\uff0c\u5bfc\u81f4\u62f7\u8d1d\u7c98\u8d34\u7684\u65f6\u5019\uff0c\u7528 A \u5e94\u7528\u7684 App ID \u5339\u914d B \u5e94\u7528\u7684 App Key\uff0c\u8fd9\u6837\u5c31\u4f1a\u51fa\u73b0\u670d\u52a1\u7aef\u9274\u6743\u5931\u8d25\u7684\u9519\u8bef\u3002","title":"401 Unauthorized"},{"location":"sdk-setup/java/#_9","text":"\u5ba2\u6237\u7aef\u5c24\u5176\u662f\u624b\u673a\u7aef\uff0c\u5e94\u7528\u5728\u8bbf\u95ee\u7f51\u7edc\u7684\u65f6\u5019\u9700\u8981\u7533\u8bf7\u4e00\u5b9a\u7684\u6743\u9650\u3002","title":"\u5ba2\u6237\u7aef\u65e0\u6cd5\u8bbf\u95ee\u7f51\u7edc"},{"location":"sdk-setup/js/","text":"JavaScript SDK \u5b89\u88c5\u6307\u5357 \u672c\u6307\u5357\u6309\u7167\u5e94\u7528\u7684\u9002\u7528\u5e73\u53f0\u6765\u4ecb\u7ecd\u5404\u81ea\u7684\u5b89\u88c5\u4e0e\u96c6\u6210\u65b9\u5f0f\u3002 Web Node.js \u5fae\u4fe1\u5c0f\u7a0b\u5e8f \u5fae\u4fe1\u5c0f\u6e38\u620f CocosCreator LayaAir Egret React Native Electron Web \u9002\u7528\u4e8e\u8fd0\u884c\u5728\u6d4f\u89c8\u5668\u3001WebView \u6216\u5176\u4ed6\u5e94\u7528\u5185 HTML \u5e73\u53f0\u4e0a\u7684\u5e94\u7528\u3002 \u5b89\u88c5\u4e0e\u5f15\u7528 SDK npm \u5982\u679c\u4f60\u7684 Web \u5e94\u7528\u4f7f\u7528\u4e86 webpack \u7b49\u524d\u7aef\u6253\u5305\u5de5\u5177\uff0c\u6211\u4eec\u63a8\u8350\u4f7f\u7528\u5305\u7ba1\u7406\u5de5\u5177 npm \u5b89\u88c5 SDK\uff1a # \u5b58\u50a8\u670d\u52a1\uff08\u5305\u62ec\u63a8\u9001\uff09 $ npm install leancloud-storage --save # \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 $ npm install leancloud-realtime --save \u5982\u679c\u56e0\u4e3a\u7f51\u7edc\u539f\u56e0\u65e0\u6cd5\u901a\u8fc7\u5b98\u65b9\u7684 npm \u7ad9\u70b9\u4e0b\u8f7d\uff0c\u63a8\u8350\u901a\u8fc7 taobao \u955c\u50cf\u6765\u4e0b\u8f7d\uff0c\u64cd\u4f5c\u6b65\u9aa4\u5982\u4e0b\uff1a # \u5b58\u50a8\u670d\u52a1\uff08\u5305\u62ec\u63a8\u9001\uff09 $ npm install leancloud-storage --save --registry = https://registry.npm.taobao.org # \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 $ npm install leancloud-realtime --save --registry = https://registry.npm.taobao.org \u7136\u540e\u5728\u4ee3\u7801\u4e2d\u901a\u8fc7 require \u83b7\u5f97 SDK \u7684\u5f15\u7528\uff1a // \u5b58\u50a8\u670d\u52a1 var AV = require ( leancloud-storage ); var { Query , User } = AV ; // \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 var { Realtime , TextMessage } = require ( leancloud-realtime ); \u5982\u679c\u9700\u8981\u4f7f\u7528\u5b58\u50a8\u670d\u52a1\u7684 LiveQuery \u529f\u80fd\uff0c\u9700\u8981\u6309\u5982\u4e0b\u505a\u6cd5\u5f15\u5165\u5b58\u50a8 SDK\uff1a var AV = require ( leancloud-storage/live-query ); CDN \u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728\u9875\u9762\u4e2d\u901a\u8fc7 script \u6807\u7b7e\u5f15\u5165\u6211\u4eec\u7684 SDK\uff1a !-- \u5b58\u50a8\u670d\u52a1 -- script src = //cdn.jsdelivr.net/npm/leancloud-storage@3.10.0/dist/av-min.js / script !-- \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 -- script src = //cdn.jsdelivr.net/npm/leancloud-realtime@4.2.0/dist/realtime.browser.min.js / script \u5982\u679c\u9700\u8981\u4f7f\u7528\u5b58\u50a8\u670d\u52a1\u7684 LiveQuery \u529f\u80fd\uff0c\u9700\u8981\u6309\u5982\u4e0b\u505a\u6cd5\u5f15\u5165\u5b58\u50a8 SDK\uff1a script src = //cdn.jsdelivr.net/npm/leancloud-storage@3.10.0/dist/av-live-query-min.js / script \u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u5f15\u5165\u7684 SDK \u53ef\u4ee5\u901a\u8fc7\u5168\u5c40\u53d8\u91cf AV \u83b7\u5f97\u5f15\u7528\uff1a // \u5b58\u50a8\u670d\u52a1 var { Query , User } = AV ; AV . init ( appId , appKey ); // \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 var { Realtime , TextMessage } = AV ; \u6253\u5f00\u8c03\u8bd5\u65e5\u5fd7 \u5728\u5e94\u7528\u5f00\u53d1\u9636\u6bb5\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u5f00\u542f SDK \u7684\u8c03\u8bd5\u65e5\u5fd7\uff08debug log\uff09\u6765\u65b9\u4fbf\u8ffd\u8e2a\u95ee\u9898\u3002\u8c03\u8bd5\u65e5\u5fd7\u5f00\u542f\u540e\uff0cSDK \u4f1a\u628a\u7f51\u7edc\u8bf7\u6c42\u3001\u9519\u8bef\u6d88\u606f\u7b49\u4fe1\u606f\u8f93\u51fa\u5230\u6d4f\u89c8\u5668\u7684 console \u4e2d\u3002 \u8981\u5728 Web \u5e73\u53f0\u4e2d\u6253\u5f00\u8c03\u8bd5\u65e5\u5fd7\uff0c\u8bf7\u6253\u5f00\u6d4f\u89c8\u5668\u7684\u63a7\u5236\u53f0\uff08console\uff09\uff0c\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a localStorage . setItem ( debug , leancloud*,LC* ); Node.js JavaScript SDK \u4e5f\u53ef\u4ee5\u8fd0\u884c\u5728 Node.js \u8fd0\u884c\u73af\u5883\u4e2d\u3002\u5982\u679c\u5e0c\u671b\u5728\u4e91\u5f15\u64ce\u4e2d\u8bbf\u95ee\u6211\u4eec\u7684\u5b58\u50a8\u670d\u52a1\uff0c\u8bf7\u53c2\u7167 \u4e91\u5f15\u64ce\u5feb\u901f\u5165\u95e8 \uff0c\u4f7f\u7528\u6a21\u677f\u9879\u76ee\u4e2d\u63d0\u4f9b\u7684 leanengine \u5305\u63a5\u5165\u5b58\u50a8\u670d\u52a1\u3002 \u5b89\u88c5\u4e0e\u5f15\u7528 SDK Node.js \u4e2d SDK \u7684\u5b89\u88c5\u4e0e\u5f15\u7528\u4e5f\u662f\u901a\u8fc7\u5305\u7ba1\u7406\u5de5\u5177 npm\uff0c\u8bf7\u53c2\u8003 npm \u3002 \u6253\u5f00\u8c03\u8bd5\u65e5\u5fd7 \u5728 Node.js \u5e73\u53f0\u4e2d\u6253\u5f00\u8c03\u8bd5\u65e5\u5fd7\uff0c\u9700\u8981\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf DEBUG \u4e3a leancloud*,LC* \u3002 \u4f60\u53ef\u4ee5\u5728\u542f\u52a8\u67d0\u4e2a\u547d\u4ee4\u4e4b\u524d\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u3002\u4e0b\u9762\u4ee5\u672c\u5730\u542f\u52a8\u4e91\u5f15\u64ce\u8c03\u8bd5\u7684\u547d\u4ee4\uff08 lean up \uff09\u4e3a\u4f8b\uff1a # Unix DEBUG = leancloud*,LC* lean up # Windows cmd set DEBUG = leancloud*,LC* lean up \u5fae\u4fe1\u5c0f\u7a0b\u5e8f \u624b\u52a8\u5bfc\u5165\u6587\u4ef6 \u5b58\u50a8\u670d\u52a1 \u524d\u5f80 \u5b58\u50a8 SDK \u4e0b\u8f7d\u9875 \uff0c\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u7684 av-weapp-min.js \uff0c\u79fb\u52a8\u5230 libs \u76ee\u5f55\u3002\u5982\u679c\u9700\u8981\u4f7f\u7528 LiveQuery \u529f\u80fd\uff0c\u9700\u8981\u4e0b\u8f7d av-weapp-live-query-min.js \u3002 \u5728 app.js \u4e2d\u4f7f\u7528 const AV = require( ./libs/av-weapp-min.js ); \u83b7\u5f97 AV \u7684\u5f15\u7528\u3002\u5728\u5176\u4ed6\u6587\u4ef6\u4e2d\u4f7f\u7528\u65f6\u8bf7\u5c06\u8def\u5f84\u66ff\u6362\u6210\u5bf9\u5e94\u7684\u76f8\u5bf9\u8def\u5f84\u3002 \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 \u524d\u5f80 \u5b9e\u65f6\u6d88\u606f SDK \u4e0b\u8f7d\u9875 \uff0c\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u7684 realtime.weapp.min.js \uff0c\u79fb\u52a8\u5230 libs \u76ee\u5f55\u3002 \u5728 app.js \u4e2d\u4f7f\u7528 const { Realtime, TextMessage } = require( ./libs/realtime.weapp.min.js ); \u83b7\u5f97 Realtime \u7b49 SDK \u66b4\u9732\u6210\u5458\u7684\u5f15\u7528\u3002\u5728\u5176\u4ed6\u6587\u4ef6\u4e2d\u4f7f\u7528\u65f6\u8bf7\u5c06\u8def\u5f84\u66ff\u6362\u6210\u5bf9\u5e94\u7684\u76f8\u5bf9\u8def\u5f84\u3002 WePY \u5982\u679c\u4f7f\u7528 WePY \u6765\u5f00\u53d1\u5c0f\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7 npm \u5b89\u88c5\u548c\u5f15\u7528 SDK\uff0c\u5177\u4f53\u64cd\u4f5c\u6b65\u9aa4\u8bf7\u53c2\u8003 npm \u3002 mpvue \u5982\u679c\u4f7f\u7528 mpvue \u6765\u5f00\u53d1\u5c0f\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7 npm \u5b89\u88c5\u548c\u5f15\u7528 SDK\uff0c\u5177\u4f53\u64cd\u4f5c\u6b65\u9aa4\u8bf7\u53c2\u8003 npm \u3002 \u5fae\u4fe1\u5c0f\u6e38\u620f \u5fae\u4fe1\u5c0f\u6e38\u620f\u624b\u52a8\u5bfc\u5165 SDK \u7684\u6b65\u9aa4\u4e0e\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4e00\u81f4\uff0c\u8bf7\u53c2\u8003 \u5fae\u4fe1\u5c0f\u7a0b\u5e8f \u00b7 \u624b\u52a8\u5bfc\u5165\u6587\u4ef6 \u3002 \u5982\u679c\u4f7f\u7528\u6e38\u620f\u5f15\u64ce\u63d0\u4f9b\u7684\u5f00\u53d1\u5de5\u5177\u5f00\u53d1\u5fae\u4fe1\u5c0f\u6e38\u620f\uff0c\u8bf7\u53c2\u7167\u5bf9\u5e94\u7684\u6e38\u620f\u5f15\u64ce\u7ae0\u8282\u3002 CocosCreator CocosCreator \u652f\u6301\u76f4\u63a5\u901a\u8fc7 npm \u5b89\u88c5\u4e0e\u5f15\u7528 SDK\uff0c\u5177\u4f53\u64cd\u4f5c\u6b65\u9aa4\u8bf7\u53c2\u8003 npm \u3002 CocosCreator \u9879\u76ee\u9ed8\u8ba4\u6ca1\u6709 package.json \u6587\u4ef6\uff0c\u53ef\u4ee5\u5728\u5b89\u88c5 SDK \u524d\u901a\u8fc7 npm init -y \u547d\u4ee4\u521b\u5efa\u3002 \u5982\u679c\u4f60\u7684 CocosCreator \u9879\u76ee\u9700\u8981\u53d1\u5e03\u4e3a\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\uff0c\u9700\u8981\u5728\u6784\u5efa\u53d1\u5e03\u5230\u5c0f\u7a0b\u5e8f\u4e4b\u524d\u4fee\u6539 SDK \u7684\u5f15\u7528\u8def\u5f84\uff1a // \u5b58\u50a8\u670d\u52a1 SDK \u8def\u5f84\u53d8\u66f4\u4e3a - var AV = require( leancloud-storage ); + var AV = require( leancloud-storage/dist/av-weapp-min.js ); // \u5e26 LiveQuery \u529f\u80fd\u7684\u5b58\u50a8 SDK \u8def\u5f84\u53d8\u66f4\u4e3a - var AV = require( leancloud-storage/live-query ); + var AV = require( leancloud-storage/dist/av-live-query-weapp-min.js ); // \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 SDK \u8def\u5f84\u53d8\u66f4\u4e3a - var { Realtime } = require( leancloud-realtime ); + var { Realtime } = require( leancloud-realtime/dist/realtime.weapp.js ); \u8bf7\u6ce8\u610f\uff0c\u6b64\u6539\u52a8\u4f1a\u5bfc\u81f4\u5176\u4ed6\u5e73\u53f0\u7684\u4ea7\u51fa\uff08\u5305\u62ec\u6d4f\u89c8\u5668\u4e0e\u6a21\u62df\u5668\u7684\u9884\u89c8\u529f\u80fd\uff09\u4e0d\u80fd\u6b63\u5e38\u5de5\u4f5c\uff0c\u56e0\u6b64\u5e94\u8be5\u53ea\u5728\u6784\u5efa\u53d1\u5e03\u5230\u5c0f\u7a0b\u5e8f\u4e4b\u524d\u4e34\u65f6\u4fee\u6539\uff0c\u5e76\u5728\u53d1\u5e03\u4e4b\u540e\u4fee\u6539\u56de\u6765\u3002 \u5728\u6539\u52a8\u4e4b\u540e\uff0cCocosCreator \u7684\u63a7\u5236\u53f0\u53ef\u80fd\u4f1a\u51fa\u73b0 load script error\uff0c\u4f46\u4e0d\u5f71\u54cd\u6784\u5efa\u53d1\u5e03\u5c0f\u7a0b\u5e8f\uff0c\u5e76\u4e14\u6784\u5efa\u4ea7\u51fa\u5728\u5c0f\u7a0b\u5e8f\u5f00\u53d1\u5de5\u5177\u4e2d\u8fd0\u884c\u4e5f\u4e0d\u4f1a\u6709\u5f02\u5e38\u3002 LayaAir \u6839\u636e\u4f60\u521b\u5efa\u7684\u9879\u76ee\u7c7b\u578b\u4e0e\u9700\u8981\u4f7f\u7528\u7684\u670d\u52a1\uff0c\u4e0b\u8f7d\u5bf9\u5e94\u7684 SDK \u6587\u4ef6\uff0c\u79fb\u52a8\u5230 bin/libs/ \u76ee\u5f55\uff1a \u5c0f\u7a0b\u5e8f\u9879\u76ee \u666e\u901a\u9879\u76ee \u5b58\u50a8\u670d\u52a1 leancloud-storage-weapp.min.js leancloud-storage.min.js \u5b58\u50a8\u670d\u52a1\uff08LiveQuery\uff09 leancloud-storage-live-query-weapp.min.js leancloud-storage-live-query.min.js \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 leancloud-realtime-weapp.min.js leancloud-realtime.min.js \u5728 bin/index.html \u4e2d\u9879\u76ee\u300cIDE \u751f\u6210\u7684 UI \u6587\u4ef6\u300d\u4e4b\u524d\u5f15\u5165\u521a\u4e0b\u8f7d\u7684 SDK \u6587\u4ef6\uff1a !--\u63d0\u4f9b\u4e86\u5236\u4f5c UI \u7684\u5404\u79cd\u7ec4\u4ef6\u5b9e\u73b0-- script type= text/javascript src= libs/laya.ui.js /script !--\u7528\u6237\u81ea\u5b9a\u4e49\u987a\u5e8f\u6587\u4ef6\u6dfb\u52a0\u5230\u8fd9\u91cc-- !--jsfile--Custom-- + !--LeanCloud \u5b58\u50a8 SDK-- + script src= libs/leancloud-storage-live-query-weapp.min.js /script + !--LeanCloud \u5373\u65f6\u901a\u8baf SDK-- + script src= libs/leancloud-realtime-weapp.min.js /script !--jsfile--Custom-- !--IDE \u751f\u6210\u7684 UI \u6587\u4ef6-- script src= ../src/ui/layaUI.max.all.js /script Note \u5c0f\u7a0b\u5e8f\u9879\u76ee\u4e0e\u666e\u901a\u9879\u76ee\u4f7f\u7528\u7684 SDK \u662f\u4e0d\u4e00\u6837\u7684\uff0c\u5efa\u8bae\u5c0f\u7a0b\u5e8f\u9879\u76ee\u5728\u4f7f\u7528\u6d4f\u89c8\u5668\u8fdb\u884c\u8c03\u8bd5\u65f6\u5207\u6362\u5230\u666e\u901a\u9879\u76ee SDK\u3002 \u6b64\u65f6\u5728 src \u76ee\u5f55\u4e0b\u7684\u4ee3\u7801\u4e2d\u5373\u53ef\u901a\u8fc7\u5168\u5c40\u53d8\u91cf AV \u83b7\u5f97 SDK \u7684\u5f15\u7528\uff1a // \u5b58\u50a8\u670d\u52a1 var { Query , User } = AV ; AV . init ( appId , appKey ); // \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 var { Realtime , TextMessage } = AV ; \u5982\u679c\u4f60\u521b\u5efa\u7684\u662f TypeScript \u9879\u76ee\uff0c\u6216\u8005\u5e0c\u671b\u5f97\u5230 IDE \u7684\u81ea\u52a8\u63d0\u793a\u80fd\u529b\uff0c\u8fd8\u9700\u8981\u4e0b\u8f7d TypeScript \u5b9a\u4e49\u6587\u4ef6\u79fb\u52a8\u81f3 libs \u76ee\u5f55\u3002 \u5b58\u50a8\u670d\u52a1\uff1a storage.d.ts \u5373\u65f6\u901a\u8baf\u670d\u52a1\uff1a realtime.d.ts \u5982\u679c\u540c\u65f6\u4f7f\u7528\u4e24\u4e2a SDK\uff0c\u56e0\u4e3a namespace \u51b2\u7a81\u7684\u95ee\u9898\uff0c\u9700\u8981\u4e0b\u8f7d leancloud-all.d.ts \uff0c\u7136\u540e\u624b\u52a8\u5220\u9664\u6700\u540e\u4e00\u884c export as namespace AV; \u3002 \u4f60\u53ef\u4ee5\u5728 \u8fd9\u4e2a\u793a\u4f8b\u9879\u76ee \u4e2d\u770b\u5230\u5b8c\u6574\u7684\u6539\u52a8\u3002 Egret\uff08\u767d\u9e6d\u5f15\u64ce\uff09 \u9996\u5148\u524d\u5f80 https://github.com/leancloud/egret-sdk \uff0c\u4e0b\u8f7d\u5bf9\u5e94\u7684 SDK \u76ee\u5f55\uff08leancloud-storage\uff09\uff0c\u5c06\u5176\u653e\u7f6e\u4e8e\u4f60\u7684 Egret \u6e38\u620f\u9879\u76ee\u540c\u7ea7\u76ee\u5f55\u4e0b\uff1a \u251c\u2500\u2500 egret-game-project \u2502 \u251c\u2500\u2500 \uff08\u5176\u4ed6\u76ee\u5f55\u4e0e\u6587\u4ef6\uff09 \u2502 \u2514\u2500\u2500 egretProperties.json \u2514\u2500\u2500 leancloud-storage \u251c\u2500\u2500 leancloud-storage.d.ts \u251c\u2500\u2500 leancloud-storage.js \u2514\u2500\u2500 leancloud-storage.min.js \u7136\u540e\uff0c\u7f16\u8f91 egret-game-project/egretProperties.json \u6587\u4ef6\uff0c\u5728 modules \u6570\u7ec4\u7684\u6700\u540e\u6dfb\u52a0 SDK\uff1a { engineVersion : 5.1.8 , compilerVersion : 5.1.8 , template : {}, target : { current : web }, eui : { exmlRoot : [ resource/eui_skins ], themes : [ resource/default.thm.json ], exmlPublishPolicy : commonjs }, modules : [ { name : egret }, { name : eui }, { name : assetsmanager }, { name : tween }, { name : promise + }, + { + name : leancloud-storage , + path : ../leancloud-storage } ] } \u6700\u540e\uff0c\u5728 egret-game-project \u76ee\u5f55\u4e0b\u8fd0\u884c egret build \uff0c\u5982\u679c\u5728 egret-game-project/manifest.json \u4e2d\u7684 initials \u6570\u7ec4\u4e2d\u51fa\u73b0\u4e86 libs/modules/leancloud-storage/leancloud-storage.js \u5219\u610f\u5473\u7740 SDK \u5b89\u88c5\u6210\u529f\u4e86\u3002 \u5b89\u88c5\u6210\u529f\u540e\uff0c\u4f60\u53ef\u4ee5\u5728\u4e1a\u52a1\u4ee3\u7801\u4e2d\u901a\u8fc7\u5168\u5c40\u53d8\u91cf AV \u83b7\u5f97 SDK \u7684\u5f15\u7528\uff1a var { Query , User } = AV ; AV . init ( appId , appKey ); \u76ee\u524d\u5728 Egret \u5e73\u53f0\u4e0a\uff0c\u6211\u4eec\u53ea\u63d0\u4f9b\u5b58\u50a8\u670d\u52a1\u7684 SDK\uff08\u4e0d\u542b LiveQuery \u529f\u80fd\uff09\u3002 React Native React Native \u76f4\u63a5\u901a\u8fc7 npm \u5b89\u88c5\u4e0e\u5f15\u7528 SDK\uff0c\u5177\u4f53\u64cd\u4f5c\u6b65\u9aa4\u8bf7\u53c2\u8003 #npm \u3002 Electron Electron \u4f7f\u7528\u5305\u7ba1\u7406\u5de5\u5177 npm \u7ba1\u7406\u4f9d\u8d56\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5 SDK\uff1a # \u5b58\u50a8\u670d\u52a1\uff08\u5305\u62ec\u63a8\u9001\uff09 $ npm install leancloud-storage --save # \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 $ npm install leancloud-realtime --save \u4f5c\u4e3a\u6d4f\u89c8\u5668\u811a\u672c\u5f15\u5165 \u5728 index.html \u4e2d\u53ef\u4ee5\u901a\u8fc7 script \u6807\u7b7e\u5f15\u5165 SDK\uff1a !-- \u5b58\u50a8\u670d\u52a1 -- script src = ./node_modules/leancloud-storage/dist/av-min.js / script !-- \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 -- script src = ./node_modules/leancloud-realtime/dist/realtime.browser.min.js / script \u5982\u679c\u9700\u8981\u4f7f\u7528\u5b58\u50a8\u670d\u52a1\u7684 LiveQuery \u529f\u80fd\uff0c\u9700\u8981\u6309\u5982\u4e0b\u8def\u5f84\u5f15\u5165\u5b58\u50a8 SDK\uff1a script src = ./node_modules/leancloud-storage/dist/av-live-query-min.js / script \u4f5c\u4e3a Node.js \u6a21\u5757\u5f15\u5165 \u6211\u4eec\u63a8\u8350\u4f7f\u7528 script \u6807\u7b7e\u5f15\u5165 SDK\uff0c\u8be5\u65b9\u5f0f\u80fd\u6ee1\u8db3\u7edd\u5927\u90e8\u5206\u7684\u9700\u6c42\u3002\u4f46\u662f\u5982\u679c\u6709\u4ee5\u4e0b\u7684\u9700\u6c42\uff0cSDK \u4e5f\u652f\u6301\u901a\u8fc7 require( leancloud-storage ) \u65b9\u6cd5\u4f5c\u4e3a Node.js \u6a21\u5757\u5f15\u5165\u3002 \u9700\u8981\u5728 main process \u4e2d\u4f7f\u7528 SDK \u9700\u8981\u4f7f\u7528 Node.js \u7684 Buffer \u6216 Stream \u6784\u9020 AV.File \u901a\u8fc7 Node.js require \u65b9\u6cd5\u5f15\u5165\u7684 SDK \u4e0e\u901a\u8fc7\u6d4f\u89c8\u5668 script \u6807\u7b7e\u5f15\u5165\u7684 SDK \u662f\u4e24\u4e2a\u4e0d\u540c\u7684 SDK\uff0c\u9700\u8981\u5404\u81ea\u5206\u522b\u521d\u59cb\u5316\uff0c\u5e76\u4e14\u4e0d\u80fd\u6df7\u7528\u3002 \u521d\u59cb\u5316 \u9996\u5148\u8fdb\u5165 \u63a7\u5236\u53f0 \u8bbe\u7f6e \u5e94\u7528 Key \u6765\u83b7\u53d6 App ID \u4ee5\u53ca App Key\u3002 \u5982\u679c\u662f\u5728\u524d\u7aef\u9879\u76ee\u91cc\u9762\u4f7f\u7528 LeanCloud JavaScript SDK\uff0c\u90a3\u4e48\u53ef\u4ee5\u5728\u9875\u9762\u52a0\u8f7d\u7684\u65f6\u5019\u8c03\u7528\u4e00\u4e0b\u521d\u59cb\u5316\u7684\u51fd\u6570\uff1a var APP_ID = {{appid}} ; var APP_KEY = {{appkey}} ; AV . init ({ appId : APP_ID , appKey : APP_KEY }); var APP_ID = {{ appid }} ; var APP_KEY = {{ appkey }} ; var AV = require( leancloud-storage ); AV.init({ appId: APP_ID, appKey: APP_KEY }); \u542f\u7528\u6307\u5b9a\u8282\u70b9 SDK \u7684\u521d\u59cb\u5316\u65b9\u6cd5\u9ed8\u8ba4\u4f7f\u7528 \u4e2d\u56fd\u5927\u9646\u8282\u70b9 \uff0c\u5982\u9700\u5207\u6362\u5230 \u5176\u4ed6\u53ef\u7528\u8282\u70b9 \uff0c\u8bf7\u53c2\u8003\u5982\u4e0b\u7528\u6cd5\uff1a var APP_ID = {{appid}} ; var APP_KEY = {{appkey}} ; AV . init ({ appId : APP_ID , appKey : APP_KEY , // \u542f\u7528\u7f8e\u56fd\u8282\u70b9 region : us }); \u5168\u7403\u8282\u70b9 \u4e2d\u56fd\u5927\u9646\u8282\u70b9 leancloud.cn \uff08SDK \u521d\u59cb\u5316\u65b9\u6cd5 \u9ed8\u8ba4 \u4f7f\u7528\u8be5\u8282\u70b9\uff09 \u5317\u7f8e\u8282\u70b9 us.leancloud.cn \uff08\u670d\u52a1\u5317\u7f8e\u5e02\u573a\uff09 \u5404\u4e2a\u8282\u70b9\u5f7c\u6b64\u72ec\u7acb\uff0c\u5f00\u53d1\u8005\u8d26\u53f7\u65e0\u6cd5\u8de8\u8282\u70b9\u6765\u521b\u5efa\u5e94\u7528\u6216\u8c03\u7528 API\u3002 \u9a8c\u8bc1 \u9996\u5148\uff0c\u786e\u8ba4\u672c\u5730\u7f51\u7edc\u73af\u5883\u662f\u53ef\u4ee5\u8bbf\u95ee LeanCloud \u670d\u52a1\u5668\u7684\uff0c\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u884c\uff1a ping {{domainN1}} \u5982\u679c\u5f53\u524d\u7f51\u8def\u6b63\u5e38\u5c06\u4f1a\u5f97\u5230\u5982\u4e0b\u54cd\u5e94\uff1a PING api-ucloud.leancloud.cn ( 123 .59.41.31 ) : 56 data bytes 64 bytes from 123 .59.41.31: icmp_seq = 0 ttl = 51 time = 9 .032 ms 64 bytes from 123 .59.41.31: icmp_seq = 1 ttl = 51 time = 7 .290 ms 64 bytes from 123 .59.41.31: icmp_seq = 2 ttl = 51 time = 8 .131 ms 64 bytes from 123 .59.41.31: icmp_seq = 3 ttl = 51 time = 9 .689 ms 64 bytes from 123 .59.41.31: icmp_seq = 4 ttl = 51 time = 6 .559 ms 64 bytes from 123 .59.41.31: icmp_seq = 5 ttl = 51 time = 8 .665 ms 64 bytes from 123 .59.41.31: icmp_seq = 6 ttl = 51 time = 8 .041 ms 64 bytes from 123 .59.41.31: icmp_seq = 7 ttl = 51 time = 8 .203 ms 64 bytes from 123 .59.41.31: icmp_seq = 8 ttl = 51 time = 6 .288 ms 64 bytes from 123 .59.41.31: icmp_seq = 9 ttl = 51 time = 7 .938 ms --- api-ucloud.leancloud.cn ping statistics --- 10 packets transmitted, 10 packets received, 0 .0% packet loss round-trip min/avg/max/stddev = 6 .288/7.984/9.689/0.997 ms \u7136\u540e\u5728\u9879\u76ee\u4e2d\u7f16\u5199\u5982\u4e0b\u6d4b\u8bd5\u4ee3\u7801\uff1a var TestObject = AV . Object . extend ( TestObject ); var testObject = new TestObject (); testObject . save ({ words : Hello World! }). then ( function ( object ) { alert ( LeanCloud Rocks! ); }) \u7136\u540e\u6253\u5f00 \u63a7\u5236\u53f0 \u5b58\u50a8 \u6570\u636e TestObject \uff0c\u5982\u679c\u770b\u5230\u5982\u4e0b\u5185\u5bb9\uff0c\u8bf4\u660e SDK \u5df2\u7ecf\u6b63\u786e\u5730\u6267\u884c\u4e86\u4e0a\u8ff0\u4ee3\u7801\uff0c\u5b89\u88c5\u5b8c\u6bd5\u3002 \u5982\u679c\u63a7\u5236\u53f0\u6ca1\u6709\u53d1\u73b0\u5bf9\u5e94\u7684\u6570\u636e\uff0c\u8bf7\u53c2\u8003 \u95ee\u9898\u6392\u67e5 \u3002 \u95ee\u9898\u6392\u67e5 401 Unauthorized \u5982\u679c SDK \u629b\u51fa 401 \u5f02\u5e38\u6216\u8005\u67e5\u770b\u672c\u5730\u7f51\u7edc\u8bbf\u95ee\u65e5\u5fd7\u5b58\u5728\uff1a { code : 401 , error : Unauthorized. } \u5219\u53ef\u8ba4\u5b9a\u4e3a App ID \u6216\u8005 App Key \u8f93\u5165\u6709\u8bef\uff0c\u6216\u8005\u662f\u4e0d\u5339\u914d\uff0c\u5f88\u591a\u5f00\u53d1\u8005\u540c\u65f6\u6ce8\u518c\u4e86\u591a\u4e2a\u5e94\u7528\uff0c\u5bfc\u81f4\u62f7\u8d1d\u7c98\u8d34\u7684\u65f6\u5019\uff0c\u7528 A \u5e94\u7528\u7684 App ID \u5339\u914d B \u5e94\u7528\u7684 App Key\uff0c\u8fd9\u6837\u5c31\u4f1a\u51fa\u73b0\u670d\u52a1\u7aef\u9274\u6743\u5931\u8d25\u7684\u9519\u8bef\u3002 \u5ba2\u6237\u7aef\u65e0\u6cd5\u8bbf\u95ee\u7f51\u7edc \u5ba2\u6237\u7aef\u5c24\u5176\u662f\u624b\u673a\u7aef\uff0c\u5e94\u7528\u5728\u8bbf\u95ee\u7f51\u7edc\u7684\u65f6\u5019\u9700\u8981\u7533\u8bf7\u4e00\u5b9a\u7684\u6743\u9650\u3002","title":"JavaScript SDK \u5b89\u88c5\u6307\u5357"},{"location":"sdk-setup/js/#javascript-sdk","text":"\u672c\u6307\u5357\u6309\u7167\u5e94\u7528\u7684\u9002\u7528\u5e73\u53f0\u6765\u4ecb\u7ecd\u5404\u81ea\u7684\u5b89\u88c5\u4e0e\u96c6\u6210\u65b9\u5f0f\u3002 Web Node.js \u5fae\u4fe1\u5c0f\u7a0b\u5e8f \u5fae\u4fe1\u5c0f\u6e38\u620f CocosCreator LayaAir Egret React Native Electron","title":"JavaScript SDK \u5b89\u88c5\u6307\u5357"},{"location":"sdk-setup/js/#web","text":"\u9002\u7528\u4e8e\u8fd0\u884c\u5728\u6d4f\u89c8\u5668\u3001WebView \u6216\u5176\u4ed6\u5e94\u7528\u5185 HTML \u5e73\u53f0\u4e0a\u7684\u5e94\u7528\u3002","title":"Web"},{"location":"sdk-setup/js/#sdk","text":"","title":"\u5b89\u88c5\u4e0e\u5f15\u7528 SDK"},{"location":"sdk-setup/js/#npm","text":"\u5982\u679c\u4f60\u7684 Web \u5e94\u7528\u4f7f\u7528\u4e86 webpack \u7b49\u524d\u7aef\u6253\u5305\u5de5\u5177\uff0c\u6211\u4eec\u63a8\u8350\u4f7f\u7528\u5305\u7ba1\u7406\u5de5\u5177 npm \u5b89\u88c5 SDK\uff1a # \u5b58\u50a8\u670d\u52a1\uff08\u5305\u62ec\u63a8\u9001\uff09 $ npm install leancloud-storage --save # \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 $ npm install leancloud-realtime --save \u5982\u679c\u56e0\u4e3a\u7f51\u7edc\u539f\u56e0\u65e0\u6cd5\u901a\u8fc7\u5b98\u65b9\u7684 npm \u7ad9\u70b9\u4e0b\u8f7d\uff0c\u63a8\u8350\u901a\u8fc7 taobao \u955c\u50cf\u6765\u4e0b\u8f7d\uff0c\u64cd\u4f5c\u6b65\u9aa4\u5982\u4e0b\uff1a # \u5b58\u50a8\u670d\u52a1\uff08\u5305\u62ec\u63a8\u9001\uff09 $ npm install leancloud-storage --save --registry = https://registry.npm.taobao.org # \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 $ npm install leancloud-realtime --save --registry = https://registry.npm.taobao.org \u7136\u540e\u5728\u4ee3\u7801\u4e2d\u901a\u8fc7 require \u83b7\u5f97 SDK \u7684\u5f15\u7528\uff1a // \u5b58\u50a8\u670d\u52a1 var AV = require ( leancloud-storage ); var { Query , User } = AV ; // \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 var { Realtime , TextMessage } = require ( leancloud-realtime ); \u5982\u679c\u9700\u8981\u4f7f\u7528\u5b58\u50a8\u670d\u52a1\u7684 LiveQuery \u529f\u80fd\uff0c\u9700\u8981\u6309\u5982\u4e0b\u505a\u6cd5\u5f15\u5165\u5b58\u50a8 SDK\uff1a var AV = require ( leancloud-storage/live-query );","title":"npm"},{"location":"sdk-setup/js/#cdn","text":"\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728\u9875\u9762\u4e2d\u901a\u8fc7 script \u6807\u7b7e\u5f15\u5165\u6211\u4eec\u7684 SDK\uff1a !-- \u5b58\u50a8\u670d\u52a1 -- script src = //cdn.jsdelivr.net/npm/leancloud-storage@3.10.0/dist/av-min.js / script !-- \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 -- script src = //cdn.jsdelivr.net/npm/leancloud-realtime@4.2.0/dist/realtime.browser.min.js / script \u5982\u679c\u9700\u8981\u4f7f\u7528\u5b58\u50a8\u670d\u52a1\u7684 LiveQuery \u529f\u80fd\uff0c\u9700\u8981\u6309\u5982\u4e0b\u505a\u6cd5\u5f15\u5165\u5b58\u50a8 SDK\uff1a script src = //cdn.jsdelivr.net/npm/leancloud-storage@3.10.0/dist/av-live-query-min.js / script \u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u5f15\u5165\u7684 SDK \u53ef\u4ee5\u901a\u8fc7\u5168\u5c40\u53d8\u91cf AV \u83b7\u5f97\u5f15\u7528\uff1a // \u5b58\u50a8\u670d\u52a1 var { Query , User } = AV ; AV . init ( appId , appKey ); // \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 var { Realtime , TextMessage } = AV ;","title":"CDN"},{"location":"sdk-setup/js/#_1","text":"\u5728\u5e94\u7528\u5f00\u53d1\u9636\u6bb5\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u5f00\u542f SDK \u7684\u8c03\u8bd5\u65e5\u5fd7\uff08debug log\uff09\u6765\u65b9\u4fbf\u8ffd\u8e2a\u95ee\u9898\u3002\u8c03\u8bd5\u65e5\u5fd7\u5f00\u542f\u540e\uff0cSDK \u4f1a\u628a\u7f51\u7edc\u8bf7\u6c42\u3001\u9519\u8bef\u6d88\u606f\u7b49\u4fe1\u606f\u8f93\u51fa\u5230\u6d4f\u89c8\u5668\u7684 console \u4e2d\u3002 \u8981\u5728 Web \u5e73\u53f0\u4e2d\u6253\u5f00\u8c03\u8bd5\u65e5\u5fd7\uff0c\u8bf7\u6253\u5f00\u6d4f\u89c8\u5668\u7684\u63a7\u5236\u53f0\uff08console\uff09\uff0c\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a localStorage . setItem ( debug , leancloud*,LC* );","title":"\u6253\u5f00\u8c03\u8bd5\u65e5\u5fd7"},{"location":"sdk-setup/js/#nodejs","text":"JavaScript SDK \u4e5f\u53ef\u4ee5\u8fd0\u884c\u5728 Node.js \u8fd0\u884c\u73af\u5883\u4e2d\u3002\u5982\u679c\u5e0c\u671b\u5728\u4e91\u5f15\u64ce\u4e2d\u8bbf\u95ee\u6211\u4eec\u7684\u5b58\u50a8\u670d\u52a1\uff0c\u8bf7\u53c2\u7167 \u4e91\u5f15\u64ce\u5feb\u901f\u5165\u95e8 \uff0c\u4f7f\u7528\u6a21\u677f\u9879\u76ee\u4e2d\u63d0\u4f9b\u7684 leanengine \u5305\u63a5\u5165\u5b58\u50a8\u670d\u52a1\u3002","title":"Node.js"},{"location":"sdk-setup/js/#sdk_1","text":"Node.js \u4e2d SDK \u7684\u5b89\u88c5\u4e0e\u5f15\u7528\u4e5f\u662f\u901a\u8fc7\u5305\u7ba1\u7406\u5de5\u5177 npm\uff0c\u8bf7\u53c2\u8003 npm \u3002","title":"\u5b89\u88c5\u4e0e\u5f15\u7528 SDK"},{"location":"sdk-setup/js/#_2","text":"\u5728 Node.js \u5e73\u53f0\u4e2d\u6253\u5f00\u8c03\u8bd5\u65e5\u5fd7\uff0c\u9700\u8981\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf DEBUG \u4e3a leancloud*,LC* \u3002 \u4f60\u53ef\u4ee5\u5728\u542f\u52a8\u67d0\u4e2a\u547d\u4ee4\u4e4b\u524d\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u3002\u4e0b\u9762\u4ee5\u672c\u5730\u542f\u52a8\u4e91\u5f15\u64ce\u8c03\u8bd5\u7684\u547d\u4ee4\uff08 lean up \uff09\u4e3a\u4f8b\uff1a # Unix DEBUG = leancloud*,LC* lean up # Windows cmd set DEBUG = leancloud*,LC* lean up","title":"\u6253\u5f00\u8c03\u8bd5\u65e5\u5fd7"},{"location":"sdk-setup/js/#_3","text":"","title":"\u5fae\u4fe1\u5c0f\u7a0b\u5e8f"},{"location":"sdk-setup/js/#_4","text":"","title":"\u624b\u52a8\u5bfc\u5165\u6587\u4ef6"},{"location":"sdk-setup/js/#_5","text":"\u524d\u5f80 \u5b58\u50a8 SDK \u4e0b\u8f7d\u9875 \uff0c\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u7684 av-weapp-min.js \uff0c\u79fb\u52a8\u5230 libs \u76ee\u5f55\u3002\u5982\u679c\u9700\u8981\u4f7f\u7528 LiveQuery \u529f\u80fd\uff0c\u9700\u8981\u4e0b\u8f7d av-weapp-live-query-min.js \u3002 \u5728 app.js \u4e2d\u4f7f\u7528 const AV = require( ./libs/av-weapp-min.js ); \u83b7\u5f97 AV \u7684\u5f15\u7528\u3002\u5728\u5176\u4ed6\u6587\u4ef6\u4e2d\u4f7f\u7528\u65f6\u8bf7\u5c06\u8def\u5f84\u66ff\u6362\u6210\u5bf9\u5e94\u7684\u76f8\u5bf9\u8def\u5f84\u3002","title":"\u5b58\u50a8\u670d\u52a1"},{"location":"sdk-setup/js/#_6","text":"\u524d\u5f80 \u5b9e\u65f6\u6d88\u606f SDK \u4e0b\u8f7d\u9875 \uff0c\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u7684 realtime.weapp.min.js \uff0c\u79fb\u52a8\u5230 libs \u76ee\u5f55\u3002 \u5728 app.js \u4e2d\u4f7f\u7528 const { Realtime, TextMessage } = require( ./libs/realtime.weapp.min.js ); \u83b7\u5f97 Realtime \u7b49 SDK \u66b4\u9732\u6210\u5458\u7684\u5f15\u7528\u3002\u5728\u5176\u4ed6\u6587\u4ef6\u4e2d\u4f7f\u7528\u65f6\u8bf7\u5c06\u8def\u5f84\u66ff\u6362\u6210\u5bf9\u5e94\u7684\u76f8\u5bf9\u8def\u5f84\u3002","title":"\u5b9e\u65f6\u6d88\u606f\u670d\u52a1"},{"location":"sdk-setup/js/#wepy","text":"\u5982\u679c\u4f7f\u7528 WePY \u6765\u5f00\u53d1\u5c0f\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7 npm \u5b89\u88c5\u548c\u5f15\u7528 SDK\uff0c\u5177\u4f53\u64cd\u4f5c\u6b65\u9aa4\u8bf7\u53c2\u8003 npm \u3002","title":"WePY"},{"location":"sdk-setup/js/#mpvue","text":"\u5982\u679c\u4f7f\u7528 mpvue \u6765\u5f00\u53d1\u5c0f\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7 npm \u5b89\u88c5\u548c\u5f15\u7528 SDK\uff0c\u5177\u4f53\u64cd\u4f5c\u6b65\u9aa4\u8bf7\u53c2\u8003 npm \u3002","title":"mpvue"},{"location":"sdk-setup/js/#_7","text":"\u5fae\u4fe1\u5c0f\u6e38\u620f\u624b\u52a8\u5bfc\u5165 SDK \u7684\u6b65\u9aa4\u4e0e\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4e00\u81f4\uff0c\u8bf7\u53c2\u8003 \u5fae\u4fe1\u5c0f\u7a0b\u5e8f \u00b7 \u624b\u52a8\u5bfc\u5165\u6587\u4ef6 \u3002 \u5982\u679c\u4f7f\u7528\u6e38\u620f\u5f15\u64ce\u63d0\u4f9b\u7684\u5f00\u53d1\u5de5\u5177\u5f00\u53d1\u5fae\u4fe1\u5c0f\u6e38\u620f\uff0c\u8bf7\u53c2\u7167\u5bf9\u5e94\u7684\u6e38\u620f\u5f15\u64ce\u7ae0\u8282\u3002","title":"\u5fae\u4fe1\u5c0f\u6e38\u620f"},{"location":"sdk-setup/js/#cocoscreator","text":"CocosCreator \u652f\u6301\u76f4\u63a5\u901a\u8fc7 npm \u5b89\u88c5\u4e0e\u5f15\u7528 SDK\uff0c\u5177\u4f53\u64cd\u4f5c\u6b65\u9aa4\u8bf7\u53c2\u8003 npm \u3002 CocosCreator \u9879\u76ee\u9ed8\u8ba4\u6ca1\u6709 package.json \u6587\u4ef6\uff0c\u53ef\u4ee5\u5728\u5b89\u88c5 SDK \u524d\u901a\u8fc7 npm init -y \u547d\u4ee4\u521b\u5efa\u3002 \u5982\u679c\u4f60\u7684 CocosCreator \u9879\u76ee\u9700\u8981\u53d1\u5e03\u4e3a\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\uff0c\u9700\u8981\u5728\u6784\u5efa\u53d1\u5e03\u5230\u5c0f\u7a0b\u5e8f\u4e4b\u524d\u4fee\u6539 SDK \u7684\u5f15\u7528\u8def\u5f84\uff1a // \u5b58\u50a8\u670d\u52a1 SDK \u8def\u5f84\u53d8\u66f4\u4e3a - var AV = require( leancloud-storage ); + var AV = require( leancloud-storage/dist/av-weapp-min.js ); // \u5e26 LiveQuery \u529f\u80fd\u7684\u5b58\u50a8 SDK \u8def\u5f84\u53d8\u66f4\u4e3a - var AV = require( leancloud-storage/live-query ); + var AV = require( leancloud-storage/dist/av-live-query-weapp-min.js ); // \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 SDK \u8def\u5f84\u53d8\u66f4\u4e3a - var { Realtime } = require( leancloud-realtime ); + var { Realtime } = require( leancloud-realtime/dist/realtime.weapp.js ); \u8bf7\u6ce8\u610f\uff0c\u6b64\u6539\u52a8\u4f1a\u5bfc\u81f4\u5176\u4ed6\u5e73\u53f0\u7684\u4ea7\u51fa\uff08\u5305\u62ec\u6d4f\u89c8\u5668\u4e0e\u6a21\u62df\u5668\u7684\u9884\u89c8\u529f\u80fd\uff09\u4e0d\u80fd\u6b63\u5e38\u5de5\u4f5c\uff0c\u56e0\u6b64\u5e94\u8be5\u53ea\u5728\u6784\u5efa\u53d1\u5e03\u5230\u5c0f\u7a0b\u5e8f\u4e4b\u524d\u4e34\u65f6\u4fee\u6539\uff0c\u5e76\u5728\u53d1\u5e03\u4e4b\u540e\u4fee\u6539\u56de\u6765\u3002 \u5728\u6539\u52a8\u4e4b\u540e\uff0cCocosCreator \u7684\u63a7\u5236\u53f0\u53ef\u80fd\u4f1a\u51fa\u73b0 load script error\uff0c\u4f46\u4e0d\u5f71\u54cd\u6784\u5efa\u53d1\u5e03\u5c0f\u7a0b\u5e8f\uff0c\u5e76\u4e14\u6784\u5efa\u4ea7\u51fa\u5728\u5c0f\u7a0b\u5e8f\u5f00\u53d1\u5de5\u5177\u4e2d\u8fd0\u884c\u4e5f\u4e0d\u4f1a\u6709\u5f02\u5e38\u3002","title":"CocosCreator"},{"location":"sdk-setup/js/#layaair","text":"\u6839\u636e\u4f60\u521b\u5efa\u7684\u9879\u76ee\u7c7b\u578b\u4e0e\u9700\u8981\u4f7f\u7528\u7684\u670d\u52a1\uff0c\u4e0b\u8f7d\u5bf9\u5e94\u7684 SDK \u6587\u4ef6\uff0c\u79fb\u52a8\u5230 bin/libs/ \u76ee\u5f55\uff1a \u5c0f\u7a0b\u5e8f\u9879\u76ee \u666e\u901a\u9879\u76ee \u5b58\u50a8\u670d\u52a1 leancloud-storage-weapp.min.js leancloud-storage.min.js \u5b58\u50a8\u670d\u52a1\uff08LiveQuery\uff09 leancloud-storage-live-query-weapp.min.js leancloud-storage-live-query.min.js \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 leancloud-realtime-weapp.min.js leancloud-realtime.min.js \u5728 bin/index.html \u4e2d\u9879\u76ee\u300cIDE \u751f\u6210\u7684 UI \u6587\u4ef6\u300d\u4e4b\u524d\u5f15\u5165\u521a\u4e0b\u8f7d\u7684 SDK \u6587\u4ef6\uff1a !--\u63d0\u4f9b\u4e86\u5236\u4f5c UI \u7684\u5404\u79cd\u7ec4\u4ef6\u5b9e\u73b0-- script type= text/javascript src= libs/laya.ui.js /script !--\u7528\u6237\u81ea\u5b9a\u4e49\u987a\u5e8f\u6587\u4ef6\u6dfb\u52a0\u5230\u8fd9\u91cc-- !--jsfile--Custom-- + !--LeanCloud \u5b58\u50a8 SDK-- + script src= libs/leancloud-storage-live-query-weapp.min.js /script + !--LeanCloud \u5373\u65f6\u901a\u8baf SDK-- + script src= libs/leancloud-realtime-weapp.min.js /script !--jsfile--Custom-- !--IDE \u751f\u6210\u7684 UI \u6587\u4ef6-- script src= ../src/ui/layaUI.max.all.js /script Note \u5c0f\u7a0b\u5e8f\u9879\u76ee\u4e0e\u666e\u901a\u9879\u76ee\u4f7f\u7528\u7684 SDK \u662f\u4e0d\u4e00\u6837\u7684\uff0c\u5efa\u8bae\u5c0f\u7a0b\u5e8f\u9879\u76ee\u5728\u4f7f\u7528\u6d4f\u89c8\u5668\u8fdb\u884c\u8c03\u8bd5\u65f6\u5207\u6362\u5230\u666e\u901a\u9879\u76ee SDK\u3002 \u6b64\u65f6\u5728 src \u76ee\u5f55\u4e0b\u7684\u4ee3\u7801\u4e2d\u5373\u53ef\u901a\u8fc7\u5168\u5c40\u53d8\u91cf AV \u83b7\u5f97 SDK \u7684\u5f15\u7528\uff1a // \u5b58\u50a8\u670d\u52a1 var { Query , User } = AV ; AV . init ( appId , appKey ); // \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 var { Realtime , TextMessage } = AV ; \u5982\u679c\u4f60\u521b\u5efa\u7684\u662f TypeScript \u9879\u76ee\uff0c\u6216\u8005\u5e0c\u671b\u5f97\u5230 IDE \u7684\u81ea\u52a8\u63d0\u793a\u80fd\u529b\uff0c\u8fd8\u9700\u8981\u4e0b\u8f7d TypeScript \u5b9a\u4e49\u6587\u4ef6\u79fb\u52a8\u81f3 libs \u76ee\u5f55\u3002 \u5b58\u50a8\u670d\u52a1\uff1a storage.d.ts \u5373\u65f6\u901a\u8baf\u670d\u52a1\uff1a realtime.d.ts \u5982\u679c\u540c\u65f6\u4f7f\u7528\u4e24\u4e2a SDK\uff0c\u56e0\u4e3a namespace \u51b2\u7a81\u7684\u95ee\u9898\uff0c\u9700\u8981\u4e0b\u8f7d leancloud-all.d.ts \uff0c\u7136\u540e\u624b\u52a8\u5220\u9664\u6700\u540e\u4e00\u884c export as namespace AV; \u3002 \u4f60\u53ef\u4ee5\u5728 \u8fd9\u4e2a\u793a\u4f8b\u9879\u76ee \u4e2d\u770b\u5230\u5b8c\u6574\u7684\u6539\u52a8\u3002","title":"LayaAir"},{"location":"sdk-setup/js/#egret","text":"\u9996\u5148\u524d\u5f80 https://github.com/leancloud/egret-sdk \uff0c\u4e0b\u8f7d\u5bf9\u5e94\u7684 SDK \u76ee\u5f55\uff08leancloud-storage\uff09\uff0c\u5c06\u5176\u653e\u7f6e\u4e8e\u4f60\u7684 Egret \u6e38\u620f\u9879\u76ee\u540c\u7ea7\u76ee\u5f55\u4e0b\uff1a \u251c\u2500\u2500 egret-game-project \u2502 \u251c\u2500\u2500 \uff08\u5176\u4ed6\u76ee\u5f55\u4e0e\u6587\u4ef6\uff09 \u2502 \u2514\u2500\u2500 egretProperties.json \u2514\u2500\u2500 leancloud-storage \u251c\u2500\u2500 leancloud-storage.d.ts \u251c\u2500\u2500 leancloud-storage.js \u2514\u2500\u2500 leancloud-storage.min.js \u7136\u540e\uff0c\u7f16\u8f91 egret-game-project/egretProperties.json \u6587\u4ef6\uff0c\u5728 modules \u6570\u7ec4\u7684\u6700\u540e\u6dfb\u52a0 SDK\uff1a { engineVersion : 5.1.8 , compilerVersion : 5.1.8 , template : {}, target : { current : web }, eui : { exmlRoot : [ resource/eui_skins ], themes : [ resource/default.thm.json ], exmlPublishPolicy : commonjs }, modules : [ { name : egret }, { name : eui }, { name : assetsmanager }, { name : tween }, { name : promise + }, + { + name : leancloud-storage , + path : ../leancloud-storage } ] } \u6700\u540e\uff0c\u5728 egret-game-project \u76ee\u5f55\u4e0b\u8fd0\u884c egret build \uff0c\u5982\u679c\u5728 egret-game-project/manifest.json \u4e2d\u7684 initials \u6570\u7ec4\u4e2d\u51fa\u73b0\u4e86 libs/modules/leancloud-storage/leancloud-storage.js \u5219\u610f\u5473\u7740 SDK \u5b89\u88c5\u6210\u529f\u4e86\u3002 \u5b89\u88c5\u6210\u529f\u540e\uff0c\u4f60\u53ef\u4ee5\u5728\u4e1a\u52a1\u4ee3\u7801\u4e2d\u901a\u8fc7\u5168\u5c40\u53d8\u91cf AV \u83b7\u5f97 SDK \u7684\u5f15\u7528\uff1a var { Query , User } = AV ; AV . init ( appId , appKey ); \u76ee\u524d\u5728 Egret \u5e73\u53f0\u4e0a\uff0c\u6211\u4eec\u53ea\u63d0\u4f9b\u5b58\u50a8\u670d\u52a1\u7684 SDK\uff08\u4e0d\u542b LiveQuery \u529f\u80fd\uff09\u3002","title":"Egret\uff08\u767d\u9e6d\u5f15\u64ce\uff09"},{"location":"sdk-setup/js/#react-native","text":"React Native \u76f4\u63a5\u901a\u8fc7 npm \u5b89\u88c5\u4e0e\u5f15\u7528 SDK\uff0c\u5177\u4f53\u64cd\u4f5c\u6b65\u9aa4\u8bf7\u53c2\u8003 #npm \u3002","title":"React Native"},{"location":"sdk-setup/js/#electron","text":"Electron \u4f7f\u7528\u5305\u7ba1\u7406\u5de5\u5177 npm \u7ba1\u7406\u4f9d\u8d56\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5 SDK\uff1a # \u5b58\u50a8\u670d\u52a1\uff08\u5305\u62ec\u63a8\u9001\uff09 $ npm install leancloud-storage --save # \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 $ npm install leancloud-realtime --save","title":"Electron"},{"location":"sdk-setup/js/#_8","text":"\u5728 index.html \u4e2d\u53ef\u4ee5\u901a\u8fc7 script \u6807\u7b7e\u5f15\u5165 SDK\uff1a !-- \u5b58\u50a8\u670d\u52a1 -- script src = ./node_modules/leancloud-storage/dist/av-min.js / script !-- \u5b9e\u65f6\u6d88\u606f\u670d\u52a1 -- script src = ./node_modules/leancloud-realtime/dist/realtime.browser.min.js / script \u5982\u679c\u9700\u8981\u4f7f\u7528\u5b58\u50a8\u670d\u52a1\u7684 LiveQuery \u529f\u80fd\uff0c\u9700\u8981\u6309\u5982\u4e0b\u8def\u5f84\u5f15\u5165\u5b58\u50a8 SDK\uff1a script src = ./node_modules/leancloud-storage/dist/av-live-query-min.js / script","title":"\u4f5c\u4e3a\u6d4f\u89c8\u5668\u811a\u672c\u5f15\u5165"},{"location":"sdk-setup/js/#nodejs_1","text":"\u6211\u4eec\u63a8\u8350\u4f7f\u7528 script \u6807\u7b7e\u5f15\u5165 SDK\uff0c\u8be5\u65b9\u5f0f\u80fd\u6ee1\u8db3\u7edd\u5927\u90e8\u5206\u7684\u9700\u6c42\u3002\u4f46\u662f\u5982\u679c\u6709\u4ee5\u4e0b\u7684\u9700\u6c42\uff0cSDK \u4e5f\u652f\u6301\u901a\u8fc7 require( leancloud-storage ) \u65b9\u6cd5\u4f5c\u4e3a Node.js \u6a21\u5757\u5f15\u5165\u3002 \u9700\u8981\u5728 main process \u4e2d\u4f7f\u7528 SDK \u9700\u8981\u4f7f\u7528 Node.js \u7684 Buffer \u6216 Stream \u6784\u9020 AV.File \u901a\u8fc7 Node.js require \u65b9\u6cd5\u5f15\u5165\u7684 SDK \u4e0e\u901a\u8fc7\u6d4f\u89c8\u5668 script \u6807\u7b7e\u5f15\u5165\u7684 SDK \u662f\u4e24\u4e2a\u4e0d\u540c\u7684 SDK\uff0c\u9700\u8981\u5404\u81ea\u5206\u522b\u521d\u59cb\u5316\uff0c\u5e76\u4e14\u4e0d\u80fd\u6df7\u7528\u3002","title":"\u4f5c\u4e3a Node.js \u6a21\u5757\u5f15\u5165"},{"location":"sdk-setup/js/#_9","text":"\u9996\u5148\u8fdb\u5165 \u63a7\u5236\u53f0 \u8bbe\u7f6e \u5e94\u7528 Key \u6765\u83b7\u53d6 App ID \u4ee5\u53ca App Key\u3002 \u5982\u679c\u662f\u5728\u524d\u7aef\u9879\u76ee\u91cc\u9762\u4f7f\u7528 LeanCloud JavaScript SDK\uff0c\u90a3\u4e48\u53ef\u4ee5\u5728\u9875\u9762\u52a0\u8f7d\u7684\u65f6\u5019\u8c03\u7528\u4e00\u4e0b\u521d\u59cb\u5316\u7684\u51fd\u6570\uff1a var APP_ID = {{appid}} ; var APP_KEY = {{appkey}} ; AV . init ({ appId : APP_ID , appKey : APP_KEY }); var APP_ID = {{ appid }} ; var APP_KEY = {{ appkey }} ; var AV = require( leancloud-storage ); AV.init({ appId: APP_ID, appKey: APP_KEY });","title":"\u521d\u59cb\u5316"},{"location":"sdk-setup/js/#_10","text":"SDK \u7684\u521d\u59cb\u5316\u65b9\u6cd5\u9ed8\u8ba4\u4f7f\u7528 \u4e2d\u56fd\u5927\u9646\u8282\u70b9 \uff0c\u5982\u9700\u5207\u6362\u5230 \u5176\u4ed6\u53ef\u7528\u8282\u70b9 \uff0c\u8bf7\u53c2\u8003\u5982\u4e0b\u7528\u6cd5\uff1a var APP_ID = {{appid}} ; var APP_KEY = {{appkey}} ; AV . init ({ appId : APP_ID , appKey : APP_KEY , // \u542f\u7528\u7f8e\u56fd\u8282\u70b9 region : us });","title":"\u542f\u7528\u6307\u5b9a\u8282\u70b9"},{"location":"sdk-setup/js/#_11","text":"\u4e2d\u56fd\u5927\u9646\u8282\u70b9 leancloud.cn \uff08SDK \u521d\u59cb\u5316\u65b9\u6cd5 \u9ed8\u8ba4 \u4f7f\u7528\u8be5\u8282\u70b9\uff09 \u5317\u7f8e\u8282\u70b9 us.leancloud.cn \uff08\u670d\u52a1\u5317\u7f8e\u5e02\u573a\uff09 \u5404\u4e2a\u8282\u70b9\u5f7c\u6b64\u72ec\u7acb\uff0c\u5f00\u53d1\u8005\u8d26\u53f7\u65e0\u6cd5\u8de8\u8282\u70b9\u6765\u521b\u5efa\u5e94\u7528\u6216\u8c03\u7528 API\u3002","title":"\u5168\u7403\u8282\u70b9"},{"location":"sdk-setup/js/#_12","text":"\u9996\u5148\uff0c\u786e\u8ba4\u672c\u5730\u7f51\u7edc\u73af\u5883\u662f\u53ef\u4ee5\u8bbf\u95ee LeanCloud \u670d\u52a1\u5668\u7684\uff0c\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u884c\uff1a ping {{domainN1}} \u5982\u679c\u5f53\u524d\u7f51\u8def\u6b63\u5e38\u5c06\u4f1a\u5f97\u5230\u5982\u4e0b\u54cd\u5e94\uff1a PING api-ucloud.leancloud.cn ( 123 .59.41.31 ) : 56 data bytes 64 bytes from 123 .59.41.31: icmp_seq = 0 ttl = 51 time = 9 .032 ms 64 bytes from 123 .59.41.31: icmp_seq = 1 ttl = 51 time = 7 .290 ms 64 bytes from 123 .59.41.31: icmp_seq = 2 ttl = 51 time = 8 .131 ms 64 bytes from 123 .59.41.31: icmp_seq = 3 ttl = 51 time = 9 .689 ms 64 bytes from 123 .59.41.31: icmp_seq = 4 ttl = 51 time = 6 .559 ms 64 bytes from 123 .59.41.31: icmp_seq = 5 ttl = 51 time = 8 .665 ms 64 bytes from 123 .59.41.31: icmp_seq = 6 ttl = 51 time = 8 .041 ms 64 bytes from 123 .59.41.31: icmp_seq = 7 ttl = 51 time = 8 .203 ms 64 bytes from 123 .59.41.31: icmp_seq = 8 ttl = 51 time = 6 .288 ms 64 bytes from 123 .59.41.31: icmp_seq = 9 ttl = 51 time = 7 .938 ms --- api-ucloud.leancloud.cn ping statistics --- 10 packets transmitted, 10 packets received, 0 .0% packet loss round-trip min/avg/max/stddev = 6 .288/7.984/9.689/0.997 ms \u7136\u540e\u5728\u9879\u76ee\u4e2d\u7f16\u5199\u5982\u4e0b\u6d4b\u8bd5\u4ee3\u7801\uff1a var TestObject = AV . Object . extend ( TestObject ); var testObject = new TestObject (); testObject . save ({ words : Hello World! }). then ( function ( object ) { alert ( LeanCloud Rocks! ); }) \u7136\u540e\u6253\u5f00 \u63a7\u5236\u53f0 \u5b58\u50a8 \u6570\u636e TestObject \uff0c\u5982\u679c\u770b\u5230\u5982\u4e0b\u5185\u5bb9\uff0c\u8bf4\u660e SDK \u5df2\u7ecf\u6b63\u786e\u5730\u6267\u884c\u4e86\u4e0a\u8ff0\u4ee3\u7801\uff0c\u5b89\u88c5\u5b8c\u6bd5\u3002 \u5982\u679c\u63a7\u5236\u53f0\u6ca1\u6709\u53d1\u73b0\u5bf9\u5e94\u7684\u6570\u636e\uff0c\u8bf7\u53c2\u8003 \u95ee\u9898\u6392\u67e5 \u3002","title":"\u9a8c\u8bc1"},{"location":"sdk-setup/js/#_13","text":"","title":"\u95ee\u9898\u6392\u67e5"},{"location":"sdk-setup/js/#401-unauthorized","text":"\u5982\u679c SDK \u629b\u51fa 401 \u5f02\u5e38\u6216\u8005\u67e5\u770b\u672c\u5730\u7f51\u7edc\u8bbf\u95ee\u65e5\u5fd7\u5b58\u5728\uff1a { code : 401 , error : Unauthorized. } \u5219\u53ef\u8ba4\u5b9a\u4e3a App ID \u6216\u8005 App Key \u8f93\u5165\u6709\u8bef\uff0c\u6216\u8005\u662f\u4e0d\u5339\u914d\uff0c\u5f88\u591a\u5f00\u53d1\u8005\u540c\u65f6\u6ce8\u518c\u4e86\u591a\u4e2a\u5e94\u7528\uff0c\u5bfc\u81f4\u62f7\u8d1d\u7c98\u8d34\u7684\u65f6\u5019\uff0c\u7528 A \u5e94\u7528\u7684 App ID \u5339\u914d B \u5e94\u7528\u7684 App Key\uff0c\u8fd9\u6837\u5c31\u4f1a\u51fa\u73b0\u670d\u52a1\u7aef\u9274\u6743\u5931\u8d25\u7684\u9519\u8bef\u3002","title":"401 Unauthorized"},{"location":"sdk-setup/js/#_14","text":"\u5ba2\u6237\u7aef\u5c24\u5176\u662f\u624b\u673a\u7aef\uff0c\u5e94\u7528\u5728\u8bbf\u95ee\u7f51\u7edc\u7684\u65f6\u5019\u9700\u8981\u7533\u8bf7\u4e00\u5b9a\u7684\u6743\u9650\u3002","title":"\u5ba2\u6237\u7aef\u65e0\u6cd5\u8bbf\u95ee\u7f51\u7edc"},{"location":"sdk-setup/php/","text":"PHP SDK \u5b89\u88c5\u6307\u5357 \u83b7\u53d6 SDK \u83b7\u53d6 SDK \u6709\u591a\u79cd\u65b9\u5f0f\uff0c\u8f83\u4e3a\u63a8\u8350\u7684\u65b9\u5f0f\u662f\u901a\u8fc7\u5305\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u3002 \u5305\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u5b89\u88c5 composer composer \u662f\u63a8\u8350\u7684 PHP \u5305\u7ba1\u7406\u5de5\u5177\u3002\u5b89\u88c5 leancloud-sdk \u53ea\u9700\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a composer require leancloud/leancloud-sdk \u624b\u52a8\u5b89\u88c5 \u4e0b\u8f7d SDK \u521d\u59cb\u5316 \u9996\u5148\u8fdb\u5165 \u63a7\u5236\u53f0 \u8bbe\u7f6e \u5e94\u7528 Key \u6765\u83b7\u53d6 App ID \u4ee5\u53ca App Key\u3002 \u7136\u540e\u5bfc\u5165 Client \uff0c\u5e76\u8c03\u7528 initialize \u65b9\u6cd5\u8fdb\u884c\u521d\u59cb\u5316\uff1a use \\LeanCloud\\Client; // \u53c2\u6570\u4f9d\u6b21\u4e3a AppId, AppKey, MasterKey Client::initialize( {{appid}} , {{appkey}} , {{masterkey}} ); Client::setServerUrl( https://{{domainN1}} ); // 0.7.0 \u53ca\u4ee5\u4e0a\u7248\u672c\u652f\u6301 \u5f00\u542f\u8c03\u8bd5\u65e5\u5fd7 \u5728\u5e94\u7528\u5f00\u53d1\u9636\u6bb5\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u5f00\u542f SDK \u7684\u8c03\u8bd5\u65e5\u5fd7\uff08debug log\uff09\u6765\u65b9\u4fbf\u8ffd\u8e2a\u95ee\u9898\u3002\u8c03\u8bd5\u65e5\u5fd7\u5f00\u542f\u540e\uff0cSDK \u4f1a\u628a\u7f51\u7edc\u8bf7\u6c42\u3001\u9519\u8bef\u6d88\u606f\u7b49\u4fe1\u606f\u8f93\u51fa\u5230 IDE \u7684\u65e5\u5fd7\u7a97\u53e3\uff0c\u6216\u662f\u6d4f\u89c8\u5668 Console \u6216\u662f LeanCloud \u63a7\u5236\u53f0\u7684 \u4e91\u5f15\u64ce\u65e5\u5fd7 \u4e2d\u3002 // \u653e\u5728 SDK \u521d\u59cb\u5316\u8bed\u53e5 Client::initialize() \u540e\u9762\uff0c\u53ea\u9700\u8981\u8c03\u7528\u4e00\u6b21\u5373\u53ef Client::setDebug(true); \u5728\u5e94\u7528\u53d1\u5e03\u4e4b\u524d\uff0c\u8bf7\u5173\u95ed\u8c03\u8bd5\u65e5\u5fd7\uff0c\u4ee5\u514d\u66b4\u9732\u654f\u611f\u6570\u636e\u3002 \u542f\u7528\u6307\u5b9a\u8282\u70b9 SDK \u7684\u521d\u59cb\u5316\u65b9\u6cd5\u9ed8\u8ba4\u4f7f\u7528 \u4e2d\u56fd\u5927\u9646\u8282\u70b9 \uff0c\u5982\u9700\u5207\u6362\u5230 \u5176\u4ed6\u53ef\u7528\u8282\u70b9 \uff0c\u8bf7\u53c2\u8003\u5982\u4e0b\u7528\u6cd5\uff1a use \\LeanCloud\\Client; use \\LeanCloud\\Region; // \u53c2\u6570\u4f9d\u6b21\u4e3a AppId, AppKey, MasterKey Client::initialize( {{appid}} , {{appkey}} , {{masterkey}} ); // \u542f\u7528\u7f8e\u56fd\u8282\u70b9 // Client::useRegion(Region::US); // \u542f\u7528\u4e2d\u56fd\u8282\u70b9\uff08\u9ed8\u8ba4\u542f\u7528\uff09 Client::useRegion(Region::CN); \u5168\u7403\u8282\u70b9 \u4e2d\u56fd\u5927\u9646\u8282\u70b9 leancloud.cn \uff08SDK \u521d\u59cb\u5316\u65b9\u6cd5 \u9ed8\u8ba4 \u4f7f\u7528\u8be5\u8282\u70b9\uff09 \u5317\u7f8e\u8282\u70b9 us.leancloud.cn \uff08\u670d\u52a1\u5317\u7f8e\u5e02\u573a\uff09 \u5404\u4e2a\u8282\u70b9\u5f7c\u6b64\u72ec\u7acb\uff0c\u5f00\u53d1\u8005\u8d26\u53f7\u65e0\u6cd5\u8de8\u8282\u70b9\u6765\u521b\u5efa\u5e94\u7528\u6216\u8c03\u7528 API\u3002 \u9a8c\u8bc1 \u9996\u5148\uff0c\u786e\u8ba4\u672c\u5730\u7f51\u7edc\u73af\u5883\u662f\u53ef\u4ee5\u8bbf\u95ee LeanCloud \u670d\u52a1\u5668\u7684\uff0c\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u884c\uff1a ping {{domainN1}} \u5982\u679c\u5f53\u524d\u7f51\u8def\u6b63\u5e38\u5c06\u4f1a\u5f97\u5230\u5982\u4e0b\u54cd\u5e94\uff1a PING api-ucloud.leancloud.cn ( 123 .59.41.31 ) : 56 data bytes 64 bytes from 123 .59.41.31: icmp_seq = 0 ttl = 51 time = 9 .032 ms 64 bytes from 123 .59.41.31: icmp_seq = 1 ttl = 51 time = 7 .290 ms 64 bytes from 123 .59.41.31: icmp_seq = 2 ttl = 51 time = 8 .131 ms 64 bytes from 123 .59.41.31: icmp_seq = 3 ttl = 51 time = 9 .689 ms 64 bytes from 123 .59.41.31: icmp_seq = 4 ttl = 51 time = 6 .559 ms 64 bytes from 123 .59.41.31: icmp_seq = 5 ttl = 51 time = 8 .665 ms 64 bytes from 123 .59.41.31: icmp_seq = 6 ttl = 51 time = 8 .041 ms 64 bytes from 123 .59.41.31: icmp_seq = 7 ttl = 51 time = 8 .203 ms 64 bytes from 123 .59.41.31: icmp_seq = 8 ttl = 51 time = 6 .288 ms 64 bytes from 123 .59.41.31: icmp_seq = 9 ttl = 51 time = 7 .938 ms --- api-ucloud.leancloud.cn ping statistics --- 10 packets transmitted, 10 packets received, 0 .0% packet loss round-trip min/avg/max/stddev = 6 .288/7.984/9.689/0.997 ms \u7136\u540e\u5728\u9879\u76ee\u4e2d\u7f16\u5199\u5982\u4e0b\u6d4b\u8bd5\u4ee3\u7801\uff1a // test.php require vendor/autoload.php ; use \\LeanCloud\\Client; use \\LeanCloud\\LeanObject; // \u53c2\u6570\u4f9d\u6b21\u4e3a AppId, AppKey, MasterKey Client::initialize( {{appid}} , {{appkey}} , {{masterkey}} ); Client::setServerUrl( https://{{domainN1}} ); $testObject = new LeanObject( TestObject ); $testObject- set( words , Hello World! ); try { $testObject- save(); echo Save object success! ; } catch (Exception $ex) { echo Save object fail! ; } \u4fdd\u5b58\u540e\u8fd0\u884c php test.php \u3002 \u7136\u540e\u6253\u5f00 \u63a7\u5236\u53f0 \u5b58\u50a8 \u6570\u636e TestObject \uff0c\u5982\u679c\u770b\u5230\u5982\u4e0b\u5185\u5bb9\uff0c\u8bf4\u660e SDK \u5df2\u7ecf\u6b63\u786e\u5730\u6267\u884c\u4e86\u4e0a\u8ff0\u4ee3\u7801\uff0c\u5b89\u88c5\u5b8c\u6bd5\u3002 \u5982\u679c\u63a7\u5236\u53f0\u6ca1\u6709\u53d1\u73b0\u5bf9\u5e94\u7684\u6570\u636e\uff0c\u8bf7\u53c2\u8003 \u95ee\u9898\u6392\u67e5 \u3002 \u95ee\u9898\u6392\u67e5 401 Unauthorized \u5982\u679c SDK \u629b\u51fa 401 \u5f02\u5e38\u6216\u8005\u67e5\u770b\u672c\u5730\u7f51\u7edc\u8bbf\u95ee\u65e5\u5fd7\u5b58\u5728\uff1a { code : 401 , error : Unauthorized. } \u5219\u53ef\u8ba4\u5b9a\u4e3a App ID \u6216\u8005 App Key \u8f93\u5165\u6709\u8bef\uff0c\u6216\u8005\u662f\u4e0d\u5339\u914d\uff0c\u5f88\u591a\u5f00\u53d1\u8005\u540c\u65f6\u6ce8\u518c\u4e86\u591a\u4e2a\u5e94\u7528\uff0c\u5bfc\u81f4\u62f7\u8d1d\u7c98\u8d34\u7684\u65f6\u5019\uff0c\u7528 A \u5e94\u7528\u7684 App ID \u5339\u914d B \u5e94\u7528\u7684 App Key\uff0c\u8fd9\u6837\u5c31\u4f1a\u51fa\u73b0\u670d\u52a1\u7aef\u9274\u6743\u5931\u8d25\u7684\u9519\u8bef\u3002 \u5ba2\u6237\u7aef\u65e0\u6cd5\u8bbf\u95ee\u7f51\u7edc \u5ba2\u6237\u7aef\u5c24\u5176\u662f\u624b\u673a\u7aef\uff0c\u5e94\u7528\u5728\u8bbf\u95ee\u7f51\u7edc\u7684\u65f6\u5019\u9700\u8981\u7533\u8bf7\u4e00\u5b9a\u7684\u6743\u9650\u3002","title":"PHP SDK \u5b89\u88c5\u6307\u5357"},{"location":"sdk-setup/php/#php-sdk","text":"","title":"PHP SDK \u5b89\u88c5\u6307\u5357"},{"location":"sdk-setup/php/#sdk","text":"\u83b7\u53d6 SDK \u6709\u591a\u79cd\u65b9\u5f0f\uff0c\u8f83\u4e3a\u63a8\u8350\u7684\u65b9\u5f0f\u662f\u901a\u8fc7\u5305\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u3002","title":"\u83b7\u53d6 SDK"},{"location":"sdk-setup/php/#_1","text":"","title":"\u5305\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u5b89\u88c5"},{"location":"sdk-setup/php/#composer","text":"composer \u662f\u63a8\u8350\u7684 PHP \u5305\u7ba1\u7406\u5de5\u5177\u3002\u5b89\u88c5 leancloud-sdk \u53ea\u9700\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a composer require leancloud/leancloud-sdk","title":"composer"},{"location":"sdk-setup/php/#_2","text":"\u4e0b\u8f7d SDK","title":"\u624b\u52a8\u5b89\u88c5"},{"location":"sdk-setup/php/#_3","text":"\u9996\u5148\u8fdb\u5165 \u63a7\u5236\u53f0 \u8bbe\u7f6e \u5e94\u7528 Key \u6765\u83b7\u53d6 App ID \u4ee5\u53ca App Key\u3002 \u7136\u540e\u5bfc\u5165 Client \uff0c\u5e76\u8c03\u7528 initialize \u65b9\u6cd5\u8fdb\u884c\u521d\u59cb\u5316\uff1a use \\LeanCloud\\Client; // \u53c2\u6570\u4f9d\u6b21\u4e3a AppId, AppKey, MasterKey Client::initialize( {{appid}} , {{appkey}} , {{masterkey}} ); Client::setServerUrl( https://{{domainN1}} ); // 0.7.0 \u53ca\u4ee5\u4e0a\u7248\u672c\u652f\u6301","title":"\u521d\u59cb\u5316"},{"location":"sdk-setup/php/#_4","text":"\u5728\u5e94\u7528\u5f00\u53d1\u9636\u6bb5\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u5f00\u542f SDK \u7684\u8c03\u8bd5\u65e5\u5fd7\uff08debug log\uff09\u6765\u65b9\u4fbf\u8ffd\u8e2a\u95ee\u9898\u3002\u8c03\u8bd5\u65e5\u5fd7\u5f00\u542f\u540e\uff0cSDK \u4f1a\u628a\u7f51\u7edc\u8bf7\u6c42\u3001\u9519\u8bef\u6d88\u606f\u7b49\u4fe1\u606f\u8f93\u51fa\u5230 IDE \u7684\u65e5\u5fd7\u7a97\u53e3\uff0c\u6216\u662f\u6d4f\u89c8\u5668 Console \u6216\u662f LeanCloud \u63a7\u5236\u53f0\u7684 \u4e91\u5f15\u64ce\u65e5\u5fd7 \u4e2d\u3002 // \u653e\u5728 SDK \u521d\u59cb\u5316\u8bed\u53e5 Client::initialize() \u540e\u9762\uff0c\u53ea\u9700\u8981\u8c03\u7528\u4e00\u6b21\u5373\u53ef Client::setDebug(true); \u5728\u5e94\u7528\u53d1\u5e03\u4e4b\u524d\uff0c\u8bf7\u5173\u95ed\u8c03\u8bd5\u65e5\u5fd7\uff0c\u4ee5\u514d\u66b4\u9732\u654f\u611f\u6570\u636e\u3002","title":"\u5f00\u542f\u8c03\u8bd5\u65e5\u5fd7"},{"location":"sdk-setup/php/#_5","text":"SDK \u7684\u521d\u59cb\u5316\u65b9\u6cd5\u9ed8\u8ba4\u4f7f\u7528 \u4e2d\u56fd\u5927\u9646\u8282\u70b9 \uff0c\u5982\u9700\u5207\u6362\u5230 \u5176\u4ed6\u53ef\u7528\u8282\u70b9 \uff0c\u8bf7\u53c2\u8003\u5982\u4e0b\u7528\u6cd5\uff1a use \\LeanCloud\\Client; use \\LeanCloud\\Region; // \u53c2\u6570\u4f9d\u6b21\u4e3a AppId, AppKey, MasterKey Client::initialize( {{appid}} , {{appkey}} , {{masterkey}} ); // \u542f\u7528\u7f8e\u56fd\u8282\u70b9 // Client::useRegion(Region::US); // \u542f\u7528\u4e2d\u56fd\u8282\u70b9\uff08\u9ed8\u8ba4\u542f\u7528\uff09 Client::useRegion(Region::CN);","title":"\u542f\u7528\u6307\u5b9a\u8282\u70b9"},{"location":"sdk-setup/php/#_6","text":"\u4e2d\u56fd\u5927\u9646\u8282\u70b9 leancloud.cn \uff08SDK \u521d\u59cb\u5316\u65b9\u6cd5 \u9ed8\u8ba4 \u4f7f\u7528\u8be5\u8282\u70b9\uff09 \u5317\u7f8e\u8282\u70b9 us.leancloud.cn \uff08\u670d\u52a1\u5317\u7f8e\u5e02\u573a\uff09 \u5404\u4e2a\u8282\u70b9\u5f7c\u6b64\u72ec\u7acb\uff0c\u5f00\u53d1\u8005\u8d26\u53f7\u65e0\u6cd5\u8de8\u8282\u70b9\u6765\u521b\u5efa\u5e94\u7528\u6216\u8c03\u7528 API\u3002","title":"\u5168\u7403\u8282\u70b9"},{"location":"sdk-setup/php/#_7","text":"\u9996\u5148\uff0c\u786e\u8ba4\u672c\u5730\u7f51\u7edc\u73af\u5883\u662f\u53ef\u4ee5\u8bbf\u95ee LeanCloud \u670d\u52a1\u5668\u7684\uff0c\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u884c\uff1a ping {{domainN1}} \u5982\u679c\u5f53\u524d\u7f51\u8def\u6b63\u5e38\u5c06\u4f1a\u5f97\u5230\u5982\u4e0b\u54cd\u5e94\uff1a PING api-ucloud.leancloud.cn ( 123 .59.41.31 ) : 56 data bytes 64 bytes from 123 .59.41.31: icmp_seq = 0 ttl = 51 time = 9 .032 ms 64 bytes from 123 .59.41.31: icmp_seq = 1 ttl = 51 time = 7 .290 ms 64 bytes from 123 .59.41.31: icmp_seq = 2 ttl = 51 time = 8 .131 ms 64 bytes from 123 .59.41.31: icmp_seq = 3 ttl = 51 time = 9 .689 ms 64 bytes from 123 .59.41.31: icmp_seq = 4 ttl = 51 time = 6 .559 ms 64 bytes from 123 .59.41.31: icmp_seq = 5 ttl = 51 time = 8 .665 ms 64 bytes from 123 .59.41.31: icmp_seq = 6 ttl = 51 time = 8 .041 ms 64 bytes from 123 .59.41.31: icmp_seq = 7 ttl = 51 time = 8 .203 ms 64 bytes from 123 .59.41.31: icmp_seq = 8 ttl = 51 time = 6 .288 ms 64 bytes from 123 .59.41.31: icmp_seq = 9 ttl = 51 time = 7 .938 ms --- api-ucloud.leancloud.cn ping statistics --- 10 packets transmitted, 10 packets received, 0 .0% packet loss round-trip min/avg/max/stddev = 6 .288/7.984/9.689/0.997 ms \u7136\u540e\u5728\u9879\u76ee\u4e2d\u7f16\u5199\u5982\u4e0b\u6d4b\u8bd5\u4ee3\u7801\uff1a // test.php require vendor/autoload.php ; use \\LeanCloud\\Client; use \\LeanCloud\\LeanObject; // \u53c2\u6570\u4f9d\u6b21\u4e3a AppId, AppKey, MasterKey Client::initialize( {{appid}} , {{appkey}} , {{masterkey}} ); Client::setServerUrl( https://{{domainN1}} ); $testObject = new LeanObject( TestObject ); $testObject- set( words , Hello World! ); try { $testObject- save(); echo Save object success! ; } catch (Exception $ex) { echo Save object fail! ; } \u4fdd\u5b58\u540e\u8fd0\u884c php test.php \u3002 \u7136\u540e\u6253\u5f00 \u63a7\u5236\u53f0 \u5b58\u50a8 \u6570\u636e TestObject \uff0c\u5982\u679c\u770b\u5230\u5982\u4e0b\u5185\u5bb9\uff0c\u8bf4\u660e SDK \u5df2\u7ecf\u6b63\u786e\u5730\u6267\u884c\u4e86\u4e0a\u8ff0\u4ee3\u7801\uff0c\u5b89\u88c5\u5b8c\u6bd5\u3002 \u5982\u679c\u63a7\u5236\u53f0\u6ca1\u6709\u53d1\u73b0\u5bf9\u5e94\u7684\u6570\u636e\uff0c\u8bf7\u53c2\u8003 \u95ee\u9898\u6392\u67e5 \u3002","title":"\u9a8c\u8bc1"},{"location":"sdk-setup/php/#_8","text":"","title":"\u95ee\u9898\u6392\u67e5"},{"location":"sdk-setup/php/#401-unauthorized","text":"\u5982\u679c SDK \u629b\u51fa 401 \u5f02\u5e38\u6216\u8005\u67e5\u770b\u672c\u5730\u7f51\u7edc\u8bbf\u95ee\u65e5\u5fd7\u5b58\u5728\uff1a { code : 401 , error : Unauthorized. } \u5219\u53ef\u8ba4\u5b9a\u4e3a App ID \u6216\u8005 App Key \u8f93\u5165\u6709\u8bef\uff0c\u6216\u8005\u662f\u4e0d\u5339\u914d\uff0c\u5f88\u591a\u5f00\u53d1\u8005\u540c\u65f6\u6ce8\u518c\u4e86\u591a\u4e2a\u5e94\u7528\uff0c\u5bfc\u81f4\u62f7\u8d1d\u7c98\u8d34\u7684\u65f6\u5019\uff0c\u7528 A \u5e94\u7528\u7684 App ID \u5339\u914d B \u5e94\u7528\u7684 App Key\uff0c\u8fd9\u6837\u5c31\u4f1a\u51fa\u73b0\u670d\u52a1\u7aef\u9274\u6743\u5931\u8d25\u7684\u9519\u8bef\u3002","title":"401 Unauthorized"},{"location":"sdk-setup/php/#_9","text":"\u5ba2\u6237\u7aef\u5c24\u5176\u662f\u624b\u673a\u7aef\uff0c\u5e94\u7528\u5728\u8bbf\u95ee\u7f51\u7edc\u7684\u65f6\u5019\u9700\u8981\u7533\u8bf7\u4e00\u5b9a\u7684\u6743\u9650\u3002","title":"\u5ba2\u6237\u7aef\u65e0\u6cd5\u8bbf\u95ee\u7f51\u7edc"},{"location":"sdk-setup/python/","text":"Python SDK \u5b89\u88c5\u6307\u5357 \u83b7\u53d6 SDK \u83b7\u53d6 SDK \u6709\u591a\u79cd\u65b9\u5f0f\uff0c\u8f83\u4e3a\u63a8\u8350\u7684\u65b9\u5f0f\u662f\u901a\u8fc7\u5305\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u3002 \u5305\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u5b89\u88c5 pip pip \u662f\u6700\u63a8\u8350\u7684 Python \u5305\u7ba1\u7406\u5de5\u5177\uff0c\u5b83\u662f easy_install \u7684\u66ff\u4ee3\u3002\u5b89\u88c5 leancloud-sdk \u53ea\u9700\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a pip install leancloud \u6839\u636e\u4f60\u7684\u73af\u5883\uff0c\u547d\u4ee4\u4e4b\u524d\u8fd8\u53ef\u80fd\u9700\u8981\u52a0\u4e0a sudo easy_install \u4e5f\u53ef\u4ee5\u4f7f\u7528 easy_install \u8fdb\u884c\u5b89\u88c5\uff1a easy_install leancloud \u6839\u636e\u4f60\u7684\u73af\u5883\uff0c\u547d\u4ee4\u4e4b\u524d\u8fd8\u53ef\u80fd\u9700\u8981\u52a0\u4e0a sudo \u624b\u52a8\u5b89\u88c5 \u4e0b\u8f7d SDK \u521d\u59cb\u5316 \u9996\u5148\u8fdb\u5165 \u63a7\u5236\u53f0 \u8bbe\u7f6e \u5e94\u7528 Key \u6765\u83b7\u53d6 App ID \u4ee5\u53ca App Key\u3002 \u7136\u540e\u5bfc\u5165 leancloud\uff0c\u5e76\u8c03\u7528 init \u65b9\u6cd5\u8fdb\u884c\u521d\u59cb\u5316\uff1a import leancloud leancloud . init ( {{appid}} , {{appkey}} ) # \u6216\u8005\u4f7f\u7528 masterKey # leancloud.init( appId , master_key= masterKey ) \u5c06\u4e0a\u8ff0\u4ee3\u7801\u4e2d\u7684 App ID \u4ee5\u53ca App Key \u66ff\u6362\u6210\u4ece\u63a7\u5236\u53f0\u590d\u5236\u7c98\u8d34\u7684\u5bf9\u5e94\u7684\u6570\u636e\u5373\u53ef\u3002 \u5f00\u542f\u8c03\u8bd5\u65e5\u5fd7 \u5728\u5e94\u7528\u5f00\u53d1\u9636\u6bb5\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u5f00\u542f SDK \u7684\u8c03\u8bd5\u65e5\u5fd7\uff08debug log\uff09\u6765\u65b9\u4fbf\u8ffd\u8e2a\u95ee\u9898\u3002\u8c03\u8bd5\u65e5\u5fd7\u5f00\u542f\u540e\uff0cSDK \u4f1a\u628a\u7f51\u7edc\u8bf7\u6c42\u3001\u9519\u8bef\u6d88\u606f\u7b49\u4fe1\u606f\u8f93\u51fa\u5230 IDE \u7684\u65e5\u5fd7\u7a97\u53e3\uff0c\u6216\u662f\u6d4f\u89c8\u5668 Console \u6216\u662f LeanCloud \u63a7\u5236\u53f0\u7684 \u4e91\u5f15\u64ce\u65e5\u5fd7 \u4e2d\u3002 # \u5199\u5728\u542f\u52a8\u811a\u672c\u7684\u5934\u90e8 # \u5982\u679c\u662f\u5728 LeanEngine \u73af\u5883\uff0c\u542f\u52a8\u811a\u672c\u662f wsgi.py import logging logging . basicConfig ( level = logging . DEBUG ) \u5728\u5e94\u7528\u53d1\u5e03\u4e4b\u524d\uff0c\u8bf7\u5173\u95ed\u8c03\u8bd5\u65e5\u5fd7\uff0c\u4ee5\u514d\u66b4\u9732\u654f\u611f\u6570\u636e\u3002 \u542f\u7528\u6307\u5b9a\u8282\u70b9 SDK \u7684\u521d\u59cb\u5316\u65b9\u6cd5\u9ed8\u8ba4\u4f7f\u7528 \u4e2d\u56fd\u5927\u9646\u8282\u70b9 \uff0c\u5982\u9700\u5207\u6362\u5230 \u5176\u4ed6\u53ef\u7528\u8282\u70b9 \uff0c\u8bf7\u53c2\u8003\u5982\u4e0b\u7528\u6cd5\uff1a import leancloud leancloud . init ( {{appid}} , {{appkey}} ) leancloud . use_region ( US ) # \u542f\u7528\u7f8e\u56fd\u8282\u70b9 # leancloud.use_region( CN ) # \u9ed8\u8ba4\u542f\u7528\u4e2d\u56fd\u8282\u70b9 \u5168\u7403\u8282\u70b9 \u4e2d\u56fd\u5927\u9646\u8282\u70b9 leancloud.cn \uff08SDK \u521d\u59cb\u5316\u65b9\u6cd5 \u9ed8\u8ba4 \u4f7f\u7528\u8be5\u8282\u70b9\uff09 \u5317\u7f8e\u8282\u70b9 us.leancloud.cn \uff08\u670d\u52a1\u5317\u7f8e\u5e02\u573a\uff09 \u5404\u4e2a\u8282\u70b9\u5f7c\u6b64\u72ec\u7acb\uff0c\u5f00\u53d1\u8005\u8d26\u53f7\u65e0\u6cd5\u8de8\u8282\u70b9\u6765\u521b\u5efa\u5e94\u7528\u6216\u8c03\u7528 API\u3002 \u9a8c\u8bc1 \u9996\u5148\uff0c\u786e\u8ba4\u672c\u5730\u7f51\u7edc\u73af\u5883\u662f\u53ef\u4ee5\u8bbf\u95ee LeanCloud \u670d\u52a1\u5668\u7684\uff0c\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u884c\uff1a ping {{domainN1}} \u5982\u679c\u5f53\u524d\u7f51\u8def\u6b63\u5e38\u5c06\u4f1a\u5f97\u5230\u5982\u4e0b\u54cd\u5e94\uff1a PING api-ucloud.leancloud.cn ( 123 .59.41.31 ) : 56 data bytes 64 bytes from 123 .59.41.31: icmp_seq = 0 ttl = 51 time = 9 .032 ms 64 bytes from 123 .59.41.31: icmp_seq = 1 ttl = 51 time = 7 .290 ms 64 bytes from 123 .59.41.31: icmp_seq = 2 ttl = 51 time = 8 .131 ms 64 bytes from 123 .59.41.31: icmp_seq = 3 ttl = 51 time = 9 .689 ms 64 bytes from 123 .59.41.31: icmp_seq = 4 ttl = 51 time = 6 .559 ms 64 bytes from 123 .59.41.31: icmp_seq = 5 ttl = 51 time = 8 .665 ms 64 bytes from 123 .59.41.31: icmp_seq = 6 ttl = 51 time = 8 .041 ms 64 bytes from 123 .59.41.31: icmp_seq = 7 ttl = 51 time = 8 .203 ms 64 bytes from 123 .59.41.31: icmp_seq = 8 ttl = 51 time = 6 .288 ms 64 bytes from 123 .59.41.31: icmp_seq = 9 ttl = 51 time = 7 .938 ms --- api-ucloud.leancloud.cn ping statistics --- 10 packets transmitted, 10 packets received, 0 .0% packet loss round-trip min/avg/max/stddev = 6 .288/7.984/9.689/0.997 ms \u7136\u540e\u5728\u9879\u76ee\u4e2d\u7f16\u5199\u5982\u4e0b\u6d4b\u8bd5\u4ee3\u7801\uff1a import leancloud leancloud . init ( {{appid}} , {{appkey}} ) TestObject = leancloud . Object . extend ( TestObject ) test_object = TestObject () test_object . set ( words , Hello World! ) test_object . save () \u7136\u540e\u7f16\u8bd1\u6267\u884c\u3002 \u7136\u540e\u6253\u5f00 \u63a7\u5236\u53f0 \u5b58\u50a8 \u6570\u636e TestObject \uff0c\u5982\u679c\u770b\u5230\u5982\u4e0b\u5185\u5bb9\uff0c\u8bf4\u660e SDK \u5df2\u7ecf\u6b63\u786e\u5730\u6267\u884c\u4e86\u4e0a\u8ff0\u4ee3\u7801\uff0c\u5b89\u88c5\u5b8c\u6bd5\u3002 \u5982\u679c\u63a7\u5236\u53f0\u6ca1\u6709\u53d1\u73b0\u5bf9\u5e94\u7684\u6570\u636e\uff0c\u8bf7\u53c2\u8003 \u95ee\u9898\u6392\u67e5 \u3002 \u95ee\u9898\u6392\u67e5 401 Unauthorized \u5982\u679c SDK \u629b\u51fa 401 \u5f02\u5e38\u6216\u8005\u67e5\u770b\u672c\u5730\u7f51\u7edc\u8bbf\u95ee\u65e5\u5fd7\u5b58\u5728\uff1a { code : 401 , error : Unauthorized. } \u5219\u53ef\u8ba4\u5b9a\u4e3a App ID \u6216\u8005 App Key \u8f93\u5165\u6709\u8bef\uff0c\u6216\u8005\u662f\u4e0d\u5339\u914d\uff0c\u5f88\u591a\u5f00\u53d1\u8005\u540c\u65f6\u6ce8\u518c\u4e86\u591a\u4e2a\u5e94\u7528\uff0c\u5bfc\u81f4\u62f7\u8d1d\u7c98\u8d34\u7684\u65f6\u5019\uff0c\u7528 A \u5e94\u7528\u7684 App ID \u5339\u914d B \u5e94\u7528\u7684 App Key\uff0c\u8fd9\u6837\u5c31\u4f1a\u51fa\u73b0\u670d\u52a1\u7aef\u9274\u6743\u5931\u8d25\u7684\u9519\u8bef\u3002 \u5ba2\u6237\u7aef\u65e0\u6cd5\u8bbf\u95ee\u7f51\u7edc \u5ba2\u6237\u7aef\u5c24\u5176\u662f\u624b\u673a\u7aef\uff0c\u5e94\u7528\u5728\u8bbf\u95ee\u7f51\u7edc\u7684\u65f6\u5019\u9700\u8981\u7533\u8bf7\u4e00\u5b9a\u7684\u6743\u9650\u3002","title":"Python SDK \u5b89\u88c5\u6307\u5357"},{"location":"sdk-setup/python/#python-sdk","text":"","title":"Python SDK \u5b89\u88c5\u6307\u5357"},{"location":"sdk-setup/python/#sdk","text":"\u83b7\u53d6 SDK \u6709\u591a\u79cd\u65b9\u5f0f\uff0c\u8f83\u4e3a\u63a8\u8350\u7684\u65b9\u5f0f\u662f\u901a\u8fc7\u5305\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u3002","title":"\u83b7\u53d6 SDK"},{"location":"sdk-setup/python/#_1","text":"","title":"\u5305\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u5b89\u88c5"},{"location":"sdk-setup/python/#pip","text":"pip \u662f\u6700\u63a8\u8350\u7684 Python \u5305\u7ba1\u7406\u5de5\u5177\uff0c\u5b83\u662f easy_install \u7684\u66ff\u4ee3\u3002\u5b89\u88c5 leancloud-sdk \u53ea\u9700\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a pip install leancloud \u6839\u636e\u4f60\u7684\u73af\u5883\uff0c\u547d\u4ee4\u4e4b\u524d\u8fd8\u53ef\u80fd\u9700\u8981\u52a0\u4e0a sudo","title":"pip"},{"location":"sdk-setup/python/#easy_install","text":"\u4e5f\u53ef\u4ee5\u4f7f\u7528 easy_install \u8fdb\u884c\u5b89\u88c5\uff1a easy_install leancloud \u6839\u636e\u4f60\u7684\u73af\u5883\uff0c\u547d\u4ee4\u4e4b\u524d\u8fd8\u53ef\u80fd\u9700\u8981\u52a0\u4e0a sudo","title":"easy_install"},{"location":"sdk-setup/python/#_2","text":"\u4e0b\u8f7d SDK","title":"\u624b\u52a8\u5b89\u88c5"},{"location":"sdk-setup/python/#_3","text":"\u9996\u5148\u8fdb\u5165 \u63a7\u5236\u53f0 \u8bbe\u7f6e \u5e94\u7528 Key \u6765\u83b7\u53d6 App ID \u4ee5\u53ca App Key\u3002 \u7136\u540e\u5bfc\u5165 leancloud\uff0c\u5e76\u8c03\u7528 init \u65b9\u6cd5\u8fdb\u884c\u521d\u59cb\u5316\uff1a import leancloud leancloud . init ( {{appid}} , {{appkey}} ) # \u6216\u8005\u4f7f\u7528 masterKey # leancloud.init( appId , master_key= masterKey ) \u5c06\u4e0a\u8ff0\u4ee3\u7801\u4e2d\u7684 App ID \u4ee5\u53ca App Key \u66ff\u6362\u6210\u4ece\u63a7\u5236\u53f0\u590d\u5236\u7c98\u8d34\u7684\u5bf9\u5e94\u7684\u6570\u636e\u5373\u53ef\u3002","title":"\u521d\u59cb\u5316"},{"location":"sdk-setup/python/#_4","text":"\u5728\u5e94\u7528\u5f00\u53d1\u9636\u6bb5\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u5f00\u542f SDK \u7684\u8c03\u8bd5\u65e5\u5fd7\uff08debug log\uff09\u6765\u65b9\u4fbf\u8ffd\u8e2a\u95ee\u9898\u3002\u8c03\u8bd5\u65e5\u5fd7\u5f00\u542f\u540e\uff0cSDK \u4f1a\u628a\u7f51\u7edc\u8bf7\u6c42\u3001\u9519\u8bef\u6d88\u606f\u7b49\u4fe1\u606f\u8f93\u51fa\u5230 IDE \u7684\u65e5\u5fd7\u7a97\u53e3\uff0c\u6216\u662f\u6d4f\u89c8\u5668 Console \u6216\u662f LeanCloud \u63a7\u5236\u53f0\u7684 \u4e91\u5f15\u64ce\u65e5\u5fd7 \u4e2d\u3002 # \u5199\u5728\u542f\u52a8\u811a\u672c\u7684\u5934\u90e8 # \u5982\u679c\u662f\u5728 LeanEngine \u73af\u5883\uff0c\u542f\u52a8\u811a\u672c\u662f wsgi.py import logging logging . basicConfig ( level = logging . DEBUG ) \u5728\u5e94\u7528\u53d1\u5e03\u4e4b\u524d\uff0c\u8bf7\u5173\u95ed\u8c03\u8bd5\u65e5\u5fd7\uff0c\u4ee5\u514d\u66b4\u9732\u654f\u611f\u6570\u636e\u3002","title":"\u5f00\u542f\u8c03\u8bd5\u65e5\u5fd7"},{"location":"sdk-setup/python/#_5","text":"SDK \u7684\u521d\u59cb\u5316\u65b9\u6cd5\u9ed8\u8ba4\u4f7f\u7528 \u4e2d\u56fd\u5927\u9646\u8282\u70b9 \uff0c\u5982\u9700\u5207\u6362\u5230 \u5176\u4ed6\u53ef\u7528\u8282\u70b9 \uff0c\u8bf7\u53c2\u8003\u5982\u4e0b\u7528\u6cd5\uff1a import leancloud leancloud . init ( {{appid}} , {{appkey}} ) leancloud . use_region ( US ) # \u542f\u7528\u7f8e\u56fd\u8282\u70b9 # leancloud.use_region( CN ) # \u9ed8\u8ba4\u542f\u7528\u4e2d\u56fd\u8282\u70b9","title":"\u542f\u7528\u6307\u5b9a\u8282\u70b9"},{"location":"sdk-setup/python/#_6","text":"\u4e2d\u56fd\u5927\u9646\u8282\u70b9 leancloud.cn \uff08SDK \u521d\u59cb\u5316\u65b9\u6cd5 \u9ed8\u8ba4 \u4f7f\u7528\u8be5\u8282\u70b9\uff09 \u5317\u7f8e\u8282\u70b9 us.leancloud.cn \uff08\u670d\u52a1\u5317\u7f8e\u5e02\u573a\uff09 \u5404\u4e2a\u8282\u70b9\u5f7c\u6b64\u72ec\u7acb\uff0c\u5f00\u53d1\u8005\u8d26\u53f7\u65e0\u6cd5\u8de8\u8282\u70b9\u6765\u521b\u5efa\u5e94\u7528\u6216\u8c03\u7528 API\u3002","title":"\u5168\u7403\u8282\u70b9"},{"location":"sdk-setup/python/#_7","text":"\u9996\u5148\uff0c\u786e\u8ba4\u672c\u5730\u7f51\u7edc\u73af\u5883\u662f\u53ef\u4ee5\u8bbf\u95ee LeanCloud \u670d\u52a1\u5668\u7684\uff0c\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u884c\uff1a ping {{domainN1}} \u5982\u679c\u5f53\u524d\u7f51\u8def\u6b63\u5e38\u5c06\u4f1a\u5f97\u5230\u5982\u4e0b\u54cd\u5e94\uff1a PING api-ucloud.leancloud.cn ( 123 .59.41.31 ) : 56 data bytes 64 bytes from 123 .59.41.31: icmp_seq = 0 ttl = 51 time = 9 .032 ms 64 bytes from 123 .59.41.31: icmp_seq = 1 ttl = 51 time = 7 .290 ms 64 bytes from 123 .59.41.31: icmp_seq = 2 ttl = 51 time = 8 .131 ms 64 bytes from 123 .59.41.31: icmp_seq = 3 ttl = 51 time = 9 .689 ms 64 bytes from 123 .59.41.31: icmp_seq = 4 ttl = 51 time = 6 .559 ms 64 bytes from 123 .59.41.31: icmp_seq = 5 ttl = 51 time = 8 .665 ms 64 bytes from 123 .59.41.31: icmp_seq = 6 ttl = 51 time = 8 .041 ms 64 bytes from 123 .59.41.31: icmp_seq = 7 ttl = 51 time = 8 .203 ms 64 bytes from 123 .59.41.31: icmp_seq = 8 ttl = 51 time = 6 .288 ms 64 bytes from 123 .59.41.31: icmp_seq = 9 ttl = 51 time = 7 .938 ms --- api-ucloud.leancloud.cn ping statistics --- 10 packets transmitted, 10 packets received, 0 .0% packet loss round-trip min/avg/max/stddev = 6 .288/7.984/9.689/0.997 ms \u7136\u540e\u5728\u9879\u76ee\u4e2d\u7f16\u5199\u5982\u4e0b\u6d4b\u8bd5\u4ee3\u7801\uff1a import leancloud leancloud . init ( {{appid}} , {{appkey}} ) TestObject = leancloud . Object . extend ( TestObject ) test_object = TestObject () test_object . set ( words , Hello World! ) test_object . save () \u7136\u540e\u7f16\u8bd1\u6267\u884c\u3002 \u7136\u540e\u6253\u5f00 \u63a7\u5236\u53f0 \u5b58\u50a8 \u6570\u636e TestObject \uff0c\u5982\u679c\u770b\u5230\u5982\u4e0b\u5185\u5bb9\uff0c\u8bf4\u660e SDK \u5df2\u7ecf\u6b63\u786e\u5730\u6267\u884c\u4e86\u4e0a\u8ff0\u4ee3\u7801\uff0c\u5b89\u88c5\u5b8c\u6bd5\u3002 \u5982\u679c\u63a7\u5236\u53f0\u6ca1\u6709\u53d1\u73b0\u5bf9\u5e94\u7684\u6570\u636e\uff0c\u8bf7\u53c2\u8003 \u95ee\u9898\u6392\u67e5 \u3002","title":"\u9a8c\u8bc1"},{"location":"sdk-setup/python/#_8","text":"","title":"\u95ee\u9898\u6392\u67e5"},{"location":"sdk-setup/python/#401-unauthorized","text":"\u5982\u679c SDK \u629b\u51fa 401 \u5f02\u5e38\u6216\u8005\u67e5\u770b\u672c\u5730\u7f51\u7edc\u8bbf\u95ee\u65e5\u5fd7\u5b58\u5728\uff1a { code : 401 , error : Unauthorized. } \u5219\u53ef\u8ba4\u5b9a\u4e3a App ID \u6216\u8005 App Key \u8f93\u5165\u6709\u8bef\uff0c\u6216\u8005\u662f\u4e0d\u5339\u914d\uff0c\u5f88\u591a\u5f00\u53d1\u8005\u540c\u65f6\u6ce8\u518c\u4e86\u591a\u4e2a\u5e94\u7528\uff0c\u5bfc\u81f4\u62f7\u8d1d\u7c98\u8d34\u7684\u65f6\u5019\uff0c\u7528 A \u5e94\u7528\u7684 App ID \u5339\u914d B \u5e94\u7528\u7684 App Key\uff0c\u8fd9\u6837\u5c31\u4f1a\u51fa\u73b0\u670d\u52a1\u7aef\u9274\u6743\u5931\u8d25\u7684\u9519\u8bef\u3002","title":"401 Unauthorized"},{"location":"sdk-setup/python/#_9","text":"\u5ba2\u6237\u7aef\u5c24\u5176\u662f\u624b\u673a\u7aef\uff0c\u5e94\u7528\u5728\u8bbf\u95ee\u7f51\u7edc\u7684\u65f6\u5019\u9700\u8981\u7533\u8bf7\u4e00\u5b9a\u7684\u6743\u9650\u3002","title":"\u5ba2\u6237\u7aef\u65e0\u6cd5\u8bbf\u95ee\u7f51\u7edc"},{"location":"sms/marketing/","text":"","title":"\u8425\u9500\u77ed\u4fe1"},{"location":"sms/notice/","text":"","title":"\u901a\u77e5\u77ed\u4fe1"},{"location":"sms/sms-overview/","text":"","title":"\u670d\u52a1\u603b\u89c8"},{"location":"sms/user/","text":"","title":"\u7528\u6237\u9a8c\u8bc1\u7c7b\u77ed\u4fe1"},{"location":"solution/overview/","text":"","title":"Overview"},{"location":"solution/weapp/","text":"\u5728\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4e0e\u5c0f\u6e38\u620f\u4e2d\u4f7f\u7528 LeanCloud \u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u662f\u4e00\u4e2a\u5168\u65b0\u7684\u8de8\u5e73\u53f0\u79fb\u52a8\u5e94\u7528\u5e73\u53f0\uff0c\u5c0f\u6e38\u620f\u662f\u5c0f\u7a0b\u5e8f\u7684\u4e00\u4e2a\u7c7b\u76ee\uff0c\u5728\u5c0f\u7a0b\u5e8f\u7684\u57fa\u7840\u4e0a\u5f00\u653e\u4e86\u6e38\u620f\u76f8\u5173\u7684 API\u3002LeanCloud \u4e3a\u5c0f\u7a0b\u5e8f\u63d0\u4f9b\u4e00\u7ad9\u5f0f\u540e\u7aef\u4e91\u670d\u52a1\uff0c\u4e3a\u4f60\u514d\u53bb\u670d\u52a1\u5668\u7ef4\u62a4\u3001\u8bc1\u4e66\u914d\u7f6e\u7b49\u7e41\u7410\u7684\u5de5\u4f5c\uff0c\u5927\u5e45\u964d\u4f4e\u4f60\u7684\u5f00\u53d1\u548c\u8fd0\u7ef4\u6210\u672c\u3002\u672c\u6587\u8bf4\u660e\u4e86\u5982\u4f55\u5728\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4e0e\u5c0f\u6e38\u620f\u4e2d\u4f7f\u7528 LeanCloud \u63d0\u4f9b\u7684\u5404\u9879\u670d\u52a1\u3002 Demo \u6211\u4eec\u5728\u5c0f\u7a0b\u5e8f\u4e0a\u5b9e\u73b0\u4e86 LeanTodo \u5e94\u7528\u3002\u5728\u8fd9\u4e2a Demo \u4e2d\u4f60\u53ef\u4ee5\u770b\u5230\uff1a \u5982\u4f55\u5bf9\u4e91\u7aef\u6570\u636e\u8fdb\u884c\u67e5\u8be2\u3001\u589e\u52a0\u3001\u4fee\u6539\u4e0e\u5220\u9664 \u5982\u4f55\u5c06\u67e5\u8be2\u7ed3\u679c\u6570\u7ec4\u7ed1\u5b9a\u5230\u89c6\u56fe\u5c42\u8fdb\u884c\u5c55\u793a\uff0c\u4ee5\u53ca\u5982\u4f55\u5728\u70b9\u51fb\u4e8b\u4ef6\u4e2d\u5f97\u5230\u5bf9\u5e94\u7684\u6570\u7ec4\u9879 \u5982\u4f55\u4f7f\u7528 LiveQuery \u5b9e\u73b0\u5bf9\u67e5\u8be2\u7ed3\u679c\u7684\u5b9e\u65f6\u66f4\u65b0\u548c\u591a\u7aef\u540c\u6b65 \u5982\u4f55\u81ea\u52a8\u767b\u5f55 LeanCloud \u7528\u6237\u7cfb\u7edf\uff0c\u4ee5\u53ca\u5982\u4f55\u5728\u767b\u5f55\u540e\u8bbe\u7f6e\u8d26\u53f7\u4e0e\u5bc6\u7801\u4ee5\u4f9b\u7528\u6237\u5728\u5176\u4ed6\u5e73\u53f0\u7684 LeanTodo \u5e94\u7528\u4e0a\u767b\u5f55 \u5982\u4f55\u96c6\u6210\u5fae\u4fe1\u652f\u4ed8 \u5982\u4f55\u5b9e\u73b0\u4e0b\u62c9\u5237\u65b0 \u4f60\u53ef\u4ee5\u901a\u8fc7\u5fae\u4fe1\u626b\u63cf\u4ee5\u4e0b\u4e8c\u7ef4\u7801\u8fdb\u5165 Demo\u3002 Demo \u7684\u6e90\u7801\u4e0e\u8fd0\u884c\u8bf4\u660e\u8bf7\u53c2\u8003 https://github.com/leancloud/leantodo-weapp \u3002 \u51c6\u5907\u5de5\u4f5c \u521b\u5efa\u5e94\u7528 \u5982\u679c\u4f60\u8fd8\u6ca1\u6709\u521b\u5efa\u8fc7 LeanCloud \u5e94\u7528\uff0c\u8bf7\u767b\u5f55 LeanCloud \u63a7\u5236\u53f0 \u521b\u5efa\u4e00\u4e2a\u65b0\u5e94\u7528 \u3002 \u5982\u679c\u4f60\u8fd8\u6ca1\u6709\u5c0f\u7a0b\u5e8f\u5e10\u53f7\uff0c\u8bf7\u8bbf\u95ee \u5fae\u4fe1\u516c\u4f17\u5e73\u53f0 \u6ce8\u518c\u4e00\u4e2a\u5c0f\u7a0b\u5e8f\u5e10\u53f7\u3002\u5982\u679c\u4f60\u4e0d\u9700\u8981\u8fdb\u884c\u771f\u673a\u8c03\u8bd5\u53ef\u4ee5\u8df3\u8fc7\u8fd9\u4e00\u6b65\u3002 \u4e0b\u8f7d \u5c0f\u7a0b\u5e8f\u5f00\u53d1\u5de5\u5177 \uff0c\u6309\u7167 \u5c0f\u7a0b\u5e8f\u5f00\u53d1\u6559\u7a0b \u521b\u5efa\u4e00\u4e2a\u9879\u76ee\u3002 \u914d\u7f6e\u57df\u540d\u767d\u540d\u5355 \u8bf7\u6309\u7167 \u5c0f\u7a0b\u5e8f\u57df\u540d\u767d\u540d\u5355\u914d\u7f6e \u7684\u6b65\u9aa4\u914d\u7f6e\u3002\u5982\u679c\u4f60\u4e0d\u9700\u8981\u8fdb\u884c\u771f\u673a\u8c03\u8bd5\u53ef\u4ee5\u8df3\u8fc7\u8fd9\u4e00\u6b65\uff08\u53ef\u5728\u5f00\u53d1\u8005\u5de5\u5177\u7684 \u8be6\u60c5 \u9879\u76ee\u8bbe\u7f6e \u4e2d\u52fe\u9009 \u4e0d\u6821\u9a8c\u5b89\u5168\u57df\u540d\u3001TLS \u7248\u672c\u4ee5\u53ca HTTPS \u8bc1\u4e66 \uff09\u3002 \u5b58\u50a8 \u8981\u4f7f\u7528 LeanCloud \u7684\u6570\u636e\u5b58\u50a8\u3001\u7528\u6237\u7cfb\u7edf\u3001\u8c03\u7528\u4e91\u5f15\u64ce\u7b49\u529f\u80fd\uff0c\u9700\u8981\u4f7f\u7528 LeanCloud \u5b58\u50a8 SDK\u3002 \u5b89\u88c5\u4e0e\u521d\u59cb\u5316 \u8bf7\u53c2\u9605\u300a JavaScript SDK \u5b89\u88c5\u6307\u5357 \u300b\u4e2d\u5bf9\u5e94\u5e73\u53f0\u7684\u8bf4\u660e\u3002 \u5bf9\u8c61\u5b58\u50a8 \u6240\u6709\u7684\u5bf9\u8c61\u5b58\u50a8 API \u90fd\u80fd\u6b63\u5e38\u4f7f\u7528\uff0c\u8be6\u7ec6\u7684\u7528\u6cd5\u8bf7\u53c2\u8003 JavaScript \u6570\u636e\u5b58\u50a8\u5f00\u53d1\u6307\u5357 \u3002 \u6570\u636e\u7ed1\u5b9a \u76f4\u63a5\u4f7f\u7528 this.setData() \u5c06 AV.Object \u5bf9\u8c61\u8bbe\u7f6e\u4e3a\u5f53\u524d\u9875\u9762\u7684 data\uff0c\u5373\u53ef\u5728 WXML \u4e2d\u4f7f\u7528 Mustache \u8bed\u6cd5\u8bbf\u95ee\u7ed1\u5b9a\u7684\u6570\u636e\u4e86\u3002\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\u5c55\u793a\u4e86\u5982\u4f55\u5c06\u4e00\u4e2a Query \u7684\u67e5\u8be2\u7ed3\u679c\u663e\u793a\u5728\u9875\u9762\u4e0a\uff1a // pages/todos/todos.js Page ({ data : { todos : [], }, onReady : function () { new AV . Query ( Todo ) . descending ( createdAt ) . find () . then ( todos = this . setData ({ todos })) . catch ( console . error ); }, }); !-- pages/todos/todos.wxml -- block wx:for = {{mustache( todos )}} wx:for-item = todo wx:key = objectId text data-id = {{mustache( todo.objectId )}} {{mustache( todo.content )}} / text / block \u4f7f\u7528 include \u5f97\u5230\u7684\u5d4c\u5957\u5bf9\u8c61\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728\u89c6\u56fe\u5c42\u901a\u8fc7 . \u8bbf\u95ee\u5230\uff1a // pages/student/student.js Page ({ data : { student : null , }, onReady : function () { new AV . Query ( Student ) . include ( avatar ) // avatar is an AV.File . get ( 56a9803e1532bc005303650c ) . then ( student = this . setData ({ student })) . catch ( console . error ); }, }); !-- pages/student/student.wxml -- image src = {{mustache( student.avatar.url )}} / image \u6587\u4ef6\u5b58\u50a8 \u5728\u5c0f\u7a0b\u5e8f\u4e2d\uff0c\u53ef\u4ee5\u5c06\u7528\u6237\u76f8\u518c\u6216\u62cd\u7167\u5f97\u5230\u7684\u56fe\u7247\u4e0a\u4f20\u5230 LeanCloud \u670d\u52a1\u5668\u8fdb\u884c\u4fdd\u5b58\u3002\u9996\u5148\u901a\u8fc7 wx.chooseImage \u65b9\u6cd5\u9009\u62e9\u6216\u62cd\u6444\u7167\u7247\uff0c\u5f97\u5230\u672c\u5730\u4e34\u65f6\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u7136\u540e\u6309\u7167\u4e0b\u9762\u7684\u65b9\u6cd5\u6784\u9020\u4e00\u4e2a AV.File \u5c06\u5176\u4e0a\u4f20\u5230 LeanCloud\uff1a wx . chooseImage ({ count : 1 , sizeType : [ original , compressed ], sourceType : [ album , camera ], success : function ( res ) { var tempFilePath = res . tempFilePaths [ 0 ]; new AV . File ( file-name , { blob : { uri : tempFilePath , }, }). save (). then ( file = console . log ( file . url ()) ). catch ( console . error ); } }); \u4e0a\u4f20\u6210\u529f\u540e\u53ef\u4ee5\u901a\u8fc7 file.url() \u65b9\u6cd5\u5f97\u5230\u670d\u52a1\u7aef\u7684\u56fe\u7247 url\u3002 \u6587\u4ef6\u6279\u91cf\u4e0a\u4f20 \u76ee\u524d\u5728\u5c0f\u7a0b\u5e8f Android \u4e0a\u4e0d\u652f\u6301\u6587\u4ef6\u5e76\u53d1\u4e0a\u4f20\uff0c\u9700\u8981\u4e32\u884c\u4e0a\u4f20\uff1a res . tempFilePaths . map ( tempFilePath = () = new AV . File ( filename , { blob : { uri : tempFilePath , }, }). save ()). reduce ( ( m , p ) = m . then ( v = AV . Promise . all ([... v , p ()])), AV . Promise . resolve ([]) ). then ( files = console . log ( files . map ( file = file . url ()))). catch ( console . error ); \u7528\u6237\u7cfb\u7edf \u5c0f\u7a0b\u5e8f\u4e2d\u63d0\u4f9b\u4e86\u767b\u5f55 API \u6765\u83b7\u53d6\u5fae\u4fe1\u7684\u7528\u6237\u767b\u5f55\u72b6\u6001\uff0c\u5e94\u7528\u53ef\u4ee5\u8bbf\u95ee\u5230\u7528\u6237\u7684\u6635\u79f0\u3001\u6027\u522b\u7b49\u57fa\u672c\u4fe1\u606f\uff0c\u4f46\u662f\u5982\u679c\u60f3\u8981\u4fdd\u5b58\u989d\u5916\u7684\u7528\u6237\u4fe1\u606f\uff0c\u5982\u7528\u6237\u7684\u624b\u673a\u53f7\u7801\u3001\u6536\u8d27\u5730\u5740\u7b49\uff0c\u5219\u9700\u8981\u4f7f\u7528 LeanCloud \u7684\u7528\u6237\u7cfb\u7edf\u3002 \u4e00\u952e\u767b\u5f55 LeanCloud \u7684\u7528\u6237\u7cfb\u7edf\u73b0\u5df2\u652f\u6301\u4e00\u952e\u4f7f\u7528\u5fae\u4fe1\u7528\u6237\u8eab\u4efd\u767b\u5f55\u3002\u8981\u4f7f\u7528\u4e00\u952e\u767b\u5f55\u529f\u80fd\uff0c\u9700\u8981\u5148\u8bbe\u7f6e\u5c0f\u7a0b\u5e8f\u7684 AppID \u4e0e AppSecret\uff1a \u767b\u5f55 \u5fae\u4fe1\u516c\u4f17\u5e73\u53f0 \uff0c\u5728 \u8bbe\u7f6e \u5f00\u53d1\u8bbe\u7f6e \u4e2d\u83b7\u5f97 AppID \u4e0e AppSecret\u3002 \u524d\u5f80 LeanCloud \u63a7\u5236\u53f0 \u7ec4\u4ef6 \u793e\u4ea4 \uff0c\u4fdd\u5b58\u300c\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u300d\u7684 AppID \u4e0e AppSecret\u3002 \u8fd9\u6837\u4f60\u5c31\u53ef\u4ee5\u5728\u5e94\u7528\u4e2d\u4f7f\u7528 AV.User.loginWithWeapp() \u65b9\u6cd5\u6765\u4f7f\u7528\u5f53\u524d\u7528\u6237\u8eab\u4efd\u767b\u5f55\u4e86\u3002 AV . User . loginWithWeapp (). then ( user = { this . globalData . user = user . toJSON (); }). catch ( console . error ); \u5982\u679c\u8be5\u7528\u6237\u662f\u7b2c\u4e00\u6b21\u4f7f\u7528\u6b64\u5e94\u7528\uff0c\u8c03\u7528\u767b\u5f55 API \u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7528\u6237\uff0c\u4f60\u53ef\u4ee5\u5728 \u63a7\u5236\u53f0 \u5b58\u50a8 \u4e2d\u7684 _User \u8868\u4e2d\u770b\u5230\u8be5\u7528\u6237\u7684\u4fe1\u606f\uff0c\u5982\u679c\u8be5\u7528\u6237\u66fe\u7ecf\u4f7f\u7528\u8be5\u65b9\u5f0f\u767b\u5f55\u8fc7\u6b64\u5e94\u7528\uff0c\u518d\u6b21\u8c03\u7528\u767b\u5f55 API \u4f1a\u8fd4\u56de\u540c\u4e00\u4e2a\u7528\u6237\u3002 \u7528\u6237\u7684\u767b\u5f55\u72b6\u6001\u4f1a\u4fdd\u5b58\u5728\u5ba2\u6237\u7aef\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 AV.User.current() \u65b9\u6cd5\u6765\u83b7\u53d6\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\uff0c\u4e0b\u9762\u7684\u4f8b\u5b50\u5c55\u793a\u4e86\u5982\u4f55\u540c\u6b65\u767b\u5f55\u7528\u6237\u7684\u4fe1\u606f\uff1a // \u5047\u8bbe\u5df2\u7ecf\u901a\u8fc7 AV.User.loginWithWeapp() \u767b\u5f55 // \u83b7\u5f97\u5f53\u524d\u767b\u5f55\u7528\u6237 const user = AV . User . current (); // \u8c03\u7528\u5c0f\u7a0b\u5e8f API\uff0c\u5f97\u5230\u7528\u6237\u4fe1\u606f wx . getUserInfo ({ success : ({ userInfo }) = { // \u66f4\u65b0\u5f53\u524d\u7528\u6237\u7684\u4fe1\u606f user . set ( userInfo ). save (). then ( user = { // \u6210\u529f\uff0c\u6b64\u65f6\u53ef\u5728\u63a7\u5236\u53f0\u4e2d\u770b\u5230\u66f4\u65b0\u540e\u7684\u7528\u6237\u4fe1\u606f this . globalData . user = user . toJSON (); }). catch ( console . error ); } }); \u4f7f\u7528\u4e00\u952e\u767b\u5f55\u65b9\u5f0f\u767b\u5f55\u65f6\uff0cLeanCloud \u4f1a\u5c06\u8be5\u7528\u6237\u7684\u5c0f\u7a0b\u5e8f openid \u4fdd\u5b58\u5728\u5bf9\u5e94\u7684 user.authData.lc_weapp \u5c5e\u6027\u4e2d\uff0c\u4f60\u53ef\u4ee5\u5728\u63a7\u5236\u53f0\u7684 _User \u8868\u4e2d\u770b\u5230\u3002\u53ef\u4ee5\u4f7f\u7528 masterKey \u5728\u4e91\u5f15\u64ce\u4e2d\u83b7\u53d6\u8be5\u7528\u6237\u7684 openid \u8fdb\u884c\u652f\u4ed8\u3001\u63a8\u9001\u7b49\u64cd\u4f5c\u3002\u8be6\u60c5\u8bf7\u53c2\u8003 \u652f\u4ed8 \u3002 \u4f7f\u7528 unionid \u767b\u5f55 \u5fae\u4fe1\u5f00\u653e\u5e73\u53f0\u4f7f\u7528 unionid \u6765\u533a\u5206\u7528\u6237\u7684\u552f\u4e00\u6027\uff0c\u4e5f\u5c31\u662f\u8bf4\u540c\u4e00\u4e2a\u5fae\u4fe1\u5f00\u653e\u5e73\u53f0\u5e10\u53f7\u4e0b\u7684\u79fb\u52a8\u5e94\u7528\u3001\u7f51\u7ad9\u5e94\u7528\u548c\u516c\u4f17\u5e10\u53f7\uff08\u5305\u62ec\u5c0f\u7a0b\u5e8f\uff09\uff0c\u7528\u6237\u7684 unionid \u90fd\u662f\u540c\u4e00\u4e2a\uff0c\u800c openid \u4f1a\u662f\u591a\u4e2a\u3002 \u5f00\u53d1\u8005\u9700\u8981\u81ea\u884c\u83b7\u5f97\u7528\u6237\u7684 unionid\uff0c\u7136\u540e\u8c03\u7528 AV.User.signUpOrlogInWithAuthDataAndUnionId() \u6295\u5165 unionid \u5b8c\u6210\u767b\u5f55\u6388\u6743\uff08\u800c\u4e0d\u5e94\u8be5\u518d\u4f7f\u7528 AV.User.loginWithWeapp() \uff09\uff1a javascriptAV.User.signUpOrlogInWithAuthDataAndUnionId({uid: openid,access_token: session_key,...\u5176\u4ed6\u53ef\u9009\u5c5e\u6027}, weapp_union , unionid, {unionIdPlatform: weixin , // \u6307\u5b9a\u4e3a weixin \u5373\u53ef\u901a\u8fc7 unionid \u4e0e\u5176\u4ed6 weixin \u5e73\u53f0\u7684\u5e10\u53f7\u6253\u901aasMainAccount: true,}).then(console.log, console.error); \u4e3a\u786e\u4fdd\u540c\u4e00\u4e2a uid \u53ea\u5b58\u5728\u4e00\u6761\u8bb0\u5f55\uff0c\u4f60\u8fd8\u9700\u8981\u4e3a authData.weapp_union.uid \u52a0\u4e0a\u552f\u4e00\u7d22\u5f15\u3002\u8fdb\u5165 \u63a7\u5236\u53f0 \u5b58\u50a8 \u9009\u62e9 _User \u8868 \u5176\u4ed6 \u7d22\u5f15 \uff0c\u52fe\u9009 authData \u7136\u540e\u5728\u51fa\u73b0\u7684\u8f93\u5165\u6846\u4e2d\u952e\u5165 authData.weapp_union.uid \uff0c\u70b9\u51fb \u521b\u5efa \u3002 \u5f53\u4e00\u4e2a\u6570\u636e\u8868\u7684\u8bb0\u5f55\u6570\u8d85\u8fc7 1 \u4e07\u65f6\uff0c\u5f00\u53d1\u8005\u5c06\u65e0\u6cd5\u81ea\u884c\u4e3a\u5176\u521b\u5efa\u7d22\u5f15\uff08\u6b64\u524d\u5df2\u521b\u5efa\u7684\u7d22\u5f15\u4ecd\u7136\u4f1a\u5bf9\u8d85\u8fc7 1 \u4e07\u6761\u7684\u6570\u636e\u751f\u6548\uff09\u3002\u5546\u7528\u7248\u7528\u6237\u9700\u8981\u901a\u8fc7 \u5de5\u5355\u670d\u52a1 \u5411\u6211\u4eec\u63d0\u4ea4\u521b\u5efa\u7533\u8bf7\uff08\u9009\u62e9\u300c\u5efa\u7acb\u7d22\u5f15\u300d\u5206\u7c7b\uff09\uff0c\u5f00\u53d1\u7248\u7528\u6237\u9700\u8981\u5148\u5347\u7ea7\u5230\u5546\u7528\u7248\u624d\u80fd\u63d0\u4ea4\u521b\u5efa\u7533\u8bf7\u3002 \u542f\u7528\u5176\u4ed6\u767b\u5f55\u65b9\u5f0f \u7531\u4e8e AV.User.loginWithWeapp() \u53ea\u80fd\u5728\u5c0f\u7a0b\u5e8f\u4e2d\u4f7f\u7528\uff0c\u6240\u4ee5\u4f7f\u7528\u8be5 API \u521b\u5efa\u7684\u7528\u6237\u65e0\u6cd5\u76f4\u63a5\u5728\u5c0f\u7a0b\u5e8f\u4e4b\u5916\u7684\u5e73\u53f0\u4e0a\u767b\u5f55\u3002\u5982\u679c\u9700\u8981\u4f7f\u7528 LeanCloud \u7528\u6237\u7cfb\u7edf\u63d0\u4f9b\u7684\u5176\u4ed6\u767b\u5f55\u65b9\u5f0f\uff0c\u5982\u7528\u624b\u673a\u53f7\u9a8c\u8bc1\u7801\u767b\u5f55\u3001\u90ae\u7bb1\u5bc6\u7801\u767b\u5f55\u7b49\uff0c\u5728\u5c0f\u7a0b\u5e8f\u4e00\u952e\u767b\u5f55\u540e\u8bbe\u7f6e\u5bf9\u5e94\u7684\u7528\u6237\u5c5e\u6027\u5373\u53ef\uff1a // \u5c0f\u7a0b\u5e8f\u767b\u5f55 AV . User . loginWithWeapp (). then ( user = { // \u8bbe\u7f6e\u5e76\u4fdd\u5b58\u624b\u673a\u53f7 user . setMobilePhoneNumber ( 13000000000 ); return user . save (); }). then ( user = { // \u53d1\u9001\u9a8c\u8bc1\u77ed\u4fe1 return AV . User . requestMobilePhoneVerify ( user . getMobilePhoneNumber ()); }). then ({ // \u7528\u6237\u586b\u5199\u6536\u5230\u77ed\u4fe1\u9a8c\u8bc1\u7801\u540e\u518d\u8c03\u7528 AV.User.verifyMobilePhone(code) \u5b8c\u6210\u624b\u673a\u53f7\u7684\u7ed1\u5b9a // \u6210\u529f\u540e\u7528\u6237\u7684 mobilePhoneVerified \u5b57\u6bb5\u4f1a\u88ab\u7f6e\u4e3a true // \u6b64\u540e\u7528\u6237\u4fbf\u53ef\u4ee5\u4f7f\u7528\u624b\u673a\u53f7\u52a0\u52a8\u6001\u9a8c\u8bc1\u7801\u767b\u5f55\u4e86 }). catch ( console . error ); \u9a8c\u8bc1\u624b\u673a\u53f7\u7801\u529f\u80fd\u8981\u6c42\u5728 \u63a7\u5236\u53f0 \u5b58\u50a8 \u8bbe\u7f6e \u7528\u6237\u8d26\u53f7 \u542f\u7528\u300c\u7528\u6237\u6ce8\u518c\u65f6\uff0c\u5411\u6ce8\u518c\u624b\u673a\u53f7\u7801\u53d1\u9001\u9a8c\u8bc1\u77ed\u4fe1\u300d\u3002 \u7ed1\u5b9a\u73b0\u6709\u7528\u6237 \u5982\u679c\u4f60\u7684\u5e94\u7528\u5df2\u7ecf\u5728\u4f7f\u7528 LeanCloud \u7684\u7528\u6237\u7cfb\u7edf\uff0c\u6216\u8005\u7528\u6237\u5df2\u7ecf\u901a\u8fc7\u5176\u4ed6\u65b9\u5f0f\u6ce8\u518c\u4e86\u4f60\u7684\u5e94\u7528\uff08\u6bd4\u5982\u5728 Web \u7aef\u901a\u8fc7\u7528\u6237\u540d\u5bc6\u7801\u6ce8\u518c\uff09\uff0c\u53ef\u4ee5\u901a\u8fc7\u5728\u5c0f\u7a0b\u5e8f\u4e2d\u8c03\u7528 AV.User#linkWithWeapp() \u6765\u5173\u8054\u5df2\u6709\u7684\u8d26\u6237\uff1a // \u9996\u5148\uff0c\u4f7f\u7528\u7528\u6237\u540d\u4e0e\u5bc6\u7801\u767b\u5f55\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u7528\u6237 AV . User . logIn ( username , password ). then ( user = { // \u5c06\u5f53\u524d\u7684\u5fae\u4fe1\u7528\u6237\u4e0e\u5f53\u524d\u767b\u5f55\u7528\u6237\u5173\u8054 return user . linkWithWeapp (); }). catch ( console . error ); \u4e91\u5f15\u64ce \u4f7f\u7528\u4e91\u5f15\u64ce\u53ef\u4ee5\u65b9\u4fbf\u5730\u5b9e\u73b0\u4e00\u4e9b\u5728\u670d\u52a1\u5668\u6267\u884c\u7684\u903b\u8f91\uff0c\u6bd4\u5982\u5904\u7406\u654f\u611f\u4fe1\u606f\u3001\u6570\u636e\u805a\u5408\u3001\u91c7\u96c6\u6570\u636e\u7b49\uff0c\u5e76\u4e14\u4e0d\u9700\u8981\u51c6\u5907\u989d\u5916\u7684\u670d\u52a1\u5668\u3002 SDK \u6240\u6709\u7684\u4e91\u5f15\u64ce\u76f8\u5173\u7684 API \u90fd\u80fd\u6b63\u5e38\u4f7f\u7528\uff0c\u8be6\u7ec6\u7684\u7528\u6cd5\u8bf7\u53c2\u8003 \u4e91\u51fd\u6570\u5f00\u53d1\u6307\u5357 \u3002 \u4f7f\u7528\u4e91\u5f15\u64ce\u5b9e\u73b0\u5c0f\u7a0b\u5e8f\u652f\u4ed8\u7684\u65b9\u6848\u53c2\u89c1 \u652f\u4ed8 \u3002 \u5373\u65f6\u901a\u8baf \u8981\u4f7f\u7528 LeanCloud \u7684\u804a\u5929\u3001\u5b9e\u65f6\u6d88\u606f\u529f\u80fd\uff0c\u9700\u8981\u4f7f\u7528 LeanCloud \u5373\u65f6\u901a\u8baf SDK\u3002 \u5b89\u88c5\u4e0e\u521d\u59cb\u5316 \u8bf7\u53c2\u9605\u300a JavaScript SDK \u5b89\u88c5\u6307\u5357 \u300b\u4e2d\u5bf9\u5e94\u5e73\u53f0\u7684\u8bf4\u660e\u3002 \u5728 app.js \u4e2d\u521d\u59cb\u5316\u5e94\u7528\uff1a const { Realtime } = require ( ./libs/realtime.weapp.min.js ); const realtime = new Realtime ({ appId : {{appid}} , appKey : {{appkey}} , }); \u9700\u8981\u7279\u522b\u6ce8\u610f\u7684\u662f\uff0c\u7531\u4e8e\u5c0f\u7a0b\u5e8f\u9650\u5236\u4e86\u540c\u65f6\u53ea\u80fd\u6709\u4e00\u4e2a WebSocket \u8fde\u63a5\uff0c\u56e0\u6b64\u63a8\u8350\u7684\u7528\u6cd5\u662f\u521d\u59cb\u5316 Realtime \u4e00\u6b21\uff0c\u6302\u8f7d\u5230\u5168\u5c40\u7684 App \u5b9e\u4f8b\u4e0a\uff0c\u7136\u540e\u5728\u6240\u6709\u9700\u8981\u7684\u65f6\u5019\u90fd\u4f7f\u7528\u8fd9\u4e2a realtime \u5b9e\u4f8b\u3002 \u5373\u65f6\u901a\u8baf SDK \u7684\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003 \u5373\u65f6\u901a\u8baf\u5f00\u53d1\u6307\u5357 \u3002 \u5bcc\u5a92\u4f53\u6d88\u606f \u8981\u5728\u5c0f\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u5373\u65f6\u901a\u8baf SDK \u7684\u5bcc\u5a92\u4f53\u6d88\u606f\u63d2\u4ef6\uff0c\u6709\u4e00\u4e9b\u989d\u5916\u7684\u7ea6\u675f\uff1a \u5b89\u88c5\u5b58\u50a8 SDK \u81f3 libs \u76ee\u5f55\uff0c\u5e76\u5c06\u6587\u4ef6\u91cd\u547d\u540d\u4e3a leancloud-storage.js \u3002 \u5b89\u88c5\u5373\u65f6\u901a\u8baf SDK \u81f3 libs \u76ee\u5f55\uff0c\u5e76\u5c06\u6587\u4ef6\u91cd\u547d\u540d\u4e3a leancloud-realtime.js \u3002 \u4e0b\u8f7d leancloud-realtime-plugin-typed-messages.js \uff0c\u79fb\u52a8\u5230 libs \u76ee\u5f55\u3002\u5fc5\u987b\u4fdd\u8bc1 \u4e09\u4e2a\u6587\u4ef6\u5728\u540c\u4e00\u76ee\u5f55\u4e2d \u3002 \u5728 app.js \u4e2d \u4f9d\u6b21\u52a0\u8f7d leancloud-storage.js \u3001 leancloud-realtime.js \u548c leancloud-realtime-plugin-typed-messages.js \u3002 const AV = require ( ./libs/leancloud-storage.js ); const Realtime = require ( ./libs/leancloud-realtime.js ). Realtime ; const TypedMessagesPlugin = require ( ./libs/leancloud-realtime-plugin-typed-messages.js ). TypedMessagesPlugin ; const ImageMessage = require ( ./libs/leancloud-realtime-plugin-typed-messages.js ). ImageMessage ; \u5728 app.js \u4e2d\u521d\u59cb\u5316\u5e94\u7528\uff1a // \u521d\u59cb\u5316\u5b58\u50a8 SDK AV . init ({ appId : {{appid}} , appKey : {{appkey}} , }); // \u521d\u59cb\u5316\u5373\u65f6\u901a\u8baf SDK const realtime = new Realtime ({ appId : {{appid}} , appKey : {{appkey}} , plugins : [ TypedMessagesPlugin ], // \u6ce8\u518c\u5bcc\u5a92\u4f53\u6d88\u606f\u63d2\u4ef6 }); \u5bcc\u5a92\u4f53\u6d88\u606f\u7684\u7528\u6cd5\u8bf7\u53c2\u8003 \u5373\u65f6\u901a\u8baf\u5f00\u53d1\u6307\u5357 - \u5bcc\u5a92\u4f53\u6d88\u606f \u3002 \u652f\u4ed8 \u914d\u7f6e \u5728\u5f00\u59cb\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u5df2\u7ecf\u5728\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u540e\u53f0\u5f00\u542f\u4e86\u300c\u5fae\u4fe1\u652f\u4ed8\u300d\u529f\u80fd\uff0c\u7136\u540e\u6309\u7167\u4e0b\u9762\u7684\u6b65\u9aa4\u914d\u7f6e\u4e91\u5f15\u64ce\u73af\u5883\u53d8\u91cf\uff1a \u8fdb\u5165\u5e94\u7528\u63a7\u5236\u53f0 - \u4e91\u5f15\u64ce - \u8bbe\u7f6e \u8bbe\u7f6e\u5e94\u7528\u7684\u4e8c\u7ea7\u57df\u540d\u5e76\u4fdd\u5b58 \u6dfb\u52a0\u5e76\u4fdd\u5b58\u4ee5\u4e0b\u73af\u5883\u53d8\u91cf WEIXIN_APPID \uff1a\u5c0f\u7a0b\u5e8f AppId WEIXIN_MCHID \uff1a\u5fae\u4fe1\u652f\u4ed8\u5546\u6237\u53f7 WEIXIN_PAY_SECRET \uff1a\u5fae\u4fe1\u652f\u4ed8 API \u5bc6\u94a5\uff08 \u5fae\u4fe1\u5546\u6237\u5e73\u53f0 - \u8d26\u6237\u8bbe\u7f6e - API\u5b89\u5168 - \u5bc6\u94a5\u8bbe\u7f6e\uff09 WEIXIN_NOTIFY_URL \uff1a https://.leanapp.cn/weixin/pay-callback \uff0c\u5176\u4e2d yourdomain \u662f\u7b2c\u4e8c\u6b65\u4e2d\u8bbe\u7f6e\u7684\u4e8c\u7ea7\u57df\u540d \u67e5\u770b\u793a\u4f8b ![image](https://cloud.githubusercontent.com/assets/175227/22236906/7c651c80-e243-11e6-819b-007d5862bdbf.png) \u670d\u52a1\u7aef\u5f00\u53d1 \u9996\u5148\u786e\u8ba4\u672c\u673a\u5df2\u7ecf\u5b89\u88c5 Node.js \u8fd0\u884c\u73af\u5883\u548c LeanCloud \u547d\u4ee4\u884c\u5de5\u5177 \uff0c\u7136\u540e\u6267\u884c\u4e0b\u5217\u6307\u4ee4\u4e0b\u8f7d\u793a\u4f8b\u9879\u76ee\uff1a $ git clone https://github.com/leancloud/weapp-pay-getting-started.git $ cd weapp-pay-getting-started \u5b89\u88c5\u4f9d\u8d56\uff1a npm install \u767b\u5f55\u5e76\u5173\u8054\u5e94\u7528\uff1a lean login lean switch \u542f\u52a8\u9879\u76ee\uff1a lean up \u4e4b\u540e\u4f60\u5c31\u53ef\u4ee5\u5728 localhost:3001 \u8c03\u8bd5\u4e91\u51fd\u6570\u4e86\u3002 \u793a\u4f8b\u9879\u76ee\u4e2d\u4e0e\u652f\u4ed8\u76f4\u63a5\u76f8\u5173\u4ee3\u7801\u6709\u4e09\u90e8\u5206\uff1a order.js \uff1a\u5bf9\u5e94 Order \u8868\uff0c\u5b9a\u4e49\u4e86\u90e8\u5206\u5b57\u6bb5\u7684 getter/setter\uff0c\u4ee5\u53ca place \u65b9\u6cd5\u7528\u4e8e\u5411\u5fae\u4fe1 API \u63d0\u4ea4\u8ba2\u5355\u3002 cloud.js \uff1a\u5176\u4e2d\u5b9a\u4e49\u4e86\u540d\u4e3a order \u7684\u4e91\u51fd\u6570\uff0c\u8fd9\u4e2a\u4e91\u51fd\u6570\u4f1a\u83b7\u53d6\u5f53\u524d\u7528\u6237\u7684 openid \uff0c\u4ee5\u5176\u8eab\u4efd\u521b\u5efa\u4e86\u4e00\u4e2a 1 \u5206\u94b1\u7684 order \u5e76\u4e0b\u5355\uff0c\u6700\u540e\u8fd4\u56de\u7b7e\u540d\u8fc7\u7684\u8ba2\u5355\u4fe1\u606f\u3002 routers/weixin.js \uff1a\u5176\u4e2d\u5b9a\u4e49\u4e86 pay-callback \u7684\u5904\u7406\u51fd\u6570\uff0c\u5f53\u7528\u6237\u652f\u4ed8\u6210\u529f\u540e\u5fae\u4fe1\u8c03\u7528\u8fd9\u4e2a URL\uff0c\u8fd9\u4e2a\u51fd\u6570\u5c06\u5bf9\u5e94\u7684\u8ba2\u5355\u72b6\u6001\u66f4\u65b0\u4e3a SUCCESS \u3002 \u8bf7\u6839\u636e\u4f60\u7684\u4e1a\u52a1\u9700\u8981\u4fee\u6539\u4ee3\u7801\u3002\u53c2\u8003\u6587\u6863\uff1a \u5fae\u4fe1\u652f\u4ed8\u7edf\u4e00\u4e0b\u5355 API \u53c2\u6570\u4e0e\u9519\u8bef\u7801 \u5fae\u4fe1\u652f\u4ed8\u7ed3\u679c\u901a\u77e5\u53c2\u6570 \u5b8c\u6210\u5f00\u53d1\u540e\u90e8\u7f72\u5230\u9884\u5907\u73af\u5883\uff08\u82e5\u65e0\u9884\u5907\u73af\u5883\u5219\u76f4\u63a5\u90e8\u7f72\u5230\u751f\u4ea7\u73af\u5883\uff09\uff1a lean deploy \u5ba2\u6237\u7aef\u5f00\u53d1 \u5ba2\u6237\u7aef\u5b8c\u6210\u4e00\u6b21\u652f\u4ed8\u9700\u8981\u5206\u4e24\u6b65\uff1a \u7528\u6237\u767b\u5f55\u540e\uff0c\u8c03\u7528\u540d\u4e3a order \u7684\u4e91\u51fd\u6570\u4e0b\u5355\uff0c\u8fd4\u56de\u7b7e\u540d\u8fc7\u7684\u8ba2\u5355\u4fe1\u606f\u3002 \u8c03\u7528\u652f\u4ed8 API\uff08 wx.requestPayment \uff09\uff0c\u4f20\u5165\u4e0a\u4e00\u6b65\u8fd4\u56de\u7684\u8ba2\u5355\u4fe1\u606f\uff0c\u53d1\u8d77\u652f\u4ed8\u3002 AV . Cloud . run ( order ). then (( data ) = { data . success = () = { // \u652f\u4ed8\u6210\u529f }); data . fail = ({ errMsg }) = { // \u9519\u8bef\u5904\u7406 }); wx . requestPayment ( data ); }). catch ( error = { // \u9519\u8bef\u5904\u7406 }) \u5ba2\u6237\u7aef\u7684\u793a\u4f8b\u4ee3\u7801\u53c2\u89c1 Demo \u6253\u8d4f\u529f\u80fd\u3002\u53c2\u8003\u6587\u6863\uff1a \u5c0f\u7a0b\u5e8f\u5ba2\u6237\u7aef\u53d1\u8d77\u652f\u4ed8 API FAQ \u914d\u7f6e download \u5408\u6cd5\u57df\u540d\u65f6\u663e\u793a\u300c\u8be5\u57df\u540d\u56e0\u8fdd\u89c4\u88ab\u7981\u6b62\u8bbe\u7f6e\u3002\u300d \u8bf7\u524d\u5f80 \u63a7\u5236\u53f0 \u5b58\u50a8 \u8bbe\u7f6e \u6587\u4ef6 \u914d\u7f6e\u4f60\u81ea\u5df1\u7684\u6587\u4ef6\u57df\u540d\u3002 Access denied by api domain white list \u5982\u679c\u4f60\u7684\u5e94\u7528\u542f\u7528\u5e76\u914d\u7f6e\u4e86 Web \u5b89\u5168\u57df\u540d \uff0c\u4f60\u53ef\u80fd\u4f1a catch \u5230 Access denied by api domain white list \u5f02\u5e38\uff0c\u8bf7\u5c06\u63d0\u793a\u7684\u57df\u540d\u6dfb\u52a0\u81f3\u5e94\u7528\u7684 Web \u5b89\u5168\u57df\u540d\u5217\u8868\u3002 \u5c0f\u7a0b\u5e8f\u771f\u673a\u4e0a\u4f20\u6570\u636e\u65f6\uff0c\u63a7\u5236\u53f0\u5b58\u50a8\u4e2d\u663e\u793a\u7684 Class \u8868\u540d\u88ab\u538b\u7f29\u4e3a\u5355\u4e2a\u5b57\u6bcd\u3002 \u4f8b\u5982\u65b0\u5efa\u4e00\u4e2a\u540d\u4e3a\u300cTodo\u300d\u7684\u8868\uff0c\u4e0a\u4f20\u6570\u636e\u6210\u529f\u540e\u8fdb\u5165\u63a7\u5236\u53f0\u67e5\u770b\uff0c\u5176\u8868\u540d\u79f0\u663e\u793a\u4e3a\u50cf i\u3001u \u8fd9\u6837\u7684\u5355\u4e2a\u5b57\u6bcd\u3002\u8fd9\u662f\u56e0\u4e3a\u771f\u673a\u4e0a\u4ee3\u7801\u4f1a\u88ab\u538b\u7f29\uff0c\u89e3\u51b3\u529e\u6cd5\u662f\u5728\u521b\u5efa Class \u540e\u5411 SDK \u6ce8\u518c\u8be5 Class \u7684\u540d\u5b57\uff1a AV.Object.register(Todo, Todo ); \u3002 \u53cd\u9988 \u5982\u679c\u5728\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4e2d\u4f7f\u7528 LeanCloud \u65f6\u9047\u5230\u95ee\u9898\uff0c\u6b22\u8fce\u901a\u8fc7\u6211\u4eec\u7684 \u8bba\u575b \u8fdb\u884c\u53cd\u9988\u3002","title":"\u5728\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4e0e\u5c0f\u6e38\u620f\u4e2d\u4f7f\u7528 LeanCloud"},{"location":"solution/weapp/#leancloud","text":"\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u662f\u4e00\u4e2a\u5168\u65b0\u7684\u8de8\u5e73\u53f0\u79fb\u52a8\u5e94\u7528\u5e73\u53f0\uff0c\u5c0f\u6e38\u620f\u662f\u5c0f\u7a0b\u5e8f\u7684\u4e00\u4e2a\u7c7b\u76ee\uff0c\u5728\u5c0f\u7a0b\u5e8f\u7684\u57fa\u7840\u4e0a\u5f00\u653e\u4e86\u6e38\u620f\u76f8\u5173\u7684 API\u3002LeanCloud \u4e3a\u5c0f\u7a0b\u5e8f\u63d0\u4f9b\u4e00\u7ad9\u5f0f\u540e\u7aef\u4e91\u670d\u52a1\uff0c\u4e3a\u4f60\u514d\u53bb\u670d\u52a1\u5668\u7ef4\u62a4\u3001\u8bc1\u4e66\u914d\u7f6e\u7b49\u7e41\u7410\u7684\u5de5\u4f5c\uff0c\u5927\u5e45\u964d\u4f4e\u4f60\u7684\u5f00\u53d1\u548c\u8fd0\u7ef4\u6210\u672c\u3002\u672c\u6587\u8bf4\u660e\u4e86\u5982\u4f55\u5728\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4e0e\u5c0f\u6e38\u620f\u4e2d\u4f7f\u7528 LeanCloud \u63d0\u4f9b\u7684\u5404\u9879\u670d\u52a1\u3002","title":"\u5728\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4e0e\u5c0f\u6e38\u620f\u4e2d\u4f7f\u7528 LeanCloud"},{"location":"solution/weapp/#demo","text":"\u6211\u4eec\u5728\u5c0f\u7a0b\u5e8f\u4e0a\u5b9e\u73b0\u4e86 LeanTodo \u5e94\u7528\u3002\u5728\u8fd9\u4e2a Demo \u4e2d\u4f60\u53ef\u4ee5\u770b\u5230\uff1a \u5982\u4f55\u5bf9\u4e91\u7aef\u6570\u636e\u8fdb\u884c\u67e5\u8be2\u3001\u589e\u52a0\u3001\u4fee\u6539\u4e0e\u5220\u9664 \u5982\u4f55\u5c06\u67e5\u8be2\u7ed3\u679c\u6570\u7ec4\u7ed1\u5b9a\u5230\u89c6\u56fe\u5c42\u8fdb\u884c\u5c55\u793a\uff0c\u4ee5\u53ca\u5982\u4f55\u5728\u70b9\u51fb\u4e8b\u4ef6\u4e2d\u5f97\u5230\u5bf9\u5e94\u7684\u6570\u7ec4\u9879 \u5982\u4f55\u4f7f\u7528 LiveQuery \u5b9e\u73b0\u5bf9\u67e5\u8be2\u7ed3\u679c\u7684\u5b9e\u65f6\u66f4\u65b0\u548c\u591a\u7aef\u540c\u6b65 \u5982\u4f55\u81ea\u52a8\u767b\u5f55 LeanCloud \u7528\u6237\u7cfb\u7edf\uff0c\u4ee5\u53ca\u5982\u4f55\u5728\u767b\u5f55\u540e\u8bbe\u7f6e\u8d26\u53f7\u4e0e\u5bc6\u7801\u4ee5\u4f9b\u7528\u6237\u5728\u5176\u4ed6\u5e73\u53f0\u7684 LeanTodo \u5e94\u7528\u4e0a\u767b\u5f55 \u5982\u4f55\u96c6\u6210\u5fae\u4fe1\u652f\u4ed8 \u5982\u4f55\u5b9e\u73b0\u4e0b\u62c9\u5237\u65b0 \u4f60\u53ef\u4ee5\u901a\u8fc7\u5fae\u4fe1\u626b\u63cf\u4ee5\u4e0b\u4e8c\u7ef4\u7801\u8fdb\u5165 Demo\u3002 Demo \u7684\u6e90\u7801\u4e0e\u8fd0\u884c\u8bf4\u660e\u8bf7\u53c2\u8003 https://github.com/leancloud/leantodo-weapp \u3002","title":"Demo"},{"location":"solution/weapp/#_1","text":"","title":"\u51c6\u5907\u5de5\u4f5c"},{"location":"solution/weapp/#_2","text":"\u5982\u679c\u4f60\u8fd8\u6ca1\u6709\u521b\u5efa\u8fc7 LeanCloud \u5e94\u7528\uff0c\u8bf7\u767b\u5f55 LeanCloud \u63a7\u5236\u53f0 \u521b\u5efa\u4e00\u4e2a\u65b0\u5e94\u7528 \u3002 \u5982\u679c\u4f60\u8fd8\u6ca1\u6709\u5c0f\u7a0b\u5e8f\u5e10\u53f7\uff0c\u8bf7\u8bbf\u95ee \u5fae\u4fe1\u516c\u4f17\u5e73\u53f0 \u6ce8\u518c\u4e00\u4e2a\u5c0f\u7a0b\u5e8f\u5e10\u53f7\u3002\u5982\u679c\u4f60\u4e0d\u9700\u8981\u8fdb\u884c\u771f\u673a\u8c03\u8bd5\u53ef\u4ee5\u8df3\u8fc7\u8fd9\u4e00\u6b65\u3002 \u4e0b\u8f7d \u5c0f\u7a0b\u5e8f\u5f00\u53d1\u5de5\u5177 \uff0c\u6309\u7167 \u5c0f\u7a0b\u5e8f\u5f00\u53d1\u6559\u7a0b \u521b\u5efa\u4e00\u4e2a\u9879\u76ee\u3002","title":"\u521b\u5efa\u5e94\u7528"},{"location":"solution/weapp/#_3","text":"\u8bf7\u6309\u7167 \u5c0f\u7a0b\u5e8f\u57df\u540d\u767d\u540d\u5355\u914d\u7f6e \u7684\u6b65\u9aa4\u914d\u7f6e\u3002\u5982\u679c\u4f60\u4e0d\u9700\u8981\u8fdb\u884c\u771f\u673a\u8c03\u8bd5\u53ef\u4ee5\u8df3\u8fc7\u8fd9\u4e00\u6b65\uff08\u53ef\u5728\u5f00\u53d1\u8005\u5de5\u5177\u7684 \u8be6\u60c5 \u9879\u76ee\u8bbe\u7f6e \u4e2d\u52fe\u9009 \u4e0d\u6821\u9a8c\u5b89\u5168\u57df\u540d\u3001TLS \u7248\u672c\u4ee5\u53ca HTTPS \u8bc1\u4e66 \uff09\u3002","title":"\u914d\u7f6e\u57df\u540d\u767d\u540d\u5355"},{"location":"solution/weapp/#_4","text":"\u8981\u4f7f\u7528 LeanCloud \u7684\u6570\u636e\u5b58\u50a8\u3001\u7528\u6237\u7cfb\u7edf\u3001\u8c03\u7528\u4e91\u5f15\u64ce\u7b49\u529f\u80fd\uff0c\u9700\u8981\u4f7f\u7528 LeanCloud \u5b58\u50a8 SDK\u3002","title":"\u5b58\u50a8"},{"location":"solution/weapp/#_5","text":"\u8bf7\u53c2\u9605\u300a JavaScript SDK \u5b89\u88c5\u6307\u5357 \u300b\u4e2d\u5bf9\u5e94\u5e73\u53f0\u7684\u8bf4\u660e\u3002","title":"\u5b89\u88c5\u4e0e\u521d\u59cb\u5316"},{"location":"solution/weapp/#_6","text":"\u6240\u6709\u7684\u5bf9\u8c61\u5b58\u50a8 API \u90fd\u80fd\u6b63\u5e38\u4f7f\u7528\uff0c\u8be6\u7ec6\u7684\u7528\u6cd5\u8bf7\u53c2\u8003 JavaScript \u6570\u636e\u5b58\u50a8\u5f00\u53d1\u6307\u5357 \u3002","title":"\u5bf9\u8c61\u5b58\u50a8"},{"location":"solution/weapp/#_7","text":"\u76f4\u63a5\u4f7f\u7528 this.setData() \u5c06 AV.Object \u5bf9\u8c61\u8bbe\u7f6e\u4e3a\u5f53\u524d\u9875\u9762\u7684 data\uff0c\u5373\u53ef\u5728 WXML \u4e2d\u4f7f\u7528 Mustache \u8bed\u6cd5\u8bbf\u95ee\u7ed1\u5b9a\u7684\u6570\u636e\u4e86\u3002\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\u5c55\u793a\u4e86\u5982\u4f55\u5c06\u4e00\u4e2a Query \u7684\u67e5\u8be2\u7ed3\u679c\u663e\u793a\u5728\u9875\u9762\u4e0a\uff1a // pages/todos/todos.js Page ({ data : { todos : [], }, onReady : function () { new AV . Query ( Todo ) . descending ( createdAt ) . find () . then ( todos = this . setData ({ todos })) . catch ( console . error ); }, }); !-- pages/todos/todos.wxml -- block wx:for = {{mustache( todos )}} wx:for-item = todo wx:key = objectId text data-id = {{mustache( todo.objectId )}} {{mustache( todo.content )}} / text / block \u4f7f\u7528 include \u5f97\u5230\u7684\u5d4c\u5957\u5bf9\u8c61\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728\u89c6\u56fe\u5c42\u901a\u8fc7 . \u8bbf\u95ee\u5230\uff1a // pages/student/student.js Page ({ data : { student : null , }, onReady : function () { new AV . Query ( Student ) . include ( avatar ) // avatar is an AV.File . get ( 56a9803e1532bc005303650c ) . then ( student = this . setData ({ student })) . catch ( console . error ); }, }); !-- pages/student/student.wxml -- image src = {{mustache( student.avatar.url )}} / image","title":"\u6570\u636e\u7ed1\u5b9a"},{"location":"solution/weapp/#_8","text":"\u5728\u5c0f\u7a0b\u5e8f\u4e2d\uff0c\u53ef\u4ee5\u5c06\u7528\u6237\u76f8\u518c\u6216\u62cd\u7167\u5f97\u5230\u7684\u56fe\u7247\u4e0a\u4f20\u5230 LeanCloud \u670d\u52a1\u5668\u8fdb\u884c\u4fdd\u5b58\u3002\u9996\u5148\u901a\u8fc7 wx.chooseImage \u65b9\u6cd5\u9009\u62e9\u6216\u62cd\u6444\u7167\u7247\uff0c\u5f97\u5230\u672c\u5730\u4e34\u65f6\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u7136\u540e\u6309\u7167\u4e0b\u9762\u7684\u65b9\u6cd5\u6784\u9020\u4e00\u4e2a AV.File \u5c06\u5176\u4e0a\u4f20\u5230 LeanCloud\uff1a wx . chooseImage ({ count : 1 , sizeType : [ original , compressed ], sourceType : [ album , camera ], success : function ( res ) { var tempFilePath = res . tempFilePaths [ 0 ]; new AV . File ( file-name , { blob : { uri : tempFilePath , }, }). save (). then ( file = console . log ( file . url ()) ). catch ( console . error ); } }); \u4e0a\u4f20\u6210\u529f\u540e\u53ef\u4ee5\u901a\u8fc7 file.url() \u65b9\u6cd5\u5f97\u5230\u670d\u52a1\u7aef\u7684\u56fe\u7247 url\u3002","title":"\u6587\u4ef6\u5b58\u50a8"},{"location":"solution/weapp/#_9","text":"\u76ee\u524d\u5728\u5c0f\u7a0b\u5e8f Android \u4e0a\u4e0d\u652f\u6301\u6587\u4ef6\u5e76\u53d1\u4e0a\u4f20\uff0c\u9700\u8981\u4e32\u884c\u4e0a\u4f20\uff1a res . tempFilePaths . map ( tempFilePath = () = new AV . File ( filename , { blob : { uri : tempFilePath , }, }). save ()). reduce ( ( m , p ) = m . then ( v = AV . Promise . all ([... v , p ()])), AV . Promise . resolve ([]) ). then ( files = console . log ( files . map ( file = file . url ()))). catch ( console . error );","title":"\u6587\u4ef6\u6279\u91cf\u4e0a\u4f20"},{"location":"solution/weapp/#_10","text":"\u5c0f\u7a0b\u5e8f\u4e2d\u63d0\u4f9b\u4e86\u767b\u5f55 API \u6765\u83b7\u53d6\u5fae\u4fe1\u7684\u7528\u6237\u767b\u5f55\u72b6\u6001\uff0c\u5e94\u7528\u53ef\u4ee5\u8bbf\u95ee\u5230\u7528\u6237\u7684\u6635\u79f0\u3001\u6027\u522b\u7b49\u57fa\u672c\u4fe1\u606f\uff0c\u4f46\u662f\u5982\u679c\u60f3\u8981\u4fdd\u5b58\u989d\u5916\u7684\u7528\u6237\u4fe1\u606f\uff0c\u5982\u7528\u6237\u7684\u624b\u673a\u53f7\u7801\u3001\u6536\u8d27\u5730\u5740\u7b49\uff0c\u5219\u9700\u8981\u4f7f\u7528 LeanCloud \u7684\u7528\u6237\u7cfb\u7edf\u3002","title":"\u7528\u6237\u7cfb\u7edf"},{"location":"solution/weapp/#_11","text":"LeanCloud \u7684\u7528\u6237\u7cfb\u7edf\u73b0\u5df2\u652f\u6301\u4e00\u952e\u4f7f\u7528\u5fae\u4fe1\u7528\u6237\u8eab\u4efd\u767b\u5f55\u3002\u8981\u4f7f\u7528\u4e00\u952e\u767b\u5f55\u529f\u80fd\uff0c\u9700\u8981\u5148\u8bbe\u7f6e\u5c0f\u7a0b\u5e8f\u7684 AppID \u4e0e AppSecret\uff1a \u767b\u5f55 \u5fae\u4fe1\u516c\u4f17\u5e73\u53f0 \uff0c\u5728 \u8bbe\u7f6e \u5f00\u53d1\u8bbe\u7f6e \u4e2d\u83b7\u5f97 AppID \u4e0e AppSecret\u3002 \u524d\u5f80 LeanCloud \u63a7\u5236\u53f0 \u7ec4\u4ef6 \u793e\u4ea4 \uff0c\u4fdd\u5b58\u300c\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u300d\u7684 AppID \u4e0e AppSecret\u3002 \u8fd9\u6837\u4f60\u5c31\u53ef\u4ee5\u5728\u5e94\u7528\u4e2d\u4f7f\u7528 AV.User.loginWithWeapp() \u65b9\u6cd5\u6765\u4f7f\u7528\u5f53\u524d\u7528\u6237\u8eab\u4efd\u767b\u5f55\u4e86\u3002 AV . User . loginWithWeapp (). then ( user = { this . globalData . user = user . toJSON (); }). catch ( console . error ); \u5982\u679c\u8be5\u7528\u6237\u662f\u7b2c\u4e00\u6b21\u4f7f\u7528\u6b64\u5e94\u7528\uff0c\u8c03\u7528\u767b\u5f55 API \u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7528\u6237\uff0c\u4f60\u53ef\u4ee5\u5728 \u63a7\u5236\u53f0 \u5b58\u50a8 \u4e2d\u7684 _User \u8868\u4e2d\u770b\u5230\u8be5\u7528\u6237\u7684\u4fe1\u606f\uff0c\u5982\u679c\u8be5\u7528\u6237\u66fe\u7ecf\u4f7f\u7528\u8be5\u65b9\u5f0f\u767b\u5f55\u8fc7\u6b64\u5e94\u7528\uff0c\u518d\u6b21\u8c03\u7528\u767b\u5f55 API \u4f1a\u8fd4\u56de\u540c\u4e00\u4e2a\u7528\u6237\u3002 \u7528\u6237\u7684\u767b\u5f55\u72b6\u6001\u4f1a\u4fdd\u5b58\u5728\u5ba2\u6237\u7aef\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 AV.User.current() \u65b9\u6cd5\u6765\u83b7\u53d6\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\uff0c\u4e0b\u9762\u7684\u4f8b\u5b50\u5c55\u793a\u4e86\u5982\u4f55\u540c\u6b65\u767b\u5f55\u7528\u6237\u7684\u4fe1\u606f\uff1a // \u5047\u8bbe\u5df2\u7ecf\u901a\u8fc7 AV.User.loginWithWeapp() \u767b\u5f55 // \u83b7\u5f97\u5f53\u524d\u767b\u5f55\u7528\u6237 const user = AV . User . current (); // \u8c03\u7528\u5c0f\u7a0b\u5e8f API\uff0c\u5f97\u5230\u7528\u6237\u4fe1\u606f wx . getUserInfo ({ success : ({ userInfo }) = { // \u66f4\u65b0\u5f53\u524d\u7528\u6237\u7684\u4fe1\u606f user . set ( userInfo ). save (). then ( user = { // \u6210\u529f\uff0c\u6b64\u65f6\u53ef\u5728\u63a7\u5236\u53f0\u4e2d\u770b\u5230\u66f4\u65b0\u540e\u7684\u7528\u6237\u4fe1\u606f this . globalData . user = user . toJSON (); }). catch ( console . error ); } }); \u4f7f\u7528\u4e00\u952e\u767b\u5f55\u65b9\u5f0f\u767b\u5f55\u65f6\uff0cLeanCloud \u4f1a\u5c06\u8be5\u7528\u6237\u7684\u5c0f\u7a0b\u5e8f openid \u4fdd\u5b58\u5728\u5bf9\u5e94\u7684 user.authData.lc_weapp \u5c5e\u6027\u4e2d\uff0c\u4f60\u53ef\u4ee5\u5728\u63a7\u5236\u53f0\u7684 _User \u8868\u4e2d\u770b\u5230\u3002\u53ef\u4ee5\u4f7f\u7528 masterKey \u5728\u4e91\u5f15\u64ce\u4e2d\u83b7\u53d6\u8be5\u7528\u6237\u7684 openid \u8fdb\u884c\u652f\u4ed8\u3001\u63a8\u9001\u7b49\u64cd\u4f5c\u3002\u8be6\u60c5\u8bf7\u53c2\u8003 \u652f\u4ed8 \u3002","title":"\u4e00\u952e\u767b\u5f55"},{"location":"solution/weapp/#unionid","text":"\u5fae\u4fe1\u5f00\u653e\u5e73\u53f0\u4f7f\u7528 unionid \u6765\u533a\u5206\u7528\u6237\u7684\u552f\u4e00\u6027\uff0c\u4e5f\u5c31\u662f\u8bf4\u540c\u4e00\u4e2a\u5fae\u4fe1\u5f00\u653e\u5e73\u53f0\u5e10\u53f7\u4e0b\u7684\u79fb\u52a8\u5e94\u7528\u3001\u7f51\u7ad9\u5e94\u7528\u548c\u516c\u4f17\u5e10\u53f7\uff08\u5305\u62ec\u5c0f\u7a0b\u5e8f\uff09\uff0c\u7528\u6237\u7684 unionid \u90fd\u662f\u540c\u4e00\u4e2a\uff0c\u800c openid \u4f1a\u662f\u591a\u4e2a\u3002 \u5f00\u53d1\u8005\u9700\u8981\u81ea\u884c\u83b7\u5f97\u7528\u6237\u7684 unionid\uff0c\u7136\u540e\u8c03\u7528 AV.User.signUpOrlogInWithAuthDataAndUnionId() \u6295\u5165 unionid \u5b8c\u6210\u767b\u5f55\u6388\u6743\uff08\u800c\u4e0d\u5e94\u8be5\u518d\u4f7f\u7528 AV.User.loginWithWeapp() \uff09\uff1a javascriptAV.User.signUpOrlogInWithAuthDataAndUnionId({uid: openid,access_token: session_key,...\u5176\u4ed6\u53ef\u9009\u5c5e\u6027}, weapp_union , unionid, {unionIdPlatform: weixin , // \u6307\u5b9a\u4e3a weixin \u5373\u53ef\u901a\u8fc7 unionid \u4e0e\u5176\u4ed6 weixin \u5e73\u53f0\u7684\u5e10\u53f7\u6253\u901aasMainAccount: true,}).then(console.log, console.error); \u4e3a\u786e\u4fdd\u540c\u4e00\u4e2a uid \u53ea\u5b58\u5728\u4e00\u6761\u8bb0\u5f55\uff0c\u4f60\u8fd8\u9700\u8981\u4e3a authData.weapp_union.uid \u52a0\u4e0a\u552f\u4e00\u7d22\u5f15\u3002\u8fdb\u5165 \u63a7\u5236\u53f0 \u5b58\u50a8 \u9009\u62e9 _User \u8868 \u5176\u4ed6 \u7d22\u5f15 \uff0c\u52fe\u9009 authData \u7136\u540e\u5728\u51fa\u73b0\u7684\u8f93\u5165\u6846\u4e2d\u952e\u5165 authData.weapp_union.uid \uff0c\u70b9\u51fb \u521b\u5efa \u3002 \u5f53\u4e00\u4e2a\u6570\u636e\u8868\u7684\u8bb0\u5f55\u6570\u8d85\u8fc7 1 \u4e07\u65f6\uff0c\u5f00\u53d1\u8005\u5c06\u65e0\u6cd5\u81ea\u884c\u4e3a\u5176\u521b\u5efa\u7d22\u5f15\uff08\u6b64\u524d\u5df2\u521b\u5efa\u7684\u7d22\u5f15\u4ecd\u7136\u4f1a\u5bf9\u8d85\u8fc7 1 \u4e07\u6761\u7684\u6570\u636e\u751f\u6548\uff09\u3002\u5546\u7528\u7248\u7528\u6237\u9700\u8981\u901a\u8fc7 \u5de5\u5355\u670d\u52a1 \u5411\u6211\u4eec\u63d0\u4ea4\u521b\u5efa\u7533\u8bf7\uff08\u9009\u62e9\u300c\u5efa\u7acb\u7d22\u5f15\u300d\u5206\u7c7b\uff09\uff0c\u5f00\u53d1\u7248\u7528\u6237\u9700\u8981\u5148\u5347\u7ea7\u5230\u5546\u7528\u7248\u624d\u80fd\u63d0\u4ea4\u521b\u5efa\u7533\u8bf7\u3002","title":"\u4f7f\u7528 unionid \u767b\u5f55"},{"location":"solution/weapp/#_12","text":"\u7531\u4e8e AV.User.loginWithWeapp() \u53ea\u80fd\u5728\u5c0f\u7a0b\u5e8f\u4e2d\u4f7f\u7528\uff0c\u6240\u4ee5\u4f7f\u7528\u8be5 API \u521b\u5efa\u7684\u7528\u6237\u65e0\u6cd5\u76f4\u63a5\u5728\u5c0f\u7a0b\u5e8f\u4e4b\u5916\u7684\u5e73\u53f0\u4e0a\u767b\u5f55\u3002\u5982\u679c\u9700\u8981\u4f7f\u7528 LeanCloud \u7528\u6237\u7cfb\u7edf\u63d0\u4f9b\u7684\u5176\u4ed6\u767b\u5f55\u65b9\u5f0f\uff0c\u5982\u7528\u624b\u673a\u53f7\u9a8c\u8bc1\u7801\u767b\u5f55\u3001\u90ae\u7bb1\u5bc6\u7801\u767b\u5f55\u7b49\uff0c\u5728\u5c0f\u7a0b\u5e8f\u4e00\u952e\u767b\u5f55\u540e\u8bbe\u7f6e\u5bf9\u5e94\u7684\u7528\u6237\u5c5e\u6027\u5373\u53ef\uff1a // \u5c0f\u7a0b\u5e8f\u767b\u5f55 AV . User . loginWithWeapp (). then ( user = { // \u8bbe\u7f6e\u5e76\u4fdd\u5b58\u624b\u673a\u53f7 user . setMobilePhoneNumber ( 13000000000 ); return user . save (); }). then ( user = { // \u53d1\u9001\u9a8c\u8bc1\u77ed\u4fe1 return AV . User . requestMobilePhoneVerify ( user . getMobilePhoneNumber ()); }). then ({ // \u7528\u6237\u586b\u5199\u6536\u5230\u77ed\u4fe1\u9a8c\u8bc1\u7801\u540e\u518d\u8c03\u7528 AV.User.verifyMobilePhone(code) \u5b8c\u6210\u624b\u673a\u53f7\u7684\u7ed1\u5b9a // \u6210\u529f\u540e\u7528\u6237\u7684 mobilePhoneVerified \u5b57\u6bb5\u4f1a\u88ab\u7f6e\u4e3a true // \u6b64\u540e\u7528\u6237\u4fbf\u53ef\u4ee5\u4f7f\u7528\u624b\u673a\u53f7\u52a0\u52a8\u6001\u9a8c\u8bc1\u7801\u767b\u5f55\u4e86 }). catch ( console . error ); \u9a8c\u8bc1\u624b\u673a\u53f7\u7801\u529f\u80fd\u8981\u6c42\u5728 \u63a7\u5236\u53f0 \u5b58\u50a8 \u8bbe\u7f6e \u7528\u6237\u8d26\u53f7 \u542f\u7528\u300c\u7528\u6237\u6ce8\u518c\u65f6\uff0c\u5411\u6ce8\u518c\u624b\u673a\u53f7\u7801\u53d1\u9001\u9a8c\u8bc1\u77ed\u4fe1\u300d\u3002","title":"\u542f\u7528\u5176\u4ed6\u767b\u5f55\u65b9\u5f0f"},{"location":"solution/weapp/#_13","text":"\u5982\u679c\u4f60\u7684\u5e94\u7528\u5df2\u7ecf\u5728\u4f7f\u7528 LeanCloud \u7684\u7528\u6237\u7cfb\u7edf\uff0c\u6216\u8005\u7528\u6237\u5df2\u7ecf\u901a\u8fc7\u5176\u4ed6\u65b9\u5f0f\u6ce8\u518c\u4e86\u4f60\u7684\u5e94\u7528\uff08\u6bd4\u5982\u5728 Web \u7aef\u901a\u8fc7\u7528\u6237\u540d\u5bc6\u7801\u6ce8\u518c\uff09\uff0c\u53ef\u4ee5\u901a\u8fc7\u5728\u5c0f\u7a0b\u5e8f\u4e2d\u8c03\u7528 AV.User#linkWithWeapp() \u6765\u5173\u8054\u5df2\u6709\u7684\u8d26\u6237\uff1a // \u9996\u5148\uff0c\u4f7f\u7528\u7528\u6237\u540d\u4e0e\u5bc6\u7801\u767b\u5f55\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u7528\u6237 AV . User . logIn ( username , password ). then ( user = { // \u5c06\u5f53\u524d\u7684\u5fae\u4fe1\u7528\u6237\u4e0e\u5f53\u524d\u767b\u5f55\u7528\u6237\u5173\u8054 return user . linkWithWeapp (); }). catch ( console . error );","title":"\u7ed1\u5b9a\u73b0\u6709\u7528\u6237"},{"location":"solution/weapp/#_14","text":"\u4f7f\u7528\u4e91\u5f15\u64ce\u53ef\u4ee5\u65b9\u4fbf\u5730\u5b9e\u73b0\u4e00\u4e9b\u5728\u670d\u52a1\u5668\u6267\u884c\u7684\u903b\u8f91\uff0c\u6bd4\u5982\u5904\u7406\u654f\u611f\u4fe1\u606f\u3001\u6570\u636e\u805a\u5408\u3001\u91c7\u96c6\u6570\u636e\u7b49\uff0c\u5e76\u4e14\u4e0d\u9700\u8981\u51c6\u5907\u989d\u5916\u7684\u670d\u52a1\u5668\u3002 SDK \u6240\u6709\u7684\u4e91\u5f15\u64ce\u76f8\u5173\u7684 API \u90fd\u80fd\u6b63\u5e38\u4f7f\u7528\uff0c\u8be6\u7ec6\u7684\u7528\u6cd5\u8bf7\u53c2\u8003 \u4e91\u51fd\u6570\u5f00\u53d1\u6307\u5357 \u3002 \u4f7f\u7528\u4e91\u5f15\u64ce\u5b9e\u73b0\u5c0f\u7a0b\u5e8f\u652f\u4ed8\u7684\u65b9\u6848\u53c2\u89c1 \u652f\u4ed8 \u3002","title":"\u4e91\u5f15\u64ce"},{"location":"solution/weapp/#_15","text":"\u8981\u4f7f\u7528 LeanCloud \u7684\u804a\u5929\u3001\u5b9e\u65f6\u6d88\u606f\u529f\u80fd\uff0c\u9700\u8981\u4f7f\u7528 LeanCloud \u5373\u65f6\u901a\u8baf SDK\u3002","title":"\u5373\u65f6\u901a\u8baf"},{"location":"solution/weapp/#_16","text":"\u8bf7\u53c2\u9605\u300a JavaScript SDK \u5b89\u88c5\u6307\u5357 \u300b\u4e2d\u5bf9\u5e94\u5e73\u53f0\u7684\u8bf4\u660e\u3002 \u5728 app.js \u4e2d\u521d\u59cb\u5316\u5e94\u7528\uff1a const { Realtime } = require ( ./libs/realtime.weapp.min.js ); const realtime = new Realtime ({ appId : {{appid}} , appKey : {{appkey}} , }); \u9700\u8981\u7279\u522b\u6ce8\u610f\u7684\u662f\uff0c\u7531\u4e8e\u5c0f\u7a0b\u5e8f\u9650\u5236\u4e86\u540c\u65f6\u53ea\u80fd\u6709\u4e00\u4e2a WebSocket \u8fde\u63a5\uff0c\u56e0\u6b64\u63a8\u8350\u7684\u7528\u6cd5\u662f\u521d\u59cb\u5316 Realtime \u4e00\u6b21\uff0c\u6302\u8f7d\u5230\u5168\u5c40\u7684 App \u5b9e\u4f8b\u4e0a\uff0c\u7136\u540e\u5728\u6240\u6709\u9700\u8981\u7684\u65f6\u5019\u90fd\u4f7f\u7528\u8fd9\u4e2a realtime \u5b9e\u4f8b\u3002 \u5373\u65f6\u901a\u8baf SDK \u7684\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003 \u5373\u65f6\u901a\u8baf\u5f00\u53d1\u6307\u5357 \u3002","title":"\u5b89\u88c5\u4e0e\u521d\u59cb\u5316"},{"location":"solution/weapp/#_17","text":"\u8981\u5728\u5c0f\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u5373\u65f6\u901a\u8baf SDK \u7684\u5bcc\u5a92\u4f53\u6d88\u606f\u63d2\u4ef6\uff0c\u6709\u4e00\u4e9b\u989d\u5916\u7684\u7ea6\u675f\uff1a \u5b89\u88c5\u5b58\u50a8 SDK \u81f3 libs \u76ee\u5f55\uff0c\u5e76\u5c06\u6587\u4ef6\u91cd\u547d\u540d\u4e3a leancloud-storage.js \u3002 \u5b89\u88c5\u5373\u65f6\u901a\u8baf SDK \u81f3 libs \u76ee\u5f55\uff0c\u5e76\u5c06\u6587\u4ef6\u91cd\u547d\u540d\u4e3a leancloud-realtime.js \u3002 \u4e0b\u8f7d leancloud-realtime-plugin-typed-messages.js \uff0c\u79fb\u52a8\u5230 libs \u76ee\u5f55\u3002\u5fc5\u987b\u4fdd\u8bc1 \u4e09\u4e2a\u6587\u4ef6\u5728\u540c\u4e00\u76ee\u5f55\u4e2d \u3002 \u5728 app.js \u4e2d \u4f9d\u6b21\u52a0\u8f7d leancloud-storage.js \u3001 leancloud-realtime.js \u548c leancloud-realtime-plugin-typed-messages.js \u3002 const AV = require ( ./libs/leancloud-storage.js ); const Realtime = require ( ./libs/leancloud-realtime.js ). Realtime ; const TypedMessagesPlugin = require ( ./libs/leancloud-realtime-plugin-typed-messages.js ). TypedMessagesPlugin ; const ImageMessage = require ( ./libs/leancloud-realtime-plugin-typed-messages.js ). ImageMessage ; \u5728 app.js \u4e2d\u521d\u59cb\u5316\u5e94\u7528\uff1a // \u521d\u59cb\u5316\u5b58\u50a8 SDK AV . init ({ appId : {{appid}} , appKey : {{appkey}} , }); // \u521d\u59cb\u5316\u5373\u65f6\u901a\u8baf SDK const realtime = new Realtime ({ appId : {{appid}} , appKey : {{appkey}} , plugins : [ TypedMessagesPlugin ], // \u6ce8\u518c\u5bcc\u5a92\u4f53\u6d88\u606f\u63d2\u4ef6 }); \u5bcc\u5a92\u4f53\u6d88\u606f\u7684\u7528\u6cd5\u8bf7\u53c2\u8003 \u5373\u65f6\u901a\u8baf\u5f00\u53d1\u6307\u5357 - \u5bcc\u5a92\u4f53\u6d88\u606f \u3002","title":"\u5bcc\u5a92\u4f53\u6d88\u606f"},{"location":"solution/weapp/#_18","text":"","title":"\u652f\u4ed8"},{"location":"solution/weapp/#_19","text":"\u5728\u5f00\u59cb\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u5df2\u7ecf\u5728\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u540e\u53f0\u5f00\u542f\u4e86\u300c\u5fae\u4fe1\u652f\u4ed8\u300d\u529f\u80fd\uff0c\u7136\u540e\u6309\u7167\u4e0b\u9762\u7684\u6b65\u9aa4\u914d\u7f6e\u4e91\u5f15\u64ce\u73af\u5883\u53d8\u91cf\uff1a \u8fdb\u5165\u5e94\u7528\u63a7\u5236\u53f0 - \u4e91\u5f15\u64ce - \u8bbe\u7f6e \u8bbe\u7f6e\u5e94\u7528\u7684\u4e8c\u7ea7\u57df\u540d\u5e76\u4fdd\u5b58 \u6dfb\u52a0\u5e76\u4fdd\u5b58\u4ee5\u4e0b\u73af\u5883\u53d8\u91cf WEIXIN_APPID \uff1a\u5c0f\u7a0b\u5e8f AppId WEIXIN_MCHID \uff1a\u5fae\u4fe1\u652f\u4ed8\u5546\u6237\u53f7 WEIXIN_PAY_SECRET \uff1a\u5fae\u4fe1\u652f\u4ed8 API \u5bc6\u94a5\uff08 \u5fae\u4fe1\u5546\u6237\u5e73\u53f0 - \u8d26\u6237\u8bbe\u7f6e - API\u5b89\u5168 - \u5bc6\u94a5\u8bbe\u7f6e\uff09 WEIXIN_NOTIFY_URL \uff1a https://.leanapp.cn/weixin/pay-callback \uff0c\u5176\u4e2d yourdomain \u662f\u7b2c\u4e8c\u6b65\u4e2d\u8bbe\u7f6e\u7684\u4e8c\u7ea7\u57df\u540d \u67e5\u770b\u793a\u4f8b ![image](https://cloud.githubusercontent.com/assets/175227/22236906/7c651c80-e243-11e6-819b-007d5862bdbf.png)","title":"\u914d\u7f6e"},{"location":"solution/weapp/#_20","text":"\u9996\u5148\u786e\u8ba4\u672c\u673a\u5df2\u7ecf\u5b89\u88c5 Node.js \u8fd0\u884c\u73af\u5883\u548c LeanCloud \u547d\u4ee4\u884c\u5de5\u5177 \uff0c\u7136\u540e\u6267\u884c\u4e0b\u5217\u6307\u4ee4\u4e0b\u8f7d\u793a\u4f8b\u9879\u76ee\uff1a $ git clone https://github.com/leancloud/weapp-pay-getting-started.git $ cd weapp-pay-getting-started \u5b89\u88c5\u4f9d\u8d56\uff1a npm install \u767b\u5f55\u5e76\u5173\u8054\u5e94\u7528\uff1a lean login lean switch \u542f\u52a8\u9879\u76ee\uff1a lean up \u4e4b\u540e\u4f60\u5c31\u53ef\u4ee5\u5728 localhost:3001 \u8c03\u8bd5\u4e91\u51fd\u6570\u4e86\u3002 \u793a\u4f8b\u9879\u76ee\u4e2d\u4e0e\u652f\u4ed8\u76f4\u63a5\u76f8\u5173\u4ee3\u7801\u6709\u4e09\u90e8\u5206\uff1a order.js \uff1a\u5bf9\u5e94 Order \u8868\uff0c\u5b9a\u4e49\u4e86\u90e8\u5206\u5b57\u6bb5\u7684 getter/setter\uff0c\u4ee5\u53ca place \u65b9\u6cd5\u7528\u4e8e\u5411\u5fae\u4fe1 API \u63d0\u4ea4\u8ba2\u5355\u3002 cloud.js \uff1a\u5176\u4e2d\u5b9a\u4e49\u4e86\u540d\u4e3a order \u7684\u4e91\u51fd\u6570\uff0c\u8fd9\u4e2a\u4e91\u51fd\u6570\u4f1a\u83b7\u53d6\u5f53\u524d\u7528\u6237\u7684 openid \uff0c\u4ee5\u5176\u8eab\u4efd\u521b\u5efa\u4e86\u4e00\u4e2a 1 \u5206\u94b1\u7684 order \u5e76\u4e0b\u5355\uff0c\u6700\u540e\u8fd4\u56de\u7b7e\u540d\u8fc7\u7684\u8ba2\u5355\u4fe1\u606f\u3002 routers/weixin.js \uff1a\u5176\u4e2d\u5b9a\u4e49\u4e86 pay-callback \u7684\u5904\u7406\u51fd\u6570\uff0c\u5f53\u7528\u6237\u652f\u4ed8\u6210\u529f\u540e\u5fae\u4fe1\u8c03\u7528\u8fd9\u4e2a URL\uff0c\u8fd9\u4e2a\u51fd\u6570\u5c06\u5bf9\u5e94\u7684\u8ba2\u5355\u72b6\u6001\u66f4\u65b0\u4e3a SUCCESS \u3002 \u8bf7\u6839\u636e\u4f60\u7684\u4e1a\u52a1\u9700\u8981\u4fee\u6539\u4ee3\u7801\u3002\u53c2\u8003\u6587\u6863\uff1a \u5fae\u4fe1\u652f\u4ed8\u7edf\u4e00\u4e0b\u5355 API \u53c2\u6570\u4e0e\u9519\u8bef\u7801 \u5fae\u4fe1\u652f\u4ed8\u7ed3\u679c\u901a\u77e5\u53c2\u6570 \u5b8c\u6210\u5f00\u53d1\u540e\u90e8\u7f72\u5230\u9884\u5907\u73af\u5883\uff08\u82e5\u65e0\u9884\u5907\u73af\u5883\u5219\u76f4\u63a5\u90e8\u7f72\u5230\u751f\u4ea7\u73af\u5883\uff09\uff1a lean deploy","title":"\u670d\u52a1\u7aef\u5f00\u53d1"},{"location":"solution/weapp/#_21","text":"\u5ba2\u6237\u7aef\u5b8c\u6210\u4e00\u6b21\u652f\u4ed8\u9700\u8981\u5206\u4e24\u6b65\uff1a \u7528\u6237\u767b\u5f55\u540e\uff0c\u8c03\u7528\u540d\u4e3a order \u7684\u4e91\u51fd\u6570\u4e0b\u5355\uff0c\u8fd4\u56de\u7b7e\u540d\u8fc7\u7684\u8ba2\u5355\u4fe1\u606f\u3002 \u8c03\u7528\u652f\u4ed8 API\uff08 wx.requestPayment \uff09\uff0c\u4f20\u5165\u4e0a\u4e00\u6b65\u8fd4\u56de\u7684\u8ba2\u5355\u4fe1\u606f\uff0c\u53d1\u8d77\u652f\u4ed8\u3002 AV . Cloud . run ( order ). then (( data ) = { data . success = () = { // \u652f\u4ed8\u6210\u529f }); data . fail = ({ errMsg }) = { // \u9519\u8bef\u5904\u7406 }); wx . requestPayment ( data ); }). catch ( error = { // \u9519\u8bef\u5904\u7406 }) \u5ba2\u6237\u7aef\u7684\u793a\u4f8b\u4ee3\u7801\u53c2\u89c1 Demo \u6253\u8d4f\u529f\u80fd\u3002\u53c2\u8003\u6587\u6863\uff1a \u5c0f\u7a0b\u5e8f\u5ba2\u6237\u7aef\u53d1\u8d77\u652f\u4ed8 API","title":"\u5ba2\u6237\u7aef\u5f00\u53d1"},{"location":"solution/weapp/#faq","text":"","title":"FAQ"},{"location":"solution/weapp/#download","text":"\u8bf7\u524d\u5f80 \u63a7\u5236\u53f0 \u5b58\u50a8 \u8bbe\u7f6e \u6587\u4ef6 \u914d\u7f6e\u4f60\u81ea\u5df1\u7684\u6587\u4ef6\u57df\u540d\u3002","title":"\u914d\u7f6e download \u5408\u6cd5\u57df\u540d\u65f6\u663e\u793a\u300c\u8be5\u57df\u540d\u56e0\u8fdd\u89c4\u88ab\u7981\u6b62\u8bbe\u7f6e\u3002\u300d"},{"location":"solution/weapp/#access-denied-by-api-domain-white-list","text":"\u5982\u679c\u4f60\u7684\u5e94\u7528\u542f\u7528\u5e76\u914d\u7f6e\u4e86 Web \u5b89\u5168\u57df\u540d \uff0c\u4f60\u53ef\u80fd\u4f1a catch \u5230 Access denied by api domain white list \u5f02\u5e38\uff0c\u8bf7\u5c06\u63d0\u793a\u7684\u57df\u540d\u6dfb\u52a0\u81f3\u5e94\u7528\u7684 Web \u5b89\u5168\u57df\u540d\u5217\u8868\u3002","title":"Access denied by api domain white list"},{"location":"solution/weapp/#class","text":"\u4f8b\u5982\u65b0\u5efa\u4e00\u4e2a\u540d\u4e3a\u300cTodo\u300d\u7684\u8868\uff0c\u4e0a\u4f20\u6570\u636e\u6210\u529f\u540e\u8fdb\u5165\u63a7\u5236\u53f0\u67e5\u770b\uff0c\u5176\u8868\u540d\u79f0\u663e\u793a\u4e3a\u50cf i\u3001u \u8fd9\u6837\u7684\u5355\u4e2a\u5b57\u6bcd\u3002\u8fd9\u662f\u56e0\u4e3a\u771f\u673a\u4e0a\u4ee3\u7801\u4f1a\u88ab\u538b\u7f29\uff0c\u89e3\u51b3\u529e\u6cd5\u662f\u5728\u521b\u5efa Class \u540e\u5411 SDK \u6ce8\u518c\u8be5 Class \u7684\u540d\u5b57\uff1a AV.Object.register(Todo, Todo ); \u3002","title":"\u5c0f\u7a0b\u5e8f\u771f\u673a\u4e0a\u4f20\u6570\u636e\u65f6\uff0c\u63a7\u5236\u53f0\u5b58\u50a8\u4e2d\u663e\u793a\u7684 Class \u8868\u540d\u88ab\u538b\u7f29\u4e3a\u5355\u4e2a\u5b57\u6bcd\u3002"},{"location":"solution/weapp/#_22","text":"\u5982\u679c\u5728\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4e2d\u4f7f\u7528 LeanCloud \u65f6\u9047\u5230\u95ee\u9898\uff0c\u6b22\u8fce\u901a\u8fc7\u6211\u4eec\u7684 \u8bba\u575b \u8fdb\u884c\u53cd\u9988\u3002","title":"\u53cd\u9988"},{"location":"storage/acl/","text":"ACL \u6743\u9650\u7ba1\u7406\u5f00\u53d1\u6307\u5357 ACL \u662f Access Control List \u7684\u7f29\u5199\uff0c\u79f0\u4e3a\u8bbf\u95ee\u63a7\u5236\u5217\u8868\uff0c\u5305\u542b\u4e86\u5bf9\u4e00\u4e2a\u5bf9\u8c61\u6216\u4e00\u6761\u8bb0\u5f55\u53ef\u8fdb\u884c\u4f55\u79cd\u64cd\u4f5c\u7684\u6743\u9650\u5b9a\u4e49\u3002\u4f8b\u5982\u4e00\u4e2a\u6587\u4ef6\u5bf9\u8c61\u7684 ACL \u4e3a Alice : read , write ; Bob : read \uff0c\u8fd9\u4ee3\u8868 Alice \u5bf9\u8be5\u6587\u4ef6\u65e2\u80fd\u8bfb\u53c8\u80fd\u5199\uff0c\u800c Bob \u53ea\u80fd\u8bfb\u53d6\u3002 LeanCloud \u4e91\u7aef\u4f7f\u7528\u7684 ACL \u673a\u5236\u662f\u5c06\u6bcf\u4e2a\u64cd\u4f5c\u6388\u6743\u7ed9\u7279\u5b9a\u7684 User \u7528\u6237\u6216\u8005 Role \u89d2\u8272\uff0c\u53ea\u5141\u8bb8\u8fd9\u4e9b\u7528\u6237\u6216\u89d2\u8272\u5bf9\u4e00\u4e2a\u5bf9\u8c61\u6267\u884c\u8fd9\u4e9b\u64cd\u4f5c\u3002\u4f8b\u5982\u5982\u4e0b ACL \u5b9a\u4e49\uff1a { * :{ read : true , write : false }, role:admin :{ read : true , write : true }, 58113fbda0bb9f0061ddc869 :{ read : true , write : true } } \u6240\u6709\u4eba\u53ef\u8bfb\uff0c\u4f46\u4e0d\u80fd\u5199\uff08 * \u4ee3\u8868\u6240\u6709\u4eba\uff09\u3002 \u89d2\u8272\u4e3a admin \u7684\u7528\u6237\u53ca\u5b50\u89d2\u8272\uff0c\u53ef\u8bfb\u53ef\u5199\u3002 ID \u4e3a 58113fbda0bb9f0061ddc869 \u7684\u7528\u6237\uff0c\u53ef\u8bfb\u53ef\u5199\u3002 LeanCloud \u4f7f\u7528\u5185\u5efa\u6570\u636e\u8868 _User \u6765\u7ef4\u62a4 \u7528\u6237/\u8d26\u6237\u7cfb\u7edf \uff0c\u548c\u5185\u5efa\u6570\u636e\u8868 _Role \u6765\u7ef4\u62a4 \u89d2\u8272 \u3002\u89d2\u8272\u65e2\u53ef\u4ee5\u5305\u542b\u7528\u6237\uff0c\u4e5f\u53ef\u4ee5\u5305\u542b\u5176\u4ed6\u89d2\u8272\uff0c\u4e5f\u5c31\u662f\u8bf4\u89d2\u8272\u6709\u5c42\u6b21\u5173\u7cfb\uff0c\u5c06\u6743\u9650\u6388\u4e88\u4e00\u4e2a\u89d2\u8272\u4ee3\u8868\u8be5\u89d2\u8272\u6240\u5305\u542b\u7684\u5176\u4ed6\u89d2\u8272\u4e5f\u4f1a\u5f97\u5230\u76f8\u5e94\u7684\u6743\u9650\u3002 LeanCloud \u4e91\u7aef\u5bf9\u5ba2\u6237\u7aef\u53d1\u8fc7\u6765\u7684\u6bcf\u4e00\u4e2a\u8bf7\u6c42\u90fd\u8981\u8fdb\u884c\u4e86\u7528\u6237\u8eab\u4efd\u9274\u522b\u548c ACL \u8bbf\u95ee\u6388\u6743\u7684\u4e25\u683c\u68c0\u67e5\u3002\u56e0\u6b64\uff0c\u4f7f\u7528 ACL \u53ef\u4ee5\u7075\u6d3b\u4e14\u6700\u5927\u7a0b\u5ea6\u5730\u4fdd\u62a4\u5e94\u7528\u6570\u636e\uff0c\u63d0\u5347\u8bbf\u95ee\u5b89\u5168\u3002\u8be6\u7ec6\u80cc\u666f\u53ca\u539f\u56e0\u8bf7\u53c2\u8003 ACL \u4e0e\u6570\u636e\u5b89\u5168 \u3002 \u4e0b\u9762\u4f7f\u7528\u4e00\u4e2a\u6781\u7b80\u7684\u8bba\u575b\u7684\u573a\u666f\u6765\u4e3e\u4f8b\uff1a\u7528\u6237\u53ea\u80fd\u4fee\u6539\u6216\u8005\u5220\u9664\u81ea\u5df1\u53d1\u7684\u5e16\u5b50\uff0c\u5176\u4ed6\u7528\u6237\u5219\u53ea\u80fd\u67e5\u770b\u3002 \u4e91\u5f15\u64ce\u4f7f\u7528 ACL \u6587\u6863\u4e2d\u4f7f\u7528\u7684 AV.User.current() \u8fd9\u4e2a\u65b9\u6cd5\u4ec5\u4ec5\u9488\u5bf9\u6d4f\u89c8\u5668\u7aef\u6709\u6548\uff0c\u5728 \u4e91\u5f15\u64ce\u4e2d\u8be5\u63a5\u53e3\u65e0\u6cd5\u4f7f\u7528 \u3002\u4e91\u5f15\u64ce\u4e2d\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003 \u4e91\u5f15\u64ce\u6307\u5357 \u5904\u7406\u7528\u6237\u767b\u5f55\u548c\u767b\u51fa \u3002 \u57fa\u4e8e\u7528\u6237\u7684\u6743\u9650\u7ba1\u7406 \u5355\u7528\u6237\u6743\u9650\u8bbe\u7f6e \u4ee5\u4e0a\u9700\u6c42\u5728 LeanCloud \u4e2d\u5b9e\u73b0\u7684\u6b65\u9aa4\u5982\u4e0b\uff1a \u5199\u4e00\u7bc7\u5e16\u5b50 \u8bbe\u7f6e\u5e16\u5b50\u7684\u300c\u8bfb\u300d\u6743\u9650\u4e3a\u6240\u6709\u4eba\u53ef\u8bfb \u8bbe\u7f6e\u5e16\u5b50\u7684\u300c\u5199\u300d\u6743\u9650\u4e3a\u4f5c\u8005\u53ef\u5199 \u4fdd\u5b58\u5e16\u5b50 \u5b9e\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a Objective-C // \u65b0\u5efa\u4e00\u4e2a\u5e16\u5b50\u5bf9\u8c61 AVObject * post = [ AVObject objectWithClassName : @ Post ]; [ post setObject : @ \u5927\u5bb6\u597d\uff0c\u6211\u662f\u65b0\u4eba forKey : @ title ]; //\u65b0\u5efa\u4e00\u4e2a ACL \u5b9e\u4f8b AVACL * acl = [ AVACL ACL ]; [ acl setPublicReadAccess : YES ]; // \u8bbe\u7f6e\u516c\u5f00\u7684\u300c\u8bfb\u300d\u6743\u9650\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u9605\u8bfb [ acl setWriteAccess : YES forUser :[ AVUser currentUser ]]; // \u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u300c\u5199\u300d\u6743\u9650\uff0c\u6709\u4e14\u4ec5\u6709\u5f53\u524d\u7528\u6237\u53ef\u4ee5\u4fee\u6539\u8fd9\u6761 Post post . ACL = acl ; // \u5c06 ACL \u5b9e\u4f8b\u8d4b\u4e88 Post\u5bf9\u8c61 [ post saveInBackground ]; Swift let post = AVObject ( className : Post ) post [ title ] = \u5927\u5bb6\u597d\uff0c\u6211\u662f\u65b0\u4eba let acl = AVACL () acl . setPublicReadAccess ( true ) if let currentUser = AVUser . current () { acl . setWriteAccess ( true , for : currentUser ) } post . acl = acl post . save () Java AVObject post = new AVObject ( Post ); post . put ( title , \u5927\u5bb6\u597d\uff0c\u6211\u662f\u65b0\u4eba ); //\u65b0\u5efa\u4e00\u4e2a ACL \u5b9e\u4f8b AVACL acl = new AVACL (); acl . setPublicReadAccess ( true ); // \u8bbe\u7f6e\u516c\u5f00\u7684\u300c\u8bfb\u300d\u6743\u9650\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u9605\u8bfb acl . setWriteAccess ( AVUser . getCurrentUser (), true ); // \u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u300c\u5199\u300d\u6743\u9650\uff0c\u6709\u4e14\u4ec5\u6709\u5f53\u524d\u7528\u6237\u53ef\u4ee5\u4fee\u6539\u8fd9\u6761 Post post . setACL ( acl ); // \u5c06 ACL \u5b9e\u4f8b\u8d4b\u4e88 Post\u5bf9\u8c61 post . saveInBackground (); // \u4fdd\u5b58 JavaScript // \u65b0\u5efa\u4e00\u4e2a\u5e16\u5b50\u5bf9\u8c61 var Post = AV . Object . extend ( Post ); var post = new Post (); post . set ( title , \u5927\u5bb6\u597d\uff0c\u6211\u662f\u65b0\u4eba ); // \u65b0\u5efa\u4e00\u4e2a ACL \u5b9e\u4f8b var acl = new AV . ACL (); acl . setPublicReadAccess ( true ); acl . setWriteAccess ( AV . User . current (), true ); // \u5c06 ACL \u5b9e\u4f8b\u8d4b\u4e88 Post \u5bf9\u8c61 post . setACL ( acl ); post . save (). then ( function () { // \u4fdd\u5b58\u6210\u529f }). catch ( function ( error ) { console . log ( error ); }); Python import leancloud # \u65b0\u5efa\u4e00\u4e2a\u5e16\u5b50\u5bf9\u8c61 Post = leancloud . Object . extend ( Post ) post = Post () post . set ( title , \u5927\u5bb6\u597d\uff0c\u6211\u662f\u65b0\u4eba ) # \u65b0\u5efa\u4e00\u4e2aleancloud.ACL\u5b9e\u4f8b acl = leancloud . ACL () acl . set_public_read_access ( True ) # \u8fd9\u91cc\u8bbe\u7f6e\u67d0\u4e2a user \u7684\u5199\u6743\u9650 acl . set_write_access ( user_objectId , True ) # \u5c06 leancloud.ACL \u5b9e\u4f8b\u8d4b\u4e88 Post \u5bf9\u8c61 post . set_acl ( acl ) post . save () \u4ee5\u4e0a\u4ee3\u7801\u4ea7\u751f\u7684\u6548\u679c\u5728 \u63a7\u5236\u53f0 \u5b58\u50a8 Post \u8868 \u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u6761\u8bb0\u5f55\u7684 ACL \u5217\u4e0a\u7684\u503c\u4e3a\uff1a { * :{ read : true }, 55b9df0400b0f6d7efaa8801 :{ write : true } } \u6b64\u65f6\uff0c\u8fd9\u79cd ACL \u503c\u7684\u8868\u793a\uff1a\u6240\u6709\u7528\u6237\u5747\u6709\u300c\u8bfb\u300d\u6743\u9650\uff0c\u800c objectId \u4e3a 55b9df0400b0f6d7efaa8801 \u62e5\u6709\u300c\u5199\u300d\u6743\u9650\uff0c\u5176\u4ed6\u7528\u6237\u4e0d\u5177\u5907\u300c\u5199\u300d\u6743\u9650\u3002 \u591a\u7528\u6237\u6743\u9650\u8bbe\u7f6e \u5047\u5982\u9700\u6c42\u589e\u52a0\u4e3a\uff1a\u5e16\u5b50\u7684\u4f5c\u8005\u5141\u8bb8\u67d0\u4e2a\u7279\u5b9a\u7684\u7528\u6237\u53ef\u4ee5\u4fee\u6539\u5e16\u5b50\uff0c\u9664\u6b64\u4e4b\u5916\u7684\u5176\u4ed6\u4eba\u4e0d\u53ef\u4fee\u6539\u3002 \u5b9e\u73b0\u6b65\u9aa4\u5c31\u662f\u989d\u5916\u6307\u5b9a\u4e00\u4e2a\u7528\u6237\uff0c\u4e3a\u4ed6\u8bbe\u7f6e\u5e16\u5b50\u7684\u300c\u5199\u300d\u6743\u9650\uff1a \u6ce8\u610f \u5f00\u542f _User \u8868\u7684\u67e5\u8be2\u6743\u9650 \u624d\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u4ee3\u7801\u3002 Objective-C AVQuery * query = [ AVUser query ]; [ query whereKey : @ objectId equalTo : @ 55f1572460b2ce30e8b7afde ]; [ query findObjectsInBackgroundWithBlock : ^ ( NSArray * objects , NSError * error ) { if ( error == nil ) { // \u65b0\u5efa\u4e00\u4e2a\u5e16\u5b50\u5bf9\u8c61 AVObject * post = [ AVObject objectWithClassName : @ Post ]; [ post setObject : @ \u8fd9\u662f\u6211\u7684\u7b2c\u4e8c\u6761\u53d1\u8a00\uff0c\u8c22\u8c22\u5927\u5bb6\uff01 forKey : @ title ]; [ post setObject : @ \u6211\u6700\u8fd1\u559c\u6b22\u770b\u8db3\u7403\u548c\u7bee\u7403\u4e86\u3002 forKey : @ content ]; //\u65b0\u5efa\u4e00\u4e2a ACL \u5b9e\u4f8b AVACL * acl = [ AVACL ACL ]; [ acl setPublicReadAccess : YES ]; // \u8bbe\u7f6e\u516c\u5f00\u7684\u300c\u8bfb\u300d\u6743\u9650\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u9605\u8bfb [ acl setWriteAccess : YES forUser :[ AVUser currentUser ]]; // \u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u300c\u5199\u300d\u6743\u9650 AVUser * otherUser = [ objects objectAtIndex : 0 ]; // \u8bfb\u53d6 admin [ acl setWriteAccess : YES forUser : otherUser ]; post . ACL = acl ; // \u5c06 ACL \u5b9e\u4f8b\u8d4b\u4e88 Post \u5bf9\u8c61 [ post saveInBackground ]; } else { NSLog ( @ error ); } }]; Swift let query = AVUser . query () query . whereKey ( objectId , equalTo : 55f1572460b2ce30e8b7afde ) query . findObjectsInBackground { objects , error in if let error = error { print ( error ) } else { let post = AVObject ( className : Post ) post [ title ] = \u8fd9\u662f\u6211\u7684\u7b2c\u4e8c\u6761\u53d1\u8a00\uff0c\u8c22\u8c22\u5927\u5bb6\uff01 post [ content ] = \u6211\u6700\u8fd1\u559c\u6b22\u770b\u8db3\u7403\u548c\u7bee\u7403\u4e86\u3002 let acl = AVACL () // Anyone can read this post. acl . setPublicReadAccess ( true ) // Current user and another user can manage this post. if let currentUser = AVUser . current () { acl . setWriteAccess ( true , for : currentUser ) } if let anotherUser = objects ?. first as ? AVUser { acl . setWriteAccess ( true , for : anotherUser ) } post . acl = acl post . save () } } Java AVQuery AVUser query = AVUser . getQuery (); query . whereEqualTo ( objectId , 55f1572460b2ce30e8b7afde ); query . findInBackground ( new FindCallback AVUser () { @Override public void done ( List AVUser list , AVException e ) { if ( e == null ){ // \u65b0\u5efa\u4e00\u4e2a\u5e16\u5b50\u5bf9\u8c61 AVObject post = new AVObject ( Post ); post . put ( title , \u8fd9\u662f\u6211\u7684\u7b2c\u4e8c\u6761\u53d1\u8a00\uff0c\u8c22\u8c22\u5927\u5bb6\uff01 ); post . put ( content , \u6211\u6700\u8fd1\u559c\u6b22\u770b\u8db3\u7403\u548c\u7bee\u7403\u4e86\u3002 ); //\u65b0\u5efa\u4e00\u4e2a ACL \u5b9e\u4f8b AVACL acl = new AVACL (); acl . setPublicReadAccess ( true ); // \u8bbe\u7f6e\u516c\u5f00\u7684\u300c\u8bfb\u300d\u6743\u9650\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u9605\u8bfb acl . setWriteAccess ( AVUser . getCurrentUser (), true ); //\u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u300c\u5199\u300d\u6743\u9650 //\u6ce8\uff1a\u6b64\u5904\u4e3a\u4e86\u7b80\u5316\u5c55\u73b0\u4ee3\u7801\uff0c\u672a\u505a list \u4e3a\u7a7a\u7684\u5224\u65ad\u3002 AVUser anotherUser = list . get ( 0 ); acl . setWriteAccess ( anotherUser , true ); // \u5c06 ACL \u5b9e\u4f8b\u8d4b\u4e88 Post\u5bf9\u8c61 post . setACL ( acl ); //\u4fdd\u5b58\u5230\u4e91\u7aef post . saveInBackground (); } else { // handle exception } } }); JavaScript // \u521b\u5efa\u4e00\u4e2a\u9488\u5bf9 User \u7684\u67e5\u8be2 var query = new AV . Query ( AV . User ); query . get ( 55f1572460b2ce30e8b7afde ). then ( function ( otherUser ) { var post = new AV . Object ( Post ); post . set ( title , \u8fd9\u662f\u6211\u7684\u7b2c\u4e8c\u6761\u53d1\u8a00\uff0c\u8c22\u8c22\u5927\u5bb6\uff01 ); post . set ( content , \u6211\u6700\u8fd1\u559c\u6b22\u770b\u8db3\u7403\u548c\u7bee\u7403\u4e86\u3002 ); // \u65b0\u5efa\u4e00\u4e2a ACL \u5b9e\u4f8b var acl = new AV . ACL (); acl . setPublicReadAccess ( true ); acl . setWriteAccess ( AV . User . current (), true ); acl . setWriteAccess ( otherUser , true ); // \u5c06 ACL \u5b9e\u4f8b\u8d4b\u4e88 Post \u5bf9\u8c61 post . setACL ( acl ); // \u4fdd\u5b58\u5230\u4e91\u7aef return post . save (); }). then ( function () { // \u4fdd\u5b58\u6210\u529f }). catch ( function ( error ) { // \u9519\u8bef\u4fe1\u606f console . log ( error ); }); Python import leancloud # \u767b\u5f55\u4e00\u4e2a\u7528\u6237 user = leancloud . User () user . login ( my_user_name , my_password ) # \u65b0\u5efa\u4e00\u4e2a Post \u5bf9\u8c61 Post = leancloud . Object . extend ( Post ) post = Post () post . set ( title , \u8fd9\u662f\u6211\u7684\u7b2c\u4e8c\u6761\u53d1\u8a00\uff0c\u8c22\u8c22\u5927\u5bb6\uff01 ) post . set ( content , \u6211\u6700\u8fd1\u559c\u6b22\u770b\u8db3\u7403\u548c\u7bee\u7403\u4e86\u3002 ) # \u65b0\u5efa\u4e00\u4e2a leancloud.ACL \u5b9e\u4f8b acl = leancloud . ACL () acl . set_public_read_access ( True ) # \u8bbe\u7f6e\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u7684\u53ef\u5199\u6743\u9650 acl . set_write_access ( leancloud . User . get_current () . id , True ) # \u8bbe\u5b9a\u6307\u5b9a objectId \u7528\u6237\u7684\u53ef\u5199\u6743\u9650 acl . set_write_access ( 55f1572460b2ce30e8b7afde , True ) post . set_acl ( acl ) post . save () \u6267\u884c\u5b8c\u6bd5\u4e0a\u9762\u7684\u4ee3\u7801\uff0c\u56de\u5230\u63a7\u5236\u53f0\uff0c\u53ef\u4ee5\u770b\u5230\uff0c\u8be5\u6761 Post \u8bb0\u5f55\u91cc\u9762\u7684 ACL \u5217\u7684\u5185\u5bb9\u5982\u4e0b\uff1a { * :{ read : true }, 55b9df0400b0f6d7efaa8801 :{ write : true }, 55f1572460b2ce30e8b7afde :{ write : true } } \u4ece\u7ed3\u679c\u53ef\u4ee5\u770b\u51fa\uff0c\u8be5\u6761 Post \u5df2\u7ecf\u5141\u8bb8 Id \u4e3a 55b9df0400b0f6d7efaa8801 \u4ee5\u53ca 55f1572460b2ce30e8b7afde \u4e24\u4e2a\u7528\u6237\uff08AVUser\uff09\u53ef\u4ee5\u4fee\u6539\uff0c\u4ed6\u4eec\u62e5\u6709\u5199\u6743\u9650 write : ture \u3002 \u57fa\u4e8e\u7528\u6237\u7684\u6743\u9650\u7ba1\u7406\u6bd4\u8f83\u7b80\u5355\u76f4\u63a5\uff0c\u5f00\u53d1\u8005\u7406\u89e3\u8d77\u6765\u6210\u672c\u8f83\u4f4e\u3002 \u5c40\u9650\u6027 \u63a5\u4e0b\u6765\u8bba\u575b\u8981\u5347\u7ea7\uff0c\u9700\u8981\u4e00\u4e2a\u7279\u5b9a\u7684\u7ba1\u7406\u5458 Administrator \u6765\u7edf\u4e00\u7ba1\u7406\u8bba\u575b\u7684\u5e16\u5b50\uff0c\u4ed6\u53ef\u4ee5\u4fee\u6539\u5e16\u5b50\u7684\u5185\u5bb9\uff0c\u5220\u9664\u4e0d\u5408\u9002\u7684\u5e16\u5b50\u3002 \u8bba\u575b\u5347\u7ea7\u4e4b\u540e\uff0c\u7528\u6237\u53d1\u5e03\u5e16\u5b50\u7684\u6b65\u9aa4\u9700\u8981\u9488\u5bf9\u4e0a\u4e00\u5c0f\u8282\u505a\u5982\u4e0b\u8c03\u6574\uff1a \u5199\u4e00\u7bc7\u5e16\u5b50 \u8bbe\u7f6e\u5e16\u5b50\u7684\u300c\u8bfb\u300d\u6743\u9650\u4e3a\u6240\u6709\u4eba\u3002 \u8bbe\u7f6e\u5e16\u5b50\u7684\u300c\u5199\u300d\u6743\u9650\u4e3a\u4f5c\u8005\u4ee5\u53ca\u7ba1\u7406\u5458 \u4fdd\u5b58\u5e16\u5b50 \u6211\u4eec\u53ef\u4ee5\u8bbe\u60f3\u4e00\u4e0b\uff0c\u6bcf\u5f53\u8bba\u575b\u4ea7\u751f\u4e00\u7bc7\u5e16\u5b50\uff0c\u5c31\u5f97\u4e3a\u7ba1\u7406\u5458\u6dfb\u52a0\u8fd9\u7bc7\u5e16\u5b50\u7684\u300c\u5199\u300d\u6743\u9650\u3002 \u5047\u5982\u505a\u6743\u9650\u7ba1\u7406\u529f\u80fd\u7684\u65f6\u5019\u90fd\u4f9d\u8d56\u57fa\u4e8e\u7528\u6237\u7684\u6743\u9650\u7ba1\u7406\uff0c\u90a3\u4e48\u4e00\u65e6\u4ea7\u751f\u53d8\u5316\u5c31\u4f1a\u53d1\u73b0\u8fd9\u79cd\u5b9e\u73b0\u65b9\u5f0f\u7684\u5c40\u9650\u6027\u3002 \u6bd4\u5982\u65b0\u589e\u4e86\u4e00\u4e2a\u7ba1\u7406\u5458\uff0c\u65b0\u7684\u7ba1\u7406\u5458\u9700\u8981\u9488\u5bf9\u76ee\u524d\u8bba\u575b\u6240\u6709\u7684\u5e16\u5b50\u62e5\u6709\u7ba1\u7406\u5458\u5e94\u6709\u7684\u6743\u9650\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u628a\u6570\u636e\u5e93\u73b0\u6709\u7684\u6240\u6709\u5e16\u5b50\u5faa\u73af\u4e00\u904d\uff0c\u4e3a\u65b0\u7684\u7ba1\u7406\u5458\u589e\u52a0\u300c\u5199\u300d\u6743\u9650\u3002 \u5047\u5982\u8bba\u575b\u53c8\u4e00\u6b21\u5347\u7ea7\u4e86\uff0c\u4ed8\u8d39\u4f1a\u5458\u4eab\u6709\u7279\u6b8a\u5e16\u5b50\u7684\u8bfb\u6743\u9650\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u5728\u53d1\u5e03\u65b0\u5e16\u5b50\u7684\u65f6\u5019\uff0c\u8bbe\u7f6e\u300c\u8bfb\u300d\u6743\u9650\u7ed9\u90e8\u5206\u4eba\uff08\u4ed8\u8d39\u4f1a\u5458\uff09\u3002\u8fd9\u9700\u8981\u67e5\u8be2\u6240\u6709\u4ed8\u8d39\u4f1a\u5458\u5e76\u4e00\u4e00\u8bbe\u7f6e\u3002 \u6beb\u65e0\u7591\u95ee\uff0c\u8fd9\u79cd\u5b9e\u73b0\u65b9\u5f0f\u662f\u5b8c\u5168\u5931\u63a7\u7684\uff0c\u57fa\u4e8e\u7528\u6237\u7684\u6743\u9650\u7ba1\u7406\uff0c\u5728\u9488\u5bf9\u7b80\u5355\u7684\u79c1\u5bc6\u5206\u4eab\u7c7b\u7684\u5e94\u7528\u662f\u53ef\u884c\u7684\uff0c\u4f46\u662f\u4e00\u65e6\u4ea7\u751f\u9700\u6c42\u53d8\u66f4\uff0c\u8fd9\u79cd\u5b9e\u73b0\u65b9\u5f0f\u662f\u4e0d\u88ab\u63a8\u8350\u7684\u3002 \u57fa\u4e8e\u89d2\u8272\u7684\u6743\u9650\u7ba1\u7406 \u7ba1\u7406\u5458\u3001\u4f1a\u5458\u3001\u666e\u901a\u7528\u6237\u8fd9\u4e09\u79cd\u6982\u5ff5\u5728\u7a0b\u5e8f\u8bbe\u8ba1\u4e2d\uff0c\u88ab\u5b9a\u4e49\u4e3a\u300c\u89d2\u8272\u300d\u3002 \u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\u5728\u5217\u51fa\u7684\u9700\u6c42\u573a\u666f\u4e2d\uff0c\u300c\u6743\u9650\u300d\u7684\u4f5c\u7528\u662f\u7528\u6765\u533a\u5206\u67d0\u4e00\u6570\u636e\u662f\u5426 \u5141\u8bb8 \u67d0\u79cd\u89d2\u8272\u7684\u7528\u6237\u8fdb\u884c\u64cd\u4f5c\u3002 {{ docs.note(\"\u300c\u6743\u9650\u300d\u53ea\u548c\u300c\u89d2\u8272\u300d\u5bf9\u5e94\uff0c\u800c\u7528\u6237\u4e5f\u548c\u300c\u89d2\u8272\u300d\u5bf9\u5e94\uff0c\u4e3a\u7528\u6237\u8d4b\u4e88\u89d2\u8272\uff0c\u7136\u540e\u7ba1\u7406\u89d2\u8272\u7684\u6743\u9650\uff0c\u5b8c\u6210\u4e86\u6743\u9650\u4e0e\u7528\u6237\u7684 \u89e3\u8026 \u3002\") }} \u56e0\u6b64\u6211\u4eec\u6765\u89e3\u91ca LeanCloud \u4e2d\u300c\u6743\u9650\u300d\u548c\u300c\u89d2\u8272\u300d\u7684\u6982\u5ff5\u3002 \u300c\u6743\u9650\u300d\u5728 LeanCloud \u670d\u52a1\u7aef\u53ea\u5b58\u5728\u4e24\u79cd\u6743\u9650\uff1a\u8bfb\u3001\u5199\u3002 \u300c\u89d2\u8272\u300d\u5728 LeanCloud \u670d\u52a1\u7aef\u6ca1\u6709\u9650\u5236\uff0c\u552f\u4e00\u8981\u6c42\u7684\u5c31\u662f\u5728\u4e00\u4e2a\u5e94\u7528\u5185\uff0c\u89d2\u8272\u7684\u540d\u5b57\u552f\u4e00\u5373\u53ef\uff0c\u81f3\u4e8e\u67d0\u4e00\u4e2a\u300c\u89d2\u8272\u300d\u5728\u5f53\u524d\u5e94\u7528\u5185\u5bf9\u67d0\u6761\u6570\u636e\u662f\u5426\u62e5\u6709\u8bfb\u5199\u7684\u300c\u6743\u9650\u300d\u5e94\u8be5\u662f\u6709\u5f00\u53d1\u8005\u7684\u4e1a\u52a1\u903b\u8f91\u51b3\u5b9a\uff0c\u800c LeanCloud \u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u7684\u63a5\u53e3\u5e2e\u52a9\u5f00\u53d1\u8005\u5feb\u901f\u5b9e\u73b0\u57fa\u4e8e\u89d2\u8272\u7684\u6743\u9650\u7ba1\u7406\u3002 \u4e3a\u4e86\u65b9\u4fbf\u5f00\u53d1\u8005\u5b9e\u73b0\u57fa\u4e8e\u89d2\u8272\u7684\u6743\u9650\u7ba1\u7406\uff0cLeanCloud \u5728 SDK \u4e2d\u96c6\u6210\u4e86\u4e00\u5957\u5b8c\u6574\u7684 ACL (Access Control List) \u7cfb\u7edf\u3002\u901a\u4fd7\u7684\u89e3\u91ca\u5c31\u662f\u4e3a\u6bcf\u4e00\u4e2a\u6570\u636e\u521b\u5efa\u4e00\u4e2a\u8bbf\u95ee\u7684\u767d\u540d\u5355\u5217\u8868\uff0c\u53ea\u6709\u5728\u540d\u5355\u4e0a\u7684\u7528\u6237\uff08AVUser\uff09\u6216\u8005\u5177\u6709\u67d0\u79cd\u89d2\u8272\uff08AVRole\uff09\u7684\u7528\u6237\u624d\u80fd\u88ab\u5141\u8bb8\u8bbf\u95ee\u3002 \u4e3a\u4e86\u66f4\u597d\u5730\u4fdd\u8bc1\u7528\u6237\u6570\u636e\u5b89\u5168\u6027\uff0c LeanCloud \u8868\u4e2d\u6bcf\u4e00\u5f20\u90fd\u6709\u4e00\u4e2a ACL \u5217\u3002\u5f53\u7136\uff0cLeanCloud \u8fd8\u63d0\u4f9b\u4e86\u8fdb\u4e00\u6b65\u7684\u8bfb\u5199\u6743\u9650\u63a7\u5236\u3002 \u4e00\u4e2a User \u5fc5\u987b\u62e5\u6709\u8bfb\u6743\u9650\uff08\u6216\u8005\u5c5e\u4e8e\u4e00\u4e2a\u62e5\u6709\u8bfb\u6743\u9650\u7684 Role\uff09\u624d\u53ef\u4ee5\u83b7\u53d6\u4e00\u4e2a\u5bf9\u8c61\u7684\u6570\u636e\uff0c\u540c\u65f6\uff0c\u4e00\u4e2a User \u9700\u8981\u5199\u6743\u9650\uff08\u6216\u8005\u5c5e\u4e8e\u4e00\u4e2a\u62e5\u6709\u5199\u6743\u9650\u7684 Role\uff09\u624d\u53ef\u4ee5\u66f4\u6539\u6216\u8005\u5220\u9664\u4e00\u4e2a\u5bf9\u8c61\u3002\u4e0b\u9762\u5217\u4e3e\u51e0\u79cd\u5e38\u89c1\u7684 ACL \u4f7f\u7528\u8303\u4f8b\u3002 ACL \u6743\u9650\u7ba1\u7406 \u9ed8\u8ba4\u6743\u9650 \u5728\u6ca1\u6709\u663e\u5f0f\u6307\u5b9a\u7684\u60c5\u51b5\u4e0b\uff0cLeanCloud \u4e2d\u7684\u6bcf\u4e00\u4e2a\u5bf9\u8c61\u90fd\u4f1a\u6709\u4e00\u4e2a\u9ed8\u8ba4\u7684 ACL \u503c\u3002\u8fd9\u4e2a\u503c\u4ee3\u8868\u4e86\u6240\u6709\u7684\u7528\u6237\u5bf9\u8fd9\u4e2a\u5bf9\u8c61\u90fd\u662f\u53ef\u8bfb\u53ef\u5199\u7684\u3002\u6b64\u65f6\u4f60\u53ef\u4ee5\u5728\u6570\u636e\u7ba1\u7406\u7684\u8868\u4e2d ACL \u5c5e\u6027\u4e2d\u770b\u5230\u8fd9\u6837\u7684\u503c\uff1a { * :{ read : true , write : true } } \u57fa\u4e8e\u7528\u6237\u7684\u6743\u9650\u7ba1\u7406 \u4e00\u8282\u7684\u4ee3\u7801\u5df2\u6f14\u793a\u4e86\u901a\u8fc7 ACL \u6765\u5b9e\u73b0\u57fa\u4e8e\u7528\u6237\u7684\u6743\u9650\u7ba1\u7406\uff0c\u90a3\u4e48\u57fa\u4e8e\u89d2\u8272\u7684\u6743\u9650\u7ba1\u7406\u4e5f\u662f\u4f9d\u8d56 ACL \u6765\u5b9e\u73b0\u7684\uff0c\u53ea\u662f\u5728\u4ecb\u7ecd\u8be6\u7ec6\u7684\u64cd\u4f5c\u4e4b\u524d\u9700\u8981\u4ecb\u7ecd\u300c\u89d2\u8272\u300d\u8fd9\u4e2a\u91cd\u8981\u7684\u6982\u5ff5\u3002 \u89d2\u8272\u7684\u6743\u9650\u7ba1\u7406 \u89d2\u8272\u7684\u521b\u5efa \u9996\u5148\uff0c\u6211\u4eec\u6765\u521b\u5efa\u4e00\u4e2a Administrator \u7684\u89d2\u8272\u3002 \u8fd9\u91cc\u6709\u4e00\u4e2a\u9700\u8981\u7279\u522b\u6ce8\u610f\u7684\u5730\u65b9\uff0c\u56e0\u4e3a AVRole \u672c\u8eab\u4e5f\u662f\u4e00\u4e2a AVObject \uff0c\u5b83\u81ea\u8eab\u4e5f\u6709 ACL \u63a7\u5236\uff0c\u5e76\u4e14\u5b83\u7684\u6743\u9650\u63a7\u5236\u5e94\u8be5\u66f4\u4e25\u8c28\uff0c\u5982\u540c\u300c\u8bba\u575b\u7684\u7ba1\u7406\u5458\u6709\u6743\u529b\u4efb\u547d\u7248\u4e3b\uff0c\u800c\u7248\u4e3b\u65e0\u6743\u4efb\u547d\u7ba1\u7406\u5458\u300d\u4e00\u6837\u7684\u9053\u7406\uff0c\u6240\u4ee5\u521b\u5efa\u89d2\u8272\u7684\u65f6\u5019\u9700\u8981\u663e\u5f0f\u5730\u8bbe\u5b9a\u8be5\u89d2\u8272\u7684 ACL\uff0c\u800c\u89d2\u8272\u662f\u4e00\u79cd\u8f83\u4e3a\u7a33\u5b9a\u7684\u5bf9\u8c61\uff1a Objective-C // \u8bbe\u5b9a\u89d2\u8272\u672c\u8eab\u7684 ACL AVACL * roleACL = [ AVACL ACL ]; [ roleACL setPublicReadAccess : YES ]; [ roleACL setWriteAccess : YES forUser :[ AVUser currentUser ]]; // \u521b\u5efa\u89d2\u8272\uff0c\u5e76\u4e14\u4fdd\u5b58 AVRole * administratorRole = [ AVRole roleWithName : @ Administrator acl : roleACL ]; [[ administratorRole users ] addObject : [ AVUser currentUser ]]; [ administratorRole saveInBackground ]; Swift let roleACL = AVACL () roleACL . setPublicReadAccess ( true ) if let currentUser = AVUser . current () { roleACL . setWriteAccess ( true , for : currentUser ) } let administratorRole = AVRole ( name : Administrator , acl : roleACL ) if let currentUser = AVUser . current () { administratorRole . users (). add ( currentUser ) } administratorRole . save () Java // \u65b0\u5efa\u4e00\u4e2a\u9488\u5bf9\u89d2\u8272\u672c\u8eab\u7684 ACL AVACL roleACL = new AVACL (); roleACL . setPublicReadAccess ( true ); roleACL . setWriteAccess ( AVUser . getCurrentUser (), true ); // \u65b0\u5efa\u4e00\u4e2a\u89d2\u8272\uff0c\u5e76\u628a\u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u8be5\u89d2\u8272 AVRole administrator = new AVRole ( Administrator , roleACL ); //\u65b0\u5efa\u89d2\u8272 administrator . getUsers (). add ( AVUser . getCurrentUser ()); //\u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u8be5\u89d2\u8272 administrator . saveInBackground (); //\u4fdd\u5b58\u5230\u4e91\u7aef JavaScript // \u65b0\u5efa\u4e00\u4e2a\u89d2\u8272\uff0c\u5e76\u628a\u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u8be5\u89d2\u8272 var roleAcl = new AV . ACL (); roleAcl . setPublicReadAccess ( true ); roleAcl . setPublicWriteAccess ( false ); // \u5f53\u524d\u7528\u6237\u662f\u8be5\u89d2\u8272\u7684\u521b\u5efa\u8005\uff0c\u56e0\u6b64\u5177\u5907\u5bf9\u8be5\u89d2\u8272\u7684\u5199\u6743\u9650 roleAcl . setWriteAccess ( AV . User . current (), true ); //\u65b0\u5efa\u89d2\u8272 var administratorRole = new AV . Role ( Administrator , roleAcl ); administratorRole . save (). then ( function ( role ) { // \u521b\u5efa\u6210\u529f }). catch ( function ( error ) { console . log ( error ); }); Python import leancloud user = leancloud . User () user . login ( username , password ) # \u767b\u5f55\u4e00\u4e2a\u7528\u6237 # \u65b0\u5efa\u4e00\u4e2a\u89d2\u8272\uff0c\u5e76\u628a\u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u8be5\u89d2\u8272 administrator_role = leancloud . Role ( Administrator ) relation = administrator_role . get_users () relation . add ( leancloud . User . get_current ()) # \u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u8be5\u89d2\u8272 administrator_role . save () # \u4fdd\u5b58 \u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\uff0c\u5728\u63a7\u5236\u53f0\u53ef\u4ee5\u67e5\u770b _Role \u8868\u91cc\u5df2\u7ecf\u5b58\u5728\u4e86\u4e00\u4e2a Administrator \u89d2\u8272\u3002 Role \u5bf9\u8c61\u81ea\u8eab\u7684 ACL \u5728\u521d\u59cb\u5316\u4e00\u4e2a Oracle \u6216 MS SQL Server \u6570\u636e\u5e93\u7684\u65f6\u5019\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a sa \u7528\u6237\uff0c\u5b83\u5177\u5907\u64cd\u4f5c\u5f53\u524d\u6570\u636e\u5e93\u7684\u5168\u90e8\u6743\u9650\uff0c\u800c\u5176\u4ed6\u4eba\u7684\u6743\u9650\u7406\u8bba\u4e0a\u4e5f\u5e94\u8be5\u7531\u4ed6\u6765\u5206\u914d\u3002 \u540c\u7406\uff0c\u6211\u4eec\u5728\u521b\u5efa\u4e00\u4e2a Role \u6216\u8005\u7ed9\u67d0\u4e00\u4e2a User \u5206\u914d Role \u7684\u65f6\u5019\uff0c\u4e5f\u5e94\u8be5\u8ba4\u4e3a\u8fdb\u884c\u64cd\u4f5c\u7684\u5f53\u524d\u7528\u6237\u672c\u8eab\u5c31\u662f\u5177\u5907\u8f83\u9ad8\u6743\u9650\u7684\u7528\u6237\uff08\u7c7b\u4f3c\u4e8e sa\uff09,\u56e0\u6b64\u5728\u521a\u624d\u521b\u5efa\u89d2\u8272\u7684\u4ee3\u7801\u4e2d\u4f1a\u8981\u6c42\u8bbe\u7f6e Role \u81ea\u8eab\u7684 ACL \u7684\u503c\u4e3a\u5f53\u524d\u7528\u6237\u53ef\u5199\uff0c\u5176\u4ed6\u4eba\u4ec5\u53ef\u8bfb\u3002 \u53e6\u5916\u9700\u8981\u5f00\u53d1\u8005\u6ce8\u610f\u7684\u662f\uff1a\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7 \u63a7\u5236\u53f0 Post \u8868 \u5176\u4ed6 \u6743\u9650\u8bbe\u7f6e \u76f4\u63a5\u8bbe\u7f6e\u6743\u9650\u3002\u5e76\u4e14\u6211\u4eec\u8981\u5f3a\u8c03\u7684\u662f\uff1a {{ docs.note(\"ACL \u53ef\u4ee5\u7cbe\u786e\u5230 Class\uff0c\u4e5f\u53ef\u4ee5\u7cbe\u786e\u5230\u5177\u4f53\u7684\u6bcf\u4e00\u4e2a\u5bf9\u8c61\uff08\u8868\u4e2d\u7684\u6bcf\u4e00\u6761\u8bb0\u5f55\uff09\u3002\") }} \u4e3a\u5bf9\u8c61\u8bbe\u7f6e\u89d2\u8272\u7684\u8bbf\u95ee\u6743\u9650 \u6211\u4eec\u73b0\u5728\u5df2\u7ecf\u521b\u5efa\u4e86\u4e00\u4e2a\u6709\u6548\u7684\u89d2\u8272\uff0c\u63a5\u4e0b\u6765\u4e3a Post \u5bf9\u8c61\u8bbe\u7f6e Administrator \u7684\u8bbf\u95ee\u300c\u53ef\u8bfb\u53ef\u5199\u300d\u7684\u6743\u9650\uff0c\u8bbe\u7f6e\u6210\u529f\u4ee5\u540e\uff0c\u4efb\u4f55\u5177\u5907 Administrator \u89d2\u8272\u7684\u7528\u6237\u90fd\u53ef\u4ee5\u5bf9 Post \u5bf9\u8c61\u8fdb\u884c\u300c\u53ef\u8bfb\u53ef\u5199\u300d\u7684\u64cd\u4f5c\u4e86\uff1a Objective-C // \u65b0\u5efa\u4e00\u4e2a\u5e16\u5b50\u5bf9\u8c61 AVObject * post = [ AVObject objectWithClassName : @ Post ]; [ post setObject : @ \u590f\u5929\u5403\u4ec0\u4e48\u591c\u5bb5\u6bd4\u8f83\u723d\uff1f forKey : @ title ]; [ post setObject : @ \u6c42\u63a8\u8350\u554a\uff01 forKey : @ content ]; // \u5047\u8bbe\u4e4b\u524d\u521b\u5efa\u7684 Administrator \u89d2\u8272 objectId \u4e3a 55fc0eb700b039e44440016c AVQuery * roleQuery = [ AVRole query ]; [ roleQuery getObjectInBackgroundWithId : @ 55fc0eb700b039e44440016c block : ^ ( AVObject * object , NSError * error ) { AVRole * administratorRole = ( AVRole * ) object ; [ administratorRole saveInBackgroundWithBlock : ^ ( BOOL succeeded , NSError * error ) { //\u65b0\u5efa\u4e00\u4e2a ACL \u5b9e\u4f8b AVACL * acl = [ AVACL ACL ]; [ acl setPublicReadAccess : YES ]; // \u8bbe\u7f6e\u516c\u5f00\u7684\u300c\u8bfb\u300d\u6743\u9650\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u9605\u8bfb [ acl setWriteAccess : YES forRole : administratorRole ]; // \u4e3a Administrator \u300c\u5199\u300d\u6743\u9650 [ acl setWriteAccess : YES forUser :[ AVUser currentUser ]]; // \u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u300c\u5199\u300d\u6743\u9650 post . ACL = acl ; // \u5c06 ACL \u5b9e\u4f8b\u8d4b\u4e88 Post\u5bf9\u8c61 // \u4ee5\u4e0a\u4ee3\u7801\u7684\u6548\u679c\u5c31\u662f\uff1a\u53ea\u6709 Post \u4f5c\u8005\uff08\u5f53\u524d\u7528\u6237\uff09\u548c\u62e5\u6709 Administrator \u89d2\u8272\u7684\u7528\u6237\u53ef\u4ee5\u4fee\u6539\u8fd9\u6761 Post\uff0c\u800c\u6240\u6709\u4eba\u90fd\u53ef\u4ee5\u8bfb\u53d6\u8fd9\u6761 Post [ post saveInBackground ]; }]; }]; Swift let roleQuery = AVRole . query () let post = AVObject ( className : Post ) post [ title ] = \u590f\u5929\u5403\u4ec0\u4e48\u591c\u5bb5\u6bd4\u8f83\u723d\uff1f post [ content ] = \u6c42\u63a8\u8350\u554a\uff01 roleQuery . getObjectInBackground ( withId : 55fc0eb700b039e44440016c ) { object , error in guard let administratorRole = object as ? AVRole else { return } let acl = AVACL () acl . setPublicReadAccess ( true ) acl . setWriteAccess ( true , for : administratorRole ) if let currentUser = AVUser . current () { acl . setWriteAccess ( true , for : currentUser ) } post . acl = acl post . save () } Java // \u65b0\u5efa\u4e00\u4e2a\u5e16\u5b50\u5bf9\u8c61 final AVObject post = new AVObject ( Post ); post . put ( title , \u590f\u5929\u5403\u4ec0\u4e48\u591c\u5bb5\u6bd4\u8f83\u723d\uff1f ); post . put ( content , \u6c42\u63a8\u8350\u554a\uff01 ); AVQuery AVRole roleQuery = new AVQuery AVRole ( _Role ); // \u5047\u8bbe\u4e0a\u4e00\u6b65\u521b\u5efa\u7684 Administrator \u89d2\u8272\u7684 objectId \u4e3a 55fc0eb700b039e44440016c roleQuery . getInBackground ( 55fc0eb700b039e44440016c , new GetCallback AVRole () { @Override public void done ( AVRole avRole , AVException e ) { //\u65b0\u5efa\u4e00\u4e2a ACL \u5b9e\u4f8b AVACL acl = new AVACL (); acl . setPublicReadAccess ( true ); // \u8bbe\u7f6e\u516c\u5f00\u7684\u300c\u8bfb\u300d\u6743\u9650\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u9605\u8bfb acl . setRoleWriteAccess ( avRole , true ); // \u4e3a Administrator \u300c\u5199\u300d\u6743\u9650 acl . setWriteAccess ( AVUser . getCurrentUser (), true ); // \u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u300c\u5199\u300d\u6743\u9650 // \u4ee5\u4e0a\u4ee3\u7801\u7684\u6548\u679c\u5c31\u662f\uff1a\u53ea\u6709 Post \u4f5c\u8005\uff08\u5f53\u524d\u7528\u6237\uff09\u548c\u62e5\u6709 Administrator \u89d2\u8272\u7684\u7528\u6237\u53ef\u4ee5\u4fee\u6539\u8fd9\u6761 Post\uff0c\u800c\u6240\u6709\u4eba\u90fd\u53ef\u4ee5\u8bfb\u53d6\u8fd9\u6761 Post post . setACL ( acl ); post . saveInBackground (); } }); JavaScript // \u65b0\u5efa\u4e00\u4e2a\u5e16\u5b50\u5bf9\u8c61 var Post = AV . Object . extend ( Post ); var post = new Post (); post . set ( title , \u590f\u5929\u5403\u4ec0\u4e48\u591c\u5bb5\u6bd4\u8f83\u723d\uff1f ); post . set ( content , \u6c42\u63a8\u8350\u554a\uff01 ); // \u65b0\u5efa\u4e00\u4e2a\u89d2\u8272\uff0c\u5e76\u628a\u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u8be5\u89d2\u8272 var administratorRole = new AV . Role ( Administrator ); var relation = administratorRole . getUsers (); //\u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u8be5\u89d2\u8272 administratorRole . getUsers (). add ( AV . User . current ()); //\u89d2\u8272\u4fdd\u5b58\u6210\u529f administratorRole . save (). then ( function ( administratorRole ) { // \u65b0\u5efa\u4e00\u4e2a ACL \u5b9e\u4f8b var acl = new AV . ACL (); acl . setPublicReadAccess ( true ); acl . setRoleWriteAccess ( administratorRole , true ); // \u5c06 ACL \u5b9e\u4f8b\u8d4b\u4e88 Post \u5bf9\u8c61 post . setACL ( acl ); return post . save (); }). then ( function ( post ) { // \u4fdd\u5b58\u6210\u529f }). catch ( function ( error ) { // \u4fdd\u5b58\u5931\u8d25 console . log ( error ); }); Python import leancloud # \u767b\u5f55\u4e00\u4e2a\u7528\u6237 user = leancloud . User () user . login ( username , password ) # \u521b\u5efa\u4e00\u4e2a Post \u7684\u5e16\u5b50\u5bf9\u8c61 Post = leancloud . Object . extend ( Post ) post = Post () post . set ( title , \u590f\u5929\u5403\u4ec0\u4e48\u591c\u5bb5\u6bd4\u8f83\u723d\uff1f ) post . set ( content , \u6c42\u63a8\u8350\u554a\uff01 ) # \u65b0\u5efa\u4e00\u4e2a\u89d2\u8272\uff0c\u5e76\u628a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u8be5\u89d2\u8272 administrator_role = leancloud . Role ( Administrator ) relation = administrator_role . get_users () relation . add ( leancloud . User . get_current ()) administrator_role . save () # \u65b0\u5efa\u4e00\u4e2a leancloud.ACL \u5bf9\u8c61\uff0c\u5e76\u8d4b\u4e88\u89d2\u8272\u53ef\u5199\u6743\u9650 acl = leancloud . ACL () acl . set_public_read_access ( True ) acl . set_role_write_access ( administrator_role , True ) # \u5c06 leancloud.ACL \u5b9e\u4f8b\u8d4b\u4e88 Post \u5bf9\u8c61 post . set_acl ( acl ) post . save () \u7528\u6237\u89d2\u8272\u7684\u8d4b\u4e88\u548c\u5265\u593a \u7ecf\u8fc7\u4ee5\u4e0a\u4e24\u6b65\uff0c\u6211\u4eec\u8fd8\u5dee\u4e00\u4e2a\u7ed9\u5177\u4f53\u7684\u7528\u6237\u8bbe\u7f6e\u89d2\u8272\u7684\u64cd\u4f5c\uff0c\u8fd9\u6837\u624d\u53ef\u4ee5\u5b8c\u6574\u5730\u5b9e\u73b0\u57fa\u4e8e\u89d2\u8272\u7684\u6743\u9650\u7ba1\u7406\u3002 \u5728\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u89d2\u8272\u548c\u7528\u6237\u4e4b\u95f4\u672c\u662f\u591a\u5bf9\u591a\u7684\u5173\u7cfb\uff0c\u6bd4\u5982\u9700\u8981\u628a\u67d0\u4e00\u4e2a\u7528\u6237\u63d0\u5347\u4e3a\u67d0\u4e00\u4e2a\u7248\u5757\u7684\u7248\u4e3b\uff0c\u4ea6\u6216\u8005\u67d0\u4e00\u4e2a\u7528\u6237\u88ab\u5265\u593a\u4e86\u7248\u4e3b\u7684\u6743\u529b\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff0c\u5728\u5e94\u7528\u7684\u7248\u672c\u8fed\u4ee3\u4e2d\uff0c\u7528\u6237\u7684\u89d2\u8272\u90fd\u4f1a\u5b58\u5728\u589e\u52a0\u6216\u8005\u51cf\u5c11\u7684\u53ef\u80fd\uff0c\u56e0\u6b64\uff0cLeanCloud \u4e5f\u63d0\u4f9b\u4e86\u4e3a\u7528\u6237\u8d4b\u4e88\u6216\u8005\u5265\u593a\u89d2\u8272\u7684\u65b9\u5f0f\u3002 \u5728\u4ee3\u7801\u7ea7\u522b\uff0c\u5b9e\u73b0\u300c\u4e3a\u89d2\u8272\u6dfb\u52a0\u7528\u6237\u300d\u4e0e\u300c\u4e3a\u7528\u6237\u8d4b\u4e88\u89d2\u8272\u300d\u7684\u4ee3\u7801\u662f\u4e00\u6837\u7684\u3002\u6b64\u7c7b\u64cd\u4f5c\u7684\u903b\u8f91\u987a\u5e8f\u662f\uff1a \u8d4b\u4e88\u89d2\u8272\uff1a\u9996\u5148\u5224\u65ad\u8be5\u7528\u6237\u662f\u5426\u5df2\u7ecf\u88ab\u8d4b\u4e88\u8be5\u89d2\u8272\uff0c\u5982\u679c\u5df2\u7ecf\u5b58\u5728\u5219\u65e0\u9700\u6dfb\u52a0\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5219\u4e3a\u8be5\u7528\u6237(AVUser)\u7684 roles \u5c5e\u6027\u6dfb\u52a0\u5f53\u524d\u89d2\u8272\u5b9e\u4f8b\u3002 \u4ee5\u4e0b\u4ee3\u7801\u6f14\u793a\u4e3a\u5f53\u524d\u7528\u6237\u6dfb\u52a0 Administrator \u89d2\u8272\uff1a Objective-C AVQuery * roleQuery = [ AVRole query ]; [ roleQuery whereKey : @ name equalTo : @ Administrator ]; [ roleQuery findObjectsInBackgroundWithBlock : ^ ( NSArray * objects , NSError * error ) { // \u5982\u679c\u89d2\u8272\u5b58\u5728 if ([ objects count ] 0 ) { AVRole * administratorRole = [ objects objectAtIndex : 0 ]; [ roleQuery whereKey : @ users equalTo :[ AVUser currentUser ]]; [ roleQuery findObjectsInBackgroundWithBlock : ^ ( NSArray * objects , NSError * error ){ if ([ objects count ] == 0 ) { //\u4e3a\u7528\u6237\u8d4b\u4e88\u89d2\u8272 [[ administrator users ] addObject :[ AVUser currentUser ]]; [ administrator saveInBackground ]; } else { NSLog ( @ \u5df2\u7ecf\u62e5\u6709 Moderator \u89d2\u8272\u4e86\u3002 ); } }]; } else { // \u89d2\u8272\u4e0d\u5b58\u5728\uff0c\u5c31\u65b0\u5efa\u89d2\u8272 AVRole * administrator = [ AVRole roleWithName : @ Administrator ]; [[ administrator users ] addObject :[ AVUser currentUser ]]; // \u8d4b\u4e88\u89d2\u8272 [ administrator saveInBackground ]; } }]; Swift let roleQuery = AVRole . query () roleQuery . whereKey ( name , equalTo : Administrator ) roleQuery . findObjectsInBackground { ( objects , error ) in guard let currentUser = AVUser . current () else { return } if let administrator = objects ?. first as ? AVRole { roleQuery . whereKey ( users , equalTo : currentUser ) roleQuery . findObjectsInBackground { objects , error in if let _ = objects ?. first as ? AVRole { print ( Current user is already an administrator. ) } else { administrator . users (). add ( currentUser ) administrator . save () } } } else { let administrator = AVRole ( name : Administrator ) administrator . users (). add ( currentUser ) administrator . save () } } Java final AVQuery AVRole roleQuery = new AVQuery AVRole ( _Role ); roleQuery . whereEqualTo ( name , Administrator ); roleQuery . findInBackground ( new FindCallback AVRole () { @Override public void done ( List AVRole list , AVException e ) { // \u5982\u679c\u89d2\u8272\u5b58\u5728 if ( list . size () 0 ){ final AVRole administratorRole = list . get ( 0 ); roleQuery . whereEqualTo ( users , AVUser . getCurrentUser ()); roleQuery . findInBackground ( new FindCallback AVRole () { @Override public void done ( List AVRole list , AVException e ) { if ( list . size () == 0 ){ administratorRole . getUsers (). add ( AVUser . getCurrentUser ()); // \u8d4b\u4e88\u89d2\u8272 administratorRole . saveInBackground (); } } }); } else { // \u89d2\u8272\u4e0d\u5b58\u5728\uff0c\u5c31\u65b0\u5efa\u89d2\u8272 AVRole administratorRole = new AVRole ( Administrator ); administratorRole . getUsers (). add ( AVUser . getCurrentUser ()); // \u8d4b\u4e88\u89d2\u8272 administratorRole . saveInBackground (); } } }); JavaScript // \u6784\u5efa AV.Role \u7684\u67e5\u8be2 var administratorRole = //\u5047\u8bbe administratorRole \u662f\u4e4b\u524d\u521b\u5efa\u7684 \u300cAdministrator\u300d \u89d2\u8272; var roleQuery = new AV . Query ( AV . Role ); // \u89d2\u8272\u540d\u79f0\u7b49\u4e8e Administrator roleQuery . equalTo ( name , Administrator ); // \b\u68c0\u67e5\u5f53\u524d\u7528\u6237\u662f\u5426\u5df2\u7ecf\u62e5\u6709\u4e86 Administrator \u89d2\u8272 roleQuery . equalTo ( users , AV . User . current ()); roleQuery . find (). then ( function ( results ) { if ( results . length 0 ) { // \u5f53\u524d\u7528\u6237\u5df2\u7ecf\u5177\u5907\u4e86 Administrator \u89d2\u8272\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u505a\u4efb\u4f55\u64cd\u4f5c var administratorRole = results [ 0 ]; return administratorRole ; } else { // \u5f53\u524d\u7528\u6237\u4e0d\u5177\u5907 Administrator\uff0c\u56e0\u6b64\u4f60\u9700\u8981\u628a\u5f53\u524d\u7528\u6237\u6dfb\u52a0\u5230 Role \u7684 Users \u4e2d var relation = administratorRole . getUsers (); relation . add ( AV . User . current ()); return administratorRole . save (); } }). then ( function ( administratorRole ) { //\u6b64\u65f6 administratorRole \u5df2\u7ecf\u5305\u542b\u4e86\u5f53\u524d\u7528\u6237 }). catch ( function ( error ) { // \u8f93\u51fa\u9519\u8bef console . log ( error ); }); Python import leancloud user = leancloud . User () user . login ( username , password ) role_query = leancloud . Query ( leancloud . Role ) role_query . equal_to ( name , Administrator ) role_query_list = role_query . find () if len ( role_query_list ) 0 : # \u8be5\u89d2\u8272\u5b58\u5728 administrator_role = role_query_list [ 0 ] role_query . equal_to ( users , leancloud . User . get_current ()) role_query_with_current_user = role_query . find () if len ( role_query_with_current_user ) == 0 : # \u8be5\u89d2\u8272\u5b58\u5728\uff0c\u4f46\u662f\u5f53\u524d\u7528\u6237\u5c1a\u672a\u88ab\u8d4b\u4e88\u8be5\u89d2\u8272 relation = administrator_role . get_users () relation . add ( leancloud . User . get_current ()) # \u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u8be5\u89d2\u8272 administrator_role . save () else : # \u8be5\u89d2\u8272\u5b58\u5728\uff0c\u5f53\u524d\u7528\u6237\u5df2\u88ab\u88ab\u8d4b\u4e88\u8be5\u89d2\u8272 pass else : # \u8be5\u89d2\u8272\u4e0d\u5b58\u5728\uff0c\u53ef\u4ee5\u65b0\u5efa\u8be5\u89d2\u8272\uff0c\u5e76\u628a\u5f53\u524d\u7528\u6237\u8bbe\u7f6e\u6210\u8be5\u89d2\u8272 administrator_role = leancloud . Role ( Administrator ) relation = administrator_role . get_users () relation . add ( leancloud . User . get_current ()) administrator_role . save () \u89d2\u8272\u8d4b\u4e88\u6210\u529f\u4e4b\u540e\uff0c\u57fa\u4e8e\u89d2\u8272\u7684\u6743\u9650\u7ba1\u7406\u7684\u529f\u80fd\u624d\u7b97\u5b8c\u6210\u3002 \u5265\u593a\u89d2\u8272\uff1a \u9996\u5148\u5224\u65ad\u8be5\u7528\u6237\u662f\u5426\u5df2\u7ecf\u88ab\u8d4b\u4e88\u8be5\u89d2\u8272\uff0c\u5982\u679c\u672a\u66fe\u8d4b\u4e88\u5219\u4e0d\u505a\u4fee\u6539\uff0c\u5982\u679c\u5df2\u88ab\u8d4b\u4e88\uff0c\u5219\u4ece\u5bf9\u5e94\u7684\u7528\u6237\uff08AVUser\uff09\u7684 roles \u5c5e\u6027\u5f53\u4e2d\u628a\u8be5\u89d2\u8272\u5220\u9664\u3002 Objective-C AVQuery * roleQuery = [ AVRole query ]; [ roleQuery whereKey : @ name equalTo : @ Moderator ]; [ roleQuery findObjectsInBackgroundWithBlock : ^ ( NSArray * objects , NSError * error ) { // \u5982\u679c\u89d2\u8272\u5b58\u5728 if ([ objects count ] 0 ) { AVRole * moderatorRole = [ objects objectAtIndex : 0 ]; [ roleQuery whereKey : @ users equalTo :[ AVUser currentUser ]]; [ roleQuery findObjectsInBackgroundWithBlock : ^ ( NSArray * objects , NSError * error ){ // \u5982\u679c\u7528\u6237\u786e\u5b9e\u62e5\u6709\u8be5\u89d2\u8272\uff0c\u90a3\u4e48\u5c31\u5265\u593a if ([ objects count ] 0 ) { [[ moderatorRole users ] removeObject :[ AVUser currentUser ]]; [ moderatorRole saveInBackground ]; } }]; } }]; Swift let roleQuery = AVRole . query () roleQuery . whereKey ( name , equalTo : Moderator ) roleQuery . findObjectsInBackground { ( objects , error ) in guard let currentUser = AVUser . current (), let moderatorRole = objects ?. first as ? AVRole else { return } roleQuery . whereKey ( users , equalTo : currentUser ) roleQuery . findObjectsInBackground { ( objects , error ) in guard let _ = objects ?. first else { return } moderatorRole . users (). remove ( currentUser ) moderatorRole . save () } } Java final AVQuery AVRole roleQuery = new AVQuery AVRole ( _Role ); roleQuery . whereEqualTo ( name , Moderator ); roleQuery . findInBackground ( new FindCallback AVRole () { @Override public void done ( List AVRole list , AVException e ) { if ( list . size () 0 ){ final AVRole moderatorRole = list . get ( 0 ); roleQuery . whereEqualTo ( users , AVUser . getCurrentUser ()); roleQuery . findInBackground ( new FindCallback AVRole () { @Override public void done ( List AVRole list , AVException e ) { // \u5982\u679c\u8be5\u7528\u6237\u786e\u5b9e\u62e5\u6709\u8be5\u89d2\u8272\uff0c\u90a3\u4e48\u5c31\u5265\u593a if ( list . size () 0 ) { moderatorRole . getUsers (). remove ( AVUser . getCurrentUser ()); moderatorRole . saveInBackground (); } } }); } else { } } }); JavaScript // \u6784\u5efa AV.Role \u7684\u67e5\u8be2 var roleQuery = new AV . Query ( AV . Role ); roleQuery . equalTo ( name , Moderator ); roleQuery . find (). then ( function ( results ) { // \u5982\u679c\u89d2\u8272\u5b58\u5728 if ( results . length 0 ) { var moderatorRole = results [ 0 ]; roleQuery . equalTo ( users , AV . User . current ()); return roleQuery . find (); } }). then ( function ( userForRole ) { //\u8be5\u89d2\u8272\u5b58\u5728\uff0c\u5e76\u4e14\u4e5f\u62e5\u6709\u8be5\u89d2\u8272 if ( userForRole . length 0 ) { // \u5265\u593a\u89d2\u8272 var relation = moderatorRole . getUsers (); relation . remove ( AV . User . current ()); return moderatorRole . save (); } }). then ( function () { // \u4fdd\u5b58\u6210\u529f }). catch ( function ( error ) { // \u8f93\u51fa\u9519\u8bef console . log ( error ); }); Python import leancloud user = leancloud . User () user . login ( username , password ) role_query = leancloud . Query ( leancloud . Role ) role_query . equal_to ( name , Administrator ) role_query_list = role_query . find () if len ( role_query_list ) 0 : # \u8be5\u89d2\u8272\u5b58\u5728 administrator_role = role_query_list [ 0 ] role_query . equal_to ( users , leancloud . User . get_current ()) role_query_with_current_user = role_query . find () if len ( role_query_with_current_user ) 0 : # \u8be5\u89d2\u8272\u5b58\u5728\uff0c\u4e14\u5f53\u524d\u7528\u6237\u62e5\u6709\u8be5\u89d2\u8272 relation = administrator_role . get_users () relation . remove ( leancloud . User . get_current ()) # \u4e3a\u5f53\u524d\u7528\u6237\u5265\u593a\u8be5\u89d2\u8272 administrator_role . save () else : # \u8be5\u89d2\u8272\u5b58\u5728\uff0c\u5f53\u524d\u7528\u6237\u5e76\u4e0d\u62e5\u6709\u8be5\u89d2\u8272 pass else : # \u8be5\u89d2\u8272\u4e0d\u5b58\u5728\uff0c\u53ef\u4ee5\u65b0\u5efa\u8be5\u89d2\u8272\uff0c\u5e76\u628a\u5f53\u524d\u7528\u6237\u8bbe\u7f6e\u6210\u8be5\u89d2\u8272 pass \u89d2\u8272\u7684\u67e5\u8be2 \u9664\u4e86\u5728\u63a7\u5236\u53f0\u53ef\u4ee5\u76f4\u63a5\u67e5\u770b\u5df2\u6709\u89d2\u8272\u4e4b\u5916\uff0c\u901a\u8fc7\u4ee3\u7801\u4e5f\u53ef\u4ee5\u76f4\u63a5\u67e5\u8be2\u5f53\u524d\u5e94\u7528\u4e2d\u5df2\u5b58\u5728\u7684\u89d2\u8272\u3002 \u6ce8\uff1a AVRole \u4e5f\u7ee7\u627f\u81ea AVObject \uff0c\u56e0\u6b64\u719f\u6089\u4e86\u89e3 AVQuery \u7684\u5f00\u53d1\u8005\u53ef\u4ee5\u719f\u7ec3\u7684\u638c\u63e1\u5173\u4e8e\u89d2\u8272\u67e5\u8be2\u7684\u5404\u79cd\u65b9\u6cd5\u3002 Objective-C // \u6784\u5efa\u89d2\u8272\u7684\u67e5\u8be2\uff0c\u5e76\u4e14\u67e5\u770b\u8be5\u89d2\u8272\u6240\u5bf9\u5e94\u7684\u7528\u6237 AVQuery * roleQuery = [ AVRole query ]; [ roleQuery whereKey : @ name equalTo : @ Administrator ]; [ roleQuery findObjectsInBackgroundWithBlock : ^ ( NSArray * objects , NSError * error ) { AVRole * administrator = [ objects objectAtIndex : 0 ]; AVRelation * userRelation = [ administrator users ]; AVQuery * userQuery = [ userRelation query ]; [ userQuery findObjectsInBackgroundWithBlock : ^ ( NSArray * objects , NSError * error ) { // objects \u5c31\u662f\u62e5\u6709\u8be5\u89d2\u8272\u6743\u9650\u7684\u6240\u6709\u7528\u6237\u4e86\u3002 }]; }]; Swift let roleQuery = AVRole . query () roleQuery . whereKey ( name , equalTo : Administrator ) roleQuery . findObjectsInBackground { ( roles , error ) in guard let administrator = roles ?. first as ? AVRole else { return } let userQuery = administrator . users (). query () userQuery . findObjectsInBackground { ( users , error ) in // users \u5c31\u662f\u62e5\u6709\u8be5\u89d2\u8272\u6743\u9650\u7684\u6240\u6709\u7528\u6237\u4e86\u3002 } } Java AVQuery AVRole roleQuery = new AVQuery AVRole ( _Role ); roleQuery . whereEqualTo ( name , Administrator ); roleQuery . findInBackground ( new FindCallback AVRole () { @Override public void done ( List AVRole list , AVException e ) { AVRole administrator = list . get ( 0 ); AVRelation userRelation = administrator . getUsers (); AVQuery AVUser query = userRelation . getQuery (); query . findInBackground ( new FindCallback AVUser () { @Override public void done ( List AVUser list , AVException e ) { // list \u5c31\u662f\u62e5\u6709\u8be5\u89d2\u8272\u6743\u9650\u7684\u6240\u6709\u7528\u6237\u4e86\u3002 } }); } }); JavaScript // \u65b0\u5efa\u9488\u5bf9 Role \u7684\u67e5\u8be2 var roleQuery = new AV . Query ( AV . Role ); // \u67e5\u8be2 name \u7b49\u4e8e Administrator \u7684\u89d2\u8272 roleQuery . equalTo ( name , Administrator ); // \u6267\u884c\u67e5\u8be2 roleQuery . first (). then ( function ( adminRole ) { var userRelation = adminRole . relation ( users ); return userRelation . query (). find (); }). then ( function ( userList ) { // userList \u5c31\u662f\u62e5\u6709\u8be5\u89d2\u8272\u6743\u9650\u7684\u6240\u6709\u7528\u6237\u4e86\u3002 var firstAdmin = userList [ 0 ]; }). catch ( function ( error ) { console . log ( error ); }); Python import leancloud user = leancloud . User () user . login ( username , password ) role_query = leancloud . Query ( leancloud . Role ) role_query . equal_to ( name , Administrator ) role_query_list = role_query . find () if len ( role_query_list ) 0 : # \u8be5\u89d2\u8272\u5b58\u5728 administrator_role = role_query_list [ 0 ] # \u83b7\u53d6\u8be5\u89d2\u8272\u5bf9\u8c61 user_relation = administrator_role . relation ( users ) # \u67e5\u627e\u8be5\u89d2\u8272\u4e0b\u7684\u6240\u6709\u7528\u6237\u5217\u8868\u3002\u5982\u679c\u8fd9\u91cc\u6709\u6743\u9650\u95ee\u9898\uff0c\u8bf7\u5230\u63a7\u5236\u53f0\u8bbe\u7f6e leancloud.User \u5bf9\u8c61\u7684\u6743\u9650 users_with_administrator = user_relation . query . find () print users_with_administrator else : # \u8be5\u89d2\u8272\u4e0d\u5b58\u5728\uff0c\u53ef\u4ee5\u65b0\u5efa\u8be5\u89d2\u8272\uff0c\u5e76\u628a\u5f53\u524d\u7528\u6237\u8bbe\u7f6e\u6210\u8be5\u89d2\u8272 pass \u67e5\u8be2\u67d0\u4e00\u4e2a\u7528\u6237\u62e5\u6709\u54ea\u4e9b\u89d2\u8272\uff1a Objective-C // \u7b2c\u4e00\u79cd\u65b9\u5f0f\u662f\u901a\u8fc7\u5185\u7f6e\u7684\u63a5\u53e3 [ user getRolesInBackgroundWithBlock : ^ ( NSArray AVRole * * _Nullable avRoles , NSError * _Nullable error ) { // avRoles \u5c31\u662f\u4e00\u4e2a AVRole \u7684\u6570\u7ec4\uff0c\u8fd9\u4e9b AVRole \u5c31\u662f\u5f53\u524d\u7528\u6237\u6240\u5728\u62e5\u6709\u7684\u89d2\u8272 }]; // \u7b2c\u4e8c\u79cd\u662f\u901a\u8fc7\u6784\u5efa AVQuery AVQuery * roleQuery = [ AVRole query ]; [ roleQuery whereKey : @ users equalTo : user ]; [ roleQuery findObjectsInBackgroundWithBlock : ^ ( NSArray * avRoles , NSError * error ) { // avRoles \u5c31\u662f\u4e00\u4e2a AVRole \u7684\u6570\u7ec4\uff0c\u8fd9\u4e9b AVRole \u5c31\u662f\u5f53\u524d\u7528\u6237\u6240\u5728\u62e5\u6709\u7684\u89d2\u8272 }]; Swift guard let user = AVUser . current () else { return } user . getRolesInBackground { ( roles , error ) in // avRoles \u5c31\u662f\u4e00\u4e2a AVRole \u7684\u6570\u7ec4\uff0c\u8fd9\u4e9b AVRole \u5c31\u662f\u5f53\u524d\u7528\u6237\u6240\u5728\u62e5\u6709\u7684\u89d2\u8272 } // \u7b2c\u4e8c\u79cd\u662f\u901a\u8fc7\u6784\u5efa AVQuery let roleQuery = AVRole . query () roleQuery . whereKey ( users , equalTo : user ) roleQuery . findObjectsInBackground { ( roles , error ) in // avRoles \u5c31\u662f\u4e00\u4e2a AVRole \u7684\u6570\u7ec4\uff0c\u8fd9\u4e9b AVRole \u5c31\u662f\u5f53\u524d\u7528\u6237\u6240\u5728\u62e5\u6709\u7684\u89d2\u8272 } Java // \u7b2c\u4e00\u79cd\u65b9\u5f0f\u662f\u901a\u8fc7 AVUser \u5185\u7f6e\u7684\u63a5\u53e3\uff1a user . getRolesInBackground ( new FindCallback AVRole () { @Override public void done ( List AVRole avRoles , AVException avException ) { // avRoles \u8868\u793a\u8fd9\u4e2a\u7528\u6237\u62e5\u6709\u7684\u89d2\u8272 }); // \u7b2c\u4e8c\u79cd\u65b9\u5f0f\u662f\u901a\u8fc7\u6784\u5efa AVQuery\uff1a AVQuery AVRole roleQuery = new AVQuery AVRole ( _Role ); roleQuery . whereEqualTo ( users , user ); roleQuery . findInBackground ( new FindCallback AVRole () { @Override public void done ( List AVRole list , AVException e ) { // list \u5c31\u662f\u4e00\u4e2a AVRole \u7684 List\uff0c\u8fd9\u4e9b AVRole \u5c31\u662f\u5f53\u524d\u7528\u6237\u6240\u5728\u62e5\u6709\u7684\u89d2\u8272 } }); JavaScript //\u7b2c\u4e00\u79cd\u662f\u901a\u8fc7 AV.User \u7684\u5185\u7f6e\u63a5\u53e3\uff1a user . getRoles (). then ( function ( roles ){ // roles \u662f\u4e00\u4e2a AV.Role \u6570\u7ec4\uff0c\u8fd9\u4e9b AV.Role \u8868\u793a user \u62e5\u6709\u7684\u89d2\u8272 }); // \u7b2c\u4e8c\u79cd\u662f\u901a\u8fc7\u67e5\u8be2\uff1a // \u65b0\u5efa\u89d2\u8272\u67e5\u8be2 var roleQuery = new AV . Query ( AV . Role ); // \u67e5\u8be2\u5f53\u524d\u7528\u6237\u62e5\u6709\u7684\u89d2\u8272 roleQuery . equalTo ( users , AV . User . current ()); roleQuery . find (). then ( function ( roles ) { // roles \u662f\u4e00\u4e2a AV.Role \u6570\u7ec4\uff0c\u8fd9\u4e9b AV.Role \u8868\u793a\u5f53\u524d\u7528\u6237\u6240\u62e5\u6709\u7684\u89d2\u8272 }, function ( error ) { }); Python import leancloud user = leancloud . User () user . login ( username , password ) # \u7b2c\u4e00\u79cd\u65b9\u5f0f\u662f\u901a\u8fc7 User \u7684\u5185\u7f6e\u63a5\u53e3\uff1a role_query_list = user . get_roles () # \u7b2c\u4e8c\u79cd\u65b9\u5f0f\u662f\u901a\u8fc7\u6784\u5efa Query\uff1a role_query = leancloud . Query ( leancloud . Role ) role_query . equal_to ( users , leancloud . User . get_current ()) role_query_list = role_query . find () # \u8fd4\u56de\u5f53\u524d\u7528\u6237\u7684\u89d2\u8272\u5217\u8868 \u67e5\u8be2\u54ea\u4e9b\u7528\u6237\u90fd\u88ab\u8d4b\u4e88 Moderator \u89d2\u8272\uff1a Objective-C AVRole * moderatorRole = //\u6839\u636e id \u67e5\u8be2\u6216\u8005\u6839\u636e name \u67e5\u8be2\u51fa\u4e00\u4e2a\u5b9e\u4f8b AVRelation * userRelation = [ moderatorRole users ]; AVQuery * userQuery = [ userRelation query ]; [ userQuery findObjectsInBackgroundWithBlock : ^ ( NSArray * objects , NSError * error ) { // objects \u5c31\u662f\u62e5\u6709 moderatorRole \u89d2\u8272\u7684\u6240\u6709\u7528\u6237\u4e86\u3002 }]; Swift let moderatorRole = # An AVRole # //\u6839\u636e id \u67e5\u8be2\u6216\u8005\u6839\u636e name \u67e5\u8be2\u51fa\u4e00\u4e2a\u5b9e\u4f8b let userRelation = moderatorRole . users () let userQuery = userRelation . query () userQuery . findObjectsInBackground { ( objects , error ) in // objects \u5c31\u662f\u62e5\u6709 moderatorRole \u89d2\u8272\u7684\u6240\u6709\u7528\u6237\u4e86\u3002 } Java AVRole moderatorRole = new AVRole ( Moderator ); //\u6839\u636e id \u67e5\u8be2\u6216\u8005\u6839\u636e name \u67e5\u8be2\u51fa\u4e00\u4e2a\u5b9e\u4f8b AVRelation AVUser userRelation = moderatorRole . getUsers (); AVQuery AVUser userQuery = userRelation . getQuery (); userQuery . findInBackground ( new FindCallback AVUser () { @Override public void done ( List AVUser list , AVException e ) { // list \u5c31\u662f\u62e5\u6709\u8be5\u89d2\u8272\u6743\u9650\u7684\u6240\u6709\u7528\u6237\u4e86\u3002 } }); JavaScript var roleQuery = new AV . Query ( AV . Role ); roleQuery . get ( 55f1572460b2ce30e8b7afde ). then ( function ( role ) { //\u83b7\u53d6 Relation \u5b9e\u4f8b var userRelation = role . getUsers (); // \u83b7\u53d6\u67e5\u8be2\u5b9e\u4f8b var query = userRelation . query (); return query . find (); }). then ( function ( results ) { // results \u5c31\u662f\u62e5\u6709 role \u89d2\u8272\u7684\u6240\u6709\u7528\u6237\u4e86 }). catch ( function ( error ) { console . log ( error ); }); Python import leancloud role_query = leancloud . Query ( leancloud . Role ) role = role_query . get ( 573d5fdc2e958a0069f5d6fe ) # \u6839\u636e objectId \u83b7\u53d6 role \u5bf9\u8c61 user_relation = role . get_users () # \u83b7\u53d6 user \u7684 relation user_list = user_relation . query . find () # \u6839\u636e relation \u67e5\u627e\u6240\u5305\u542b\u7684\u7528\u6237\u5217\u8868 \u89d2\u8272\u7684\u4ece\u5c5e\u5173\u7cfb \u89d2\u8272\u4ece\u5c5e\u5173\u7cfb\u662f\u4e3a\u4e86\u5b9e\u73b0\u4e0d\u540c\u89d2\u8272\u7684\u6743\u9650\u5171\u4eab\u4ee5\u53ca\u6743\u9650\u9694\u79bb\u3002 \u6743\u9650\u5171\u4eab\u5f88\u597d\u7406\u89e3\uff0c\u6bd4\u5982\u7ba1\u7406\u5458\u62e5\u6709\u8bba\u575b\u6240\u6709\u677f\u5757\u7684\u7ba1\u7406\u6743\u9650\uff0c\u800c\u7248\u4e3b\u53ea\u62e5\u6709\u5355\u4e00\u677f\u5757\u7684\u7ba1\u7406\u6743\u9650\uff0c\u5982\u679c\u5f00\u53d1\u4e00\u4e2a\u7248\u4e3b\u4f7f\u7528\u7684\u65b0\u529f\u80fd\uff0c\u90fd\u8981\u540c\u6837\u7684\u4e3a\u7ba1\u7406\u5458\u8bbe\u7f6e\u8be5\u9879\u529f\u80fd\u6743\u9650\uff0c\u4ee3\u7801\u5c31\u4f1a\u5197\u4f59\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u901a\u4fd7\u7684\u7406\u89e3\u662f\uff1a\u7ba1\u7406\u5458\u4e5f\u662f\u7248\u4e3b\uff0c\u53ea\u662f\u4ed6\u662f\u6240\u6709\u677f\u5757\u7684\u7248\u4e3b\u3002\u56e0\u6b64\uff0c\u7ba1\u7406\u5458\u5728\u89d2\u8272\u4ece\u5c5e\u7684\u5173\u7cfb\u4e0a\u662f\u5c5e\u4e8e\u7248\u4e3b\u7684\uff0c\u53ea\u4e0d\u8fc7 TA \u662f\u7279\u6b8a\u7684\u7248\u4e3b\u3002 Objective-C AVRole * administratorRole = //\u4ece\u670d\u52a1\u7aef\u67e5\u8be2\u51fa Administrator \u89d2\u8272\u5b9e\u4f8b AVRole * moderatorRole = //\u4ece\u670d\u52a1\u7aef\u67e5\u8be2\u51fa Moderator \u89d2\u8272\u5b9e\u4f8b // \u5411 moderatorRole \u7684 roles\uff08AVRelation\uff09\u4e2d\u6dfb\u52a0 administratorRole [[ moderatorRole roles ] addObject : administratorRole ]; [ moderatorRole saveInBackground ]; /** * \u4ee5\u4e0a\u7528\u540c\u6b65\u65b9\u6cd5\u662f\u4e3a\u4e86\u4fdd\u8bc1\u5728\u8c03\u7528 [[moderator roles] addObject:administratorRole] \u4e4b\u524d administratorRole \u548c moderator \u90fd\u5df2\u4fdd\u5b58\u5728\u670d\u52a1\u7aef **/ Swift let administratorRole : AVRole = # An AVRole # // \u4ece\u670d\u52a1\u7aef\u67e5\u8be2\u51fa Administrator \u89d2\u8272\u5b9e\u4f8b let moderatorRole : AVRole = # An AVRole # //\u4ece\u670d\u52a1\u7aef\u67e5\u8be2\u51fa Moderator \u89d2\u8272\u5b9e\u4f8b moderatorRole . roles (). add ( administratorRole ) moderatorRole . save () Java AVRole administratorRole = // \u4ece\u670d\u52a1\u7aef\u67e5\u8be2 Administrator \u5b9e\u4f8b AVRole moderatorRole = // \u4ece\u670d\u52a1\u7aef\u67e5\u8be2 Moderator \u5b9e\u4f8b // \u5411 moderatorRole \u7684 roles\uff08AVRelation\uff09 \u4e2d\u6dfb\u52a0 administratorRole moderatorRole . getRoles (). add ( administratorRole ); moderatorRole . saveInBackground (); JavaScript // \u5efa\u7acb\u7248\u4e3b\u548c\u8bba\u575b\u7ba1\u7406\u5458\u4e4b\u95f4\u7684\u4ece\u5c5e\u5173\u7cfb var administratorRole = new AV . Role ( Administrator ); var administratorRole . save (). then ( function ( administratorRole ) { //\u65b0\u5efa\u7248\u4e3b\u89d2\u8272 var moderatorRole = new AV . Role ( Moderator ); // \u5c06 Administrator \u4f5c\u4e3a moderatorRole \u5b50\u89d2\u8272 moderatorRole . getRoles (). add ( administratorRole ); return moderatorRole . save (); }). then ( function ( role ) { chai . assert . isNotNull ( role . id ); done (); }). catch ( function ( error ) { console . log ( error ); }); Python import leancloud # \u5efa\u7acb\u7248\u4e3b\u548c\u8bba\u575b\u7ba1\u7406\u5458\u4e4b\u95f4\u7684\u89d2\u8272\u4ece\u5c5e\u5173\u7cfb administrator_role = leancloud . Role ( Administrator ) # \u65b0\u5efa\u89d2\u8272 moderator_role = leancloud . Role ( Moderator ) # \u65b0\u5efa\u89d2\u8272 moderator_acl = leancloud . ACL () # \u8fd9\u91cc\u4e3a\u4e86\u5728\u540e\u9762\u53ef\u4ee5\u6dfb\u52a0 moderator_role \u53ef\u4ee5\u6dfb\u52a0 role\uff0c \u8bbe\u7f6e\u4e00\u4e2a\u53ef\u5199\u6743\u9650 moderator_acl . set_public_write_access ( True ) moderator_role . set_acl ( moderator_acl ) administrator_role . save () moderator_role . save () # \u5c06 Administrator \u8bbe\u4e3a moderator_role \u4e00\u4e2a\u5b50\u89d2\u8272 moderator_role . get_roles () . add ( administrator_role ) moderator_role . save () \u6743\u9650\u9694\u79bb\u4e5f\u5c31\u662f\u4e24\u4e2a\u89d2\u8272\u4e0d\u5b58\u5728\u4ece\u5c5e\u5173\u7cfb\uff0c\u4f46\u662f\u67d0\u4e9b\u6743\u9650\u53c8\u662f\u5171\u4eab\u7684\uff0c\u6b64\u65f6\u4e0d\u59a8\u8bbe\u8ba1\u4e00\u4e2a\u4e2d\u95f4\u89d2\u8272\uff0c\u8ba9\u524d\u9762\u4e24\u4e2a\u89d2\u8272\u4ece\u5c5e\u4e8e\u4e2d\u95f4\u89d2\u8272\uff0c\u8fd9\u6837\u5728\u903b\u8f91\u4e0a\u53ef\u4ee5\u5f88\u5feb\u68b3\u7406\uff0c\u5176\u5b9e\u672c\u8d28\u4e0a\u8fd8\u662f\u4f7f\u7528\u4e86\u89d2\u8272\u7684\u4ece\u5c5e\u5173\u7cfb\u3002 \u6bd4\u5982\uff0c\u7248\u4e3b A \u662f\u6444\u5f71\u5668\u6750\u677f\u5757\u7684\u7248\u4e3b\uff0c\u800c\u7248\u4e3b B \u662f\u624b\u673a\u5e73\u677f\u677f\u5757\u7684\u7248\u4e3b\uff0c\u73b0\u5728\u65b0\u5f00\u653e\u4e86\u4e00\u4e2a\u7535\u5b50\u6570\u7801\u7248\u5757\uff0c\u800c\u9700\u6c42\u89c4\u5b9a A \u548c B \u90fd\u540c\u65f6\u5177\u5907\u7ba1\u7406\u7535\u5b50\u6570\u7801\u677f\u5757\u7684\u6743\u9650\uff0c\u4f46\u662f A \u4e0d\u5177\u5907\u7ba1\u7406\u624b\u673a\u5e73\u677f\u7248\u5757\u7684\u6743\u9650\uff0c\u53cd\u4e4b\u4ea6\u7136\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u8bbe\u7f6e\u4e00\u4e2a\u7535\u5b50\u6570\u7801\u677f\u5757\u7684\u7248\u4e3b\u89d2\u8272\uff08\u4e2d\u95f4\u89d2\u8272\uff09\uff0c\u540c\u65f6\u8ba9 A \u548c B \u62e5\u6709\u8be5\u89d2\u8272\u5373\u53ef\u3002 Objective-C // \u65b0\u5efa 3 \u4e2a\u89d2\u8272\u5b9e\u4f8b AVRole * photographicRole = //\u521b\u5efa\u6216\u8005\u4ece\u670d\u52a1\u7aef\u67e5\u8be2\u51fa Photographic \u89d2\u8272\u5b9e\u4f8b AVRole * mobileRole = //\u521b\u5efa\u6216\u4ece\u670d\u52a1\u7aef\u67e5\u8be2\u51fa Mobile \u89d2\u8272\u5b9e\u4f8b AVRole * digitalRole = //\u521b\u5efa\u6216\u4ece\u670d\u52a1\u7aef\u67e5\u8be2\u51fa Digital \u89d2\u8272\u5b9e\u4f8b // photographicRole \u548c mobileRole \u7ee7\u627f\u4e86 digitalRole [[ digitalRole roles ] addObject : photographicRole ]; [[ digitalRole roles ] addObject : mobileRole ]; [ digitalRole saveInBackgroundWithBlock : ^ ( BOOL succeeded , NSError * error ) { AVObject * photographicPost = [ AVObject objectWithClassName : @ Post ]; AVObject * mobilePost = [ AVObject objectWithClassName : @ Post ]; AVObject * digitalPost = [ AVObject objectWithClassName : @ Post ]; //.....\u6b64\u5904\u7701\u7565\u4e00\u4e9b\u5177\u4f53\u7684\u503c\u8bbe\u5b9a AVACL * photographicACL = [ AVACL ACL ]; [ photographicACL setReadAccess : YES forRole : photographicRole ]; [ photographicACL setPublicReadAccess : YES ]; [ photographicACL setWriteAccess : YES forRole : photographicRole ]; [ photographicPost setACL : photographicACL ]; AVACL * mobileACL = [ AVACL ACL ]; [ mobileACL setReadAccess : YES forRole : mobileRole ]; [ mobileACL setWriteAccess : YES forRole : mobileRole ]; [ mobilePost setACL : mobileACL ]; AVACL * digitalACL = [ AVACL ACL ]; [ digitalACL setReadAccess : YES forRole : digitalRole ]; [ digitalPost setACL : digitalACL ]; // photographicPost \u53ea\u6709 photographicRole \u53ef\u4ee5\u8bfb\u5199 // mobilePost \u53ea\u6709 mobileRole \u53ef\u4ee5\u8bfb\u5199 // \u800c photographicRole\uff0cmobileRole\uff0cdigitalRole \u5747\u53ef\u4ee5\u5bf9 digitalPost \u8fdb\u884c\u8bfb\u5199 [ photographicPost saveInBackground ]; [ mobilePost saveInBackground ]; [ digitalPost saveInBackground ]; }]; Swift let photographicRole : AVRole = # An Role # let mobileRole : AVRole = # An Role # let digitalRole : AVRole = # An Role # digitalRole . roles (). add ( photographicRole ) digitalRole . roles (). add ( mobileRole ) digitalRole . saveInBackground { ( succeeded , error ) in guard succeeded else { return } let photographicPost = AVObject ( className : Post ) let photographicACL = AVACL () photographicACL . setPublicReadAccess ( true ) photographicACL . setWriteAccess ( true , for : photographicRole ) photographicPost . acl = photographicACL let mobilePost = AVObject ( className : Post ) let mobileACL = AVACL () mobileACL . setPublicReadAccess ( true ) mobileACL . setWriteAccess ( true , for : mobileRole ) mobilePost . acl = mobileACL let digitalPost = AVObject ( className : Post ) let digitalACL = AVACL () digitalACL . setPublicReadAccess ( true ) digitalACL . setWriteAccess ( true , for : digitalRole ) digitalPost . acl = digitalACL AVObject . saveAll ([ photographicPost , mobilePost , digitalPost ] ) } Java // \u65b0\u5efa 3\u4e2a\u89d2\u8272\u5b9e\u4f8b AVRole photographicRole = // \u521b\u5efa\u6216\u8005\u521b\u5efa Photographic \u89d2\u8272 AVRole mobileRole = // \u521b\u5efa\u6216\u8005\u521b\u5efa Mobile \u89d2\u8272 AVRole digitalRole = // \u521b\u5efa\u6216\u8005\u521b\u5efa Digital \u89d2\u8272 // photographicRole \u548c mobileRole \u7ee7\u627f\u4e86 digitalRole digitalRole . getRoles (). add ( photographicRole ); digitalRole . getRoles (). add ( mobileRole ); digitalRole . saveInBackground ( new SaveCallback () { @Override public void done ( AVException e ) { //\u65b0\u5efa 3 \u7bc7\u8d34\u5b50\uff0c\u5206\u522b\u53d1\u5728\u4e0d\u540c\u7684\u677f\u5757\u4e0a AVObject photographicPost = new AVObject ( Post ); AVObject mobilePost = new AVObject ( Post ); AVObject digitalPost = new AVObject ( Post ); //.....\u6b64\u5904\u7701\u7565\u4e00\u4e9b\u5177\u4f53\u7684\u503c\u8bbe\u5b9a AVACL photographicACL = new AVACL (); photographicACL . setPublicReadAccess ( true ); photographicACL . setRoleWriteAccess ( photographicRole , true ); photographicPost . setACL ( photographicACL ); AVACL mobileACL = new AVACL (); mobileACL . setPublicReadAccess ( true ); mobileACL . setRoleWriteAccess ( mobileRole , true ); mobilePost . setACL ( mobileACL ); AVACL digitalACL = new AVACL (); digitalACL . setPublicReadAccess ( true ); digitalACL . setRoleWriteAccess ( digitalRole , true ); digitalPost . setACL ( digitalACL ); // photographicPost \u53ea\u6709 photographicRole \u53ef\u4ee5\u8bfb\u5199 // mobilePost \u53ea\u6709 mobileRole \u53ef\u4ee5\u8bfb\u5199 // \u800c photographicRole\uff0cmobileRole\uff0cdigitalRole \u5747\u53ef\u4ee5\u5bf9 digitalPost \u8fdb\u884c\u8bfb\u5199 photographicPost . saveInBackground (); mobilePost . saveInBackground (); digitalPost . saveInBackground (); } }); JavaScript //\u65b0\u5efa\u6444\u5f71\u5668\u6750\u7248\u4e3b\u89d2\u8272 var photographicRole = new AV . Role ( Photographic ); //\u65b0\u5efa\u624b\u673a\u5e73\u677f\u7248\u4e3b\u89d2\u8272 var mobileRole = new AV . Role ( Mobile ); //\u65b0\u5efa\u7535\u5b50\u6570\u7801\u7248\u4e3b\u89d2\u8272 var digitalRole = new AV . Role ( Digital ); AV . Promise . all ([ // \u5148\u884c\u4fdd\u5b58 photographicRole \u548c mobileRole photographicRole . save (), mobileRole . save (), ]). then ( function ([ r1 , r2 ]) { // \u5c06 photographicRole \u548c mobileRole \u8bbe\u4e3a digitalRole \u4e00\u4e2a\u5b50\u89d2\u8272 digitalRole . getRoles (). add ( photographicRole ); digitalRole . getRoles (). add ( mobileRole ); digitalRole . save (); // \u65b0\u5efa\u4e00\u4e2a\u5e16\u5b50\u5bf9\u8c61 var Post = AV . Object . extend ( Post ); // \u65b0\u5efa\u6444\u5f71\u5668\u6750\u677f\u5757\u7684\u5e16\u5b50 var photographicPost = new Post (); photographicPost . set ( title , \u6211\u662f\u6444\u5f71\u5668\u6750\u677f\u5757\u7684\u5e16\u5b50\uff01 ); // \u65b0\u5efa\u624b\u673a\u5e73\u677f\u677f\u5757\u7684\u5e16\u5b50 var mobilePost = new Post (); mobilePost . set ( title , \u6211\u662f\u624b\u673a\u5e73\u677f\u677f\u5757\u7684\u5e16\u5b50\uff01 ); // \u65b0\u5efa\u7535\u5b50\u6570\u7801\u677f\u5757\u7684\u5e16\u5b50 var digitalPost = new Post (); digitalPost . set ( title , \u6211\u662f\u7535\u5b50\u6570\u7801\u677f\u5757\u7684\u5e16\u5b50\uff01 ); // \u65b0\u5efa\u4e00\u4e2a\u6444\u5f71\u5668\u6750\u7248\u4e3b\u53ef\u5199\u7684 ACL \u5b9e\u4f8b var photographicACL = new AV . ACL (); photographicACL . setPublicReadAccess ( true ); photographicACL . setRoleWriteAccess ( photographicRole , true ); // \u65b0\u5efa\u4e00\u4e2a\u624b\u673a\u5e73\u677f\u7248\u4e3b\u53ef\u5199\u7684 ACL \u5b9e\u4f8b var mobileACL = new AV . ACL (); mobileACL . setPublicReadAccess ( true ); mobileACL . setRoleWriteAccess ( mobileRole , true ); // \u65b0\u5efa\u4e00\u4e2a\u624b\u673a\u5e73\u677f\u7248\u4e3b\u53ef\u5199\u7684 ACL \u5b9e\u4f8b var digitalACL = new AV . ACL (); digitalACL . setPublicReadAccess ( true ); digitalACL . setRoleWriteAccess ( digitalRole , true ); // photographicPost \u53ea\u6709 photographicRole \u53ef\u4ee5\u8bfb\u5199 // mobilePost \u53ea\u6709 mobileRole \u53ef\u4ee5\u8bfb\u5199 // \u800c photographicRole\uff0cmobileRole\uff0cdigitalRole \u5747\u53ef\u4ee5\u5bf9 digitalPost \u8fdb\u884c\u8bfb\u5199 photographicPost . setACL ( photographicACL ); mobilePost . setACL ( mobileACL ); digitalPost . setACL ( digitalACL ); return AV . Promise . all ([ photographicPost . save (), mobilePost . save (), digitalPost . save (), ]); }). then ( function ([ r1 , r2 , r3 ]) { // \u4fdd\u5b58\u6210\u529f }, function ( errors ) { // \u4fdd\u5b58\u5931\u8d25 });; Python import leancloud photographic_role = leancloud . Role ( Photographic ) # \u65b0\u5efa\u6444\u5f71\u5668\u6750\u7248\u4e3b\u89d2\u8272 mobile_role = leancloud . Role ( Mobile ) # \u65b0\u5efa\u624b\u673a\u5e73\u677f\u7248\u4e3b\u89d2\u8272 digital_role = leancloud . Role ( Digital ) # \u65b0\u5efa\u7535\u5b50\u6570\u7801\u7248\u4e3b\u89d2\u8272 # \u5148\u884c\u4fdd\u5b58 photographic_role \u548c mobile_role photographic_role . save () mobile_role . save () # \u5c06 photographic_role \u548c mobile_role \u8bbe\u4e3a digital_role \u4e00\u4e2a\u5b50\u89d2\u8272 digital_role . get_roles () . add ( photographic_role ) digital_role . get_roles () . add ( mobile_role ) digital_role . save () # \u4fdd\u5b58 # \u65b0\u5efa\u4e00\u4e2a\u5e16\u5b50\u5bf9\u8c61 Post = leancloud . Object . extend ( Post ) # \u65b0\u5efa\u6444\u5f71\u5668\u6750\u677f\u5757\u7684\u5e16\u5b50 photographic_post = Post () photographic_post . set ( title , \u6211\u662f\u6444\u5f71\u5668\u6750\u677f\u5757\u7684\u5e16\u5b50\uff01 ) # \u65b0\u5efa\u624b\u673a\u5e73\u677f\u677f\u5757\u7684\u5e16\u5b50 mobile_post = Post () mobile_post . set ( title , \u6211\u662f\u624b\u673a\u5e73\u677f\u677f\u5757\u7684\u5e16\u5b50\uff01 ) # \u65b0\u5efa\u7535\u5b50\u6570\u7801\u677f\u5757\u7684\u5e16\u5b50 digital_post = Post () digital_post . set ( title , \u6211\u662f\u7535\u5b50\u6570\u7801\u677f\u5757\u7684\u5e16\u5b50\uff01 ) # \u65b0\u5efa\u4e00\u4e2a\u6444\u5f71\u5668\u6750\u7248\u4e3b\u53ef\u5199\u7684 leancloud.ACL \u5b9e\u4f8b photographic_acl = leancloud . ACL () photographic_acl . set_public_read_access ( True ) photographic_acl . set_role_write_access ( photographic_role , True ) # \u65b0\u5efa\u4e00\u4e2a\u624b\u673a\u5e73\u677f\u7248\u4e3b\u53ef\u5199\u7684 leancloud.ACL \u5b9e\u4f8b mobile_acl = leancloud . ACL (); mobile_acl . set_public_read_access ( True ) mobile_acl . set_role_write_access ( mobile_role , True ) # \u65b0\u5efa\u4e00\u4e2a\u624b\u673a\u5e73\u677f\u7248\u4e3b\u53ef\u5199\u7684 leancloud.ACL \u5b9e\u4f8b digital_acl = leancloud . ACL () digital_acl . set_public_read_access ( True ) digital_acl . set_role_write_access ( digital_role , True ) # photographic_post \u53ea\u6709 photographic_role \u53ef\u4ee5\u8bfb\u5199 # mobile_post \u53ea\u6709 mobile_role \u53ef\u4ee5\u8bfb\u5199 # \u800c photographic_role\uff0cmobile_role\uff0cdigital_role \u5747\u53ef\u4ee5\u5bf9 digital_post \u8fdb\u884c\u8bfb\u5199 photographic_post . set_acl ( photographic_acl ) mobile_post . set_acl ( mobile_acl ) digital_post . set_acl ( digital_acl ) photographic_post . save () mobile_post . save () digital_post . save () \u6743\u9650\u7684\u5206\u7ea7 \u5728\u65e5\u5e38\u751f\u6d3b\u4e2d\uff0c\u6211\u4eec\u4e5f\u9047\u5230\u8fc7\u6743\u9650\u5206\u7ea7\u7684\u95ee\u9898\uff0c\u4f8b\u5982\u65b0\u7684\u7cfb\u7edf\u53c8\u4e00\u6b21\u5347\u7ea7\uff0c\u5f15\u5165\u4e86\u8d85\u7ea7\u7ba1\u7406\u5458\u7684\u6982\u5ff5\uff0c\u8fd9\u4e2a\u8d85\u7ea7\u7ba1\u7406\u5458\u53ef\u4ee5\u5bf9\u7cfb\u7edf\u91cc\u9762\u4efb\u4f55\u7684\u5bf9\u8c61\u8fdb\u884c\u300c\u8bfb\u5199\u64cd\u4f5c\u300d\uff0c\u6309\u7167\u524d\u6587\u7684\u505a\u6cd5\uff0c\u9700\u8981\u7528\u4ee3\u7801\u5b9e\u73b0\u5982\u4e0b\u6b65\u9aa4\uff1a \u521b\u5efa\u8d85\u7ea7\u7ba1\u7406\u5458\u89d2\u8272 \u904d\u5386\u4e91\u7aef\u73b0\u6709\u7684\u5e16\u5b50\uff0c\u4e3a\u6240\u6709\u5bf9\u8c61\u6dfb\u52a0\u8d85\u7ea7\u7ba1\u7406\u5458\u7684\u300cACL \u8bfb\u5199\u6743\u9650\u300d \u4fdd\u5b58\u6570\u636e \u5f00\u53d1\u8005\u4e00\u65e6\u9762\u5bf9\u8fd9\u79cd\u903b\u8f91\u91cd\u590d\u7684\u4ee3\u7801\uff0c\u4e00\u822c\u90fd\u4f1a\u60f3\u5230\uff1a\u6709\u6ca1\u6709\u4e00\u4e2a\u5feb\u6377\u7684\u64cd\u4f5c\u53ef\u4ee5\u4e00\u6b21\u6027\u4e3a\u67d0\u4e00\u4e2a\u89d2\u8272\u6dfb\u52a0\u6574\u4e2a Class \u6dfb\u52a0\u6743\u9650\uff1f \u5f53\u7136\uff0cLeanCloud \u4e5f\u5df2\u7ecf\u63d0\u4f9b\u4e86\u4fbf\u6377\u7684\u53ef\u89c6\u5316\u7684\u64cd\u4f5c\u3002\u6253\u5f00 \u63a7\u5236\u53f0 \u5b58\u50a8 Post \u5176\u4ed6 \u6743\u9650\u8bbe\u7f6e \uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u8fd9\u91cc\u4f60\u53ef\u4ee5\u8bbe\u7f6e\u67d0\u4e00\u4e2a\u89d2\u8272\u5bf9 Post \u7684\u64cd\u4f5c\u6743\u9650\uff1a\u9009\u62e9 \u6307\u5b9a\u7528\u6237 \uff0c\u5728\u6307\u5b9a\u89d2\u8272\u4e2d\u8f93\u5165 superAdmin \uff0c\u5e76\u4e14\u70b9\u51fb\u6dfb\u52a0\u5373\u53ef\u3002 \u5982\u6b64\u8bbe\u7f6e\uff0c\u65e0\u9700\u4e66\u5199\u4ee3\u7801\uff0c\u5728\u9879\u76ee\u8fed\u4ee3\u8fc7\u7a0b\u4e2d\u6709\u89d2\u8272\u52a0\u5165\u90fd\u53ef\u4ee5\u7528\u8fd9\u79cd\u4fbf\u6377\u7684\u65b9\u5f0f\u8fdb\u884c\u64cd\u4f5c\u3002 \u6743\u9650\u8bbe\u7f6e\u7684\u53c2\u6570\u4ee5\u53ca\u64cd\u4f5c\u89e3\u91ca\u5982\u4e0b\uff1a \u53c2\u6570\u540d \u542b\u4e49 add_fields \u6dfb\u52a0\u65b0\u5b57\u6bb5\u5230 Class create \u4fdd\u5b58\u4e00\u4e2a\u4ece\u672a\u521b\u5efa\u8fc7\u7684\u65b0\u5bf9\u8c61 delete \u5220\u9664\u4e00\u4e2a\u5bf9\u8c61 find \u53d1\u8d77\u4e00\u6b21\u5bf9\u8c61\u5217\u8868\u67e5\u8be2 get \u901a\u8fc7 objectId \u83b7\u53d6\u5bf9\u8c61 update \u4fdd\u5b58\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u5e76\u4e14\u88ab\u4fee\u6539\u7684\u5bf9\u8c61 \u6743\u9650\u5bf9\u8c61\u540d \u542b\u4e49 \u6240\u6709\u7528\u6237 \u4efb\u610f\u7528\u6237\u5747\u6709\u6743\u9650 \u767b\u5f55\u7528\u6237 \u7528\u6237\u767b\u5f55\u4e4b\u540e\uff0c\u5177\u6709\u6743\u9650 \u6307\u5b9a\u7528\u6237 \u53ef\u4ee5\u6307\u5b9a\u5177\u4f53\u7684\u7528\u6237\uff08 _User \uff09\u4e5f\u53ef\u4ee5\u6307\u5b9a\u5177\u4f53\u7684\u89d2\u8272\uff08 _Role \uff09 \u8868 Class \u548c\u5bf9\u8c61 Object \u7684 ACL \u7ec4\u5408 \u5047\u8bbe\u73b0\u5728\u9700\u8981\u65b0\u589e\u4e00\u5f20\u8868\uff0c\u6211\u4eec\u63a8\u8350\u6709\u5173\u7cfb\u578b\u6570\u636e\u5e93\u5f00\u53d1\u7ecf\u9a8c\u7684\u5f00\u53d1\u8005\u91c7\u7528\u5982\u4e0b\u6b65\u9aa4\uff1a \u8fdb\u5165 \u63a7\u5236\u53f0 \u5b58\u50a8 \u521b\u5efa Class \uff0c\u4f1a\u5f39\u51fa\u5982\u4e0b\u754c\u9762\uff1a \u7136\u540e\u6839\u636e\u5b9e\u9645\u4e1a\u52a1\u903b\u8f91\u7684\u9700\u6c42\u9009\u62e9\u8fd9\u5f20\u8868\u7684\u6743\u9650\uff0c\u4f8b\u5982\u8fd9\u5f20\u8868\u9ed8\u8ba4\u662f\u9650\u5236\u5199\u5165\u3002 \u800c\u5728\u540e\u671f\u5f00\u53d1\u7684\u8fc7\u7a0b\u4e2d\u53d1\u73b0\uff0c\u6709\u4e00\u4e24\u4e2a\u5bf9\u8c61\u9700\u8981\u5171\u4eab\u7ed9\u5176\u4ed6\u7528\u6237\u4e5f\u53ef\u4fee\u6539\uff0c\u6bd4\u5982\u4e00\u7bc7\u535a\u5ba2\u60f3\u53d1\u5e03\u5728\u516c\u7f51\u4e0a\uff0c\u5ba1\u6838\u4eba\u5458\u662f\u9700\u8981\u5199\u6743\u9650\u7684\uff0c\u56e0\u6b64\u53ef\u4ee5\u901a\u8fc7\u4ee3\u7801\u5728\u521b\u5efa\u5bf9\u8c61\u7684\u65f6\u5019\u6307\u5b9a\u4e00\u4e2a ACL \u5c31\u53ef\u4ee5\u5b9e\u73b0\u8fd9\u79cd\u52a8\u6001\u7684 ACL \u6548\u679c\uff08\u4ee3\u7801\u793a\u4f8b \u5355\u7528\u6237\u6743\u9650\u8bbe\u7f6e \uff09\u3002 \u603b\u4e4b\uff0cLeanCloud \u7684 ACL \u7684\u9274\u6743\u903b\u8f91\u662f\u5148\u9a8c\u8bc1 Class \u7ea7\u522b\u7684 ACL \u662f\u5426\u5141\u8bb8\u901a\u8fc7\uff0c\u7d27\u63a5\u7740\u5c31\u4f1a\u9488\u5bf9\u8bbf\u95ee\u7684\u5bf9\u8c61\u81ea\u8eab\u7684 ACL \u8fdb\u884c\u9274\u6743\u3002 \u6362\u8a00\u4e4b\uff0c\u504f\u5411\u4e8e\u9759\u6001\u8bbe\u7f6e\u7684\u5e94\u7528\u53ef\u4ee5\u901a\u8fc7\u521b\u5efa Class \u65f6\u5019\u7684\u9009\u62e9\u6765\u5b9e\u73b0\uff0c\u800c\u6709\u52a8\u6001\u9700\u6c42\u7684\u5e94\u7528\u5c3d\u91cf\u5728\u521b\u5efa\u5bf9\u8c61\u7684\u65f6\u5019\u8bbe\u7f6e ACL\u3002 \u83b7\u53d6\u5bf9\u8c61\u7684 ACL \u503c \u67e5\u8be2\u6570\u636e\u65f6\uff0cSDK \u9ed8\u8ba4\u4e0d\u4f1a\u8fd4\u56de\u5bf9\u8c61\u7684 ACL \u503c\u3002\u5982\u679c\u60f3\u5728\u83b7\u53d6\u5bf9\u8c61\u7684\u540c\u65f6\u8fd4\u56de\u5bf9\u8c61\u7684 ACL \u503c\uff0c\u9700\u8981\u540c\u65f6\u6ee1\u8db3\u4e0b\u9762\u4e24\u4e2a\u6761\u4ef6\uff1a \u8fdb\u5165 \u63a7\u5236\u53f0 \u5b58\u50a8 \u8bbe\u7f6e \u5176\u4ed6 \uff0c\u52fe\u9009\u300c\u67e5\u8be2\u65f6\u8fd4\u56de\u503c\u5305\u62ec ACL\u300d\u624d\u53ef\u4ee5\u5728\u67e5\u8be2\u7ed3\u679c\u4e2d\u83b7\u53d6\u5230 ACL \u7684\u6570\u636e\u3002 \u5ba2\u6237\u7aef\u67e5\u8be2\u5bf9\u8c61\u65f6\u9700\u8981\u6307\u5b9a includeACL \u3002 \u4ee3\u7801\u5982\u4e0b\uff1a Objective-C AVQuery * query = [ AVQuery queryWithClassName : @ Todo ]; query . includeACL = YES ; [ query findObjectsInBackgroundWithBlock : ^ ( NSArray * objects , NSError * error ) { }]; Swift let query = AVQuery ( className : Todo ) query . includeACL = true query . findObjectsInBackground { ( objects , error ) in } Java AVQuery AVObject query = new AVQuery ( Todo ); query . includeACL ( true ); query . findInBackground ( new FindCallback AVObject () { @Override public void done ( List AVObject list , AVException e ) { } }); JavaScript var query = new AV . Query ( Todo ); query . includeACL ( true ); query . find (). then ( function ( todos ) { // \u67e5\u8be2\u7ed3\u679c }). catch ( function ( error ){ // \u5f02\u5e38\u5904\u7406 }) \u8d85\u7ea7\u6743\u9650 ACL \u53ef\u4ee5\u6ee1\u8db3\u5e38\u89c1\u7684\u9700\u6c42\uff0c\u4f46\u662f _User \u8868\u6bd4\u8f83\u7279\u6b8a\uff0c\u5b83\u4f1a\u5ffd\u7565 ACL \u7684\u8bbe\u7f6e\uff0c\u8868\u73b0\u4e3a\uff1a\u4efb\u4f55\u7528\u6237\u90fd\u65e0\u6cd5\u4fee\u6539\u5176\u4ed6\u7528\u6237\u7684\u5c5e\u6027\uff0c\u6bd4\u5982\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u662f A\uff0c\u800c\u4ed6\u60f3\u901a\u8fc7\u8bf7\u6c42\u53bb\u4fee\u6539 B \u7528\u6237\u7684\u7528\u6237\u540d\uff0c\u5bc6\u7801\u6216\u8005\u5176\u4ed6\u81ea\u5b9a\u4e49\u5c5e\u6027\uff0c\u662f\u4e0d\u4f1a\u751f\u6548\u7684\u3002 \u4f46\u662f\u6709\u65f6\u4e00\u4e9b\u5e94\u7528\u7684\u9700\u6c42\u8f83\u4e3a\u7279\u6b8a\uff0c\u6bd4\u5982\uff0c\u8bba\u575b\u7684\u7ba1\u7406\u5458\u53ef\u4ee5\u4fee\u6539\u67d0\u4e9b\u7528\u6237\u7684\u6635\u79f0\uff0c\u6027\u522b\uff08\u5047\u8bbe\u6635\u79f0\u548c\u6027\u522b\u662f\u5b58\u50a8\u5728 _User \u7684 gender \u3001 age \u5b57\u6bb5\u4e0a\uff09\uff0c\u6b64\u65f6\u901a\u8fc7\u8bbe\u7f6e\u7ba1\u7406\u5458\u62e5\u6709\u8be5\u7528\u6237\u7684 ACL \u5199\u7684\u6743\u9650\u662f\u65e0\u6cd5\u5b9e\u73b0\u9884\u60f3\u6548\u679c\u7684\u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u79cd\u65b9\u5f0f\u53bb\u63d0\u9ad8\u64cd\u4f5c\u7684\u6743\u9650\uff0c\u5728\u652f\u6301\u4e91\u5f15\u64ce\u7684 SDK \u4e2d\u7684\u5b9e\u73b0\u65b9\u5f0f\u662f\u5728\u521d\u59cb\u5316\u7684\u65f6\u5019\uff0c\u589e\u52a0\u4e00\u4e2a Master Key \u7684\u5b57\u6bb5\u4f5c\u4e3a\u63d0\u9ad8\u6743\u9650\u7684\u63a5\u53e3\u3002Master Key \u53ef\u4ee5\u5728 \u63a7\u5236\u53f0 \u8bbe\u7f6e \u5e94\u7528 Key \u4e2d\u83b7\u53d6\u3002 {{ docs.alert(\"Objective-C \u4ee5\u53ca Android SDK \u4e0d\u53ef\u4ee5\u4f7f\u7528 Master Key\u3002\") }} \u6700\u4f73\u5b9e\u8df5 \u672c\u7ae0\u8282\u7684\u76ee\u7684\u662f\u4ecb\u7ecd\u5982\u4f55\u5728 \u4e91\u5f15\u64ce \u91cc\u9762\u4f7f\u7528 ACL \u3002 \u6211\u4eec\u5148\u6765\u63a2\u7d22\u4e00\u4e2a\u9700\u6c42\uff1a\u67d0\u4e2a\u5e94\u7528\u5b83\u62e5\u6709\u4f17\u591a\u5ba2\u6237\u7aef\uff0ciOS\u3001Andorid\u3001Windows \u7b49\uff0c\u8fd8\u6709 Web \u7248\uff0c\u672a\u6765\u53ef\u80fd\u8fd8\u4f1a\u6709\u624b\u73af\uff0c\u624b\u8868\u5ba2\u6237\u7aef\uff0c\u90a3\u4e48\u5173\u4e8e ACL \u7684\u4ee3\u7801\u4f1a\u904d\u5e03\u5728\u6240\u6709\u5ba2\u6237\u7aef\uff0c\u90a3\u4e48\u5f00\u53d1\u8005\u5c31\u4f1a\u9700\u8981\u4e0d\u65ad\u7684\u5347\u7ea7\u548c\u7ef4\u62a4\u903b\u8f91\u5341\u5206\u7c7b\u4f3c\u7684\u5ba2\u6237\u7aef\u4ee3\u7801\uff0c\u5230\u4e86\u8fd9\u4e00\u6b65\uff0c\u6211\u4eec\u66f4\u63a8\u8350\uff0c\u5f00\u53d1\u8005\u5728\u670d\u52a1\u7aef\u5b9a\u4e49\u4e00\u6bb5 ACL \u7684\u903b\u8f91\uff0c\u7edf\u4e00\u5904\u7406 ACL \u6743\u9650\u5206\u914d\u7684\u95ee\u9898\u3002 \u3010\u603b\u7ed3\u3011\u5047\u5982\u5e94\u7528\u7684\u5e73\u53f0\u6bd4\u8f83\u56fa\u5b9a\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u8003\u8651\u91c7\u53d6\u672c\u6587\u524d\u9762\u6240\u4ecb\u7ecd\u7684\u5ba2\u6237\u7aef\u4ee3\u7801\u5b9e\u73b0 ACL \u4ee3\u7801\u3002\u5982\u679c\u5e94\u7528\u7684\u5e73\u53f0\u6bd4\u8f83\u591a\uff0c\u591a\u5e73\u53f0\u591a\u5ba2\u6237\u7aef\u5c31\u63a8\u8350\u4f7f\u7528 \u4e91\u5f15\u64ce Hook \u51fd\u6570\u4f7f\u7528 ACL \u3002","title":"\u6570\u636e\u5b89\u5168\u8be6\u89e3"},{"location":"storage/acl/#acl","text":"ACL \u662f Access Control List \u7684\u7f29\u5199\uff0c\u79f0\u4e3a\u8bbf\u95ee\u63a7\u5236\u5217\u8868\uff0c\u5305\u542b\u4e86\u5bf9\u4e00\u4e2a\u5bf9\u8c61\u6216\u4e00\u6761\u8bb0\u5f55\u53ef\u8fdb\u884c\u4f55\u79cd\u64cd\u4f5c\u7684\u6743\u9650\u5b9a\u4e49\u3002\u4f8b\u5982\u4e00\u4e2a\u6587\u4ef6\u5bf9\u8c61\u7684 ACL \u4e3a Alice : read , write ; Bob : read \uff0c\u8fd9\u4ee3\u8868 Alice \u5bf9\u8be5\u6587\u4ef6\u65e2\u80fd\u8bfb\u53c8\u80fd\u5199\uff0c\u800c Bob \u53ea\u80fd\u8bfb\u53d6\u3002 LeanCloud \u4e91\u7aef\u4f7f\u7528\u7684 ACL \u673a\u5236\u662f\u5c06\u6bcf\u4e2a\u64cd\u4f5c\u6388\u6743\u7ed9\u7279\u5b9a\u7684 User \u7528\u6237\u6216\u8005 Role \u89d2\u8272\uff0c\u53ea\u5141\u8bb8\u8fd9\u4e9b\u7528\u6237\u6216\u89d2\u8272\u5bf9\u4e00\u4e2a\u5bf9\u8c61\u6267\u884c\u8fd9\u4e9b\u64cd\u4f5c\u3002\u4f8b\u5982\u5982\u4e0b ACL \u5b9a\u4e49\uff1a { * :{ read : true , write : false }, role:admin :{ read : true , write : true }, 58113fbda0bb9f0061ddc869 :{ read : true , write : true } } \u6240\u6709\u4eba\u53ef\u8bfb\uff0c\u4f46\u4e0d\u80fd\u5199\uff08 * \u4ee3\u8868\u6240\u6709\u4eba\uff09\u3002 \u89d2\u8272\u4e3a admin \u7684\u7528\u6237\u53ca\u5b50\u89d2\u8272\uff0c\u53ef\u8bfb\u53ef\u5199\u3002 ID \u4e3a 58113fbda0bb9f0061ddc869 \u7684\u7528\u6237\uff0c\u53ef\u8bfb\u53ef\u5199\u3002 LeanCloud \u4f7f\u7528\u5185\u5efa\u6570\u636e\u8868 _User \u6765\u7ef4\u62a4 \u7528\u6237/\u8d26\u6237\u7cfb\u7edf \uff0c\u548c\u5185\u5efa\u6570\u636e\u8868 _Role \u6765\u7ef4\u62a4 \u89d2\u8272 \u3002\u89d2\u8272\u65e2\u53ef\u4ee5\u5305\u542b\u7528\u6237\uff0c\u4e5f\u53ef\u4ee5\u5305\u542b\u5176\u4ed6\u89d2\u8272\uff0c\u4e5f\u5c31\u662f\u8bf4\u89d2\u8272\u6709\u5c42\u6b21\u5173\u7cfb\uff0c\u5c06\u6743\u9650\u6388\u4e88\u4e00\u4e2a\u89d2\u8272\u4ee3\u8868\u8be5\u89d2\u8272\u6240\u5305\u542b\u7684\u5176\u4ed6\u89d2\u8272\u4e5f\u4f1a\u5f97\u5230\u76f8\u5e94\u7684\u6743\u9650\u3002 LeanCloud \u4e91\u7aef\u5bf9\u5ba2\u6237\u7aef\u53d1\u8fc7\u6765\u7684\u6bcf\u4e00\u4e2a\u8bf7\u6c42\u90fd\u8981\u8fdb\u884c\u4e86\u7528\u6237\u8eab\u4efd\u9274\u522b\u548c ACL \u8bbf\u95ee\u6388\u6743\u7684\u4e25\u683c\u68c0\u67e5\u3002\u56e0\u6b64\uff0c\u4f7f\u7528 ACL \u53ef\u4ee5\u7075\u6d3b\u4e14\u6700\u5927\u7a0b\u5ea6\u5730\u4fdd\u62a4\u5e94\u7528\u6570\u636e\uff0c\u63d0\u5347\u8bbf\u95ee\u5b89\u5168\u3002\u8be6\u7ec6\u80cc\u666f\u53ca\u539f\u56e0\u8bf7\u53c2\u8003 ACL \u4e0e\u6570\u636e\u5b89\u5168 \u3002 \u4e0b\u9762\u4f7f\u7528\u4e00\u4e2a\u6781\u7b80\u7684\u8bba\u575b\u7684\u573a\u666f\u6765\u4e3e\u4f8b\uff1a\u7528\u6237\u53ea\u80fd\u4fee\u6539\u6216\u8005\u5220\u9664\u81ea\u5df1\u53d1\u7684\u5e16\u5b50\uff0c\u5176\u4ed6\u7528\u6237\u5219\u53ea\u80fd\u67e5\u770b\u3002","title":"ACL \u6743\u9650\u7ba1\u7406\u5f00\u53d1\u6307\u5357"},{"location":"storage/acl/#acl_1","text":"\u6587\u6863\u4e2d\u4f7f\u7528\u7684 AV.User.current() \u8fd9\u4e2a\u65b9\u6cd5\u4ec5\u4ec5\u9488\u5bf9\u6d4f\u89c8\u5668\u7aef\u6709\u6548\uff0c\u5728 \u4e91\u5f15\u64ce\u4e2d\u8be5\u63a5\u53e3\u65e0\u6cd5\u4f7f\u7528 \u3002\u4e91\u5f15\u64ce\u4e2d\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003 \u4e91\u5f15\u64ce\u6307\u5357 \u5904\u7406\u7528\u6237\u767b\u5f55\u548c\u767b\u51fa \u3002","title":"\u4e91\u5f15\u64ce\u4f7f\u7528 ACL"},{"location":"storage/acl/#_1","text":"","title":"\u57fa\u4e8e\u7528\u6237\u7684\u6743\u9650\u7ba1\u7406"},{"location":"storage/acl/#_2","text":"\u4ee5\u4e0a\u9700\u6c42\u5728 LeanCloud \u4e2d\u5b9e\u73b0\u7684\u6b65\u9aa4\u5982\u4e0b\uff1a \u5199\u4e00\u7bc7\u5e16\u5b50 \u8bbe\u7f6e\u5e16\u5b50\u7684\u300c\u8bfb\u300d\u6743\u9650\u4e3a\u6240\u6709\u4eba\u53ef\u8bfb \u8bbe\u7f6e\u5e16\u5b50\u7684\u300c\u5199\u300d\u6743\u9650\u4e3a\u4f5c\u8005\u53ef\u5199 \u4fdd\u5b58\u5e16\u5b50 \u5b9e\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a Objective-C // \u65b0\u5efa\u4e00\u4e2a\u5e16\u5b50\u5bf9\u8c61 AVObject * post = [ AVObject objectWithClassName : @ Post ]; [ post setObject : @ \u5927\u5bb6\u597d\uff0c\u6211\u662f\u65b0\u4eba forKey : @ title ]; //\u65b0\u5efa\u4e00\u4e2a ACL \u5b9e\u4f8b AVACL * acl = [ AVACL ACL ]; [ acl setPublicReadAccess : YES ]; // \u8bbe\u7f6e\u516c\u5f00\u7684\u300c\u8bfb\u300d\u6743\u9650\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u9605\u8bfb [ acl setWriteAccess : YES forUser :[ AVUser currentUser ]]; // \u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u300c\u5199\u300d\u6743\u9650\uff0c\u6709\u4e14\u4ec5\u6709\u5f53\u524d\u7528\u6237\u53ef\u4ee5\u4fee\u6539\u8fd9\u6761 Post post . ACL = acl ; // \u5c06 ACL \u5b9e\u4f8b\u8d4b\u4e88 Post\u5bf9\u8c61 [ post saveInBackground ]; Swift let post = AVObject ( className : Post ) post [ title ] = \u5927\u5bb6\u597d\uff0c\u6211\u662f\u65b0\u4eba let acl = AVACL () acl . setPublicReadAccess ( true ) if let currentUser = AVUser . current () { acl . setWriteAccess ( true , for : currentUser ) } post . acl = acl post . save () Java AVObject post = new AVObject ( Post ); post . put ( title , \u5927\u5bb6\u597d\uff0c\u6211\u662f\u65b0\u4eba ); //\u65b0\u5efa\u4e00\u4e2a ACL \u5b9e\u4f8b AVACL acl = new AVACL (); acl . setPublicReadAccess ( true ); // \u8bbe\u7f6e\u516c\u5f00\u7684\u300c\u8bfb\u300d\u6743\u9650\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u9605\u8bfb acl . setWriteAccess ( AVUser . getCurrentUser (), true ); // \u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u300c\u5199\u300d\u6743\u9650\uff0c\u6709\u4e14\u4ec5\u6709\u5f53\u524d\u7528\u6237\u53ef\u4ee5\u4fee\u6539\u8fd9\u6761 Post post . setACL ( acl ); // \u5c06 ACL \u5b9e\u4f8b\u8d4b\u4e88 Post\u5bf9\u8c61 post . saveInBackground (); // \u4fdd\u5b58 JavaScript // \u65b0\u5efa\u4e00\u4e2a\u5e16\u5b50\u5bf9\u8c61 var Post = AV . Object . extend ( Post ); var post = new Post (); post . set ( title , \u5927\u5bb6\u597d\uff0c\u6211\u662f\u65b0\u4eba ); // \u65b0\u5efa\u4e00\u4e2a ACL \u5b9e\u4f8b var acl = new AV . ACL (); acl . setPublicReadAccess ( true ); acl . setWriteAccess ( AV . User . current (), true ); // \u5c06 ACL \u5b9e\u4f8b\u8d4b\u4e88 Post \u5bf9\u8c61 post . setACL ( acl ); post . save (). then ( function () { // \u4fdd\u5b58\u6210\u529f }). catch ( function ( error ) { console . log ( error ); }); Python import leancloud # \u65b0\u5efa\u4e00\u4e2a\u5e16\u5b50\u5bf9\u8c61 Post = leancloud . Object . extend ( Post ) post = Post () post . set ( title , \u5927\u5bb6\u597d\uff0c\u6211\u662f\u65b0\u4eba ) # \u65b0\u5efa\u4e00\u4e2aleancloud.ACL\u5b9e\u4f8b acl = leancloud . ACL () acl . set_public_read_access ( True ) # \u8fd9\u91cc\u8bbe\u7f6e\u67d0\u4e2a user \u7684\u5199\u6743\u9650 acl . set_write_access ( user_objectId , True ) # \u5c06 leancloud.ACL \u5b9e\u4f8b\u8d4b\u4e88 Post \u5bf9\u8c61 post . set_acl ( acl ) post . save () \u4ee5\u4e0a\u4ee3\u7801\u4ea7\u751f\u7684\u6548\u679c\u5728 \u63a7\u5236\u53f0 \u5b58\u50a8 Post \u8868 \u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u6761\u8bb0\u5f55\u7684 ACL \u5217\u4e0a\u7684\u503c\u4e3a\uff1a { * :{ read : true }, 55b9df0400b0f6d7efaa8801 :{ write : true } } \u6b64\u65f6\uff0c\u8fd9\u79cd ACL \u503c\u7684\u8868\u793a\uff1a\u6240\u6709\u7528\u6237\u5747\u6709\u300c\u8bfb\u300d\u6743\u9650\uff0c\u800c objectId \u4e3a 55b9df0400b0f6d7efaa8801 \u62e5\u6709\u300c\u5199\u300d\u6743\u9650\uff0c\u5176\u4ed6\u7528\u6237\u4e0d\u5177\u5907\u300c\u5199\u300d\u6743\u9650\u3002","title":"\u5355\u7528\u6237\u6743\u9650\u8bbe\u7f6e"},{"location":"storage/acl/#_3","text":"\u5047\u5982\u9700\u6c42\u589e\u52a0\u4e3a\uff1a\u5e16\u5b50\u7684\u4f5c\u8005\u5141\u8bb8\u67d0\u4e2a\u7279\u5b9a\u7684\u7528\u6237\u53ef\u4ee5\u4fee\u6539\u5e16\u5b50\uff0c\u9664\u6b64\u4e4b\u5916\u7684\u5176\u4ed6\u4eba\u4e0d\u53ef\u4fee\u6539\u3002 \u5b9e\u73b0\u6b65\u9aa4\u5c31\u662f\u989d\u5916\u6307\u5b9a\u4e00\u4e2a\u7528\u6237\uff0c\u4e3a\u4ed6\u8bbe\u7f6e\u5e16\u5b50\u7684\u300c\u5199\u300d\u6743\u9650\uff1a \u6ce8\u610f \u5f00\u542f _User \u8868\u7684\u67e5\u8be2\u6743\u9650 \u624d\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u4ee3\u7801\u3002 Objective-C AVQuery * query = [ AVUser query ]; [ query whereKey : @ objectId equalTo : @ 55f1572460b2ce30e8b7afde ]; [ query findObjectsInBackgroundWithBlock : ^ ( NSArray * objects , NSError * error ) { if ( error == nil ) { // \u65b0\u5efa\u4e00\u4e2a\u5e16\u5b50\u5bf9\u8c61 AVObject * post = [ AVObject objectWithClassName : @ Post ]; [ post setObject : @ \u8fd9\u662f\u6211\u7684\u7b2c\u4e8c\u6761\u53d1\u8a00\uff0c\u8c22\u8c22\u5927\u5bb6\uff01 forKey : @ title ]; [ post setObject : @ \u6211\u6700\u8fd1\u559c\u6b22\u770b\u8db3\u7403\u548c\u7bee\u7403\u4e86\u3002 forKey : @ content ]; //\u65b0\u5efa\u4e00\u4e2a ACL \u5b9e\u4f8b AVACL * acl = [ AVACL ACL ]; [ acl setPublicReadAccess : YES ]; // \u8bbe\u7f6e\u516c\u5f00\u7684\u300c\u8bfb\u300d\u6743\u9650\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u9605\u8bfb [ acl setWriteAccess : YES forUser :[ AVUser currentUser ]]; // \u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u300c\u5199\u300d\u6743\u9650 AVUser * otherUser = [ objects objectAtIndex : 0 ]; // \u8bfb\u53d6 admin [ acl setWriteAccess : YES forUser : otherUser ]; post . ACL = acl ; // \u5c06 ACL \u5b9e\u4f8b\u8d4b\u4e88 Post \u5bf9\u8c61 [ post saveInBackground ]; } else { NSLog ( @ error ); } }]; Swift let query = AVUser . query () query . whereKey ( objectId , equalTo : 55f1572460b2ce30e8b7afde ) query . findObjectsInBackground { objects , error in if let error = error { print ( error ) } else { let post = AVObject ( className : Post ) post [ title ] = \u8fd9\u662f\u6211\u7684\u7b2c\u4e8c\u6761\u53d1\u8a00\uff0c\u8c22\u8c22\u5927\u5bb6\uff01 post [ content ] = \u6211\u6700\u8fd1\u559c\u6b22\u770b\u8db3\u7403\u548c\u7bee\u7403\u4e86\u3002 let acl = AVACL () // Anyone can read this post. acl . setPublicReadAccess ( true ) // Current user and another user can manage this post. if let currentUser = AVUser . current () { acl . setWriteAccess ( true , for : currentUser ) } if let anotherUser = objects ?. first as ? AVUser { acl . setWriteAccess ( true , for : anotherUser ) } post . acl = acl post . save () } } Java AVQuery AVUser query = AVUser . getQuery (); query . whereEqualTo ( objectId , 55f1572460b2ce30e8b7afde ); query . findInBackground ( new FindCallback AVUser () { @Override public void done ( List AVUser list , AVException e ) { if ( e == null ){ // \u65b0\u5efa\u4e00\u4e2a\u5e16\u5b50\u5bf9\u8c61 AVObject post = new AVObject ( Post ); post . put ( title , \u8fd9\u662f\u6211\u7684\u7b2c\u4e8c\u6761\u53d1\u8a00\uff0c\u8c22\u8c22\u5927\u5bb6\uff01 ); post . put ( content , \u6211\u6700\u8fd1\u559c\u6b22\u770b\u8db3\u7403\u548c\u7bee\u7403\u4e86\u3002 ); //\u65b0\u5efa\u4e00\u4e2a ACL \u5b9e\u4f8b AVACL acl = new AVACL (); acl . setPublicReadAccess ( true ); // \u8bbe\u7f6e\u516c\u5f00\u7684\u300c\u8bfb\u300d\u6743\u9650\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u9605\u8bfb acl . setWriteAccess ( AVUser . getCurrentUser (), true ); //\u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u300c\u5199\u300d\u6743\u9650 //\u6ce8\uff1a\u6b64\u5904\u4e3a\u4e86\u7b80\u5316\u5c55\u73b0\u4ee3\u7801\uff0c\u672a\u505a list \u4e3a\u7a7a\u7684\u5224\u65ad\u3002 AVUser anotherUser = list . get ( 0 ); acl . setWriteAccess ( anotherUser , true ); // \u5c06 ACL \u5b9e\u4f8b\u8d4b\u4e88 Post\u5bf9\u8c61 post . setACL ( acl ); //\u4fdd\u5b58\u5230\u4e91\u7aef post . saveInBackground (); } else { // handle exception } } }); JavaScript // \u521b\u5efa\u4e00\u4e2a\u9488\u5bf9 User \u7684\u67e5\u8be2 var query = new AV . Query ( AV . User ); query . get ( 55f1572460b2ce30e8b7afde ). then ( function ( otherUser ) { var post = new AV . Object ( Post ); post . set ( title , \u8fd9\u662f\u6211\u7684\u7b2c\u4e8c\u6761\u53d1\u8a00\uff0c\u8c22\u8c22\u5927\u5bb6\uff01 ); post . set ( content , \u6211\u6700\u8fd1\u559c\u6b22\u770b\u8db3\u7403\u548c\u7bee\u7403\u4e86\u3002 ); // \u65b0\u5efa\u4e00\u4e2a ACL \u5b9e\u4f8b var acl = new AV . ACL (); acl . setPublicReadAccess ( true ); acl . setWriteAccess ( AV . User . current (), true ); acl . setWriteAccess ( otherUser , true ); // \u5c06 ACL \u5b9e\u4f8b\u8d4b\u4e88 Post \u5bf9\u8c61 post . setACL ( acl ); // \u4fdd\u5b58\u5230\u4e91\u7aef return post . save (); }). then ( function () { // \u4fdd\u5b58\u6210\u529f }). catch ( function ( error ) { // \u9519\u8bef\u4fe1\u606f console . log ( error ); }); Python import leancloud # \u767b\u5f55\u4e00\u4e2a\u7528\u6237 user = leancloud . User () user . login ( my_user_name , my_password ) # \u65b0\u5efa\u4e00\u4e2a Post \u5bf9\u8c61 Post = leancloud . Object . extend ( Post ) post = Post () post . set ( title , \u8fd9\u662f\u6211\u7684\u7b2c\u4e8c\u6761\u53d1\u8a00\uff0c\u8c22\u8c22\u5927\u5bb6\uff01 ) post . set ( content , \u6211\u6700\u8fd1\u559c\u6b22\u770b\u8db3\u7403\u548c\u7bee\u7403\u4e86\u3002 ) # \u65b0\u5efa\u4e00\u4e2a leancloud.ACL \u5b9e\u4f8b acl = leancloud . ACL () acl . set_public_read_access ( True ) # \u8bbe\u7f6e\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u7684\u53ef\u5199\u6743\u9650 acl . set_write_access ( leancloud . User . get_current () . id , True ) # \u8bbe\u5b9a\u6307\u5b9a objectId \u7528\u6237\u7684\u53ef\u5199\u6743\u9650 acl . set_write_access ( 55f1572460b2ce30e8b7afde , True ) post . set_acl ( acl ) post . save () \u6267\u884c\u5b8c\u6bd5\u4e0a\u9762\u7684\u4ee3\u7801\uff0c\u56de\u5230\u63a7\u5236\u53f0\uff0c\u53ef\u4ee5\u770b\u5230\uff0c\u8be5\u6761 Post \u8bb0\u5f55\u91cc\u9762\u7684 ACL \u5217\u7684\u5185\u5bb9\u5982\u4e0b\uff1a { * :{ read : true }, 55b9df0400b0f6d7efaa8801 :{ write : true }, 55f1572460b2ce30e8b7afde :{ write : true } } \u4ece\u7ed3\u679c\u53ef\u4ee5\u770b\u51fa\uff0c\u8be5\u6761 Post \u5df2\u7ecf\u5141\u8bb8 Id \u4e3a 55b9df0400b0f6d7efaa8801 \u4ee5\u53ca 55f1572460b2ce30e8b7afde \u4e24\u4e2a\u7528\u6237\uff08AVUser\uff09\u53ef\u4ee5\u4fee\u6539\uff0c\u4ed6\u4eec\u62e5\u6709\u5199\u6743\u9650 write : ture \u3002 \u57fa\u4e8e\u7528\u6237\u7684\u6743\u9650\u7ba1\u7406\u6bd4\u8f83\u7b80\u5355\u76f4\u63a5\uff0c\u5f00\u53d1\u8005\u7406\u89e3\u8d77\u6765\u6210\u672c\u8f83\u4f4e\u3002","title":"\u591a\u7528\u6237\u6743\u9650\u8bbe\u7f6e"},{"location":"storage/acl/#_4","text":"\u63a5\u4e0b\u6765\u8bba\u575b\u8981\u5347\u7ea7\uff0c\u9700\u8981\u4e00\u4e2a\u7279\u5b9a\u7684\u7ba1\u7406\u5458 Administrator \u6765\u7edf\u4e00\u7ba1\u7406\u8bba\u575b\u7684\u5e16\u5b50\uff0c\u4ed6\u53ef\u4ee5\u4fee\u6539\u5e16\u5b50\u7684\u5185\u5bb9\uff0c\u5220\u9664\u4e0d\u5408\u9002\u7684\u5e16\u5b50\u3002 \u8bba\u575b\u5347\u7ea7\u4e4b\u540e\uff0c\u7528\u6237\u53d1\u5e03\u5e16\u5b50\u7684\u6b65\u9aa4\u9700\u8981\u9488\u5bf9\u4e0a\u4e00\u5c0f\u8282\u505a\u5982\u4e0b\u8c03\u6574\uff1a \u5199\u4e00\u7bc7\u5e16\u5b50 \u8bbe\u7f6e\u5e16\u5b50\u7684\u300c\u8bfb\u300d\u6743\u9650\u4e3a\u6240\u6709\u4eba\u3002 \u8bbe\u7f6e\u5e16\u5b50\u7684\u300c\u5199\u300d\u6743\u9650\u4e3a\u4f5c\u8005\u4ee5\u53ca\u7ba1\u7406\u5458 \u4fdd\u5b58\u5e16\u5b50 \u6211\u4eec\u53ef\u4ee5\u8bbe\u60f3\u4e00\u4e0b\uff0c\u6bcf\u5f53\u8bba\u575b\u4ea7\u751f\u4e00\u7bc7\u5e16\u5b50\uff0c\u5c31\u5f97\u4e3a\u7ba1\u7406\u5458\u6dfb\u52a0\u8fd9\u7bc7\u5e16\u5b50\u7684\u300c\u5199\u300d\u6743\u9650\u3002 \u5047\u5982\u505a\u6743\u9650\u7ba1\u7406\u529f\u80fd\u7684\u65f6\u5019\u90fd\u4f9d\u8d56\u57fa\u4e8e\u7528\u6237\u7684\u6743\u9650\u7ba1\u7406\uff0c\u90a3\u4e48\u4e00\u65e6\u4ea7\u751f\u53d8\u5316\u5c31\u4f1a\u53d1\u73b0\u8fd9\u79cd\u5b9e\u73b0\u65b9\u5f0f\u7684\u5c40\u9650\u6027\u3002 \u6bd4\u5982\u65b0\u589e\u4e86\u4e00\u4e2a\u7ba1\u7406\u5458\uff0c\u65b0\u7684\u7ba1\u7406\u5458\u9700\u8981\u9488\u5bf9\u76ee\u524d\u8bba\u575b\u6240\u6709\u7684\u5e16\u5b50\u62e5\u6709\u7ba1\u7406\u5458\u5e94\u6709\u7684\u6743\u9650\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u628a\u6570\u636e\u5e93\u73b0\u6709\u7684\u6240\u6709\u5e16\u5b50\u5faa\u73af\u4e00\u904d\uff0c\u4e3a\u65b0\u7684\u7ba1\u7406\u5458\u589e\u52a0\u300c\u5199\u300d\u6743\u9650\u3002 \u5047\u5982\u8bba\u575b\u53c8\u4e00\u6b21\u5347\u7ea7\u4e86\uff0c\u4ed8\u8d39\u4f1a\u5458\u4eab\u6709\u7279\u6b8a\u5e16\u5b50\u7684\u8bfb\u6743\u9650\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u5728\u53d1\u5e03\u65b0\u5e16\u5b50\u7684\u65f6\u5019\uff0c\u8bbe\u7f6e\u300c\u8bfb\u300d\u6743\u9650\u7ed9\u90e8\u5206\u4eba\uff08\u4ed8\u8d39\u4f1a\u5458\uff09\u3002\u8fd9\u9700\u8981\u67e5\u8be2\u6240\u6709\u4ed8\u8d39\u4f1a\u5458\u5e76\u4e00\u4e00\u8bbe\u7f6e\u3002 \u6beb\u65e0\u7591\u95ee\uff0c\u8fd9\u79cd\u5b9e\u73b0\u65b9\u5f0f\u662f\u5b8c\u5168\u5931\u63a7\u7684\uff0c\u57fa\u4e8e\u7528\u6237\u7684\u6743\u9650\u7ba1\u7406\uff0c\u5728\u9488\u5bf9\u7b80\u5355\u7684\u79c1\u5bc6\u5206\u4eab\u7c7b\u7684\u5e94\u7528\u662f\u53ef\u884c\u7684\uff0c\u4f46\u662f\u4e00\u65e6\u4ea7\u751f\u9700\u6c42\u53d8\u66f4\uff0c\u8fd9\u79cd\u5b9e\u73b0\u65b9\u5f0f\u662f\u4e0d\u88ab\u63a8\u8350\u7684\u3002","title":"\u5c40\u9650\u6027"},{"location":"storage/acl/#_5","text":"\u7ba1\u7406\u5458\u3001\u4f1a\u5458\u3001\u666e\u901a\u7528\u6237\u8fd9\u4e09\u79cd\u6982\u5ff5\u5728\u7a0b\u5e8f\u8bbe\u8ba1\u4e2d\uff0c\u88ab\u5b9a\u4e49\u4e3a\u300c\u89d2\u8272\u300d\u3002 \u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\u5728\u5217\u51fa\u7684\u9700\u6c42\u573a\u666f\u4e2d\uff0c\u300c\u6743\u9650\u300d\u7684\u4f5c\u7528\u662f\u7528\u6765\u533a\u5206\u67d0\u4e00\u6570\u636e\u662f\u5426 \u5141\u8bb8 \u67d0\u79cd\u89d2\u8272\u7684\u7528\u6237\u8fdb\u884c\u64cd\u4f5c\u3002 {{ docs.note(\"\u300c\u6743\u9650\u300d\u53ea\u548c\u300c\u89d2\u8272\u300d\u5bf9\u5e94\uff0c\u800c\u7528\u6237\u4e5f\u548c\u300c\u89d2\u8272\u300d\u5bf9\u5e94\uff0c\u4e3a\u7528\u6237\u8d4b\u4e88\u89d2\u8272\uff0c\u7136\u540e\u7ba1\u7406\u89d2\u8272\u7684\u6743\u9650\uff0c\u5b8c\u6210\u4e86\u6743\u9650\u4e0e\u7528\u6237\u7684 \u89e3\u8026 \u3002\") }} \u56e0\u6b64\u6211\u4eec\u6765\u89e3\u91ca LeanCloud \u4e2d\u300c\u6743\u9650\u300d\u548c\u300c\u89d2\u8272\u300d\u7684\u6982\u5ff5\u3002 \u300c\u6743\u9650\u300d\u5728 LeanCloud \u670d\u52a1\u7aef\u53ea\u5b58\u5728\u4e24\u79cd\u6743\u9650\uff1a\u8bfb\u3001\u5199\u3002 \u300c\u89d2\u8272\u300d\u5728 LeanCloud \u670d\u52a1\u7aef\u6ca1\u6709\u9650\u5236\uff0c\u552f\u4e00\u8981\u6c42\u7684\u5c31\u662f\u5728\u4e00\u4e2a\u5e94\u7528\u5185\uff0c\u89d2\u8272\u7684\u540d\u5b57\u552f\u4e00\u5373\u53ef\uff0c\u81f3\u4e8e\u67d0\u4e00\u4e2a\u300c\u89d2\u8272\u300d\u5728\u5f53\u524d\u5e94\u7528\u5185\u5bf9\u67d0\u6761\u6570\u636e\u662f\u5426\u62e5\u6709\u8bfb\u5199\u7684\u300c\u6743\u9650\u300d\u5e94\u8be5\u662f\u6709\u5f00\u53d1\u8005\u7684\u4e1a\u52a1\u903b\u8f91\u51b3\u5b9a\uff0c\u800c LeanCloud \u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u7684\u63a5\u53e3\u5e2e\u52a9\u5f00\u53d1\u8005\u5feb\u901f\u5b9e\u73b0\u57fa\u4e8e\u89d2\u8272\u7684\u6743\u9650\u7ba1\u7406\u3002 \u4e3a\u4e86\u65b9\u4fbf\u5f00\u53d1\u8005\u5b9e\u73b0\u57fa\u4e8e\u89d2\u8272\u7684\u6743\u9650\u7ba1\u7406\uff0cLeanCloud \u5728 SDK \u4e2d\u96c6\u6210\u4e86\u4e00\u5957\u5b8c\u6574\u7684 ACL (Access Control List) \u7cfb\u7edf\u3002\u901a\u4fd7\u7684\u89e3\u91ca\u5c31\u662f\u4e3a\u6bcf\u4e00\u4e2a\u6570\u636e\u521b\u5efa\u4e00\u4e2a\u8bbf\u95ee\u7684\u767d\u540d\u5355\u5217\u8868\uff0c\u53ea\u6709\u5728\u540d\u5355\u4e0a\u7684\u7528\u6237\uff08AVUser\uff09\u6216\u8005\u5177\u6709\u67d0\u79cd\u89d2\u8272\uff08AVRole\uff09\u7684\u7528\u6237\u624d\u80fd\u88ab\u5141\u8bb8\u8bbf\u95ee\u3002 \u4e3a\u4e86\u66f4\u597d\u5730\u4fdd\u8bc1\u7528\u6237\u6570\u636e\u5b89\u5168\u6027\uff0c LeanCloud \u8868\u4e2d\u6bcf\u4e00\u5f20\u90fd\u6709\u4e00\u4e2a ACL \u5217\u3002\u5f53\u7136\uff0cLeanCloud \u8fd8\u63d0\u4f9b\u4e86\u8fdb\u4e00\u6b65\u7684\u8bfb\u5199\u6743\u9650\u63a7\u5236\u3002 \u4e00\u4e2a User \u5fc5\u987b\u62e5\u6709\u8bfb\u6743\u9650\uff08\u6216\u8005\u5c5e\u4e8e\u4e00\u4e2a\u62e5\u6709\u8bfb\u6743\u9650\u7684 Role\uff09\u624d\u53ef\u4ee5\u83b7\u53d6\u4e00\u4e2a\u5bf9\u8c61\u7684\u6570\u636e\uff0c\u540c\u65f6\uff0c\u4e00\u4e2a User \u9700\u8981\u5199\u6743\u9650\uff08\u6216\u8005\u5c5e\u4e8e\u4e00\u4e2a\u62e5\u6709\u5199\u6743\u9650\u7684 Role\uff09\u624d\u53ef\u4ee5\u66f4\u6539\u6216\u8005\u5220\u9664\u4e00\u4e2a\u5bf9\u8c61\u3002\u4e0b\u9762\u5217\u4e3e\u51e0\u79cd\u5e38\u89c1\u7684 ACL \u4f7f\u7528\u8303\u4f8b\u3002","title":"\u57fa\u4e8e\u89d2\u8272\u7684\u6743\u9650\u7ba1\u7406"},{"location":"storage/acl/#acl_2","text":"","title":"ACL \u6743\u9650\u7ba1\u7406"},{"location":"storage/acl/#_6","text":"\u5728\u6ca1\u6709\u663e\u5f0f\u6307\u5b9a\u7684\u60c5\u51b5\u4e0b\uff0cLeanCloud \u4e2d\u7684\u6bcf\u4e00\u4e2a\u5bf9\u8c61\u90fd\u4f1a\u6709\u4e00\u4e2a\u9ed8\u8ba4\u7684 ACL \u503c\u3002\u8fd9\u4e2a\u503c\u4ee3\u8868\u4e86\u6240\u6709\u7684\u7528\u6237\u5bf9\u8fd9\u4e2a\u5bf9\u8c61\u90fd\u662f\u53ef\u8bfb\u53ef\u5199\u7684\u3002\u6b64\u65f6\u4f60\u53ef\u4ee5\u5728\u6570\u636e\u7ba1\u7406\u7684\u8868\u4e2d ACL \u5c5e\u6027\u4e2d\u770b\u5230\u8fd9\u6837\u7684\u503c\uff1a { * :{ read : true , write : true } } \u57fa\u4e8e\u7528\u6237\u7684\u6743\u9650\u7ba1\u7406 \u4e00\u8282\u7684\u4ee3\u7801\u5df2\u6f14\u793a\u4e86\u901a\u8fc7 ACL \u6765\u5b9e\u73b0\u57fa\u4e8e\u7528\u6237\u7684\u6743\u9650\u7ba1\u7406\uff0c\u90a3\u4e48\u57fa\u4e8e\u89d2\u8272\u7684\u6743\u9650\u7ba1\u7406\u4e5f\u662f\u4f9d\u8d56 ACL \u6765\u5b9e\u73b0\u7684\uff0c\u53ea\u662f\u5728\u4ecb\u7ecd\u8be6\u7ec6\u7684\u64cd\u4f5c\u4e4b\u524d\u9700\u8981\u4ecb\u7ecd\u300c\u89d2\u8272\u300d\u8fd9\u4e2a\u91cd\u8981\u7684\u6982\u5ff5\u3002","title":"\u9ed8\u8ba4\u6743\u9650"},{"location":"storage/acl/#_7","text":"","title":"\u89d2\u8272\u7684\u6743\u9650\u7ba1\u7406"},{"location":"storage/acl/#_8","text":"\u9996\u5148\uff0c\u6211\u4eec\u6765\u521b\u5efa\u4e00\u4e2a Administrator \u7684\u89d2\u8272\u3002 \u8fd9\u91cc\u6709\u4e00\u4e2a\u9700\u8981\u7279\u522b\u6ce8\u610f\u7684\u5730\u65b9\uff0c\u56e0\u4e3a AVRole \u672c\u8eab\u4e5f\u662f\u4e00\u4e2a AVObject \uff0c\u5b83\u81ea\u8eab\u4e5f\u6709 ACL \u63a7\u5236\uff0c\u5e76\u4e14\u5b83\u7684\u6743\u9650\u63a7\u5236\u5e94\u8be5\u66f4\u4e25\u8c28\uff0c\u5982\u540c\u300c\u8bba\u575b\u7684\u7ba1\u7406\u5458\u6709\u6743\u529b\u4efb\u547d\u7248\u4e3b\uff0c\u800c\u7248\u4e3b\u65e0\u6743\u4efb\u547d\u7ba1\u7406\u5458\u300d\u4e00\u6837\u7684\u9053\u7406\uff0c\u6240\u4ee5\u521b\u5efa\u89d2\u8272\u7684\u65f6\u5019\u9700\u8981\u663e\u5f0f\u5730\u8bbe\u5b9a\u8be5\u89d2\u8272\u7684 ACL\uff0c\u800c\u89d2\u8272\u662f\u4e00\u79cd\u8f83\u4e3a\u7a33\u5b9a\u7684\u5bf9\u8c61\uff1a Objective-C // \u8bbe\u5b9a\u89d2\u8272\u672c\u8eab\u7684 ACL AVACL * roleACL = [ AVACL ACL ]; [ roleACL setPublicReadAccess : YES ]; [ roleACL setWriteAccess : YES forUser :[ AVUser currentUser ]]; // \u521b\u5efa\u89d2\u8272\uff0c\u5e76\u4e14\u4fdd\u5b58 AVRole * administratorRole = [ AVRole roleWithName : @ Administrator acl : roleACL ]; [[ administratorRole users ] addObject : [ AVUser currentUser ]]; [ administratorRole saveInBackground ]; Swift let roleACL = AVACL () roleACL . setPublicReadAccess ( true ) if let currentUser = AVUser . current () { roleACL . setWriteAccess ( true , for : currentUser ) } let administratorRole = AVRole ( name : Administrator , acl : roleACL ) if let currentUser = AVUser . current () { administratorRole . users (). add ( currentUser ) } administratorRole . save () Java // \u65b0\u5efa\u4e00\u4e2a\u9488\u5bf9\u89d2\u8272\u672c\u8eab\u7684 ACL AVACL roleACL = new AVACL (); roleACL . setPublicReadAccess ( true ); roleACL . setWriteAccess ( AVUser . getCurrentUser (), true ); // \u65b0\u5efa\u4e00\u4e2a\u89d2\u8272\uff0c\u5e76\u628a\u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u8be5\u89d2\u8272 AVRole administrator = new AVRole ( Administrator , roleACL ); //\u65b0\u5efa\u89d2\u8272 administrator . getUsers (). add ( AVUser . getCurrentUser ()); //\u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u8be5\u89d2\u8272 administrator . saveInBackground (); //\u4fdd\u5b58\u5230\u4e91\u7aef JavaScript // \u65b0\u5efa\u4e00\u4e2a\u89d2\u8272\uff0c\u5e76\u628a\u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u8be5\u89d2\u8272 var roleAcl = new AV . ACL (); roleAcl . setPublicReadAccess ( true ); roleAcl . setPublicWriteAccess ( false ); // \u5f53\u524d\u7528\u6237\u662f\u8be5\u89d2\u8272\u7684\u521b\u5efa\u8005\uff0c\u56e0\u6b64\u5177\u5907\u5bf9\u8be5\u89d2\u8272\u7684\u5199\u6743\u9650 roleAcl . setWriteAccess ( AV . User . current (), true ); //\u65b0\u5efa\u89d2\u8272 var administratorRole = new AV . Role ( Administrator , roleAcl ); administratorRole . save (). then ( function ( role ) { // \u521b\u5efa\u6210\u529f }). catch ( function ( error ) { console . log ( error ); }); Python import leancloud user = leancloud . User () user . login ( username , password ) # \u767b\u5f55\u4e00\u4e2a\u7528\u6237 # \u65b0\u5efa\u4e00\u4e2a\u89d2\u8272\uff0c\u5e76\u628a\u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u8be5\u89d2\u8272 administrator_role = leancloud . Role ( Administrator ) relation = administrator_role . get_users () relation . add ( leancloud . User . get_current ()) # \u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u8be5\u89d2\u8272 administrator_role . save () # \u4fdd\u5b58 \u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\uff0c\u5728\u63a7\u5236\u53f0\u53ef\u4ee5\u67e5\u770b _Role \u8868\u91cc\u5df2\u7ecf\u5b58\u5728\u4e86\u4e00\u4e2a Administrator \u89d2\u8272\u3002","title":"\u89d2\u8272\u7684\u521b\u5efa"},{"location":"storage/acl/#role-acl","text":"\u5728\u521d\u59cb\u5316\u4e00\u4e2a Oracle \u6216 MS SQL Server \u6570\u636e\u5e93\u7684\u65f6\u5019\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a sa \u7528\u6237\uff0c\u5b83\u5177\u5907\u64cd\u4f5c\u5f53\u524d\u6570\u636e\u5e93\u7684\u5168\u90e8\u6743\u9650\uff0c\u800c\u5176\u4ed6\u4eba\u7684\u6743\u9650\u7406\u8bba\u4e0a\u4e5f\u5e94\u8be5\u7531\u4ed6\u6765\u5206\u914d\u3002 \u540c\u7406\uff0c\u6211\u4eec\u5728\u521b\u5efa\u4e00\u4e2a Role \u6216\u8005\u7ed9\u67d0\u4e00\u4e2a User \u5206\u914d Role \u7684\u65f6\u5019\uff0c\u4e5f\u5e94\u8be5\u8ba4\u4e3a\u8fdb\u884c\u64cd\u4f5c\u7684\u5f53\u524d\u7528\u6237\u672c\u8eab\u5c31\u662f\u5177\u5907\u8f83\u9ad8\u6743\u9650\u7684\u7528\u6237\uff08\u7c7b\u4f3c\u4e8e sa\uff09,\u56e0\u6b64\u5728\u521a\u624d\u521b\u5efa\u89d2\u8272\u7684\u4ee3\u7801\u4e2d\u4f1a\u8981\u6c42\u8bbe\u7f6e Role \u81ea\u8eab\u7684 ACL \u7684\u503c\u4e3a\u5f53\u524d\u7528\u6237\u53ef\u5199\uff0c\u5176\u4ed6\u4eba\u4ec5\u53ef\u8bfb\u3002 \u53e6\u5916\u9700\u8981\u5f00\u53d1\u8005\u6ce8\u610f\u7684\u662f\uff1a\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7 \u63a7\u5236\u53f0 Post \u8868 \u5176\u4ed6 \u6743\u9650\u8bbe\u7f6e \u76f4\u63a5\u8bbe\u7f6e\u6743\u9650\u3002\u5e76\u4e14\u6211\u4eec\u8981\u5f3a\u8c03\u7684\u662f\uff1a {{ docs.note(\"ACL \u53ef\u4ee5\u7cbe\u786e\u5230 Class\uff0c\u4e5f\u53ef\u4ee5\u7cbe\u786e\u5230\u5177\u4f53\u7684\u6bcf\u4e00\u4e2a\u5bf9\u8c61\uff08\u8868\u4e2d\u7684\u6bcf\u4e00\u6761\u8bb0\u5f55\uff09\u3002\") }}","title":"Role \u5bf9\u8c61\u81ea\u8eab\u7684 ACL"},{"location":"storage/acl/#_9","text":"\u6211\u4eec\u73b0\u5728\u5df2\u7ecf\u521b\u5efa\u4e86\u4e00\u4e2a\u6709\u6548\u7684\u89d2\u8272\uff0c\u63a5\u4e0b\u6765\u4e3a Post \u5bf9\u8c61\u8bbe\u7f6e Administrator \u7684\u8bbf\u95ee\u300c\u53ef\u8bfb\u53ef\u5199\u300d\u7684\u6743\u9650\uff0c\u8bbe\u7f6e\u6210\u529f\u4ee5\u540e\uff0c\u4efb\u4f55\u5177\u5907 Administrator \u89d2\u8272\u7684\u7528\u6237\u90fd\u53ef\u4ee5\u5bf9 Post \u5bf9\u8c61\u8fdb\u884c\u300c\u53ef\u8bfb\u53ef\u5199\u300d\u7684\u64cd\u4f5c\u4e86\uff1a Objective-C // \u65b0\u5efa\u4e00\u4e2a\u5e16\u5b50\u5bf9\u8c61 AVObject * post = [ AVObject objectWithClassName : @ Post ]; [ post setObject : @ \u590f\u5929\u5403\u4ec0\u4e48\u591c\u5bb5\u6bd4\u8f83\u723d\uff1f forKey : @ title ]; [ post setObject : @ \u6c42\u63a8\u8350\u554a\uff01 forKey : @ content ]; // \u5047\u8bbe\u4e4b\u524d\u521b\u5efa\u7684 Administrator \u89d2\u8272 objectId \u4e3a 55fc0eb700b039e44440016c AVQuery * roleQuery = [ AVRole query ]; [ roleQuery getObjectInBackgroundWithId : @ 55fc0eb700b039e44440016c block : ^ ( AVObject * object , NSError * error ) { AVRole * administratorRole = ( AVRole * ) object ; [ administratorRole saveInBackgroundWithBlock : ^ ( BOOL succeeded , NSError * error ) { //\u65b0\u5efa\u4e00\u4e2a ACL \u5b9e\u4f8b AVACL * acl = [ AVACL ACL ]; [ acl setPublicReadAccess : YES ]; // \u8bbe\u7f6e\u516c\u5f00\u7684\u300c\u8bfb\u300d\u6743\u9650\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u9605\u8bfb [ acl setWriteAccess : YES forRole : administratorRole ]; // \u4e3a Administrator \u300c\u5199\u300d\u6743\u9650 [ acl setWriteAccess : YES forUser :[ AVUser currentUser ]]; // \u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u300c\u5199\u300d\u6743\u9650 post . ACL = acl ; // \u5c06 ACL \u5b9e\u4f8b\u8d4b\u4e88 Post\u5bf9\u8c61 // \u4ee5\u4e0a\u4ee3\u7801\u7684\u6548\u679c\u5c31\u662f\uff1a\u53ea\u6709 Post \u4f5c\u8005\uff08\u5f53\u524d\u7528\u6237\uff09\u548c\u62e5\u6709 Administrator \u89d2\u8272\u7684\u7528\u6237\u53ef\u4ee5\u4fee\u6539\u8fd9\u6761 Post\uff0c\u800c\u6240\u6709\u4eba\u90fd\u53ef\u4ee5\u8bfb\u53d6\u8fd9\u6761 Post [ post saveInBackground ]; }]; }]; Swift let roleQuery = AVRole . query () let post = AVObject ( className : Post ) post [ title ] = \u590f\u5929\u5403\u4ec0\u4e48\u591c\u5bb5\u6bd4\u8f83\u723d\uff1f post [ content ] = \u6c42\u63a8\u8350\u554a\uff01 roleQuery . getObjectInBackground ( withId : 55fc0eb700b039e44440016c ) { object , error in guard let administratorRole = object as ? AVRole else { return } let acl = AVACL () acl . setPublicReadAccess ( true ) acl . setWriteAccess ( true , for : administratorRole ) if let currentUser = AVUser . current () { acl . setWriteAccess ( true , for : currentUser ) } post . acl = acl post . save () } Java // \u65b0\u5efa\u4e00\u4e2a\u5e16\u5b50\u5bf9\u8c61 final AVObject post = new AVObject ( Post ); post . put ( title , \u590f\u5929\u5403\u4ec0\u4e48\u591c\u5bb5\u6bd4\u8f83\u723d\uff1f ); post . put ( content , \u6c42\u63a8\u8350\u554a\uff01 ); AVQuery AVRole roleQuery = new AVQuery AVRole ( _Role ); // \u5047\u8bbe\u4e0a\u4e00\u6b65\u521b\u5efa\u7684 Administrator \u89d2\u8272\u7684 objectId \u4e3a 55fc0eb700b039e44440016c roleQuery . getInBackground ( 55fc0eb700b039e44440016c , new GetCallback AVRole () { @Override public void done ( AVRole avRole , AVException e ) { //\u65b0\u5efa\u4e00\u4e2a ACL \u5b9e\u4f8b AVACL acl = new AVACL (); acl . setPublicReadAccess ( true ); // \u8bbe\u7f6e\u516c\u5f00\u7684\u300c\u8bfb\u300d\u6743\u9650\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u9605\u8bfb acl . setRoleWriteAccess ( avRole , true ); // \u4e3a Administrator \u300c\u5199\u300d\u6743\u9650 acl . setWriteAccess ( AVUser . getCurrentUser (), true ); // \u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u300c\u5199\u300d\u6743\u9650 // \u4ee5\u4e0a\u4ee3\u7801\u7684\u6548\u679c\u5c31\u662f\uff1a\u53ea\u6709 Post \u4f5c\u8005\uff08\u5f53\u524d\u7528\u6237\uff09\u548c\u62e5\u6709 Administrator \u89d2\u8272\u7684\u7528\u6237\u53ef\u4ee5\u4fee\u6539\u8fd9\u6761 Post\uff0c\u800c\u6240\u6709\u4eba\u90fd\u53ef\u4ee5\u8bfb\u53d6\u8fd9\u6761 Post post . setACL ( acl ); post . saveInBackground (); } }); JavaScript // \u65b0\u5efa\u4e00\u4e2a\u5e16\u5b50\u5bf9\u8c61 var Post = AV . Object . extend ( Post ); var post = new Post (); post . set ( title , \u590f\u5929\u5403\u4ec0\u4e48\u591c\u5bb5\u6bd4\u8f83\u723d\uff1f ); post . set ( content , \u6c42\u63a8\u8350\u554a\uff01 ); // \u65b0\u5efa\u4e00\u4e2a\u89d2\u8272\uff0c\u5e76\u628a\u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u8be5\u89d2\u8272 var administratorRole = new AV . Role ( Administrator ); var relation = administratorRole . getUsers (); //\u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u8be5\u89d2\u8272 administratorRole . getUsers (). add ( AV . User . current ()); //\u89d2\u8272\u4fdd\u5b58\u6210\u529f administratorRole . save (). then ( function ( administratorRole ) { // \u65b0\u5efa\u4e00\u4e2a ACL \u5b9e\u4f8b var acl = new AV . ACL (); acl . setPublicReadAccess ( true ); acl . setRoleWriteAccess ( administratorRole , true ); // \u5c06 ACL \u5b9e\u4f8b\u8d4b\u4e88 Post \u5bf9\u8c61 post . setACL ( acl ); return post . save (); }). then ( function ( post ) { // \u4fdd\u5b58\u6210\u529f }). catch ( function ( error ) { // \u4fdd\u5b58\u5931\u8d25 console . log ( error ); }); Python import leancloud # \u767b\u5f55\u4e00\u4e2a\u7528\u6237 user = leancloud . User () user . login ( username , password ) # \u521b\u5efa\u4e00\u4e2a Post \u7684\u5e16\u5b50\u5bf9\u8c61 Post = leancloud . Object . extend ( Post ) post = Post () post . set ( title , \u590f\u5929\u5403\u4ec0\u4e48\u591c\u5bb5\u6bd4\u8f83\u723d\uff1f ) post . set ( content , \u6c42\u63a8\u8350\u554a\uff01 ) # \u65b0\u5efa\u4e00\u4e2a\u89d2\u8272\uff0c\u5e76\u628a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u8be5\u89d2\u8272 administrator_role = leancloud . Role ( Administrator ) relation = administrator_role . get_users () relation . add ( leancloud . User . get_current ()) administrator_role . save () # \u65b0\u5efa\u4e00\u4e2a leancloud.ACL \u5bf9\u8c61\uff0c\u5e76\u8d4b\u4e88\u89d2\u8272\u53ef\u5199\u6743\u9650 acl = leancloud . ACL () acl . set_public_read_access ( True ) acl . set_role_write_access ( administrator_role , True ) # \u5c06 leancloud.ACL \u5b9e\u4f8b\u8d4b\u4e88 Post \u5bf9\u8c61 post . set_acl ( acl ) post . save ()","title":"\u4e3a\u5bf9\u8c61\u8bbe\u7f6e\u89d2\u8272\u7684\u8bbf\u95ee\u6743\u9650"},{"location":"storage/acl/#_10","text":"\u7ecf\u8fc7\u4ee5\u4e0a\u4e24\u6b65\uff0c\u6211\u4eec\u8fd8\u5dee\u4e00\u4e2a\u7ed9\u5177\u4f53\u7684\u7528\u6237\u8bbe\u7f6e\u89d2\u8272\u7684\u64cd\u4f5c\uff0c\u8fd9\u6837\u624d\u53ef\u4ee5\u5b8c\u6574\u5730\u5b9e\u73b0\u57fa\u4e8e\u89d2\u8272\u7684\u6743\u9650\u7ba1\u7406\u3002 \u5728\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u89d2\u8272\u548c\u7528\u6237\u4e4b\u95f4\u672c\u662f\u591a\u5bf9\u591a\u7684\u5173\u7cfb\uff0c\u6bd4\u5982\u9700\u8981\u628a\u67d0\u4e00\u4e2a\u7528\u6237\u63d0\u5347\u4e3a\u67d0\u4e00\u4e2a\u7248\u5757\u7684\u7248\u4e3b\uff0c\u4ea6\u6216\u8005\u67d0\u4e00\u4e2a\u7528\u6237\u88ab\u5265\u593a\u4e86\u7248\u4e3b\u7684\u6743\u529b\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff0c\u5728\u5e94\u7528\u7684\u7248\u672c\u8fed\u4ee3\u4e2d\uff0c\u7528\u6237\u7684\u89d2\u8272\u90fd\u4f1a\u5b58\u5728\u589e\u52a0\u6216\u8005\u51cf\u5c11\u7684\u53ef\u80fd\uff0c\u56e0\u6b64\uff0cLeanCloud \u4e5f\u63d0\u4f9b\u4e86\u4e3a\u7528\u6237\u8d4b\u4e88\u6216\u8005\u5265\u593a\u89d2\u8272\u7684\u65b9\u5f0f\u3002 \u5728\u4ee3\u7801\u7ea7\u522b\uff0c\u5b9e\u73b0\u300c\u4e3a\u89d2\u8272\u6dfb\u52a0\u7528\u6237\u300d\u4e0e\u300c\u4e3a\u7528\u6237\u8d4b\u4e88\u89d2\u8272\u300d\u7684\u4ee3\u7801\u662f\u4e00\u6837\u7684\u3002\u6b64\u7c7b\u64cd\u4f5c\u7684\u903b\u8f91\u987a\u5e8f\u662f\uff1a \u8d4b\u4e88\u89d2\u8272\uff1a\u9996\u5148\u5224\u65ad\u8be5\u7528\u6237\u662f\u5426\u5df2\u7ecf\u88ab\u8d4b\u4e88\u8be5\u89d2\u8272\uff0c\u5982\u679c\u5df2\u7ecf\u5b58\u5728\u5219\u65e0\u9700\u6dfb\u52a0\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5219\u4e3a\u8be5\u7528\u6237(AVUser)\u7684 roles \u5c5e\u6027\u6dfb\u52a0\u5f53\u524d\u89d2\u8272\u5b9e\u4f8b\u3002 \u4ee5\u4e0b\u4ee3\u7801\u6f14\u793a\u4e3a\u5f53\u524d\u7528\u6237\u6dfb\u52a0 Administrator \u89d2\u8272\uff1a Objective-C AVQuery * roleQuery = [ AVRole query ]; [ roleQuery whereKey : @ name equalTo : @ Administrator ]; [ roleQuery findObjectsInBackgroundWithBlock : ^ ( NSArray * objects , NSError * error ) { // \u5982\u679c\u89d2\u8272\u5b58\u5728 if ([ objects count ] 0 ) { AVRole * administratorRole = [ objects objectAtIndex : 0 ]; [ roleQuery whereKey : @ users equalTo :[ AVUser currentUser ]]; [ roleQuery findObjectsInBackgroundWithBlock : ^ ( NSArray * objects , NSError * error ){ if ([ objects count ] == 0 ) { //\u4e3a\u7528\u6237\u8d4b\u4e88\u89d2\u8272 [[ administrator users ] addObject :[ AVUser currentUser ]]; [ administrator saveInBackground ]; } else { NSLog ( @ \u5df2\u7ecf\u62e5\u6709 Moderator \u89d2\u8272\u4e86\u3002 ); } }]; } else { // \u89d2\u8272\u4e0d\u5b58\u5728\uff0c\u5c31\u65b0\u5efa\u89d2\u8272 AVRole * administrator = [ AVRole roleWithName : @ Administrator ]; [[ administrator users ] addObject :[ AVUser currentUser ]]; // \u8d4b\u4e88\u89d2\u8272 [ administrator saveInBackground ]; } }]; Swift let roleQuery = AVRole . query () roleQuery . whereKey ( name , equalTo : Administrator ) roleQuery . findObjectsInBackground { ( objects , error ) in guard let currentUser = AVUser . current () else { return } if let administrator = objects ?. first as ? AVRole { roleQuery . whereKey ( users , equalTo : currentUser ) roleQuery . findObjectsInBackground { objects , error in if let _ = objects ?. first as ? AVRole { print ( Current user is already an administrator. ) } else { administrator . users (). add ( currentUser ) administrator . save () } } } else { let administrator = AVRole ( name : Administrator ) administrator . users (). add ( currentUser ) administrator . save () } } Java final AVQuery AVRole roleQuery = new AVQuery AVRole ( _Role ); roleQuery . whereEqualTo ( name , Administrator ); roleQuery . findInBackground ( new FindCallback AVRole () { @Override public void done ( List AVRole list , AVException e ) { // \u5982\u679c\u89d2\u8272\u5b58\u5728 if ( list . size () 0 ){ final AVRole administratorRole = list . get ( 0 ); roleQuery . whereEqualTo ( users , AVUser . getCurrentUser ()); roleQuery . findInBackground ( new FindCallback AVRole () { @Override public void done ( List AVRole list , AVException e ) { if ( list . size () == 0 ){ administratorRole . getUsers (). add ( AVUser . getCurrentUser ()); // \u8d4b\u4e88\u89d2\u8272 administratorRole . saveInBackground (); } } }); } else { // \u89d2\u8272\u4e0d\u5b58\u5728\uff0c\u5c31\u65b0\u5efa\u89d2\u8272 AVRole administratorRole = new AVRole ( Administrator ); administratorRole . getUsers (). add ( AVUser . getCurrentUser ()); // \u8d4b\u4e88\u89d2\u8272 administratorRole . saveInBackground (); } } }); JavaScript // \u6784\u5efa AV.Role \u7684\u67e5\u8be2 var administratorRole = //\u5047\u8bbe administratorRole \u662f\u4e4b\u524d\u521b\u5efa\u7684 \u300cAdministrator\u300d \u89d2\u8272; var roleQuery = new AV . Query ( AV . Role ); // \u89d2\u8272\u540d\u79f0\u7b49\u4e8e Administrator roleQuery . equalTo ( name , Administrator ); // \b\u68c0\u67e5\u5f53\u524d\u7528\u6237\u662f\u5426\u5df2\u7ecf\u62e5\u6709\u4e86 Administrator \u89d2\u8272 roleQuery . equalTo ( users , AV . User . current ()); roleQuery . find (). then ( function ( results ) { if ( results . length 0 ) { // \u5f53\u524d\u7528\u6237\u5df2\u7ecf\u5177\u5907\u4e86 Administrator \u89d2\u8272\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u505a\u4efb\u4f55\u64cd\u4f5c var administratorRole = results [ 0 ]; return administratorRole ; } else { // \u5f53\u524d\u7528\u6237\u4e0d\u5177\u5907 Administrator\uff0c\u56e0\u6b64\u4f60\u9700\u8981\u628a\u5f53\u524d\u7528\u6237\u6dfb\u52a0\u5230 Role \u7684 Users \u4e2d var relation = administratorRole . getUsers (); relation . add ( AV . User . current ()); return administratorRole . save (); } }). then ( function ( administratorRole ) { //\u6b64\u65f6 administratorRole \u5df2\u7ecf\u5305\u542b\u4e86\u5f53\u524d\u7528\u6237 }). catch ( function ( error ) { // \u8f93\u51fa\u9519\u8bef console . log ( error ); }); Python import leancloud user = leancloud . User () user . login ( username , password ) role_query = leancloud . Query ( leancloud . Role ) role_query . equal_to ( name , Administrator ) role_query_list = role_query . find () if len ( role_query_list ) 0 : # \u8be5\u89d2\u8272\u5b58\u5728 administrator_role = role_query_list [ 0 ] role_query . equal_to ( users , leancloud . User . get_current ()) role_query_with_current_user = role_query . find () if len ( role_query_with_current_user ) == 0 : # \u8be5\u89d2\u8272\u5b58\u5728\uff0c\u4f46\u662f\u5f53\u524d\u7528\u6237\u5c1a\u672a\u88ab\u8d4b\u4e88\u8be5\u89d2\u8272 relation = administrator_role . get_users () relation . add ( leancloud . User . get_current ()) # \u4e3a\u5f53\u524d\u7528\u6237\u8d4b\u4e88\u8be5\u89d2\u8272 administrator_role . save () else : # \u8be5\u89d2\u8272\u5b58\u5728\uff0c\u5f53\u524d\u7528\u6237\u5df2\u88ab\u88ab\u8d4b\u4e88\u8be5\u89d2\u8272 pass else : # \u8be5\u89d2\u8272\u4e0d\u5b58\u5728\uff0c\u53ef\u4ee5\u65b0\u5efa\u8be5\u89d2\u8272\uff0c\u5e76\u628a\u5f53\u524d\u7528\u6237\u8bbe\u7f6e\u6210\u8be5\u89d2\u8272 administrator_role = leancloud . Role ( Administrator ) relation = administrator_role . get_users () relation . add ( leancloud . User . get_current ()) administrator_role . save () \u89d2\u8272\u8d4b\u4e88\u6210\u529f\u4e4b\u540e\uff0c\u57fa\u4e8e\u89d2\u8272\u7684\u6743\u9650\u7ba1\u7406\u7684\u529f\u80fd\u624d\u7b97\u5b8c\u6210\u3002 \u5265\u593a\u89d2\u8272\uff1a \u9996\u5148\u5224\u65ad\u8be5\u7528\u6237\u662f\u5426\u5df2\u7ecf\u88ab\u8d4b\u4e88\u8be5\u89d2\u8272\uff0c\u5982\u679c\u672a\u66fe\u8d4b\u4e88\u5219\u4e0d\u505a\u4fee\u6539\uff0c\u5982\u679c\u5df2\u88ab\u8d4b\u4e88\uff0c\u5219\u4ece\u5bf9\u5e94\u7684\u7528\u6237\uff08AVUser\uff09\u7684 roles \u5c5e\u6027\u5f53\u4e2d\u628a\u8be5\u89d2\u8272\u5220\u9664\u3002 Objective-C AVQuery * roleQuery = [ AVRole query ]; [ roleQuery whereKey : @ name equalTo : @ Moderator ]; [ roleQuery findObjectsInBackgroundWithBlock : ^ ( NSArray * objects , NSError * error ) { // \u5982\u679c\u89d2\u8272\u5b58\u5728 if ([ objects count ] 0 ) { AVRole * moderatorRole = [ objects objectAtIndex : 0 ]; [ roleQuery whereKey : @ users equalTo :[ AVUser currentUser ]]; [ roleQuery findObjectsInBackgroundWithBlock : ^ ( NSArray * objects , NSError * error ){ // \u5982\u679c\u7528\u6237\u786e\u5b9e\u62e5\u6709\u8be5\u89d2\u8272\uff0c\u90a3\u4e48\u5c31\u5265\u593a if ([ objects count ] 0 ) { [[ moderatorRole users ] removeObject :[ AVUser currentUser ]]; [ moderatorRole saveInBackground ]; } }]; } }]; Swift let roleQuery = AVRole . query () roleQuery . whereKey ( name , equalTo : Moderator ) roleQuery . findObjectsInBackground { ( objects , error ) in guard let currentUser = AVUser . current (), let moderatorRole = objects ?. first as ? AVRole else { return } roleQuery . whereKey ( users , equalTo : currentUser ) roleQuery . findObjectsInBackground { ( objects , error ) in guard let _ = objects ?. first else { return } moderatorRole . users (). remove ( currentUser ) moderatorRole . save () } } Java final AVQuery AVRole roleQuery = new AVQuery AVRole ( _Role ); roleQuery . whereEqualTo ( name , Moderator ); roleQuery . findInBackground ( new FindCallback AVRole () { @Override public void done ( List AVRole list , AVException e ) { if ( list . size () 0 ){ final AVRole moderatorRole = list . get ( 0 ); roleQuery . whereEqualTo ( users , AVUser . getCurrentUser ()); roleQuery . findInBackground ( new FindCallback AVRole () { @Override public void done ( List AVRole list , AVException e ) { // \u5982\u679c\u8be5\u7528\u6237\u786e\u5b9e\u62e5\u6709\u8be5\u89d2\u8272\uff0c\u90a3\u4e48\u5c31\u5265\u593a if ( list . size () 0 ) { moderatorRole . getUsers (). remove ( AVUser . getCurrentUser ()); moderatorRole . saveInBackground (); } } }); } else { } } }); JavaScript // \u6784\u5efa AV.Role \u7684\u67e5\u8be2 var roleQuery = new AV . Query ( AV . Role ); roleQuery . equalTo ( name , Moderator ); roleQuery . find (). then ( function ( results ) { // \u5982\u679c\u89d2\u8272\u5b58\u5728 if ( results . length 0 ) { var moderatorRole = results [ 0 ]; roleQuery . equalTo ( users , AV . User . current ()); return roleQuery . find (); } }). then ( function ( userForRole ) { //\u8be5\u89d2\u8272\u5b58\u5728\uff0c\u5e76\u4e14\u4e5f\u62e5\u6709\u8be5\u89d2\u8272 if ( userForRole . length 0 ) { // \u5265\u593a\u89d2\u8272 var relation = moderatorRole . getUsers (); relation . remove ( AV . User . current ()); return moderatorRole . save (); } }). then ( function () { // \u4fdd\u5b58\u6210\u529f }). catch ( function ( error ) { // \u8f93\u51fa\u9519\u8bef console . log ( error ); }); Python import leancloud user = leancloud . User () user . login ( username , password ) role_query = leancloud . Query ( leancloud . Role ) role_query . equal_to ( name , Administrator ) role_query_list = role_query . find () if len ( role_query_list ) 0 : # \u8be5\u89d2\u8272\u5b58\u5728 administrator_role = role_query_list [ 0 ] role_query . equal_to ( users , leancloud . User . get_current ()) role_query_with_current_user = role_query . find () if len ( role_query_with_current_user ) 0 : # \u8be5\u89d2\u8272\u5b58\u5728\uff0c\u4e14\u5f53\u524d\u7528\u6237\u62e5\u6709\u8be5\u89d2\u8272 relation = administrator_role . get_users () relation . remove ( leancloud . User . get_current ()) # \u4e3a\u5f53\u524d\u7528\u6237\u5265\u593a\u8be5\u89d2\u8272 administrator_role . save () else : # \u8be5\u89d2\u8272\u5b58\u5728\uff0c\u5f53\u524d\u7528\u6237\u5e76\u4e0d\u62e5\u6709\u8be5\u89d2\u8272 pass else : # \u8be5\u89d2\u8272\u4e0d\u5b58\u5728\uff0c\u53ef\u4ee5\u65b0\u5efa\u8be5\u89d2\u8272\uff0c\u5e76\u628a\u5f53\u524d\u7528\u6237\u8bbe\u7f6e\u6210\u8be5\u89d2\u8272 pass","title":"\u7528\u6237\u89d2\u8272\u7684\u8d4b\u4e88\u548c\u5265\u593a"},{"location":"storage/acl/#_11","text":"\u9664\u4e86\u5728\u63a7\u5236\u53f0\u53ef\u4ee5\u76f4\u63a5\u67e5\u770b\u5df2\u6709\u89d2\u8272\u4e4b\u5916\uff0c\u901a\u8fc7\u4ee3\u7801\u4e5f\u53ef\u4ee5\u76f4\u63a5\u67e5\u8be2\u5f53\u524d\u5e94\u7528\u4e2d\u5df2\u5b58\u5728\u7684\u89d2\u8272\u3002 \u6ce8\uff1a AVRole \u4e5f\u7ee7\u627f\u81ea AVObject \uff0c\u56e0\u6b64\u719f\u6089\u4e86\u89e3 AVQuery \u7684\u5f00\u53d1\u8005\u53ef\u4ee5\u719f\u7ec3\u7684\u638c\u63e1\u5173\u4e8e\u89d2\u8272\u67e5\u8be2\u7684\u5404\u79cd\u65b9\u6cd5\u3002 Objective-C // \u6784\u5efa\u89d2\u8272\u7684\u67e5\u8be2\uff0c\u5e76\u4e14\u67e5\u770b\u8be5\u89d2\u8272\u6240\u5bf9\u5e94\u7684\u7528\u6237 AVQuery * roleQuery = [ AVRole query ]; [ roleQuery whereKey : @ name equalTo : @ Administrator ]; [ roleQuery findObjectsInBackgroundWithBlock : ^ ( NSArray * objects , NSError * error ) { AVRole * administrator = [ objects objectAtIndex : 0 ]; AVRelation * userRelation = [ administrator users ]; AVQuery * userQuery = [ userRelation query ]; [ userQuery findObjectsInBackgroundWithBlock : ^ ( NSArray * objects , NSError * error ) { // objects \u5c31\u662f\u62e5\u6709\u8be5\u89d2\u8272\u6743\u9650\u7684\u6240\u6709\u7528\u6237\u4e86\u3002 }]; }]; Swift let roleQuery = AVRole . query () roleQuery . whereKey ( name , equalTo : Administrator ) roleQuery . findObjectsInBackground { ( roles , error ) in guard let administrator = roles ?. first as ? AVRole else { return } let userQuery = administrator . users (). query () userQuery . findObjectsInBackground { ( users , error ) in // users \u5c31\u662f\u62e5\u6709\u8be5\u89d2\u8272\u6743\u9650\u7684\u6240\u6709\u7528\u6237\u4e86\u3002 } } Java AVQuery AVRole roleQuery = new AVQuery AVRole ( _Role ); roleQuery . whereEqualTo ( name , Administrator ); roleQuery . findInBackground ( new FindCallback AVRole () { @Override public void done ( List AVRole list , AVException e ) { AVRole administrator = list . get ( 0 ); AVRelation userRelation = administrator . getUsers (); AVQuery AVUser query = userRelation . getQuery (); query . findInBackground ( new FindCallback AVUser () { @Override public void done ( List AVUser list , AVException e ) { // list \u5c31\u662f\u62e5\u6709\u8be5\u89d2\u8272\u6743\u9650\u7684\u6240\u6709\u7528\u6237\u4e86\u3002 } }); } }); JavaScript // \u65b0\u5efa\u9488\u5bf9 Role \u7684\u67e5\u8be2 var roleQuery = new AV . Query ( AV . Role ); // \u67e5\u8be2 name \u7b49\u4e8e Administrator \u7684\u89d2\u8272 roleQuery . equalTo ( name , Administrator ); // \u6267\u884c\u67e5\u8be2 roleQuery . first (). then ( function ( adminRole ) { var userRelation = adminRole . relation ( users ); return userRelation . query (). find (); }). then ( function ( userList ) { // userList \u5c31\u662f\u62e5\u6709\u8be5\u89d2\u8272\u6743\u9650\u7684\u6240\u6709\u7528\u6237\u4e86\u3002 var firstAdmin = userList [ 0 ]; }). catch ( function ( error ) { console . log ( error ); }); Python import leancloud user = leancloud . User () user . login ( username , password ) role_query = leancloud . Query ( leancloud . Role ) role_query . equal_to ( name , Administrator ) role_query_list = role_query . find () if len ( role_query_list ) 0 : # \u8be5\u89d2\u8272\u5b58\u5728 administrator_role = role_query_list [ 0 ] # \u83b7\u53d6\u8be5\u89d2\u8272\u5bf9\u8c61 user_relation = administrator_role . relation ( users ) # \u67e5\u627e\u8be5\u89d2\u8272\u4e0b\u7684\u6240\u6709\u7528\u6237\u5217\u8868\u3002\u5982\u679c\u8fd9\u91cc\u6709\u6743\u9650\u95ee\u9898\uff0c\u8bf7\u5230\u63a7\u5236\u53f0\u8bbe\u7f6e leancloud.User \u5bf9\u8c61\u7684\u6743\u9650 users_with_administrator = user_relation . query . find () print users_with_administrator else : # \u8be5\u89d2\u8272\u4e0d\u5b58\u5728\uff0c\u53ef\u4ee5\u65b0\u5efa\u8be5\u89d2\u8272\uff0c\u5e76\u628a\u5f53\u524d\u7528\u6237\u8bbe\u7f6e\u6210\u8be5\u89d2\u8272 pass \u67e5\u8be2\u67d0\u4e00\u4e2a\u7528\u6237\u62e5\u6709\u54ea\u4e9b\u89d2\u8272\uff1a Objective-C // \u7b2c\u4e00\u79cd\u65b9\u5f0f\u662f\u901a\u8fc7\u5185\u7f6e\u7684\u63a5\u53e3 [ user getRolesInBackgroundWithBlock : ^ ( NSArray AVRole * * _Nullable avRoles , NSError * _Nullable error ) { // avRoles \u5c31\u662f\u4e00\u4e2a AVRole \u7684\u6570\u7ec4\uff0c\u8fd9\u4e9b AVRole \u5c31\u662f\u5f53\u524d\u7528\u6237\u6240\u5728\u62e5\u6709\u7684\u89d2\u8272 }]; // \u7b2c\u4e8c\u79cd\u662f\u901a\u8fc7\u6784\u5efa AVQuery AVQuery * roleQuery = [ AVRole query ]; [ roleQuery whereKey : @ users equalTo : user ]; [ roleQuery findObjectsInBackgroundWithBlock : ^ ( NSArray * avRoles , NSError * error ) { // avRoles \u5c31\u662f\u4e00\u4e2a AVRole \u7684\u6570\u7ec4\uff0c\u8fd9\u4e9b AVRole \u5c31\u662f\u5f53\u524d\u7528\u6237\u6240\u5728\u62e5\u6709\u7684\u89d2\u8272 }]; Swift guard let user = AVUser . current () else { return } user . getRolesInBackground { ( roles , error ) in // avRoles \u5c31\u662f\u4e00\u4e2a AVRole \u7684\u6570\u7ec4\uff0c\u8fd9\u4e9b AVRole \u5c31\u662f\u5f53\u524d\u7528\u6237\u6240\u5728\u62e5\u6709\u7684\u89d2\u8272 } // \u7b2c\u4e8c\u79cd\u662f\u901a\u8fc7\u6784\u5efa AVQuery let roleQuery = AVRole . query () roleQuery . whereKey ( users , equalTo : user ) roleQuery . findObjectsInBackground { ( roles , error ) in // avRoles \u5c31\u662f\u4e00\u4e2a AVRole \u7684\u6570\u7ec4\uff0c\u8fd9\u4e9b AVRole \u5c31\u662f\u5f53\u524d\u7528\u6237\u6240\u5728\u62e5\u6709\u7684\u89d2\u8272 } Java // \u7b2c\u4e00\u79cd\u65b9\u5f0f\u662f\u901a\u8fc7 AVUser \u5185\u7f6e\u7684\u63a5\u53e3\uff1a user . getRolesInBackground ( new FindCallback AVRole () { @Override public void done ( List AVRole avRoles , AVException avException ) { // avRoles \u8868\u793a\u8fd9\u4e2a\u7528\u6237\u62e5\u6709\u7684\u89d2\u8272 }); // \u7b2c\u4e8c\u79cd\u65b9\u5f0f\u662f\u901a\u8fc7\u6784\u5efa AVQuery\uff1a AVQuery AVRole roleQuery = new AVQuery AVRole ( _Role ); roleQuery . whereEqualTo ( users , user ); roleQuery . findInBackground ( new FindCallback AVRole () { @Override public void done ( List AVRole list , AVException e ) { // list \u5c31\u662f\u4e00\u4e2a AVRole \u7684 List\uff0c\u8fd9\u4e9b AVRole \u5c31\u662f\u5f53\u524d\u7528\u6237\u6240\u5728\u62e5\u6709\u7684\u89d2\u8272 } }); JavaScript //\u7b2c\u4e00\u79cd\u662f\u901a\u8fc7 AV.User \u7684\u5185\u7f6e\u63a5\u53e3\uff1a user . getRoles (). then ( function ( roles ){ // roles \u662f\u4e00\u4e2a AV.Role \u6570\u7ec4\uff0c\u8fd9\u4e9b AV.Role \u8868\u793a user \u62e5\u6709\u7684\u89d2\u8272 }); // \u7b2c\u4e8c\u79cd\u662f\u901a\u8fc7\u67e5\u8be2\uff1a // \u65b0\u5efa\u89d2\u8272\u67e5\u8be2 var roleQuery = new AV . Query ( AV . Role ); // \u67e5\u8be2\u5f53\u524d\u7528\u6237\u62e5\u6709\u7684\u89d2\u8272 roleQuery . equalTo ( users , AV . User . current ()); roleQuery . find (). then ( function ( roles ) { // roles \u662f\u4e00\u4e2a AV.Role \u6570\u7ec4\uff0c\u8fd9\u4e9b AV.Role \u8868\u793a\u5f53\u524d\u7528\u6237\u6240\u62e5\u6709\u7684\u89d2\u8272 }, function ( error ) { }); Python import leancloud user = leancloud . User () user . login ( username , password ) # \u7b2c\u4e00\u79cd\u65b9\u5f0f\u662f\u901a\u8fc7 User \u7684\u5185\u7f6e\u63a5\u53e3\uff1a role_query_list = user . get_roles () # \u7b2c\u4e8c\u79cd\u65b9\u5f0f\u662f\u901a\u8fc7\u6784\u5efa Query\uff1a role_query = leancloud . Query ( leancloud . Role ) role_query . equal_to ( users , leancloud . User . get_current ()) role_query_list = role_query . find () # \u8fd4\u56de\u5f53\u524d\u7528\u6237\u7684\u89d2\u8272\u5217\u8868 \u67e5\u8be2\u54ea\u4e9b\u7528\u6237\u90fd\u88ab\u8d4b\u4e88 Moderator \u89d2\u8272\uff1a Objective-C AVRole * moderatorRole = //\u6839\u636e id \u67e5\u8be2\u6216\u8005\u6839\u636e name \u67e5\u8be2\u51fa\u4e00\u4e2a\u5b9e\u4f8b AVRelation * userRelation = [ moderatorRole users ]; AVQuery * userQuery = [ userRelation query ]; [ userQuery findObjectsInBackgroundWithBlock : ^ ( NSArray * objects , NSError * error ) { // objects \u5c31\u662f\u62e5\u6709 moderatorRole \u89d2\u8272\u7684\u6240\u6709\u7528\u6237\u4e86\u3002 }]; Swift let moderatorRole = # An AVRole # //\u6839\u636e id \u67e5\u8be2\u6216\u8005\u6839\u636e name \u67e5\u8be2\u51fa\u4e00\u4e2a\u5b9e\u4f8b let userRelation = moderatorRole . users () let userQuery = userRelation . query () userQuery . findObjectsInBackground { ( objects , error ) in // objects \u5c31\u662f\u62e5\u6709 moderatorRole \u89d2\u8272\u7684\u6240\u6709\u7528\u6237\u4e86\u3002 } Java AVRole moderatorRole = new AVRole ( Moderator ); //\u6839\u636e id \u67e5\u8be2\u6216\u8005\u6839\u636e name \u67e5\u8be2\u51fa\u4e00\u4e2a\u5b9e\u4f8b AVRelation AVUser userRelation = moderatorRole . getUsers (); AVQuery AVUser userQuery = userRelation . getQuery (); userQuery . findInBackground ( new FindCallback AVUser () { @Override public void done ( List AVUser list , AVException e ) { // list \u5c31\u662f\u62e5\u6709\u8be5\u89d2\u8272\u6743\u9650\u7684\u6240\u6709\u7528\u6237\u4e86\u3002 } }); JavaScript var roleQuery = new AV . Query ( AV . Role ); roleQuery . get ( 55f1572460b2ce30e8b7afde ). then ( function ( role ) { //\u83b7\u53d6 Relation \u5b9e\u4f8b var userRelation = role . getUsers (); // \u83b7\u53d6\u67e5\u8be2\u5b9e\u4f8b var query = userRelation . query (); return query . find (); }). then ( function ( results ) { // results \u5c31\u662f\u62e5\u6709 role \u89d2\u8272\u7684\u6240\u6709\u7528\u6237\u4e86 }). catch ( function ( error ) { console . log ( error ); }); Python import leancloud role_query = leancloud . Query ( leancloud . Role ) role = role_query . get ( 573d5fdc2e958a0069f5d6fe ) # \u6839\u636e objectId \u83b7\u53d6 role \u5bf9\u8c61 user_relation = role . get_users () # \u83b7\u53d6 user \u7684 relation user_list = user_relation . query . find () # \u6839\u636e relation \u67e5\u627e\u6240\u5305\u542b\u7684\u7528\u6237\u5217\u8868","title":"\u89d2\u8272\u7684\u67e5\u8be2"},{"location":"storage/acl/#_12","text":"\u89d2\u8272\u4ece\u5c5e\u5173\u7cfb\u662f\u4e3a\u4e86\u5b9e\u73b0\u4e0d\u540c\u89d2\u8272\u7684\u6743\u9650\u5171\u4eab\u4ee5\u53ca\u6743\u9650\u9694\u79bb\u3002 \u6743\u9650\u5171\u4eab\u5f88\u597d\u7406\u89e3\uff0c\u6bd4\u5982\u7ba1\u7406\u5458\u62e5\u6709\u8bba\u575b\u6240\u6709\u677f\u5757\u7684\u7ba1\u7406\u6743\u9650\uff0c\u800c\u7248\u4e3b\u53ea\u62e5\u6709\u5355\u4e00\u677f\u5757\u7684\u7ba1\u7406\u6743\u9650\uff0c\u5982\u679c\u5f00\u53d1\u4e00\u4e2a\u7248\u4e3b\u4f7f\u7528\u7684\u65b0\u529f\u80fd\uff0c\u90fd\u8981\u540c\u6837\u7684\u4e3a\u7ba1\u7406\u5458\u8bbe\u7f6e\u8be5\u9879\u529f\u80fd\u6743\u9650\uff0c\u4ee3\u7801\u5c31\u4f1a\u5197\u4f59\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u901a\u4fd7\u7684\u7406\u89e3\u662f\uff1a\u7ba1\u7406\u5458\u4e5f\u662f\u7248\u4e3b\uff0c\u53ea\u662f\u4ed6\u662f\u6240\u6709\u677f\u5757\u7684\u7248\u4e3b\u3002\u56e0\u6b64\uff0c\u7ba1\u7406\u5458\u5728\u89d2\u8272\u4ece\u5c5e\u7684\u5173\u7cfb\u4e0a\u662f\u5c5e\u4e8e\u7248\u4e3b\u7684\uff0c\u53ea\u4e0d\u8fc7 TA \u662f\u7279\u6b8a\u7684\u7248\u4e3b\u3002 Objective-C AVRole * administratorRole = //\u4ece\u670d\u52a1\u7aef\u67e5\u8be2\u51fa Administrator \u89d2\u8272\u5b9e\u4f8b AVRole * moderatorRole = //\u4ece\u670d\u52a1\u7aef\u67e5\u8be2\u51fa Moderator \u89d2\u8272\u5b9e\u4f8b // \u5411 moderatorRole \u7684 roles\uff08AVRelation\uff09\u4e2d\u6dfb\u52a0 administratorRole [[ moderatorRole roles ] addObject : administratorRole ]; [ moderatorRole saveInBackground ]; /** * \u4ee5\u4e0a\u7528\u540c\u6b65\u65b9\u6cd5\u662f\u4e3a\u4e86\u4fdd\u8bc1\u5728\u8c03\u7528 [[moderator roles] addObject:administratorRole] \u4e4b\u524d administratorRole \u548c moderator \u90fd\u5df2\u4fdd\u5b58\u5728\u670d\u52a1\u7aef **/ Swift let administratorRole : AVRole = # An AVRole # // \u4ece\u670d\u52a1\u7aef\u67e5\u8be2\u51fa Administrator \u89d2\u8272\u5b9e\u4f8b let moderatorRole : AVRole = # An AVRole # //\u4ece\u670d\u52a1\u7aef\u67e5\u8be2\u51fa Moderator \u89d2\u8272\u5b9e\u4f8b moderatorRole . roles (). add ( administratorRole ) moderatorRole . save () Java AVRole administratorRole = // \u4ece\u670d\u52a1\u7aef\u67e5\u8be2 Administrator \u5b9e\u4f8b AVRole moderatorRole = // \u4ece\u670d\u52a1\u7aef\u67e5\u8be2 Moderator \u5b9e\u4f8b // \u5411 moderatorRole \u7684 roles\uff08AVRelation\uff09 \u4e2d\u6dfb\u52a0 administratorRole moderatorRole . getRoles (). add ( administratorRole ); moderatorRole . saveInBackground (); JavaScript // \u5efa\u7acb\u7248\u4e3b\u548c\u8bba\u575b\u7ba1\u7406\u5458\u4e4b\u95f4\u7684\u4ece\u5c5e\u5173\u7cfb var administratorRole = new AV . Role ( Administrator ); var administratorRole . save (). then ( function ( administratorRole ) { //\u65b0\u5efa\u7248\u4e3b\u89d2\u8272 var moderatorRole = new AV . Role ( Moderator ); // \u5c06 Administrator \u4f5c\u4e3a moderatorRole \u5b50\u89d2\u8272 moderatorRole . getRoles (). add ( administratorRole ); return moderatorRole . save (); }). then ( function ( role ) { chai . assert . isNotNull ( role . id ); done (); }). catch ( function ( error ) { console . log ( error ); }); Python import leancloud # \u5efa\u7acb\u7248\u4e3b\u548c\u8bba\u575b\u7ba1\u7406\u5458\u4e4b\u95f4\u7684\u89d2\u8272\u4ece\u5c5e\u5173\u7cfb administrator_role = leancloud . Role ( Administrator ) # \u65b0\u5efa\u89d2\u8272 moderator_role = leancloud . Role ( Moderator ) # \u65b0\u5efa\u89d2\u8272 moderator_acl = leancloud . ACL () # \u8fd9\u91cc\u4e3a\u4e86\u5728\u540e\u9762\u53ef\u4ee5\u6dfb\u52a0 moderator_role \u53ef\u4ee5\u6dfb\u52a0 role\uff0c \u8bbe\u7f6e\u4e00\u4e2a\u53ef\u5199\u6743\u9650 moderator_acl . set_public_write_access ( True ) moderator_role . set_acl ( moderator_acl ) administrator_role . save () moderator_role . save () # \u5c06 Administrator \u8bbe\u4e3a moderator_role \u4e00\u4e2a\u5b50\u89d2\u8272 moderator_role . get_roles () . add ( administrator_role ) moderator_role . save () \u6743\u9650\u9694\u79bb\u4e5f\u5c31\u662f\u4e24\u4e2a\u89d2\u8272\u4e0d\u5b58\u5728\u4ece\u5c5e\u5173\u7cfb\uff0c\u4f46\u662f\u67d0\u4e9b\u6743\u9650\u53c8\u662f\u5171\u4eab\u7684\uff0c\u6b64\u65f6\u4e0d\u59a8\u8bbe\u8ba1\u4e00\u4e2a\u4e2d\u95f4\u89d2\u8272\uff0c\u8ba9\u524d\u9762\u4e24\u4e2a\u89d2\u8272\u4ece\u5c5e\u4e8e\u4e2d\u95f4\u89d2\u8272\uff0c\u8fd9\u6837\u5728\u903b\u8f91\u4e0a\u53ef\u4ee5\u5f88\u5feb\u68b3\u7406\uff0c\u5176\u5b9e\u672c\u8d28\u4e0a\u8fd8\u662f\u4f7f\u7528\u4e86\u89d2\u8272\u7684\u4ece\u5c5e\u5173\u7cfb\u3002 \u6bd4\u5982\uff0c\u7248\u4e3b A \u662f\u6444\u5f71\u5668\u6750\u677f\u5757\u7684\u7248\u4e3b\uff0c\u800c\u7248\u4e3b B \u662f\u624b\u673a\u5e73\u677f\u677f\u5757\u7684\u7248\u4e3b\uff0c\u73b0\u5728\u65b0\u5f00\u653e\u4e86\u4e00\u4e2a\u7535\u5b50\u6570\u7801\u7248\u5757\uff0c\u800c\u9700\u6c42\u89c4\u5b9a A \u548c B \u90fd\u540c\u65f6\u5177\u5907\u7ba1\u7406\u7535\u5b50\u6570\u7801\u677f\u5757\u7684\u6743\u9650\uff0c\u4f46\u662f A \u4e0d\u5177\u5907\u7ba1\u7406\u624b\u673a\u5e73\u677f\u7248\u5757\u7684\u6743\u9650\uff0c\u53cd\u4e4b\u4ea6\u7136\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u8bbe\u7f6e\u4e00\u4e2a\u7535\u5b50\u6570\u7801\u677f\u5757\u7684\u7248\u4e3b\u89d2\u8272\uff08\u4e2d\u95f4\u89d2\u8272\uff09\uff0c\u540c\u65f6\u8ba9 A \u548c B \u62e5\u6709\u8be5\u89d2\u8272\u5373\u53ef\u3002 Objective-C // \u65b0\u5efa 3 \u4e2a\u89d2\u8272\u5b9e\u4f8b AVRole * photographicRole = //\u521b\u5efa\u6216\u8005\u4ece\u670d\u52a1\u7aef\u67e5\u8be2\u51fa Photographic \u89d2\u8272\u5b9e\u4f8b AVRole * mobileRole = //\u521b\u5efa\u6216\u4ece\u670d\u52a1\u7aef\u67e5\u8be2\u51fa Mobile \u89d2\u8272\u5b9e\u4f8b AVRole * digitalRole = //\u521b\u5efa\u6216\u4ece\u670d\u52a1\u7aef\u67e5\u8be2\u51fa Digital \u89d2\u8272\u5b9e\u4f8b // photographicRole \u548c mobileRole \u7ee7\u627f\u4e86 digitalRole [[ digitalRole roles ] addObject : photographicRole ]; [[ digitalRole roles ] addObject : mobileRole ]; [ digitalRole saveInBackgroundWithBlock : ^ ( BOOL succeeded , NSError * error ) { AVObject * photographicPost = [ AVObject objectWithClassName : @ Post ]; AVObject * mobilePost = [ AVObject objectWithClassName : @ Post ]; AVObject * digitalPost = [ AVObject objectWithClassName : @ Post ]; //.....\u6b64\u5904\u7701\u7565\u4e00\u4e9b\u5177\u4f53\u7684\u503c\u8bbe\u5b9a AVACL * photographicACL = [ AVACL ACL ]; [ photographicACL setReadAccess : YES forRole : photographicRole ]; [ photographicACL setPublicReadAccess : YES ]; [ photographicACL setWriteAccess : YES forRole : photographicRole ]; [ photographicPost setACL : photographicACL ]; AVACL * mobileACL = [ AVACL ACL ]; [ mobileACL setReadAccess : YES forRole : mobileRole ]; [ mobileACL setWriteAccess : YES forRole : mobileRole ]; [ mobilePost setACL : mobileACL ]; AVACL * digitalACL = [ AVACL ACL ]; [ digitalACL setReadAccess : YES forRole : digitalRole ]; [ digitalPost setACL : digitalACL ]; // photographicPost \u53ea\u6709 photographicRole \u53ef\u4ee5\u8bfb\u5199 // mobilePost \u53ea\u6709 mobileRole \u53ef\u4ee5\u8bfb\u5199 // \u800c photographicRole\uff0cmobileRole\uff0cdigitalRole \u5747\u53ef\u4ee5\u5bf9 digitalPost \u8fdb\u884c\u8bfb\u5199 [ photographicPost saveInBackground ]; [ mobilePost saveInBackground ]; [ digitalPost saveInBackground ]; }]; Swift let photographicRole : AVRole = # An Role # let mobileRole : AVRole = # An Role # let digitalRole : AVRole = # An Role # digitalRole . roles (). add ( photographicRole ) digitalRole . roles (). add ( mobileRole ) digitalRole . saveInBackground { ( succeeded , error ) in guard succeeded else { return } let photographicPost = AVObject ( className : Post ) let photographicACL = AVACL () photographicACL . setPublicReadAccess ( true ) photographicACL . setWriteAccess ( true , for : photographicRole ) photographicPost . acl = photographicACL let mobilePost = AVObject ( className : Post ) let mobileACL = AVACL () mobileACL . setPublicReadAccess ( true ) mobileACL . setWriteAccess ( true , for : mobileRole ) mobilePost . acl = mobileACL let digitalPost = AVObject ( className : Post ) let digitalACL = AVACL () digitalACL . setPublicReadAccess ( true ) digitalACL . setWriteAccess ( true , for : digitalRole ) digitalPost . acl = digitalACL AVObject . saveAll ([ photographicPost , mobilePost , digitalPost ] ) } Java // \u65b0\u5efa 3\u4e2a\u89d2\u8272\u5b9e\u4f8b AVRole photographicRole = // \u521b\u5efa\u6216\u8005\u521b\u5efa Photographic \u89d2\u8272 AVRole mobileRole = // \u521b\u5efa\u6216\u8005\u521b\u5efa Mobile \u89d2\u8272 AVRole digitalRole = // \u521b\u5efa\u6216\u8005\u521b\u5efa Digital \u89d2\u8272 // photographicRole \u548c mobileRole \u7ee7\u627f\u4e86 digitalRole digitalRole . getRoles (). add ( photographicRole ); digitalRole . getRoles (). add ( mobileRole ); digitalRole . saveInBackground ( new SaveCallback () { @Override public void done ( AVException e ) { //\u65b0\u5efa 3 \u7bc7\u8d34\u5b50\uff0c\u5206\u522b\u53d1\u5728\u4e0d\u540c\u7684\u677f\u5757\u4e0a AVObject photographicPost = new AVObject ( Post ); AVObject mobilePost = new AVObject ( Post ); AVObject digitalPost = new AVObject ( Post ); //.....\u6b64\u5904\u7701\u7565\u4e00\u4e9b\u5177\u4f53\u7684\u503c\u8bbe\u5b9a AVACL photographicACL = new AVACL (); photographicACL . setPublicReadAccess ( true ); photographicACL . setRoleWriteAccess ( photographicRole , true ); photographicPost . setACL ( photographicACL ); AVACL mobileACL = new AVACL (); mobileACL . setPublicReadAccess ( true ); mobileACL . setRoleWriteAccess ( mobileRole , true ); mobilePost . setACL ( mobileACL ); AVACL digitalACL = new AVACL (); digitalACL . setPublicReadAccess ( true ); digitalACL . setRoleWriteAccess ( digitalRole , true ); digitalPost . setACL ( digitalACL ); // photographicPost \u53ea\u6709 photographicRole \u53ef\u4ee5\u8bfb\u5199 // mobilePost \u53ea\u6709 mobileRole \u53ef\u4ee5\u8bfb\u5199 // \u800c photographicRole\uff0cmobileRole\uff0cdigitalRole \u5747\u53ef\u4ee5\u5bf9 digitalPost \u8fdb\u884c\u8bfb\u5199 photographicPost . saveInBackground (); mobilePost . saveInBackground (); digitalPost . saveInBackground (); } }); JavaScript //\u65b0\u5efa\u6444\u5f71\u5668\u6750\u7248\u4e3b\u89d2\u8272 var photographicRole = new AV . Role ( Photographic ); //\u65b0\u5efa\u624b\u673a\u5e73\u677f\u7248\u4e3b\u89d2\u8272 var mobileRole = new AV . Role ( Mobile ); //\u65b0\u5efa\u7535\u5b50\u6570\u7801\u7248\u4e3b\u89d2\u8272 var digitalRole = new AV . Role ( Digital ); AV . Promise . all ([ // \u5148\u884c\u4fdd\u5b58 photographicRole \u548c mobileRole photographicRole . save (), mobileRole . save (), ]). then ( function ([ r1 , r2 ]) { // \u5c06 photographicRole \u548c mobileRole \u8bbe\u4e3a digitalRole \u4e00\u4e2a\u5b50\u89d2\u8272 digitalRole . getRoles (). add ( photographicRole ); digitalRole . getRoles (). add ( mobileRole ); digitalRole . save (); // \u65b0\u5efa\u4e00\u4e2a\u5e16\u5b50\u5bf9\u8c61 var Post = AV . Object . extend ( Post ); // \u65b0\u5efa\u6444\u5f71\u5668\u6750\u677f\u5757\u7684\u5e16\u5b50 var photographicPost = new Post (); photographicPost . set ( title , \u6211\u662f\u6444\u5f71\u5668\u6750\u677f\u5757\u7684\u5e16\u5b50\uff01 ); // \u65b0\u5efa\u624b\u673a\u5e73\u677f\u677f\u5757\u7684\u5e16\u5b50 var mobilePost = new Post (); mobilePost . set ( title , \u6211\u662f\u624b\u673a\u5e73\u677f\u677f\u5757\u7684\u5e16\u5b50\uff01 ); // \u65b0\u5efa\u7535\u5b50\u6570\u7801\u677f\u5757\u7684\u5e16\u5b50 var digitalPost = new Post (); digitalPost . set ( title , \u6211\u662f\u7535\u5b50\u6570\u7801\u677f\u5757\u7684\u5e16\u5b50\uff01 ); // \u65b0\u5efa\u4e00\u4e2a\u6444\u5f71\u5668\u6750\u7248\u4e3b\u53ef\u5199\u7684 ACL \u5b9e\u4f8b var photographicACL = new AV . ACL (); photographicACL . setPublicReadAccess ( true ); photographicACL . setRoleWriteAccess ( photographicRole , true ); // \u65b0\u5efa\u4e00\u4e2a\u624b\u673a\u5e73\u677f\u7248\u4e3b\u53ef\u5199\u7684 ACL \u5b9e\u4f8b var mobileACL = new AV . ACL (); mobileACL . setPublicReadAccess ( true ); mobileACL . setRoleWriteAccess ( mobileRole , true ); // \u65b0\u5efa\u4e00\u4e2a\u624b\u673a\u5e73\u677f\u7248\u4e3b\u53ef\u5199\u7684 ACL \u5b9e\u4f8b var digitalACL = new AV . ACL (); digitalACL . setPublicReadAccess ( true ); digitalACL . setRoleWriteAccess ( digitalRole , true ); // photographicPost \u53ea\u6709 photographicRole \u53ef\u4ee5\u8bfb\u5199 // mobilePost \u53ea\u6709 mobileRole \u53ef\u4ee5\u8bfb\u5199 // \u800c photographicRole\uff0cmobileRole\uff0cdigitalRole \u5747\u53ef\u4ee5\u5bf9 digitalPost \u8fdb\u884c\u8bfb\u5199 photographicPost . setACL ( photographicACL ); mobilePost . setACL ( mobileACL ); digitalPost . setACL ( digitalACL ); return AV . Promise . all ([ photographicPost . save (), mobilePost . save (), digitalPost . save (), ]); }). then ( function ([ r1 , r2 , r3 ]) { // \u4fdd\u5b58\u6210\u529f }, function ( errors ) { // \u4fdd\u5b58\u5931\u8d25 });; Python import leancloud photographic_role = leancloud . Role ( Photographic ) # \u65b0\u5efa\u6444\u5f71\u5668\u6750\u7248\u4e3b\u89d2\u8272 mobile_role = leancloud . Role ( Mobile ) # \u65b0\u5efa\u624b\u673a\u5e73\u677f\u7248\u4e3b\u89d2\u8272 digital_role = leancloud . Role ( Digital ) # \u65b0\u5efa\u7535\u5b50\u6570\u7801\u7248\u4e3b\u89d2\u8272 # \u5148\u884c\u4fdd\u5b58 photographic_role \u548c mobile_role photographic_role . save () mobile_role . save () # \u5c06 photographic_role \u548c mobile_role \u8bbe\u4e3a digital_role \u4e00\u4e2a\u5b50\u89d2\u8272 digital_role . get_roles () . add ( photographic_role ) digital_role . get_roles () . add ( mobile_role ) digital_role . save () # \u4fdd\u5b58 # \u65b0\u5efa\u4e00\u4e2a\u5e16\u5b50\u5bf9\u8c61 Post = leancloud . Object . extend ( Post ) # \u65b0\u5efa\u6444\u5f71\u5668\u6750\u677f\u5757\u7684\u5e16\u5b50 photographic_post = Post () photographic_post . set ( title , \u6211\u662f\u6444\u5f71\u5668\u6750\u677f\u5757\u7684\u5e16\u5b50\uff01 ) # \u65b0\u5efa\u624b\u673a\u5e73\u677f\u677f\u5757\u7684\u5e16\u5b50 mobile_post = Post () mobile_post . set ( title , \u6211\u662f\u624b\u673a\u5e73\u677f\u677f\u5757\u7684\u5e16\u5b50\uff01 ) # \u65b0\u5efa\u7535\u5b50\u6570\u7801\u677f\u5757\u7684\u5e16\u5b50 digital_post = Post () digital_post . set ( title , \u6211\u662f\u7535\u5b50\u6570\u7801\u677f\u5757\u7684\u5e16\u5b50\uff01 ) # \u65b0\u5efa\u4e00\u4e2a\u6444\u5f71\u5668\u6750\u7248\u4e3b\u53ef\u5199\u7684 leancloud.ACL \u5b9e\u4f8b photographic_acl = leancloud . ACL () photographic_acl . set_public_read_access ( True ) photographic_acl . set_role_write_access ( photographic_role , True ) # \u65b0\u5efa\u4e00\u4e2a\u624b\u673a\u5e73\u677f\u7248\u4e3b\u53ef\u5199\u7684 leancloud.ACL \u5b9e\u4f8b mobile_acl = leancloud . ACL (); mobile_acl . set_public_read_access ( True ) mobile_acl . set_role_write_access ( mobile_role , True ) # \u65b0\u5efa\u4e00\u4e2a\u624b\u673a\u5e73\u677f\u7248\u4e3b\u53ef\u5199\u7684 leancloud.ACL \u5b9e\u4f8b digital_acl = leancloud . ACL () digital_acl . set_public_read_access ( True ) digital_acl . set_role_write_access ( digital_role , True ) # photographic_post \u53ea\u6709 photographic_role \u53ef\u4ee5\u8bfb\u5199 # mobile_post \u53ea\u6709 mobile_role \u53ef\u4ee5\u8bfb\u5199 # \u800c photographic_role\uff0cmobile_role\uff0cdigital_role \u5747\u53ef\u4ee5\u5bf9 digital_post \u8fdb\u884c\u8bfb\u5199 photographic_post . set_acl ( photographic_acl ) mobile_post . set_acl ( mobile_acl ) digital_post . set_acl ( digital_acl ) photographic_post . save () mobile_post . save () digital_post . save ()","title":"\u89d2\u8272\u7684\u4ece\u5c5e\u5173\u7cfb"},{"location":"storage/acl/#_13","text":"\u5728\u65e5\u5e38\u751f\u6d3b\u4e2d\uff0c\u6211\u4eec\u4e5f\u9047\u5230\u8fc7\u6743\u9650\u5206\u7ea7\u7684\u95ee\u9898\uff0c\u4f8b\u5982\u65b0\u7684\u7cfb\u7edf\u53c8\u4e00\u6b21\u5347\u7ea7\uff0c\u5f15\u5165\u4e86\u8d85\u7ea7\u7ba1\u7406\u5458\u7684\u6982\u5ff5\uff0c\u8fd9\u4e2a\u8d85\u7ea7\u7ba1\u7406\u5458\u53ef\u4ee5\u5bf9\u7cfb\u7edf\u91cc\u9762\u4efb\u4f55\u7684\u5bf9\u8c61\u8fdb\u884c\u300c\u8bfb\u5199\u64cd\u4f5c\u300d\uff0c\u6309\u7167\u524d\u6587\u7684\u505a\u6cd5\uff0c\u9700\u8981\u7528\u4ee3\u7801\u5b9e\u73b0\u5982\u4e0b\u6b65\u9aa4\uff1a \u521b\u5efa\u8d85\u7ea7\u7ba1\u7406\u5458\u89d2\u8272 \u904d\u5386\u4e91\u7aef\u73b0\u6709\u7684\u5e16\u5b50\uff0c\u4e3a\u6240\u6709\u5bf9\u8c61\u6dfb\u52a0\u8d85\u7ea7\u7ba1\u7406\u5458\u7684\u300cACL \u8bfb\u5199\u6743\u9650\u300d \u4fdd\u5b58\u6570\u636e \u5f00\u53d1\u8005\u4e00\u65e6\u9762\u5bf9\u8fd9\u79cd\u903b\u8f91\u91cd\u590d\u7684\u4ee3\u7801\uff0c\u4e00\u822c\u90fd\u4f1a\u60f3\u5230\uff1a\u6709\u6ca1\u6709\u4e00\u4e2a\u5feb\u6377\u7684\u64cd\u4f5c\u53ef\u4ee5\u4e00\u6b21\u6027\u4e3a\u67d0\u4e00\u4e2a\u89d2\u8272\u6dfb\u52a0\u6574\u4e2a Class \u6dfb\u52a0\u6743\u9650\uff1f \u5f53\u7136\uff0cLeanCloud \u4e5f\u5df2\u7ecf\u63d0\u4f9b\u4e86\u4fbf\u6377\u7684\u53ef\u89c6\u5316\u7684\u64cd\u4f5c\u3002\u6253\u5f00 \u63a7\u5236\u53f0 \u5b58\u50a8 Post \u5176\u4ed6 \u6743\u9650\u8bbe\u7f6e \uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u8fd9\u91cc\u4f60\u53ef\u4ee5\u8bbe\u7f6e\u67d0\u4e00\u4e2a\u89d2\u8272\u5bf9 Post \u7684\u64cd\u4f5c\u6743\u9650\uff1a\u9009\u62e9 \u6307\u5b9a\u7528\u6237 \uff0c\u5728\u6307\u5b9a\u89d2\u8272\u4e2d\u8f93\u5165 superAdmin \uff0c\u5e76\u4e14\u70b9\u51fb\u6dfb\u52a0\u5373\u53ef\u3002 \u5982\u6b64\u8bbe\u7f6e\uff0c\u65e0\u9700\u4e66\u5199\u4ee3\u7801\uff0c\u5728\u9879\u76ee\u8fed\u4ee3\u8fc7\u7a0b\u4e2d\u6709\u89d2\u8272\u52a0\u5165\u90fd\u53ef\u4ee5\u7528\u8fd9\u79cd\u4fbf\u6377\u7684\u65b9\u5f0f\u8fdb\u884c\u64cd\u4f5c\u3002 \u6743\u9650\u8bbe\u7f6e\u7684\u53c2\u6570\u4ee5\u53ca\u64cd\u4f5c\u89e3\u91ca\u5982\u4e0b\uff1a \u53c2\u6570\u540d \u542b\u4e49 add_fields \u6dfb\u52a0\u65b0\u5b57\u6bb5\u5230 Class create \u4fdd\u5b58\u4e00\u4e2a\u4ece\u672a\u521b\u5efa\u8fc7\u7684\u65b0\u5bf9\u8c61 delete \u5220\u9664\u4e00\u4e2a\u5bf9\u8c61 find \u53d1\u8d77\u4e00\u6b21\u5bf9\u8c61\u5217\u8868\u67e5\u8be2 get \u901a\u8fc7 objectId \u83b7\u53d6\u5bf9\u8c61 update \u4fdd\u5b58\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u5e76\u4e14\u88ab\u4fee\u6539\u7684\u5bf9\u8c61 \u6743\u9650\u5bf9\u8c61\u540d \u542b\u4e49 \u6240\u6709\u7528\u6237 \u4efb\u610f\u7528\u6237\u5747\u6709\u6743\u9650 \u767b\u5f55\u7528\u6237 \u7528\u6237\u767b\u5f55\u4e4b\u540e\uff0c\u5177\u6709\u6743\u9650 \u6307\u5b9a\u7528\u6237 \u53ef\u4ee5\u6307\u5b9a\u5177\u4f53\u7684\u7528\u6237\uff08 _User \uff09\u4e5f\u53ef\u4ee5\u6307\u5b9a\u5177\u4f53\u7684\u89d2\u8272\uff08 _Role \uff09","title":"\u6743\u9650\u7684\u5206\u7ea7"},{"location":"storage/acl/#class-object-acl","text":"\u5047\u8bbe\u73b0\u5728\u9700\u8981\u65b0\u589e\u4e00\u5f20\u8868\uff0c\u6211\u4eec\u63a8\u8350\u6709\u5173\u7cfb\u578b\u6570\u636e\u5e93\u5f00\u53d1\u7ecf\u9a8c\u7684\u5f00\u53d1\u8005\u91c7\u7528\u5982\u4e0b\u6b65\u9aa4\uff1a \u8fdb\u5165 \u63a7\u5236\u53f0 \u5b58\u50a8 \u521b\u5efa Class \uff0c\u4f1a\u5f39\u51fa\u5982\u4e0b\u754c\u9762\uff1a \u7136\u540e\u6839\u636e\u5b9e\u9645\u4e1a\u52a1\u903b\u8f91\u7684\u9700\u6c42\u9009\u62e9\u8fd9\u5f20\u8868\u7684\u6743\u9650\uff0c\u4f8b\u5982\u8fd9\u5f20\u8868\u9ed8\u8ba4\u662f\u9650\u5236\u5199\u5165\u3002 \u800c\u5728\u540e\u671f\u5f00\u53d1\u7684\u8fc7\u7a0b\u4e2d\u53d1\u73b0\uff0c\u6709\u4e00\u4e24\u4e2a\u5bf9\u8c61\u9700\u8981\u5171\u4eab\u7ed9\u5176\u4ed6\u7528\u6237\u4e5f\u53ef\u4fee\u6539\uff0c\u6bd4\u5982\u4e00\u7bc7\u535a\u5ba2\u60f3\u53d1\u5e03\u5728\u516c\u7f51\u4e0a\uff0c\u5ba1\u6838\u4eba\u5458\u662f\u9700\u8981\u5199\u6743\u9650\u7684\uff0c\u56e0\u6b64\u53ef\u4ee5\u901a\u8fc7\u4ee3\u7801\u5728\u521b\u5efa\u5bf9\u8c61\u7684\u65f6\u5019\u6307\u5b9a\u4e00\u4e2a ACL \u5c31\u53ef\u4ee5\u5b9e\u73b0\u8fd9\u79cd\u52a8\u6001\u7684 ACL \u6548\u679c\uff08\u4ee3\u7801\u793a\u4f8b \u5355\u7528\u6237\u6743\u9650\u8bbe\u7f6e \uff09\u3002 \u603b\u4e4b\uff0cLeanCloud \u7684 ACL \u7684\u9274\u6743\u903b\u8f91\u662f\u5148\u9a8c\u8bc1 Class \u7ea7\u522b\u7684 ACL \u662f\u5426\u5141\u8bb8\u901a\u8fc7\uff0c\u7d27\u63a5\u7740\u5c31\u4f1a\u9488\u5bf9\u8bbf\u95ee\u7684\u5bf9\u8c61\u81ea\u8eab\u7684 ACL \u8fdb\u884c\u9274\u6743\u3002 \u6362\u8a00\u4e4b\uff0c\u504f\u5411\u4e8e\u9759\u6001\u8bbe\u7f6e\u7684\u5e94\u7528\u53ef\u4ee5\u901a\u8fc7\u521b\u5efa Class \u65f6\u5019\u7684\u9009\u62e9\u6765\u5b9e\u73b0\uff0c\u800c\u6709\u52a8\u6001\u9700\u6c42\u7684\u5e94\u7528\u5c3d\u91cf\u5728\u521b\u5efa\u5bf9\u8c61\u7684\u65f6\u5019\u8bbe\u7f6e ACL\u3002","title":"\u8868 Class \u548c\u5bf9\u8c61 Object \u7684 ACL \u7ec4\u5408"},{"location":"storage/acl/#acl_3","text":"\u67e5\u8be2\u6570\u636e\u65f6\uff0cSDK \u9ed8\u8ba4\u4e0d\u4f1a\u8fd4\u56de\u5bf9\u8c61\u7684 ACL \u503c\u3002\u5982\u679c\u60f3\u5728\u83b7\u53d6\u5bf9\u8c61\u7684\u540c\u65f6\u8fd4\u56de\u5bf9\u8c61\u7684 ACL \u503c\uff0c\u9700\u8981\u540c\u65f6\u6ee1\u8db3\u4e0b\u9762\u4e24\u4e2a\u6761\u4ef6\uff1a \u8fdb\u5165 \u63a7\u5236\u53f0 \u5b58\u50a8 \u8bbe\u7f6e \u5176\u4ed6 \uff0c\u52fe\u9009\u300c\u67e5\u8be2\u65f6\u8fd4\u56de\u503c\u5305\u62ec ACL\u300d\u624d\u53ef\u4ee5\u5728\u67e5\u8be2\u7ed3\u679c\u4e2d\u83b7\u53d6\u5230 ACL \u7684\u6570\u636e\u3002 \u5ba2\u6237\u7aef\u67e5\u8be2\u5bf9\u8c61\u65f6\u9700\u8981\u6307\u5b9a includeACL \u3002 \u4ee3\u7801\u5982\u4e0b\uff1a Objective-C AVQuery * query = [ AVQuery queryWithClassName : @ Todo ]; query . includeACL = YES ; [ query findObjectsInBackgroundWithBlock : ^ ( NSArray * objects , NSError * error ) { }]; Swift let query = AVQuery ( className : Todo ) query . includeACL = true query . findObjectsInBackground { ( objects , error ) in } Java AVQuery AVObject query = new AVQuery ( Todo ); query . includeACL ( true ); query . findInBackground ( new FindCallback AVObject () { @Override public void done ( List AVObject list , AVException e ) { } }); JavaScript var query = new AV . Query ( Todo ); query . includeACL ( true ); query . find (). then ( function ( todos ) { // \u67e5\u8be2\u7ed3\u679c }). catch ( function ( error ){ // \u5f02\u5e38\u5904\u7406 })","title":"\u83b7\u53d6\u5bf9\u8c61\u7684 ACL \u503c"},{"location":"storage/acl/#_14","text":"ACL \u53ef\u4ee5\u6ee1\u8db3\u5e38\u89c1\u7684\u9700\u6c42\uff0c\u4f46\u662f _User \u8868\u6bd4\u8f83\u7279\u6b8a\uff0c\u5b83\u4f1a\u5ffd\u7565 ACL \u7684\u8bbe\u7f6e\uff0c\u8868\u73b0\u4e3a\uff1a\u4efb\u4f55\u7528\u6237\u90fd\u65e0\u6cd5\u4fee\u6539\u5176\u4ed6\u7528\u6237\u7684\u5c5e\u6027\uff0c\u6bd4\u5982\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u662f A\uff0c\u800c\u4ed6\u60f3\u901a\u8fc7\u8bf7\u6c42\u53bb\u4fee\u6539 B \u7528\u6237\u7684\u7528\u6237\u540d\uff0c\u5bc6\u7801\u6216\u8005\u5176\u4ed6\u81ea\u5b9a\u4e49\u5c5e\u6027\uff0c\u662f\u4e0d\u4f1a\u751f\u6548\u7684\u3002 \u4f46\u662f\u6709\u65f6\u4e00\u4e9b\u5e94\u7528\u7684\u9700\u6c42\u8f83\u4e3a\u7279\u6b8a\uff0c\u6bd4\u5982\uff0c\u8bba\u575b\u7684\u7ba1\u7406\u5458\u53ef\u4ee5\u4fee\u6539\u67d0\u4e9b\u7528\u6237\u7684\u6635\u79f0\uff0c\u6027\u522b\uff08\u5047\u8bbe\u6635\u79f0\u548c\u6027\u522b\u662f\u5b58\u50a8\u5728 _User \u7684 gender \u3001 age \u5b57\u6bb5\u4e0a\uff09\uff0c\u6b64\u65f6\u901a\u8fc7\u8bbe\u7f6e\u7ba1\u7406\u5458\u62e5\u6709\u8be5\u7528\u6237\u7684 ACL \u5199\u7684\u6743\u9650\u662f\u65e0\u6cd5\u5b9e\u73b0\u9884\u60f3\u6548\u679c\u7684\u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u79cd\u65b9\u5f0f\u53bb\u63d0\u9ad8\u64cd\u4f5c\u7684\u6743\u9650\uff0c\u5728\u652f\u6301\u4e91\u5f15\u64ce\u7684 SDK \u4e2d\u7684\u5b9e\u73b0\u65b9\u5f0f\u662f\u5728\u521d\u59cb\u5316\u7684\u65f6\u5019\uff0c\u589e\u52a0\u4e00\u4e2a Master Key \u7684\u5b57\u6bb5\u4f5c\u4e3a\u63d0\u9ad8\u6743\u9650\u7684\u63a5\u53e3\u3002Master Key \u53ef\u4ee5\u5728 \u63a7\u5236\u53f0 \u8bbe\u7f6e \u5e94\u7528 Key \u4e2d\u83b7\u53d6\u3002 {{ docs.alert(\"Objective-C \u4ee5\u53ca Android SDK \u4e0d\u53ef\u4ee5\u4f7f\u7528 Master Key\u3002\") }}","title":"\u8d85\u7ea7\u6743\u9650"},{"location":"storage/acl/#_15","text":"\u672c\u7ae0\u8282\u7684\u76ee\u7684\u662f\u4ecb\u7ecd\u5982\u4f55\u5728 \u4e91\u5f15\u64ce \u91cc\u9762\u4f7f\u7528 ACL \u3002 \u6211\u4eec\u5148\u6765\u63a2\u7d22\u4e00\u4e2a\u9700\u6c42\uff1a\u67d0\u4e2a\u5e94\u7528\u5b83\u62e5\u6709\u4f17\u591a\u5ba2\u6237\u7aef\uff0ciOS\u3001Andorid\u3001Windows \u7b49\uff0c\u8fd8\u6709 Web \u7248\uff0c\u672a\u6765\u53ef\u80fd\u8fd8\u4f1a\u6709\u624b\u73af\uff0c\u624b\u8868\u5ba2\u6237\u7aef\uff0c\u90a3\u4e48\u5173\u4e8e ACL \u7684\u4ee3\u7801\u4f1a\u904d\u5e03\u5728\u6240\u6709\u5ba2\u6237\u7aef\uff0c\u90a3\u4e48\u5f00\u53d1\u8005\u5c31\u4f1a\u9700\u8981\u4e0d\u65ad\u7684\u5347\u7ea7\u548c\u7ef4\u62a4\u903b\u8f91\u5341\u5206\u7c7b\u4f3c\u7684\u5ba2\u6237\u7aef\u4ee3\u7801\uff0c\u5230\u4e86\u8fd9\u4e00\u6b65\uff0c\u6211\u4eec\u66f4\u63a8\u8350\uff0c\u5f00\u53d1\u8005\u5728\u670d\u52a1\u7aef\u5b9a\u4e49\u4e00\u6bb5 ACL \u7684\u903b\u8f91\uff0c\u7edf\u4e00\u5904\u7406 ACL \u6743\u9650\u5206\u914d\u7684\u95ee\u9898\u3002 \u3010\u603b\u7ed3\u3011\u5047\u5982\u5e94\u7528\u7684\u5e73\u53f0\u6bd4\u8f83\u56fa\u5b9a\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u8003\u8651\u91c7\u53d6\u672c\u6587\u524d\u9762\u6240\u4ecb\u7ecd\u7684\u5ba2\u6237\u7aef\u4ee3\u7801\u5b9e\u73b0 ACL \u4ee3\u7801\u3002\u5982\u679c\u5e94\u7528\u7684\u5e73\u53f0\u6bd4\u8f83\u591a\uff0c\u591a\u5e73\u53f0\u591a\u5ba2\u6237\u7aef\u5c31\u63a8\u8350\u4f7f\u7528 \u4e91\u5f15\u64ce Hook \u51fd\u6570\u4f7f\u7528 ACL \u3002","title":"\u6700\u4f73\u5b9e\u8df5"},{"location":"storage/sdk-guide/","text":"","title":"Sdk guide"},{"location":"storage/storage-overview/","text":"\u6570\u636e\u5b58\u50a8\u670d\u52a1\u603b\u89c8 \u611f\u8c22\u4f60\u9009\u7528 LeanCloud \u6570\u636e\u5b58\u50a8\u670d\u52a1\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u6211\u4eec\u63d0\u4f9b\u7684 SDK\uff0c\u4e00\u884c\u540e\u7aef\u4ee3\u7801\u90fd\u4e0d\u7528\u5199\uff0c\u800c\u5feb\u901f\u5b8c\u6210\u4e00\u4e2a\u4ea7\u54c1\uff08\u7f51\u7ad9\u6216\u5e94\u7528\uff09\u7684\u5f00\u53d1\u548c\u53d1\u5e03\u3002 \u521d\u8877 \u5927\u90e8\u5206\u7684\u4ea7\u54c1\u90fd\u662f\u6570\u636e\u9a71\u52a8\u7684\uff0c\u5b83\u4eec\u6709\u4e00\u4e2a\u6700\u5927\u7684\u7279\u70b9\uff0c\u5c31\u662f\u5bf9\u540e\u7aef\u7684\u9700\u6c42\u5728\u6a21\u5f0f\u4e0a\u5176\u5b9e\u662f\u6bd4\u8f83\u7edf\u4e00\u7684\uff1a \u524d\u7aef\u8d1f\u8d23\u6570\u636e\u5c55\u73b0\u548c\u7528\u6237\u4ea4\u4e92\u5904\u7406\uff0c\u4e0e\u540e\u7aef\u7684 app server \u901a\u8fc7\u7f51\u7edc\u6765\u4ea4\u6362\u9700\u8981\u7684\u6570\u636e\uff1b app server \u8d1f\u8d23\u4e1a\u52a1\u903b\u8f91\u5904\u7406\uff0c\u751f\u6210\u6838\u5fc3\u6570\u636e\u5b58\u50a8\u5230 data server\uff0c\u6216\u8005\u805a\u5408 data server \u67e5\u8be2\u5230\u7684\u6570\u636e\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff1b data server \u8d1f\u8d23\u6838\u5fc3\u6570\u636e\u7684\u5b58\u50a8\u548c\u5907\u4efd\uff1b \u8fd9\u6837\u7684\u6a21\u5f0f\u9002\u5408\u4e92\u8054\u7f51\u4e0a\u7edd\u5927\u90e8\u5206\u4ea7\u54c1\uff0c\u867d\u7136\u6570\u636e\u7ed3\u6784\u6709\u5dee\u5f02\u3001\u4e1a\u52a1\u903b\u8f91\u4e0d\u4e00\u6837\uff0c\u4f46\u662f\u524d\u540e\u7aef\u4ea4\u4e92\u7684\u4e3b\u4f53\u2014\u2014\u300c\u6570\u636e\u300d\uff0c\u62bd\u8c61\u6765\u770b\u662f\u4e00\u81f4\u7684\uff0c\u540e\u7aef\u7684\u67b6\u6784\uff08\u8b6c\u5982 LAMP\uff09\u4e5f\u662f\u5927\u540c\u5c0f\u5f02\u7684\uff0c\u800c\u4e14\u540c\u6837\u7684\u7cfb\u7edf\u5728\u4e00\u904d\u4e00\u904d\u5730\u88ab\u91cd\u590d\u5f00\u53d1\uff0c\u6781\u5927\u6d6a\u8d39\u4e86\u6211\u4eec\u5b9d\u8d35\u7684\u6280\u672f\u8d44\u6e90\u3002 \u6211\u4eec\u7684\u89e3\u51b3\u65b9\u6848 LeanCloud \u5bf9\u5927\u90e8\u5206\u573a\u666f\u4e0b\u7684\u540e\u7aef\u9700\u6c42\u8fdb\u884c\u4e86\u62bd\u8c61\u548c\u7edf\u4e00\uff0c\u6211\u4eec\u901a\u8fc7\u56db\u5927\u7cfb\u7edf\u6765\u5b9e\u73b0\u4e00\u4e2a\u901a\u7528\u3001\u5f3a\u5927\u3001\u53ef\u5b9a\u5236\u7684 BaaS(Backend as a Service) \u670d\u52a1\uff1a \u9762\u5411\u5bf9\u8c61\u7684\u6d77\u91cf\u6570\u636e\u5e93 \u524d\u540e\u7aef\u4ea4\u4e92\u7684\u4e3b\u4f53\uff0c\u90fd\u662f\u300c\u6570\u636e\u300d\uff0c\u4e0d\u7ba1\u7ed3\u679c\u591a\u5c11\uff0c\u5c5e\u6027\u5177\u4f53\u542b\u4e49\u5982\u4f55\uff0c\u5b83\u4eec\u90fd\u53ef\u4ee5\u62bd\u8c61\u6210\u7edf\u4e00\u7684\u300c\u5bf9\u8c61\u300d\u6765\u5904\u7406\u3002LeanCloud \u652f\u6301\u5b58\u50a8\u4efb\u610f\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u652f\u6301\u5bf9\u8c61\u7684\u589e\u3001\u5220\u3001\u6539\u3001\u67e5\u7b49\u591a\u79cd\u64cd\u4f5c\uff0c\u5e76\u4e14\u5f00\u53d1\u8005\u65e0\u9700\u62c5\u5fc3\u6570\u636e\u89c4\u6a21\u7684\u5927\u5c0f\u548c\u8bbf\u95ee\u6d41\u91cf\u7684\u591a\u5c11\uff0c\u53ef\u4ee5\u7b80\u5355\u5c06 LeanCloud \u4e91\u7aef\u770b\u6210\u662f\u4e00\u4e2a\u9762\u5411\u5bf9\u8c61\u7684\u6d77\u91cf\u6570\u636e\u5e93\u6765\u4f7f\u7528\u3002 \u5927\u6587\u4ef6\u5b58\u50a8\u548c\u5206\u53d1 \u4efb\u4f55\u4e00\u6b3e\u4ea7\u54c1\uff0c\u4e0d\u7ba1\u662f\u7f51\u7ad9\u3001\u5e94\u7528\u8fd8\u662f\u6e38\u620f\uff0c\u90fd\u6709\u4e00\u4e9b\u7d20\u6750\u6216\u8005\u6587\u4ef6\u9700\u8981\u5b58\u50a8\u548c\u5206\u53d1\u3002\u4e0e\u5e94\u7528\u5185\u6570\u636e\u4e0d\u4e00\u6837\uff0c\u8fd9\u4e9b\u6587\u4ef6\u56e0\u4e3a\u5b83\u7684\u4f53\u79ef\u8f83\u5927\uff0c\u4e3a\u4e86\u83b7\u5f97\u66f4\u5feb\u6377\u7684\u7528\u6237\u4f53\u9a8c\uff0c\u4e00\u822c\u90fd\u8fd8\u9700\u8981 CDN \u670d\u52a1\u3002LeanCloud \u5b58\u50a8\u7cfb\u7edf\u5b8c\u6574\u6db5\u76d6\u4e86\u5927\u6587\u4ef6\u5b58\u50a8\u548c\u5206\u53d1\u7684\u9700\u6c42\u3002 LeanEngine \u5b8c\u6210\u7279\u5b9a\u4e1a\u52a1\u903b\u8f91 LeanCloud \u63d0\u4f9b\u7684\u6570\u636e\u64cd\u4f5c API \u80fd\u8986\u76d6\u5927\u90e8\u5206\u4e1a\u52a1\u7684\u9700\u6c42\uff0c\u4f46\u662f\u51e1\u4e8b\u603b\u6709\u4f8b\u5916\uff0c\u8fd9\u4e9b\u6807\u51c6 API \u6709\u65f6\u5019\u5e76\u4e0d\u80fd\u5b8c\u5168\u6ee1\u8db3\u67d0\u4e9b\u7279\u5b9a\u9700\u6c42\uff0c\u8fd9\u65f6\u5019\u600e\u4e48\u529e\uff1fLeanCloud \u8fd8\u63d0\u4f9b\u4e86\u300cLeanEngine\u300d\u81ea\u5b9a\u4e49\u670d\u52a1\u7aef\u4e1a\u52a1\u903b\u8f91\u7684\u529f\u80fd\u3002LeanEngine \u4e0e\u5927\u5bb6\u719f\u77e5\u7684 Google App Engine \u76f8\u4f3c\uff0c\u5141\u8bb8\u5f00\u53d1\u8005\u5199\u5f88\u5c11\u7684\u4e00\u90e8\u5206\u4ee3\u7801\uff0c\u6765\u5b8c\u6210\u4e1a\u52a1\u7279\u6709\u903b\u8f91\u3002\u8fd9\u4e9b\u4ee3\u7801\u4f1a\u88ab\u90e8\u7f72\u5230 LeanCloud \u4e91\u7aef\uff0c\u4e0e LeanCloud \u6807\u51c6\u670d\u52a1\u4e00\u8d77\u6267\u884c\uff0c\u6765\u5b9e\u73b0\u7279\u6b8a\u9700\u6c42\u3002 \u79bb\u7ebf\u6570\u636e\u5206\u6790\u5e73\u53f0\uff08\u4ec5\u5bf9\u5546\u7528\u7248\u548c\u4f01\u4e1a\u7248\u5e94\u7528\u5f00\u653e\uff09 \u5bf9\u4e8e\u5b8c\u5168\u6784\u5efa\u5728 LeanCloud \u4e0a\u7684\u4ea7\u54c1\u6765\u8bb2\uff0c\u5728\u8fd0\u884c\u4e00\u6bb5\u65f6\u95f4\u4e4b\u540e\u4f1a\u79ef\u7d2f\u5927\u91cf\u7684\u4e1a\u52a1\u6570\u636e\uff0c\u8fd9\u65f6\u5019\u4ea7\u54c1\u548c\u8fd0\u8425\u5c42\u9762\u90fd\u4f1a\u4ea7\u751f\u4e00\u4e9b\u6570\u636e\u6316\u6398\u6216\u5546\u4e1a\u667a\u80fd\u5206\u6790\u7684\u9700\u6c42\uff0c\u6b64\u65f6\u5982\u4f55\u624d\u80fd\u7b80\u4fbf\u5730\u64cd\u4f5c\u4e91\u7aef\uff0c\u770b\u5230\u6570\u636e\u80cc\u540e\u9690\u85cf\u7684\u8d8b\u52bf\u548c\u4ef7\u503c\u5462\uff1f\u4e3a\u6b64\u6211\u4eec\u63a8\u51fa\u4e86\u5206\u5e03\u5f0f\u7684\u300c\u79bb\u7ebf\u6570\u636e\u5206\u6790\u7cfb\u7edf\u300d\uff0c\u652f\u6301\u5728\u5e94\u7528\u6570\u636e\u96c6\u4e0a\u8fdb\u884c\u5404\u79cd\u5904\u7406\u548c\u64cd\u4f5c\u3002\u79bb\u7ebf\u5206\u6790\u7cfb\u7edf\u662f\u5b8c\u5168\u7684\u5206\u5e03\u5f0f\u3001\u5b9e\u65f6\u8ba1\u7b97\u7cfb\u7edf\uff0c\u5176\u6267\u884c\u6548\u7387\u548c\u5904\u7406\u7684\u6570\u636e\u89c4\u6a21\u8fdc\u5728 Hadoop MapReduce \u4e4b\u4e0a\u3002 \u4e0b\u9762\u6211\u4eec\u91cd\u70b9\u6765\u4e86\u89e3\u4e00\u4e0b\u5b58\u50a8\u7cfb\u7edf\u7684\u51e0\u4e2a\u6838\u5fc3\u6982\u5ff5\u3002 \u5bf9\u8c61 AVObject \u6211\u4eec\u5c06\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u7aef\u4ea4\u4e92\u7684\u7eb7\u7e41\u829c\u6742\u7684\u6570\u636e\uff0c\u7edf\u4e00\u62bd\u8c61\u6210\u300c\u5bf9\u8c61\u300d\uff0c\u5728\u6211\u4eec\u7684\u6570\u636e\u6a21\u578b\u91cc\u9762\uff0c\u5bf9\u5e94\u7684\u5c31\u662f\u300cAVObject\u300d\uff0c\u6bcf\u4e2a AVObject \u90fd\u5305\u542b\u4e0e JSON \u76f8\u517c\u5bb9\u7684\u952e\u503c\u5bf9\uff08key-value\uff09\u6570\u636e\uff0c\u5e76\u6709\u4e00\u4e2a\u7c7b\u522b\u540d\uff08Class Name\uff09\u3002LeanCloud \u4e91\u7aef\u5bf9\u4e8e AVObject \u91cc\u9762\u300c\u952e\u300d\u7684\u6570\u91cf\u5e76\u6ca1\u6709\u9650\u5236\uff0c\u4e5f\u4e0d\u8981\u6c42\u6bcf\u4e00\u4e2a AVObject \u91cc\u9762\u90fd\u5305\u542b\u6240\u6709\u7684\u300c\u952e\u300d\u3002\u8b6c\u5982\u5728\u4e00\u4e2a\u6e38\u620f\u91cc\u9762\uff0c\u6211\u4eec\u6709\u591a\u79cd\u6570\u636e\u9700\u8981\u4fdd\u5b58\uff1a \u8d26\u6237\u76f8\u5173\u7684\u6570\u636e\uff0c\u5305\u542b\u7528\u6237\u540d\u3001\u5bc6\u7801\u3001\u6027\u522b\u7b49 \u6e38\u620f\u5206\u6570\u76f8\u5173\u7684\u6570\u636e\uff0c\u5305\u542b\u7528\u6237\u3001\u5f97\u5206\u3001\u5173\u8054\u5173\u5361\u7b49 \u6211\u4eec\u53ef\u4ee5\u5168\u90e8\u5b58\u653e\u5728\u4e00\u79cd AVObject \u5bf9\u8c61\u91cc\u9762\uff08\u5047\u5b9a\u7c7b\u522b\u540d\uff1aAllInOne\uff09\uff1a // \u73a9\u5bb6\u4fe1\u606f\uff0c\u5305\u62ec\u59d3\u540d\u3001\u5bc6\u7801\u3001\u6027\u522b\u7b49 { username : steve , password : xxxxx , gender : Male } // \u6e38\u620f\u5f97\u5206\u6570\u636e\uff0c\u5305\u62ec\u5206\u6570\u3001\u73a9\u5bb6\u3001\u6a21\u5f0f\u3001\u5173\u5361\u7b49 { score :1337, playerName : steve , cheatMode :false, scene :4} \u4f60\u53ef\u4ee5\u628a\u8fd9\u4e24\u6761\u8bb0\u5f55\u90fd\u4fdd\u5b58\u5230\u4e00\u79cd AVObject \u91cc\u9762\uff0c\u8fd9\u5728 LeanCloud \u4e91\u7aef\u662f\u88ab\u5141\u8bb8\u7684\u3002\u4f46\u662f\u6211\u4eec \u5f3a\u70c8\u5efa\u8bae\u5f00\u53d1\u8005\u5c06\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u6839\u636e\u7528\u9014\u8fdb\u884c\u5206\u7c7b\uff0c\u5f62\u6210\u4e0d\u540c\u79cd\u7c7b\u7684 \u300cAVObject\u300d \u3002\u8b6c\u5982\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u6211\u4eec\u53ef\u4ee5\u62bd\u8c61\u51fa User \u8fd9\u79cd\u5bf9\u8c61\u6765\u4fdd\u5b58\u8d26\u6237\u4fe1\u606f\uff0c\u62bd\u8c61\u51fa GameScore \u8fd9\u79cd\u5bf9\u8c61\u6765\u4fdd\u5b58\u5f97\u5206\u4fe1\u606f\u3002 \u6bcf\u79cd\u300cAVObject\u300d\u5bf9\u5e94 LeanCloud \u4e91\u7aef\u7684\u4e00\u5f20\u300c\u8868\u300d\uff08\u6ce8\u610f\uff1a\u4e3a\u4e86\u4fbf\u4e8e\u7406\u89e3\uff0c\u8fd9\u91cc\u501f\u7528\u4e86\u5173\u7cfb\u578b\u6570\u636e\u5e93\u91cc\u9762\u8868\u7684\u6982\u5ff5\uff0c\u5728 LeanCloud \u5b58\u50a8\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u662f\u6309 Class \u6765\u533a\u5206\u7684\uff09\uff0c\u540c\u4e00\u7c7b\u5bf9\u8c61\u7684\u6240\u6709\u6570\u636e\u90fd\u5b58\u653e\u5728\u4e00\u8d77\u3002\u6bcf\u4e00\u4e2a AVObject \u7684\u5b9e\u4f8b\u4fdd\u5b58\u5230 LeanCloud \u4e91\u7aef\u4e4b\u540e\uff0cLeanCloud \u4e91\u7aef\u4f1a\u8d4b\u4e88\u8be5\u5b9e\u4f8b\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684 objectId \uff0c\u8fd9\u4e2a objectId \u7b49\u540c\u4e8e\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\u7684\u4e3b\u952e\u3002\u540c\u65f6 LeanCloud \u4e91\u7aef\u8fd8\u4f1a\u81ea\u52a8\u4e3a\u8be5\u5b9e\u4f8b\u6dfb\u52a0\u4e24\u4e2a\u5c5e\u6027\uff1a createdAt \u548c updatedAt \uff0c\u5206\u522b\u8868\u793a\u5b9e\u4f8b\u521b\u5efa\u65f6\u95f4\u548c\u6700\u540e\u66f4\u65b0\u65f6\u95f4\u3002 \u4f60\u53ef\u4ee5\u628a LeanCloud \u4e91\u7aef\u770b\u6210\u662f\u4e00\u4e2a\u9762\u5411\u5bf9\u8c61\u7684\u6d77\u91cf\u6570\u636e\u5e93\uff0c\u5b83\u4e0e\u4f20\u7edf\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u5dee\u5f02\u6709\uff1a \u8bbf\u95ee\u65b9\u5f0f\u4e0d\u4e00\u6837\uff0c\u4e0d\u9700\u8981\u4efb\u4f55 JDBC/ODBC \u7684\u9a71\u52a8\uff0c\u76f4\u63a5\u901a\u8fc7 HTTP \u534f\u8bae\u6765\u4f20\u8f93 JSON Object \u5373\u53ef\uff0c\u6240\u4ee5\u4e0d\u5149\u670d\u52a1\u7aef\u53ef\u4ee5\u4f7f\u7528\uff0c\u5728\u5ba2\u6237\u7aef\u4e5f\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u3002\u6211\u4eec\u65e2\u63d0\u4f9b\u5404\u79cd\u5e73\u53f0\u539f\u751f SDK\uff08iOS\u3001 Android\u3001JavaScript\u3001PHP\u3001Python\u3001Java\u3001Windows Phone\u3001.Net\u3001Unity3D\u3001C++\uff0c\u4ee5\u53ca\u793e\u533a\u8d21\u732e\u7684\u5176\u4ed6\u8bed\u8a00 SDK\uff09\u6765\u5e2e\u52a9\u5f00\u53d1\u8005\u7b80\u5355\u96c6\u6210\u6570\u636e\u5b58\u50a8\u670d\u52a1\uff0c\u4e5f\u63d0\u4f9b\u5f00\u653e\u7684 REST API \u4f9b\u5927\u5bb6\u76f4\u63a5\u4f7f\u7528\u3002 LeanCloud \u5bf9\u4e8e\u6570\u636e\u7684\u552f\u4e00\u683c\u5f0f\u8981\u6c42\u662f\u6ee1\u8db3 JSON Object \u7684\u5f62\u5f0f\uff0c\u5b58\u50a8\u65b0\u7684\u5bf9\u8c61\u7c7b\u578b\u65f6\u4e0d\u9700\u8981\u9884\u5148\u5728\u4e91\u7aef\u5b9a\u4e49\u4efb\u4f55\u300c\u8868\u7ed3\u6784\u300d\uff0c\u800c\u4e14\u540c\u4e00\u79cd\u6570\u636e\u7c7b\u578b\u91cc\u7684\u952e\u503c\u4e5f\u662f\u5141\u8bb8\u968f\u65f6\u589e\u52a0\u7684\u3002\u8fd9\u79cd schema free \u7684\u8bbe\u8ba1\uff0c\u4f1a\u7ed9\u5f00\u53d1\u8005\u5e26\u6765\u6700\u5927\u7684\u4fbf\u5229\u3002 AVObject \u4e4b\u95f4\u6ca1\u6709\u4e86\u4e3b\u952e\u3001\u5916\u952e\u7684\u6982\u5ff5\uff0c\u4e5f\u4e0d\u652f\u6301\u8de8\u8868\u7684 join \u67e5\u8be2\uff0c\u53d6\u800c\u4ee3\u4e4b\u7684\uff0c\u6211\u4eec\u63d0\u4f9b\u53e6\u4e00\u79cd\u6570\u636e\u5173\u8054\u7684\u673a\u5236\uff0c\u8be6\u89c1\u4e0b\u6587 \u6570\u636e\u5173\u8054 \uff1b \u65e2\u7136 AVObject \u662f\u9762\u5411\u5bf9\u8c61\u8bbe\u8ba1\u7684\uff0c\u5b83\u7684\u67e5\u8be2\u5c31\u4e0e\u4f20\u7edf SQL \u4e0d\u4e00\u6837\uff0c\u8be6\u89c1\u4e0b\u6587 \u6570\u636e\u67e5\u8be2 AVQuery \u3002\u4e0d\u8fc7\u4e3a\u4e86\u7167\u987e\u5df2\u7ecf\u4e60\u60ef\u4e86\u4f20\u7edf\u5173\u7cfb\u578b\u6570\u636e\u5e93\u67e5\u8be2\u7684\u5f00\u53d1\u8005\uff0c\u6211\u4eec\u4e5f\u63d0\u4f9b\u4e86\u7c7b SQL \u67e5\u8be2\u7684 Cloud Query Language \u67e5\u8be2\u8bed\u6cd5 \uff08\u7b80\u79f0\uff1aCQL\uff09\u3002\u8bf7\u6ce8\u610f\uff1aLeanCloud \u7684 CQL \u67e5\u8be2\u8bed\u6cd5\u662f SQL \u67e5\u8be2\u8bed\u6cd5\u7684\u5b50\u96c6\u548c\u53d8\u79cd\uff0c\u76ee\u7684\u662f\u964d\u4f4e\u5927\u5bb6\u5b66\u4e60 LeanCloud \u67e5\u8be2\u7684 API \u7684\u6210\u672c\uff0c\u5e76\u4e0d\u662f\u6240\u6709 SQL \u4e2d\u53ef\u4ee5\u6267\u884c\u7684\u67e5\u8be2\u90fd\u4f1a\u5728 CQL \u4e2d\u4ea7\u751f\u76f8\u540c\u7684\u7ed3\u679c\u3002 \u6709\u6548\u7684\u6570\u636e\u7c7b\u578b AVObject \u4e2d\u7684 \u952e \uff0c\u5fc5\u987b\u662f\u7531\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210\u7684\u5b57\u7b26\u4e32\uff1b\u5f00\u53d1\u8005\u81ea\u5b9a\u4e49\u7684\u952e\uff0c\u4e0d\u80fd\u4ee5 __ \uff08\u53cc\u4e0b\u5212\u7ebf\uff09\u5f00\u5934\u3002AVObject \u4e2d\u7684 \u503c \uff0c\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32\u3001\u6570\u5b57\u3001\u5e03\u5c14\u503c\uff0c\u6216\u662f\u6570\u7ec4\u548c\u5b57\u5178\u3002\u5728\u5e73\u53f0\u5185\u90e8\uff0cLeanCloud \u5c06\u6570\u636e\u5b58\u50a8\u4e3a JSON\uff0c\u56e0\u6b64\u6240\u6709\u80fd\u88ab\u8f6c\u6362\u6210 JSON \u7684\u6570\u636e\u7c7b\u578b\u90fd\u53ef\u4ee5\u4fdd\u5b58\u5728 LeanCloud \u4e91\u7aef\u3002\u5e76\u4e14\uff0c\u6846\u67b6\u8fd8\u53ef\u4ee5\u5904\u7406\u65e5\u671f\u3001Bytes \u4ee5\u53ca\u6587\u4ef6\u7c7b\u578b\u3002\u603b\u7ed3\u6765\u8bf4\uff0cAVObject \u4e2d\u5b57\u6bb5\u5141\u8bb8\u7684\u7c7b\u578b\u5305\u62ec\uff1a String \u5b57\u7b26\u4e32 Number \u6570\u5b57 Boolean \u5e03\u5c14\u7c7b\u578b Array \u6570\u7ec4 Object \u5bf9\u8c61 Date \u65e5\u671f Bytes base64 \u7f16\u7801\u7684\u4e8c\u8fdb\u5236\u6570\u636e File \u6587\u4ef6 Null \u7a7a\u503c Object \u7c7b\u578b\u7b80\u5355\u5730\u8868\u793a\u6bcf\u4e2a\u5b57\u6bb5\u7684\u503c\u90fd\u53ef\u4ee5\u7531\u80fd JSON \u7f16\u7801\u7684\u5185\u5d4c\u5bf9\u8c61\u7ec4\u5408\u800c\u6210\u3002\u5bf9\u8c61\u7684 Key\uff08\u952e\uff09\u5305\u542b $ \u6216\u8005 . \uff0c\u6216\u8005\u540c\u65f6\u6709 __type \u7684\u952e\uff0c\u90fd\u662f\u7cfb\u7edf\u4fdd\u7559\u7528\u6765\u505a\u4e00\u4e9b\u989d\u5916\u5904\u7406\u7684\u7279\u6b8a\u952e\uff0c\u56e0\u6b64\u8bf7\u4e0d\u8981\u5728\u4f60\u7684\u5bf9\u8c61\u4e2d\u4f7f\u7528\u8fd9\u6837\u7684 Key\u3002\u53e6\u5916\uff0c ACL\u3001className\u3001createdAt\u3001objectId\u3001updatedAt \u8fd9\u4e9b\u5c5e\u6027\u540d\u662f\u4fdd\u7559\u5b57\u6bb5\uff0c\u4e0d\u80fd\u4f5c\u4e3a\u81ea\u5b9a\u4e49\u7684 \u952e \u6765\u4f7f\u7528\u3002 \u6211\u4eec\u7684 SDK \u4f1a\u5904\u7406\u539f\u751f\u7684 Objective-C \u548c Java \u7c7b\u578b\u5230 JSON \u4e4b\u95f4\u7684\u8f6c\u6362\u3002\u4f8b\u5982\uff0c\u5f53\u4f60\u4fdd\u5b58\u4e00\u4e2a NSString \u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u5b83\u5728\u6211\u4eec\u7684\u7cfb\u7edf\u4e2d\u4f1a\u88ab\u81ea\u52a8\u8f6c\u6362\u6210 String \u7c7b\u578b\u3002 \u6709\u4e24\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5b58\u50a8\u539f\u751f\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u3002Bytes \u7c7b\u578b\u5141\u8bb8\u76f4\u63a5\u5728 AVObject \u4e2d\u5173\u8054 NSData \u6216\u8005 bytes[] \u7c7b\u578b\u7684\u6570\u636e\u3002\u8fd9\u79cd\u65b9\u5f0f\u53ea\u63a8\u8350\u7528\u6765\u5b58\u50a8\u5c0f\u7247\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u3002\u5f53\u8981\u4fdd\u5b58\u5b9e\u9645\u6587\u4ef6\uff08\u4f8b\u5982\u56fe\u7247\uff0c\u89c6\u9891\uff0c\u6587\u6863\u7b49\uff09\uff0c\u8bf7\u4f7f\u7528 AVFile \u6765\u8868\u793a File \u7c7b\u578b\uff0c\u5e76\u4e14 File \u7c7b\u578b\u53ef\u4ee5\u88ab\u4fdd\u5b58\u5230\u5bf9\u8c61\u5b57\u6bb5\u4e2d\u5173\u8054\u8d77\u6765\u3002 \u6570\u636e\u7c7b\u578b\u9501\u5b9a \u5f53\u4e00\u4e2a Class \u521d\u6b21\u521b\u5efa\u7684\u65f6\u5019\uff0c\u5b83\u4e0d\u5305\u542b\u4efb\u4f55\u9884\u5148\u5b9a\u4e49\u5e76\u7ee7\u627f\u7684 schema\u3002\u4e5f\u5c31\u662f\u8bf4\u5bf9\u4e8e\u5b58\u50a8\u7684\u7b2c\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5b83\u7684\u5b57\u6bb5\u53ef\u4ee5\u5305\u542b\u4efb\u4f55\u6709\u6548\u7684\u7c7b\u578b\u3002 \u4f46\u662f\uff0c\u5f53\u4e00\u4e2a\u5b57\u6bb5\u88ab\u4fdd\u5b58\u81f3\u5c11\u4e00\u6b21\u4e4b\u540e\uff0c\u8fd9\u4e2a\u5b57\u6bb5\u5c06\u88ab\u9501\u5b9a\u4e3a\u4fdd\u5b58\u8fc7\u7684\u6570\u636e\u7c7b\u578b\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4e00\u4e2a User \u5bf9\u8c61\u4fdd\u5b58\u4e86\u4e00\u4e2a\u5b57\u6bb5 name\uff0c\u7c7b\u578b\u4e3a String\uff0c\u90a3\u4e48\u8fd9\u4e2a name \u5b57\u6bb5\u5c06\u88ab\u4e25\u683c\u9650\u5236\u4e3a\u53ea\u5141\u8bb8\u4fdd\u5b58 String \u7c7b\u578b\u3002\uff08\u5982\u679c\u4f60\u5c1d\u8bd5\u4fdd\u5b58\u5176\u4ed6\u7c7b\u578b\u5230\u8fd9\u4e2a\u5b57\u6bb5\uff0c\u6211\u4eec\u7684 SDK \u4f1a\u8fd4\u56de\u4e00\u4e2a\u9519\u8bef\uff09 \u4e00\u4e2a\u7279\u4f8b\u662f\u4efb\u4f55\u5b57\u6bb5\u90fd\u5141\u8bb8\u88ab\u8bbe\u7f6e\u4e3a null\uff0c\u65e0\u8bba\u5b83\u662f\u4ec0\u4e48\u7c7b\u578b\u3002 \u6570\u636e\u7ba1\u7406 LeanCloud \u63a7\u5236\u53f0 \u5b58\u50a8 \u6570\u636e \u662f\u4e00\u4e2a\u5141\u8bb8\u5728\u4efb\u4f55\u5e94\u7528\u91cc\u66f4\u65b0\u6216\u8005\u521b\u5efa\u5bf9\u8c61\u7684 Web UI \u7ba1\u7406\u5e73\u53f0\u3002\u5728\u8fd9\u91cc\u4f60\u53ef\u4ee5\u770b\u5230\u4fdd\u5b58\u5728 Class \u91cc\u7684\u6bcf\u4e2a\u5bf9\u8c61\u7684\u539f\u751f JSON \u503c\u3002 \u5f53\u4f7f\u7528\u8fd9\u4e2a\u5e73\u53f0\u7684\u65f6\u5019\uff0c\u8bf7\u7262\u8bb0\uff1a \u8f93\u5165 \"null\" \u5c06\u4f1a\u8bbe\u7f6e\u503c\u4e3a\u7279\u6b8a\u7684\u7a7a\u503c null\uff0c\u800c\u975e\u5b57\u7b26\u4e32 \"null\"\u3002 objectId , createdAt \u548c updatedAt \u4e0d\u53ef\u7f16\u8f91\uff08\u5b83\u4eec\u90fd\u662f\u7cfb\u7edf\u81ea\u52a8\u8bbe\u7f6e\u7684\uff09\u3002 \u4e0b\u5212\u7ebf\u5f00\u59cb\u7684 class \u4e3a\u7cfb\u7edf\u5185\u7f6e class\uff0c\u4e0d\u53ef\u5220\u9664\uff0c\u5e76\u4e14\u8bf7\u8f7b\u6613\u4e0d\u8981\u4fee\u6539\u5b83\u7684\u9ed8\u8ba4\u5b57\u6bb5\uff0c\u53ef\u6dfb\u52a0\u5b57\u6bb5\u3002 \u6570\u636e\u5bfc\u5165\u548c\u5bfc\u51fa \u6211\u4eec\u5e76\u4e0d\u9501\u5b9a\u7528\u6237\u548c\u6570\u636e\uff0c\u76f8\u53cd\uff0c\u6211\u4eec\u63d0\u4f9b API \u548c\u5de5\u5177\uff0c\u6765\u652f\u6301\u7528\u6237\u968f\u65f6\u968f\u5730\u5bfc\u51fa\u5b58\u653e\u5728\u6211\u4eec\u5e73\u53f0\u4e0a\u7684\u6570\u636e\uff0c\u540c\u6837\u5730\uff0c\u6570\u636e\u5bfc\u5165\u4e5f\u662f\u53ef\u4ee5\u6279\u91cf\u64cd\u4f5c\u7684\u3002\u9664\u4e86 REST API \u4e4b\u5916\uff0c\u6211\u4eec\u8fd8\u63d0\u4f9b\u901a\u8fc7 JSON \u6587\u4ef6\u548c CSV \u683c\u5f0f\u6587\u4ef6\u7684\u5bfc\u5165\u6570\u636e \u7684\u529f\u80fd\u3002 \u6570\u636e\u5173\u8054 \u4e0a\u9762\u8bb2\u8fc7\uff0cAVObject \u6a21\u578b\u4e0e\u4f20\u7edf\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93\u6709\u4e00\u4e2a\u5f88\u5927\u7684\u4e0d\u540c\uff0c\u5c31\u662f\u6ca1\u6709\u4e86\u4e3b\u952e\u3001\u5916\u952e\u7684\u6982\u5ff5\uff0c\u4f46\u662f\u5bf9\u8c61\u4e4b\u95f4\u603b\u4f1a\u5b58\u5728\u5173\u8054\uff0c\u8fd9\u65f6\u5019\u8be5\u5982\u4f55\u89e3\u51b3\u5462\uff1f LeanCloud \u4e2d\u6709 4 \u79cd\u65b9\u5f0f\u6765\u6784\u5efa\u5bf9\u8c61\u4e4b\u95f4\u7684\u5173\u7cfb\uff1a Pointer \u2014\u2014\u5c31\u662f\u5c06\u4e00\u4e2a\u5bf9\u8c61 A \u5b58\u4e3a\u53e6\u4e00\u4e2a\u5bf9\u8c61 B \u7684\u5c5e\u6027\u503c\uff0c\u8fd9\u9002\u5408\u7528\u6765\u5904\u7406\u4e00\u5bf9\u4e00\u6216\u8005\u4e00\u5bf9\u591a\u7684\u5173\u8054\u5173\u7cfb\u3002 Array \u2014\u2014\u5c31\u662f\u5c06\u591a\u4e2a\u5bf9\u8c61 A\u3001B\u3001C \u5b58\u4e3a\u53e6\u4e00\u4e2a\u5bf9\u8c61 D \u7684\u5c5e\u6027\u503c\uff0c\u8fd9\u9002\u5408\u7528\u6765\u5904\u7406\u4e00\u5bf9\u591a\u6216\u8005\u591a\u5bf9\u591a\u7684\u5173\u8054\u5173\u7cfb\u3002 AVRelation \u2014\u2014\u8fd9\u662f\u4e00\u4e2a\u4e13\u95e8\u7684\u5173\u8054\u7c7b\uff0c\u7528\u6765\u5efa\u7acb\u4e24\u79cd\u5bf9\u8c61\u4e4b\u95f4\u7684\u5173\u8054\u5173\u7cfb\uff0c\u9002\u5408\u591a\u5bf9\u591a\u7684\u573a\u666f\u3002 \u4e2d\u95f4\u8868 \u2014\u2014\u4f7f\u7528\u4e13\u95e8\u7684\u7c7b\uff0c\u6765\u4e3a\u4e24\u79cd\u5bf9\u8c61\u5efa\u7acb\u5173\u8054\u5173\u7cfb\uff0c\u4e0e AVRelation \u76f8\u6bd4\u5b83\u8fd8\u53ef\u4ee5\u6dfb\u52a0\u66f4\u591a\u7684\u9644\u52a0\u4fe1\u606f\u3002\u8b6c\u5982\u6211\u4eec\u4e3a\u7528\u6237\u4e4b\u95f4\u5173\u6ce8/\u88ab\u5173\u6ce8\u7684\u5173\u7cfb\u5efa\u6a21\uff0c\u5c31\u50cf\u6d41\u884c\u7684\u793e\u4ea4\u7f51\u7edc\u90a3\u6837\uff0c\u4e00\u4e2a\u7528\u6237\u53ef\u4ee5\u5173\u6ce8\u522b\u7684\u7528\u6237\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u4e0d\u4ec5\u60f3\u77e5\u9053\u7528\u6237 A \u662f\u5426\u5173\u6ce8\u4e86\u7528\u6237 B\uff0c\u6211\u4eec\u8fd8\u60f3\u77e5\u9053\u4ec0\u4e48\u65f6\u5019\u7528\u6237 A \u5f00\u59cb\u5173\u6ce8\u7684\u7528\u6237 B\uff0c\u8fd9\u65f6\u5019\u5c31\u9002\u5408\u5efa\u7acb\u4e13\u95e8\u7684\u4e2d\u95f4\u8868\u3002\u4e2d\u95f4\u8868\u9002\u5408\u591a\u5bf9\u591a\u7684\u5173\u8054\u5173\u7cfb\u3002 \u8be6\u7ec6\u5185\u5bb9\u8bf7\u53c2\u8003\u300a \u6570\u636e\u6a21\u578b\u8bbe\u8ba1\u6307\u5357 \u300b\u3002 \u6570\u636e\u67e5\u8be2 AVQuery AVObject \u4fdd\u5b58\u5230 LeanCloud \u4e91\u7aef\u4e4b\u540e\uff0c\u5982\u4f55\u518d\u6b21\u83b7\u53d6\u5230\u5b83\u4eec\u5462\uff1f\u8fd9\u65f6\u5019\u9700\u8981\u7528\u5230\u6570\u636e\u67e5\u8be2\u529f\u80fd\u4e86\u3002\u524d\u9762\u6211\u4eec\u8bb2\u8fc7\uff0c\u67e5\u8be2\u8bed\u6cd5\u56e0\u4e3a\u9762\u5411\u5bf9\u8c61\u7684\u6a21\u578b\u4e0d\u540c\uff0c\u4e0e SQL \u8bed\u6cd5\u6709\u8f83\u5927\u5dee\u5f02\u3002\u8fd9\u65f6\u5019\u6211\u4eec\u80fd\u7528\u7684\u5c31\u662f AVQuery \u3002AVQuery \u7684\u529f\u80fd\u975e\u5e38\u5f3a\u5927\uff0c\u5b83\u53ef\u4ee5\uff1a \u68c0\u7d22\u5355\u4e00\u5bf9\u8c61\uff0c\u4e5f\u53ef\u4ee5\u4e00\u6b21\u68c0\u7d22\u8bb8\u591a\u5bf9\u8c61\uff1b \u652f\u6301\u5404\u79cd\u5404\u6837\u7684\u67e5\u8be2\u7ea6\u675f\uff1b \u652f\u6301\u5206\u9875\u67e5\u8be2\uff1b \u652f\u6301\u590d\u5408\u67e5\u8be2\uff1b \u652f\u6301\u81ea\u52a8\u7f13\u5b58\u67e5\u8be2\u7ed3\u679c\uff0c\u4fdd\u8bc1\u5728\u7f51\u7edc\u5f02\u5e38\u7684\u60c5\u51b5\u4e0b UI \u4e5f\u6709\u5386\u53f2\u6570\u636e\u53ef\u4f9b\u5c55\u73b0\u3002 \u9664\u4e86 AVQuery \u4e4b\u5916\uff0c\u6211\u4eec\u4e5f\u63d0\u4f9b\u7c7b SQL \u67e5\u8be2\u7684 Cloud Query Language \u67e5\u8be2\u8bed\u6cd5 \uff08\u7b80\u79f0\uff1aCQL\uff09\u3002\u8bf7\u6ce8\u610f\uff1aLeanCloud \u7684 CQL \u67e5\u8be2\u8bed\u6cd5\u662f SQL \u67e5\u8be2\u8bed\u6cd5\u7684\u5b50\u96c6\u548c\u53d8\u79cd\uff0c\u76ee\u7684\u662f\u964d\u4f4e\u5927\u5bb6\u5b66\u4e60 LeanCloud \u67e5\u8be2\u7684 API \u7684\u6210\u672c\uff0c\u5e76\u4e0d\u662f\u6240\u6709 SQL \u4e2d\u53ef\u4ee5\u6267\u884c\u7684\u67e5\u8be2\u90fd\u4f1a\u5728 CQL \u4e2d\u4ea7\u751f\u76f8\u540c\u7684\u7ed3\u679c\u3002 \u6587\u4ef6\u5b58\u50a8 AVFile \u9664\u4e86\u5e94\u7528\u5185\u6570\u636e\u5b58\u50a8\u4e4b\u5916\uff0cLeanCloud \u4e91\u7aef\u4e5f\u652f\u6301\u300c\u6587\u4ef6\u300d\u7c7b\u6570\u636e\u7684\u5b58\u50a8\u3002\u8fd9\u91cc\u7684\u300c\u6587\u4ef6\u300d\u6307\u7684\u662f\u56fe\u7247\u3001\u97f3\u4e50\u3001\u89c6\u9891\u7b49\u5e38\u89c1\u7684\u6587\u4ef6\u7c7b\u578b\uff0c\u4ee5\u53ca\u5176\u4ed6\u4efb\u4f55\u4e8c\u8fdb\u5236\u6570\u636e\u3002\u56e0\u4e3a AVObject \u6709\u5927\u5c0f\u9650\u5236\uff0c\u6240\u4ee5\u8d85\u8fc7 128 KB \u7684\u6570\u636e\u4e0d\u80fd\u76f4\u63a5\u5b58\u50a8\u5230 AVObject \u91cc\u9762\uff1b\u800c\u4e14\u66f4\u91cd\u8981\u7684\u662f\uff0c\u5bf9\u4e8e\u56fe\u7247\u3001\u97f3\u4e50\u3001\u89c6\u9891\u7c7b\u6570\u636e\uff0c\u56e0\u4e3a\u5b83\u4eec\u7684\u4f53\u79ef\u592a\u5927\uff0c\u4e3a\u4e86\u7ec8\u7aef\u7528\u6237\u6709\u5feb\u6377\u7684\u4e0b\u8f7d\u4f53\u9a8c\uff0c\u90fd\u9700\u8981\u989d\u5916\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u8fd9\u65f6\u5019\uff0c\u5c31\u9700\u8981\u4f7f\u7528\u7279\u522b\u7684\u7c7b\u578b\u300c\u6587\u4ef6\u300d\uff0c\u5373 AVFile \u6765\u5b58\u50a8\u3002\u4f60\u65e2\u53ef\u4ee5\u4f7f\u7528 LeanCloud \u9ed8\u8ba4\u63d0\u4f9b\u7684\u516c\u7528\u57df\u540d\u6765\u8bbf\u95ee\u8fd9\u4e9b\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u4e3a\u5b83\u4eec\u6307\u5b9a\u81ea\u5b9a\u4e49\u57df\u540d\uff08\u63a8\u8350\uff09\u3002\u6587\u4ef6\u57df\u540d\u652f\u6301 HTTP \u548c HTTPS\u3002 \u7528\u6237\u5bf9\u8c61 AVUser \u51e0\u4e4e\u6240\u6709\u7684\u5e94\u7528\u90fd\u4f1a\u7528\u6237\u7684\u6982\u5ff5\u3002\u4f8b\u5982\u624b\u673a\u53f7\u6ce8\u518c\u7528\u6237\u3001\u90ae\u7bb1\u6ce8\u518c\u3001\u624b\u673a\u9a8c\u8bc1\u7801\u767b\u5f55\u3001\u624b\u673a\u53f7\u4e00\u952e\u767b\u5f55\u7b49\u7b49\uff0c\u8fd9\u4e9b\u90fd\u662f\u4e0e\u7528\u6237\u76f8\u5173\u7684\u5e38\u89c1\u529f\u80fd\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7 AVUser \u5bf9\u8c61\u6765\u5feb\u901f\u5b9e\u73b0\u5b83\u4eec\u3002 \u6ce8\u518c\u548c\u767b\u5f55\u652f\u6301\u5982\u4e0b\u65b9\u5f0f\uff1a \u7528\u6237\u540d\uff08\u5b57\u6bcd\u6570\u5b57\uff09+ \u5bc6\u7801 \u90ae\u7bb1 + \u5bc6\u7801 \u624b\u673a\u53f7 + \u5bc6\u7801 \u624b\u673a\u53f7 + \u624b\u673a\u9a8c\u8bc1\u7801\uff08\u4e00\u952e\u767b\u5f55\uff0c\u5982\u679c\u4e4b\u524d\u7528\u6237\u6ce8\u518c\u8fc7\u5c31\u76f4\u63a5\u767b\u5f55\uff0c\u5982\u679c\u6ca1\u6709\u5c31\u521b\u5efa\u65b0\u7528\u6237\u518d\u76f4\u63a5\u767b\u5f55\uff09 \u793e\u4ea4\u8d26\u53f7 OAuth \u767b\u5f55\uff08QQ\u3001\u5fae\u535a\u3001Facebook\u3001Google \u7b49\uff09 \u8fd8\u652f\u6301\u90ae\u7bb1\u5bc6\u7801\u91cd\u7f6e\u3001\u624b\u673a\u5bc6\u7801\u91cd\u7f6e\u7b49\u8f85\u52a9\u529f\u80fd\uff0c\u8be6\u7ec6\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003\u5404 SDK \u5f00\u53d1\u6307\u5357\u3002 \u4e3b\u8981\u6027\u80fd\u6307\u6807 LeanCloud \u5e73\u53f0\u4fdd\u8bc1 99.9% \u7684\u9ad8\u53ef\u7528\u6027\uff0c\u5e76\u4e14\u6570\u636e\u8bbf\u95ee\u65b9\u9762\u4fdd\u8bc1\u4e86\u6781\u9ad8\u7684\u8bfb\u5199\u6027\u80fd\u548c\u6781\u5927\u7684\u6570\u636e\u652f\u6301\u89c4\u6a21\uff1a \u4e00\u822c\u6570\u636e\u8bbf\u95ee API \u7684\u5b8c\u6210\u65f6\u95f4\u90fd\u5728\u51e0\u5341\u4e2a\u6beb\u79d2\u5185\uff08\u5305\u62ec\u4e86\u7f51\u7edc roundtrip \u65f6\u95f4\u5728\u5185\uff09\u3002 API \u8bbf\u95ee\u7684\u5e76\u53d1\u5904\u7406\u80fd\u529b\u65e0\u4e0a\u9650\u3002 \u5e94\u7528\u5185\u6570\u636e\u652f\u6301\u9ad8\u8fbe PB \u7ea7\u522b\u7684\u89c4\u6a21\uff0c\u4f60\u5b8c\u5168\u65e0\u9700\u5173\u5fc3\u4f20\u7edf\u6570\u636e\u5e93\u4f7f\u7528\u65f6\u9047\u5230\u7684\u300c\u5206\u8868\u300d\u7b49\u5e73\u884c\u6269\u5c55\u95ee\u9898\uff1b \u6587\u4ef6\u5b58\u50a8\u7684\u7f51\u7edc\u6d41\u91cf\u548c\u5e26\u5bbd\u65e0\u9650\u5236\uff1b \u539f\u751f SDK \u5982\u679c\u4f60\u662f\u67d0\u4e2a\u7279\u5b9a\u5e73\u53f0\u7684\u5f00\u53d1\u8005\uff0c\u60f3\u67e5\u770b\u6211\u4eec\u539f\u751f\u7684 SDK \u5f00\u53d1\u6307\u5357\uff0c\u8bf7\u79fb\u6b65\u5230\u5177\u4f53\u9875\u9762\uff1a iOS \u5f00\u53d1\u6307\u5357 \u8be6\u7ec6\u8bf7\u53c2\u770b iOS \u6570\u636e\u5b58\u50a8\u5f00\u53d1\u6307\u5357 ; Android \u5f00\u53d1\u6307\u5357 \u8be6\u7ec6\u8bf7\u53c2\u770b Android \u6570\u636e\u5b58\u50a8\u5f00\u53d1\u6307\u5357 ; Javascript \u5f00\u53d1\u6307\u5357 \u8be6\u7ec6\u8bf7\u53c2\u770b Javascript \u6570\u636e\u5b58\u50a8\u5f00\u53d1\u6307\u5357 ; .Net/Unity3D \u5f00\u53d1\u6307\u5357 \u8be6\u7ec6\u8bf7\u53c2\u770b .Net \u6570\u636e\u5b58\u50a8\u5f00\u53d1\u6307\u5357 ; Python \u5f00\u53d1\u6307\u5357 \u8be6\u7ec6\u8bf7\u53c2\u770b Python \u6570\u636e\u5b58\u50a8\u5f00\u53d1\u6307\u5357 ; REST API \u8bf4\u660e \u8be6\u7ec6\u8bf7\u53c2\u770b REST API \u8be6\u7ec6\u8bf4\u660e ; \u5e38\u89c1\u95ee\u9898 \u6570\u636e\u5b89\u5168\u6709\u4fdd\u969c\u5417 \u56e0\u4e3a\u662f\u628a\u81ea\u5df1\u7684\u6838\u5fc3\u6570\u636e\u5b58\u653e\u5230\u5f00\u653e\u7684\u4e91\u7aef\uff0c\u6240\u6709\u7528\u6237\u6216\u591a\u6216\u5c11\u90fd\u4f1a\u6709\u8fd9\u65b9\u9762\u7684\u62c5\u5fc3\uff1a\u6211\u7684\u6570\u636e\u5b89\u5168\u5417\uff1f LeanCloud \u91cd\u89c6\u6570\u636e\u5b89\u5168\uff0c\u56e0\u6b64\u63d0\u4f9b\u5982\u4e0b\u6280\u672f\u624b\u6bb5\u6765\u4fdd\u8bc1\u7528\u6237\u7684\u6570\u636e\u5b89\u5168\u53ef\u9760\uff1a \u6240\u6709\u6570\u636e\u5728\u4e91\u7aef\u4f1a\u5b58\u653e 3 \u4efd\u62f7\u8d1d\uff0c\u4ee5\u4fdd\u8bc1\u51fa\u73b0\u5404\u79cd\u786c\u4ef6\u3001\u7f51\u7edc\u6545\u969c\u7684\u65f6\u5019\uff0c\u6570\u636e\u90fd\u662f\u53ef\u7528\u7684\u3002 \u6240\u6709\u7f51\u7edc\u8bf7\u6c42\u90fd\u662f\u57fa\u4e8e SSL \u5b89\u5168\u8fde\u63a5\uff08HTTPS\uff09\u7684\uff0c\u4fdd\u8bc1\u6570\u636e\u5185\u5bb9\u4e0d\u4f1a\u88ab\u8f7b\u6613\u622a\u83b7\u6216\u8005\u7aa5\u63a2\u5230\u3002 \u5e94\u7528\u4e4b\u95f4\u7684\u6570\u636e\u5b8c\u5168\u9694\u79bb\uff0c\u5e94\u7528 A \u6570\u636e\u51fa\u73b0\u95ee\u9898\u4e0d\u4f1a\u6ce2\u53ca\u5230\u5e94\u7528 B\uff0c\u4e5f\u4e0d\u4f1a\u51fa\u73b0\u5e94\u7528 A \u53ef\u4ee5\u8bbf\u95ee\u5230\u5e94\u7528 B \u7684\u6570\u636e\u7684\u60c5\u51b5\uff08\u5f53\u7136\u660e\u786e\u6388\u6743\u7684\u60c5\u51b5\u4f8b\u5916\uff09 \u6570\u636e\u8bbf\u95ee\u4f1a\u8fdb\u884c\u4e25\u683c\u7684\u8eab\u4efd\u8ba4\u8bc1\u3002\u6bcf\u4e2a\u5e94\u7528\u6211\u4eec\u90fd\u4f1a\u751f\u6210 appKey \u548c masterKey \u4e24\u5957\u5bc6\u94a5\uff0c\u5206\u522b\u5bf9\u5e94\u5f00\u653e\u73af\u5883\u548c\u6388\u4fe1\u73af\u5883\u7684\u4f7f\u7528\u573a\u666f\uff0c\u6240\u4ee5\u4f60\u53ef\u4ee5\u5c06\u67d0\u4e9b\u6838\u5fc3\u6570\u636e\u7684\u8bfb\u5199\u53ea\u6388\u6743\u7ed9 masterKey\u3002LeanCloud \u4e91\u7aef\u5bf9\u6240\u6709\u64cd\u4f5c\u90fd\u4f1a\u8fdb\u884c\u8bf7\u6c42\u53d1\u8d77\u8005\u8eab\u4efd\u8fdb\u884c\u8ba4\u8bc1\uff0c\u4ee5\u9632\u5fa1\u865a\u5047\u8bf7\u6c42\u7684\u5e72\u6270\u3001\u7834\u574f\u3002 \u5728\u5f00\u653e\u73af\u5883\uff0c\u8b6c\u5982 Web \u7aef\uff0c\u6211\u4eec\u8fd8\u652f\u6301\u901a\u8fc7 Web \u5b89\u5168\u57df\u540d \u6765\u5bf9\u8bf7\u6c42\u6765\u6e90\u505a\u9650\u5236\uff0c\u53ef\u4ee5\u7b80\u5355\u7684\u9632\u5fa1\u4f4f Web \u7684\u670d\u52a1\u5668\u8d44\u6e90\u76d7\u53d6\u3002 \u6570\u636e\u8868\u4e0a\u63d0\u4f9b\u300c\u884c\u300d\u7ea7\u522b\u7684\u8bbf\u95ee\u6743\u9650\u63a7\u5236\uff08ACL\uff09\uff0c\u4f60\u53ef\u4ee5\u5bf9\u6bcf\u4e00\u4e2a\u5bf9\u8c61\u8bbe\u7f6e\u4e0d\u540c\u7684\u8bfb\u5199\u8bbf\u95ee\u6743\u9650\uff08\u4e0e Linux \u6587\u4ef6\u7cfb\u7edf\u7684 ACL \u673a\u5236\u4e00\u6837\uff0c\u6211\u4eec\u4e5f\u63d0\u4f9b owner\u3001group\u3001public \u7684\u8bfb\u5199\u8bbf\u95ee\u63a7\u5236\uff09\u3002 \u5217\u7ea7\u522b\u7684\u8bbf\u95ee\u63a7\u5236\u6743\u9650\u3002\u4e0e\u4e0a\u9762\u300c\u884c\u300d\u7ea7\u522b\u7684\u8bbf\u95ee\u6743\u9650\u63a7\u5236\u7c7b\u4f3c\uff0c\u6211\u4eec\u8fd8\u5141\u8bb8\u4f60\u4e3a\u67d0\u5f20\u8868\u7684\u90e8\u5206\u300c\u5217\u300d\u8bbe\u5b9a\u5355\u72ec\u7684\u8bbf\u95ee\u63a7\u5236\u6743\u9650\u3002 Class \u7ea7\u522b\u7684\u8bbf\u95ee\u63a7\u5236\u6743\u9650\u3002\u5728\u4e00\u4e9b\u60c5\u51b5\u4e0b\uff0c\u8bbe\u7f6e\u6574\u4e2a Class \u5141\u8bb8\u7684\u6743\u9650\u662f\u4e00\u79cd\u66f4\u81ea\u7136\u7684\u65b9\u5f0f\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u80fd\u60f3\u8bbe\u7f6e\u6574\u4e2a Class \u53ea\u8bfb\uff0c\u6216\u8005\u53ea\u5199\u3002LeanCloud \u4e5f\u5141\u8bb8\u4f60\u8bbe\u7f6e\u6bcf\u4e2a Class \u5141\u8bb8\u7684\u64cd\u4f5c\u3002 \u5177\u4f53\u8bf7\u53c2\u8003\u6587\u6863 \u6570\u636e\u548c\u5b89\u5168 \u3002 \u6211\u4f1a\u88ab\u7ed1\u5b9a\u5728 LeanCloud \u5e73\u53f0\u5417 \u9664\u4e86\u5b89\u5168\u4e4b\u5916\uff0c\u5927\u5bb6\u62c5\u5fc3\u7684\u7b2c\u4e8c\u4e2a\u95ee\u9898\u5c31\u662f\u5f00\u653e\u3002\u6211\u4eec\u628a\u6570\u636e\u5b58\u653e\u5230\u8fd9\u4e2a\u5e73\u53f0\u4e4b\u540e\uff0c\u8fd8\u53ef\u4ee5\u81ea\u7531\u5bfc\u51fa\u5417\uff1f\u4ee5\u540e\u8981\u60f3\u642d\u5efa\u81ea\u5df1\u7684\u540e\u7aef\u4e13\u5c5e\u96c6\u7fa4\u4e86\uff0c\u53ef\u4ee5\u5feb\u901f\u5730\u8fc1\u51fa\u5417\uff1f \u653e\u5fc3\uff0cLeanCloud \u79c9\u627f\u300c\u5f00\u653e\u3001\u81ea\u7531\u300d\u7684\u7406\u5ff5\uff0c\u7edd\u4e0d\u4f1a\u6545\u610f\u5236\u9020\u969c\u788d\u6765\u300c\u7ed1\u67b6\u300d\u7528\u6237\u3002\u6211\u4eec\u63d0\u4f9b API\u3001\u5de5\u5177\u6765\u8ba9\u7528\u6237\u968f\u65f6\u5bfc\u51fa\u6216\u5bfc\u5165\u81ea\u5df1\u7684\u6570\u636e\uff0c\u6211\u4eec\u76f8\u4fe1\u53ea\u6709\u53ef\u9760\u7684\u6280\u672f\u548c\u597d\u7684\u670d\u52a1\u624d\u80fd\u5438\u5f15\u5e76\u7559\u4f4f\u7528\u6237\u3002 \u6807\u51c6 API \u6ee1\u8db3\u4e0d\u4e86\u4e1a\u52a1\u9700\u6c42\uff0c\u600e\u4e48\u529e LeanCloud \u6807\u51c6 API \u80fd\u6ee1\u8db3\u5f88\u591a\u901a\u7528\u7684\u9700\u6c42\uff0c\u4f46\u6709\u65f6\u5019\u6211\u6709\u4e00\u4e9b\u7279\u6b8a\u7684\u9700\u6c42\uff0c\u8b6c\u5982\uff1a \u6211\u8981\u5b9e\u65f6\u67e5\u770b\u793e\u4ea4\u5e73\u53f0\u5185\u5bb9\u7684\u70ed\u5ea6\u6392\u540d\uff0c\u70ed\u5ea6\u7b97\u6cd5\u662f\u9700\u8981\u878d\u5408\u591a\u79cd\u6570\u636e\u6765\u6e90\u8fdb\u884c\u8ba1\u7b97\u7684\uff0c\u600e\u4e48\u529e\uff1f \u5728\u53d1\u751f\u6570\u636e\u53d8\u5316\u7684\u65f6\u5019\uff0c\u8981\u4e3b\u52a8\u89e6\u53d1\u67d0\u4e00\u4e8b\u4ef6\u3002\u8b6c\u5982\u7528\u6237 A \u8bc4\u8bba\u4e86\u7528\u6237 B \u7684\u7167\u7247\uff0c\u8fd9\u65f6\u5019\u6211\u5e0c\u671b\u80fd\u591f\u5b9e\u65f6\u7ed9\u7528\u6237 B \u53d1\u9001\u4e00\u6761\u63a8\u9001\u4fe1\u606f\uff0c\u600e\u4e48\u529e\uff1f \u8fd9\u65f6\u5019\u4f60\u53ef\u4ee5\u4f7f\u7528\u6211\u4eec\u7684 LeanEngine \u670d\u52a1\uff0c\u6765\u6269\u5c55\u6807\u51c6 API \u7684\u529f\u80fd\uff0c\u5177\u4f53\u8bf7\u53c2\u8003\u6587\u6863 \u4e91\u5f15\u64ce\u5f00\u53d1\u6307\u5357 \u3002 \u8981\u5bf9\u5b58\u50a8\u7684\u6570\u636e\u8fdb\u884c\u4e1a\u52a1\u5206\u6790\uff0c\u600e\u4e48\u529e \u6211\u628a\u6570\u636e\u90fd\u653e\u5230\u4e86 LeanCloud \u4e0a\u9762\uff0c\u4e24\u4e2a\u6708\u540e\u4ea7\u54c1\u7ecf\u7406\u60f3\u770b\u770b\u67d0\u4e00\u529f\u80fd\u7684\u65e5\u5747\u4f7f\u7528\u60c5\u51b5\uff0c\u6216\u8005\u8fd0\u8425\u4eba\u5458\u8981\u5206\u6790\u7528\u6237\u4ece\u6ce8\u518c\u5230\u6d88\u8d39\u7684\u65f6\u95f4\u5468\u671f\uff0c\u8fd9\u65f6\u5019\u600e\u4e48\u529e\uff1f \u653e\u5fc3\uff0cLeanCloud \u63d0\u4f9b\u4e86 SQL-like \u7684\u79bb\u7ebf\u6570\u636e\u5206\u6790\u529f\u80fd\uff0c\u652f\u6301\u5bf9\u5e94\u7528\u5185\u6570\u636e\u8fdb\u884c\u4efb\u610f\u7684\u5904\u7406\uff0c\u6765\u5b8c\u6210\u6570\u636e\u6316\u6398\u548c\u5546\u4e1a\u667a\u80fd\u5206\u6790\u7684\u76ee\u7684\u3002\u5177\u4f53\u8bf7\u53c2\u8003\u6587\u6863 \u79bb\u7ebf\u6570\u636e\u5206\u6790\u6307\u5357 \u3002","title":"\u670d\u52a1\u603b\u89c8"},{"location":"storage/storage-overview/#_1","text":"\u611f\u8c22\u4f60\u9009\u7528 LeanCloud \u6570\u636e\u5b58\u50a8\u670d\u52a1\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u6211\u4eec\u63d0\u4f9b\u7684 SDK\uff0c\u4e00\u884c\u540e\u7aef\u4ee3\u7801\u90fd\u4e0d\u7528\u5199\uff0c\u800c\u5feb\u901f\u5b8c\u6210\u4e00\u4e2a\u4ea7\u54c1\uff08\u7f51\u7ad9\u6216\u5e94\u7528\uff09\u7684\u5f00\u53d1\u548c\u53d1\u5e03\u3002","title":"\u6570\u636e\u5b58\u50a8\u670d\u52a1\u603b\u89c8"},{"location":"storage/storage-overview/#_2","text":"\u5927\u90e8\u5206\u7684\u4ea7\u54c1\u90fd\u662f\u6570\u636e\u9a71\u52a8\u7684\uff0c\u5b83\u4eec\u6709\u4e00\u4e2a\u6700\u5927\u7684\u7279\u70b9\uff0c\u5c31\u662f\u5bf9\u540e\u7aef\u7684\u9700\u6c42\u5728\u6a21\u5f0f\u4e0a\u5176\u5b9e\u662f\u6bd4\u8f83\u7edf\u4e00\u7684\uff1a \u524d\u7aef\u8d1f\u8d23\u6570\u636e\u5c55\u73b0\u548c\u7528\u6237\u4ea4\u4e92\u5904\u7406\uff0c\u4e0e\u540e\u7aef\u7684 app server \u901a\u8fc7\u7f51\u7edc\u6765\u4ea4\u6362\u9700\u8981\u7684\u6570\u636e\uff1b app server \u8d1f\u8d23\u4e1a\u52a1\u903b\u8f91\u5904\u7406\uff0c\u751f\u6210\u6838\u5fc3\u6570\u636e\u5b58\u50a8\u5230 data server\uff0c\u6216\u8005\u805a\u5408 data server \u67e5\u8be2\u5230\u7684\u6570\u636e\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff1b data server \u8d1f\u8d23\u6838\u5fc3\u6570\u636e\u7684\u5b58\u50a8\u548c\u5907\u4efd\uff1b \u8fd9\u6837\u7684\u6a21\u5f0f\u9002\u5408\u4e92\u8054\u7f51\u4e0a\u7edd\u5927\u90e8\u5206\u4ea7\u54c1\uff0c\u867d\u7136\u6570\u636e\u7ed3\u6784\u6709\u5dee\u5f02\u3001\u4e1a\u52a1\u903b\u8f91\u4e0d\u4e00\u6837\uff0c\u4f46\u662f\u524d\u540e\u7aef\u4ea4\u4e92\u7684\u4e3b\u4f53\u2014\u2014\u300c\u6570\u636e\u300d\uff0c\u62bd\u8c61\u6765\u770b\u662f\u4e00\u81f4\u7684\uff0c\u540e\u7aef\u7684\u67b6\u6784\uff08\u8b6c\u5982 LAMP\uff09\u4e5f\u662f\u5927\u540c\u5c0f\u5f02\u7684\uff0c\u800c\u4e14\u540c\u6837\u7684\u7cfb\u7edf\u5728\u4e00\u904d\u4e00\u904d\u5730\u88ab\u91cd\u590d\u5f00\u53d1\uff0c\u6781\u5927\u6d6a\u8d39\u4e86\u6211\u4eec\u5b9d\u8d35\u7684\u6280\u672f\u8d44\u6e90\u3002","title":"\u521d\u8877"},{"location":"storage/storage-overview/#_3","text":"LeanCloud \u5bf9\u5927\u90e8\u5206\u573a\u666f\u4e0b\u7684\u540e\u7aef\u9700\u6c42\u8fdb\u884c\u4e86\u62bd\u8c61\u548c\u7edf\u4e00\uff0c\u6211\u4eec\u901a\u8fc7\u56db\u5927\u7cfb\u7edf\u6765\u5b9e\u73b0\u4e00\u4e2a\u901a\u7528\u3001\u5f3a\u5927\u3001\u53ef\u5b9a\u5236\u7684 BaaS(Backend as a Service) \u670d\u52a1\uff1a \u9762\u5411\u5bf9\u8c61\u7684\u6d77\u91cf\u6570\u636e\u5e93 \u524d\u540e\u7aef\u4ea4\u4e92\u7684\u4e3b\u4f53\uff0c\u90fd\u662f\u300c\u6570\u636e\u300d\uff0c\u4e0d\u7ba1\u7ed3\u679c\u591a\u5c11\uff0c\u5c5e\u6027\u5177\u4f53\u542b\u4e49\u5982\u4f55\uff0c\u5b83\u4eec\u90fd\u53ef\u4ee5\u62bd\u8c61\u6210\u7edf\u4e00\u7684\u300c\u5bf9\u8c61\u300d\u6765\u5904\u7406\u3002LeanCloud \u652f\u6301\u5b58\u50a8\u4efb\u610f\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u652f\u6301\u5bf9\u8c61\u7684\u589e\u3001\u5220\u3001\u6539\u3001\u67e5\u7b49\u591a\u79cd\u64cd\u4f5c\uff0c\u5e76\u4e14\u5f00\u53d1\u8005\u65e0\u9700\u62c5\u5fc3\u6570\u636e\u89c4\u6a21\u7684\u5927\u5c0f\u548c\u8bbf\u95ee\u6d41\u91cf\u7684\u591a\u5c11\uff0c\u53ef\u4ee5\u7b80\u5355\u5c06 LeanCloud \u4e91\u7aef\u770b\u6210\u662f\u4e00\u4e2a\u9762\u5411\u5bf9\u8c61\u7684\u6d77\u91cf\u6570\u636e\u5e93\u6765\u4f7f\u7528\u3002 \u5927\u6587\u4ef6\u5b58\u50a8\u548c\u5206\u53d1 \u4efb\u4f55\u4e00\u6b3e\u4ea7\u54c1\uff0c\u4e0d\u7ba1\u662f\u7f51\u7ad9\u3001\u5e94\u7528\u8fd8\u662f\u6e38\u620f\uff0c\u90fd\u6709\u4e00\u4e9b\u7d20\u6750\u6216\u8005\u6587\u4ef6\u9700\u8981\u5b58\u50a8\u548c\u5206\u53d1\u3002\u4e0e\u5e94\u7528\u5185\u6570\u636e\u4e0d\u4e00\u6837\uff0c\u8fd9\u4e9b\u6587\u4ef6\u56e0\u4e3a\u5b83\u7684\u4f53\u79ef\u8f83\u5927\uff0c\u4e3a\u4e86\u83b7\u5f97\u66f4\u5feb\u6377\u7684\u7528\u6237\u4f53\u9a8c\uff0c\u4e00\u822c\u90fd\u8fd8\u9700\u8981 CDN \u670d\u52a1\u3002LeanCloud \u5b58\u50a8\u7cfb\u7edf\u5b8c\u6574\u6db5\u76d6\u4e86\u5927\u6587\u4ef6\u5b58\u50a8\u548c\u5206\u53d1\u7684\u9700\u6c42\u3002 LeanEngine \u5b8c\u6210\u7279\u5b9a\u4e1a\u52a1\u903b\u8f91 LeanCloud \u63d0\u4f9b\u7684\u6570\u636e\u64cd\u4f5c API \u80fd\u8986\u76d6\u5927\u90e8\u5206\u4e1a\u52a1\u7684\u9700\u6c42\uff0c\u4f46\u662f\u51e1\u4e8b\u603b\u6709\u4f8b\u5916\uff0c\u8fd9\u4e9b\u6807\u51c6 API \u6709\u65f6\u5019\u5e76\u4e0d\u80fd\u5b8c\u5168\u6ee1\u8db3\u67d0\u4e9b\u7279\u5b9a\u9700\u6c42\uff0c\u8fd9\u65f6\u5019\u600e\u4e48\u529e\uff1fLeanCloud \u8fd8\u63d0\u4f9b\u4e86\u300cLeanEngine\u300d\u81ea\u5b9a\u4e49\u670d\u52a1\u7aef\u4e1a\u52a1\u903b\u8f91\u7684\u529f\u80fd\u3002LeanEngine \u4e0e\u5927\u5bb6\u719f\u77e5\u7684 Google App Engine \u76f8\u4f3c\uff0c\u5141\u8bb8\u5f00\u53d1\u8005\u5199\u5f88\u5c11\u7684\u4e00\u90e8\u5206\u4ee3\u7801\uff0c\u6765\u5b8c\u6210\u4e1a\u52a1\u7279\u6709\u903b\u8f91\u3002\u8fd9\u4e9b\u4ee3\u7801\u4f1a\u88ab\u90e8\u7f72\u5230 LeanCloud \u4e91\u7aef\uff0c\u4e0e LeanCloud \u6807\u51c6\u670d\u52a1\u4e00\u8d77\u6267\u884c\uff0c\u6765\u5b9e\u73b0\u7279\u6b8a\u9700\u6c42\u3002 \u79bb\u7ebf\u6570\u636e\u5206\u6790\u5e73\u53f0\uff08\u4ec5\u5bf9\u5546\u7528\u7248\u548c\u4f01\u4e1a\u7248\u5e94\u7528\u5f00\u653e\uff09 \u5bf9\u4e8e\u5b8c\u5168\u6784\u5efa\u5728 LeanCloud \u4e0a\u7684\u4ea7\u54c1\u6765\u8bb2\uff0c\u5728\u8fd0\u884c\u4e00\u6bb5\u65f6\u95f4\u4e4b\u540e\u4f1a\u79ef\u7d2f\u5927\u91cf\u7684\u4e1a\u52a1\u6570\u636e\uff0c\u8fd9\u65f6\u5019\u4ea7\u54c1\u548c\u8fd0\u8425\u5c42\u9762\u90fd\u4f1a\u4ea7\u751f\u4e00\u4e9b\u6570\u636e\u6316\u6398\u6216\u5546\u4e1a\u667a\u80fd\u5206\u6790\u7684\u9700\u6c42\uff0c\u6b64\u65f6\u5982\u4f55\u624d\u80fd\u7b80\u4fbf\u5730\u64cd\u4f5c\u4e91\u7aef\uff0c\u770b\u5230\u6570\u636e\u80cc\u540e\u9690\u85cf\u7684\u8d8b\u52bf\u548c\u4ef7\u503c\u5462\uff1f\u4e3a\u6b64\u6211\u4eec\u63a8\u51fa\u4e86\u5206\u5e03\u5f0f\u7684\u300c\u79bb\u7ebf\u6570\u636e\u5206\u6790\u7cfb\u7edf\u300d\uff0c\u652f\u6301\u5728\u5e94\u7528\u6570\u636e\u96c6\u4e0a\u8fdb\u884c\u5404\u79cd\u5904\u7406\u548c\u64cd\u4f5c\u3002\u79bb\u7ebf\u5206\u6790\u7cfb\u7edf\u662f\u5b8c\u5168\u7684\u5206\u5e03\u5f0f\u3001\u5b9e\u65f6\u8ba1\u7b97\u7cfb\u7edf\uff0c\u5176\u6267\u884c\u6548\u7387\u548c\u5904\u7406\u7684\u6570\u636e\u89c4\u6a21\u8fdc\u5728 Hadoop MapReduce \u4e4b\u4e0a\u3002 \u4e0b\u9762\u6211\u4eec\u91cd\u70b9\u6765\u4e86\u89e3\u4e00\u4e0b\u5b58\u50a8\u7cfb\u7edf\u7684\u51e0\u4e2a\u6838\u5fc3\u6982\u5ff5\u3002","title":"\u6211\u4eec\u7684\u89e3\u51b3\u65b9\u6848"},{"location":"storage/storage-overview/#avobject","text":"\u6211\u4eec\u5c06\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u7aef\u4ea4\u4e92\u7684\u7eb7\u7e41\u829c\u6742\u7684\u6570\u636e\uff0c\u7edf\u4e00\u62bd\u8c61\u6210\u300c\u5bf9\u8c61\u300d\uff0c\u5728\u6211\u4eec\u7684\u6570\u636e\u6a21\u578b\u91cc\u9762\uff0c\u5bf9\u5e94\u7684\u5c31\u662f\u300cAVObject\u300d\uff0c\u6bcf\u4e2a AVObject \u90fd\u5305\u542b\u4e0e JSON \u76f8\u517c\u5bb9\u7684\u952e\u503c\u5bf9\uff08key-value\uff09\u6570\u636e\uff0c\u5e76\u6709\u4e00\u4e2a\u7c7b\u522b\u540d\uff08Class Name\uff09\u3002LeanCloud \u4e91\u7aef\u5bf9\u4e8e AVObject \u91cc\u9762\u300c\u952e\u300d\u7684\u6570\u91cf\u5e76\u6ca1\u6709\u9650\u5236\uff0c\u4e5f\u4e0d\u8981\u6c42\u6bcf\u4e00\u4e2a AVObject \u91cc\u9762\u90fd\u5305\u542b\u6240\u6709\u7684\u300c\u952e\u300d\u3002\u8b6c\u5982\u5728\u4e00\u4e2a\u6e38\u620f\u91cc\u9762\uff0c\u6211\u4eec\u6709\u591a\u79cd\u6570\u636e\u9700\u8981\u4fdd\u5b58\uff1a \u8d26\u6237\u76f8\u5173\u7684\u6570\u636e\uff0c\u5305\u542b\u7528\u6237\u540d\u3001\u5bc6\u7801\u3001\u6027\u522b\u7b49 \u6e38\u620f\u5206\u6570\u76f8\u5173\u7684\u6570\u636e\uff0c\u5305\u542b\u7528\u6237\u3001\u5f97\u5206\u3001\u5173\u8054\u5173\u5361\u7b49 \u6211\u4eec\u53ef\u4ee5\u5168\u90e8\u5b58\u653e\u5728\u4e00\u79cd AVObject \u5bf9\u8c61\u91cc\u9762\uff08\u5047\u5b9a\u7c7b\u522b\u540d\uff1aAllInOne\uff09\uff1a // \u73a9\u5bb6\u4fe1\u606f\uff0c\u5305\u62ec\u59d3\u540d\u3001\u5bc6\u7801\u3001\u6027\u522b\u7b49 { username : steve , password : xxxxx , gender : Male } // \u6e38\u620f\u5f97\u5206\u6570\u636e\uff0c\u5305\u62ec\u5206\u6570\u3001\u73a9\u5bb6\u3001\u6a21\u5f0f\u3001\u5173\u5361\u7b49 { score :1337, playerName : steve , cheatMode :false, scene :4} \u4f60\u53ef\u4ee5\u628a\u8fd9\u4e24\u6761\u8bb0\u5f55\u90fd\u4fdd\u5b58\u5230\u4e00\u79cd AVObject \u91cc\u9762\uff0c\u8fd9\u5728 LeanCloud \u4e91\u7aef\u662f\u88ab\u5141\u8bb8\u7684\u3002\u4f46\u662f\u6211\u4eec \u5f3a\u70c8\u5efa\u8bae\u5f00\u53d1\u8005\u5c06\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u6839\u636e\u7528\u9014\u8fdb\u884c\u5206\u7c7b\uff0c\u5f62\u6210\u4e0d\u540c\u79cd\u7c7b\u7684 \u300cAVObject\u300d \u3002\u8b6c\u5982\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u6211\u4eec\u53ef\u4ee5\u62bd\u8c61\u51fa User \u8fd9\u79cd\u5bf9\u8c61\u6765\u4fdd\u5b58\u8d26\u6237\u4fe1\u606f\uff0c\u62bd\u8c61\u51fa GameScore \u8fd9\u79cd\u5bf9\u8c61\u6765\u4fdd\u5b58\u5f97\u5206\u4fe1\u606f\u3002 \u6bcf\u79cd\u300cAVObject\u300d\u5bf9\u5e94 LeanCloud \u4e91\u7aef\u7684\u4e00\u5f20\u300c\u8868\u300d\uff08\u6ce8\u610f\uff1a\u4e3a\u4e86\u4fbf\u4e8e\u7406\u89e3\uff0c\u8fd9\u91cc\u501f\u7528\u4e86\u5173\u7cfb\u578b\u6570\u636e\u5e93\u91cc\u9762\u8868\u7684\u6982\u5ff5\uff0c\u5728 LeanCloud \u5b58\u50a8\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u662f\u6309 Class \u6765\u533a\u5206\u7684\uff09\uff0c\u540c\u4e00\u7c7b\u5bf9\u8c61\u7684\u6240\u6709\u6570\u636e\u90fd\u5b58\u653e\u5728\u4e00\u8d77\u3002\u6bcf\u4e00\u4e2a AVObject \u7684\u5b9e\u4f8b\u4fdd\u5b58\u5230 LeanCloud \u4e91\u7aef\u4e4b\u540e\uff0cLeanCloud \u4e91\u7aef\u4f1a\u8d4b\u4e88\u8be5\u5b9e\u4f8b\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684 objectId \uff0c\u8fd9\u4e2a objectId \u7b49\u540c\u4e8e\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\u7684\u4e3b\u952e\u3002\u540c\u65f6 LeanCloud \u4e91\u7aef\u8fd8\u4f1a\u81ea\u52a8\u4e3a\u8be5\u5b9e\u4f8b\u6dfb\u52a0\u4e24\u4e2a\u5c5e\u6027\uff1a createdAt \u548c updatedAt \uff0c\u5206\u522b\u8868\u793a\u5b9e\u4f8b\u521b\u5efa\u65f6\u95f4\u548c\u6700\u540e\u66f4\u65b0\u65f6\u95f4\u3002 \u4f60\u53ef\u4ee5\u628a LeanCloud \u4e91\u7aef\u770b\u6210\u662f\u4e00\u4e2a\u9762\u5411\u5bf9\u8c61\u7684\u6d77\u91cf\u6570\u636e\u5e93\uff0c\u5b83\u4e0e\u4f20\u7edf\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u5dee\u5f02\u6709\uff1a \u8bbf\u95ee\u65b9\u5f0f\u4e0d\u4e00\u6837\uff0c\u4e0d\u9700\u8981\u4efb\u4f55 JDBC/ODBC \u7684\u9a71\u52a8\uff0c\u76f4\u63a5\u901a\u8fc7 HTTP \u534f\u8bae\u6765\u4f20\u8f93 JSON Object \u5373\u53ef\uff0c\u6240\u4ee5\u4e0d\u5149\u670d\u52a1\u7aef\u53ef\u4ee5\u4f7f\u7528\uff0c\u5728\u5ba2\u6237\u7aef\u4e5f\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u3002\u6211\u4eec\u65e2\u63d0\u4f9b\u5404\u79cd\u5e73\u53f0\u539f\u751f SDK\uff08iOS\u3001 Android\u3001JavaScript\u3001PHP\u3001Python\u3001Java\u3001Windows Phone\u3001.Net\u3001Unity3D\u3001C++\uff0c\u4ee5\u53ca\u793e\u533a\u8d21\u732e\u7684\u5176\u4ed6\u8bed\u8a00 SDK\uff09\u6765\u5e2e\u52a9\u5f00\u53d1\u8005\u7b80\u5355\u96c6\u6210\u6570\u636e\u5b58\u50a8\u670d\u52a1\uff0c\u4e5f\u63d0\u4f9b\u5f00\u653e\u7684 REST API \u4f9b\u5927\u5bb6\u76f4\u63a5\u4f7f\u7528\u3002 LeanCloud \u5bf9\u4e8e\u6570\u636e\u7684\u552f\u4e00\u683c\u5f0f\u8981\u6c42\u662f\u6ee1\u8db3 JSON Object \u7684\u5f62\u5f0f\uff0c\u5b58\u50a8\u65b0\u7684\u5bf9\u8c61\u7c7b\u578b\u65f6\u4e0d\u9700\u8981\u9884\u5148\u5728\u4e91\u7aef\u5b9a\u4e49\u4efb\u4f55\u300c\u8868\u7ed3\u6784\u300d\uff0c\u800c\u4e14\u540c\u4e00\u79cd\u6570\u636e\u7c7b\u578b\u91cc\u7684\u952e\u503c\u4e5f\u662f\u5141\u8bb8\u968f\u65f6\u589e\u52a0\u7684\u3002\u8fd9\u79cd schema free \u7684\u8bbe\u8ba1\uff0c\u4f1a\u7ed9\u5f00\u53d1\u8005\u5e26\u6765\u6700\u5927\u7684\u4fbf\u5229\u3002 AVObject \u4e4b\u95f4\u6ca1\u6709\u4e86\u4e3b\u952e\u3001\u5916\u952e\u7684\u6982\u5ff5\uff0c\u4e5f\u4e0d\u652f\u6301\u8de8\u8868\u7684 join \u67e5\u8be2\uff0c\u53d6\u800c\u4ee3\u4e4b\u7684\uff0c\u6211\u4eec\u63d0\u4f9b\u53e6\u4e00\u79cd\u6570\u636e\u5173\u8054\u7684\u673a\u5236\uff0c\u8be6\u89c1\u4e0b\u6587 \u6570\u636e\u5173\u8054 \uff1b \u65e2\u7136 AVObject \u662f\u9762\u5411\u5bf9\u8c61\u8bbe\u8ba1\u7684\uff0c\u5b83\u7684\u67e5\u8be2\u5c31\u4e0e\u4f20\u7edf SQL \u4e0d\u4e00\u6837\uff0c\u8be6\u89c1\u4e0b\u6587 \u6570\u636e\u67e5\u8be2 AVQuery \u3002\u4e0d\u8fc7\u4e3a\u4e86\u7167\u987e\u5df2\u7ecf\u4e60\u60ef\u4e86\u4f20\u7edf\u5173\u7cfb\u578b\u6570\u636e\u5e93\u67e5\u8be2\u7684\u5f00\u53d1\u8005\uff0c\u6211\u4eec\u4e5f\u63d0\u4f9b\u4e86\u7c7b SQL \u67e5\u8be2\u7684 Cloud Query Language \u67e5\u8be2\u8bed\u6cd5 \uff08\u7b80\u79f0\uff1aCQL\uff09\u3002\u8bf7\u6ce8\u610f\uff1aLeanCloud \u7684 CQL \u67e5\u8be2\u8bed\u6cd5\u662f SQL \u67e5\u8be2\u8bed\u6cd5\u7684\u5b50\u96c6\u548c\u53d8\u79cd\uff0c\u76ee\u7684\u662f\u964d\u4f4e\u5927\u5bb6\u5b66\u4e60 LeanCloud \u67e5\u8be2\u7684 API \u7684\u6210\u672c\uff0c\u5e76\u4e0d\u662f\u6240\u6709 SQL \u4e2d\u53ef\u4ee5\u6267\u884c\u7684\u67e5\u8be2\u90fd\u4f1a\u5728 CQL \u4e2d\u4ea7\u751f\u76f8\u540c\u7684\u7ed3\u679c\u3002","title":"\u5bf9\u8c61 AVObject"},{"location":"storage/storage-overview/#_4","text":"AVObject \u4e2d\u7684 \u952e \uff0c\u5fc5\u987b\u662f\u7531\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210\u7684\u5b57\u7b26\u4e32\uff1b\u5f00\u53d1\u8005\u81ea\u5b9a\u4e49\u7684\u952e\uff0c\u4e0d\u80fd\u4ee5 __ \uff08\u53cc\u4e0b\u5212\u7ebf\uff09\u5f00\u5934\u3002AVObject \u4e2d\u7684 \u503c \uff0c\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32\u3001\u6570\u5b57\u3001\u5e03\u5c14\u503c\uff0c\u6216\u662f\u6570\u7ec4\u548c\u5b57\u5178\u3002\u5728\u5e73\u53f0\u5185\u90e8\uff0cLeanCloud \u5c06\u6570\u636e\u5b58\u50a8\u4e3a JSON\uff0c\u56e0\u6b64\u6240\u6709\u80fd\u88ab\u8f6c\u6362\u6210 JSON \u7684\u6570\u636e\u7c7b\u578b\u90fd\u53ef\u4ee5\u4fdd\u5b58\u5728 LeanCloud \u4e91\u7aef\u3002\u5e76\u4e14\uff0c\u6846\u67b6\u8fd8\u53ef\u4ee5\u5904\u7406\u65e5\u671f\u3001Bytes \u4ee5\u53ca\u6587\u4ef6\u7c7b\u578b\u3002\u603b\u7ed3\u6765\u8bf4\uff0cAVObject \u4e2d\u5b57\u6bb5\u5141\u8bb8\u7684\u7c7b\u578b\u5305\u62ec\uff1a String \u5b57\u7b26\u4e32 Number \u6570\u5b57 Boolean \u5e03\u5c14\u7c7b\u578b Array \u6570\u7ec4 Object \u5bf9\u8c61 Date \u65e5\u671f Bytes base64 \u7f16\u7801\u7684\u4e8c\u8fdb\u5236\u6570\u636e File \u6587\u4ef6 Null \u7a7a\u503c Object \u7c7b\u578b\u7b80\u5355\u5730\u8868\u793a\u6bcf\u4e2a\u5b57\u6bb5\u7684\u503c\u90fd\u53ef\u4ee5\u7531\u80fd JSON \u7f16\u7801\u7684\u5185\u5d4c\u5bf9\u8c61\u7ec4\u5408\u800c\u6210\u3002\u5bf9\u8c61\u7684 Key\uff08\u952e\uff09\u5305\u542b $ \u6216\u8005 . \uff0c\u6216\u8005\u540c\u65f6\u6709 __type \u7684\u952e\uff0c\u90fd\u662f\u7cfb\u7edf\u4fdd\u7559\u7528\u6765\u505a\u4e00\u4e9b\u989d\u5916\u5904\u7406\u7684\u7279\u6b8a\u952e\uff0c\u56e0\u6b64\u8bf7\u4e0d\u8981\u5728\u4f60\u7684\u5bf9\u8c61\u4e2d\u4f7f\u7528\u8fd9\u6837\u7684 Key\u3002\u53e6\u5916\uff0c ACL\u3001className\u3001createdAt\u3001objectId\u3001updatedAt \u8fd9\u4e9b\u5c5e\u6027\u540d\u662f\u4fdd\u7559\u5b57\u6bb5\uff0c\u4e0d\u80fd\u4f5c\u4e3a\u81ea\u5b9a\u4e49\u7684 \u952e \u6765\u4f7f\u7528\u3002 \u6211\u4eec\u7684 SDK \u4f1a\u5904\u7406\u539f\u751f\u7684 Objective-C \u548c Java \u7c7b\u578b\u5230 JSON \u4e4b\u95f4\u7684\u8f6c\u6362\u3002\u4f8b\u5982\uff0c\u5f53\u4f60\u4fdd\u5b58\u4e00\u4e2a NSString \u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u5b83\u5728\u6211\u4eec\u7684\u7cfb\u7edf\u4e2d\u4f1a\u88ab\u81ea\u52a8\u8f6c\u6362\u6210 String \u7c7b\u578b\u3002 \u6709\u4e24\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5b58\u50a8\u539f\u751f\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u3002Bytes \u7c7b\u578b\u5141\u8bb8\u76f4\u63a5\u5728 AVObject \u4e2d\u5173\u8054 NSData \u6216\u8005 bytes[] \u7c7b\u578b\u7684\u6570\u636e\u3002\u8fd9\u79cd\u65b9\u5f0f\u53ea\u63a8\u8350\u7528\u6765\u5b58\u50a8\u5c0f\u7247\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u3002\u5f53\u8981\u4fdd\u5b58\u5b9e\u9645\u6587\u4ef6\uff08\u4f8b\u5982\u56fe\u7247\uff0c\u89c6\u9891\uff0c\u6587\u6863\u7b49\uff09\uff0c\u8bf7\u4f7f\u7528 AVFile \u6765\u8868\u793a File \u7c7b\u578b\uff0c\u5e76\u4e14 File \u7c7b\u578b\u53ef\u4ee5\u88ab\u4fdd\u5b58\u5230\u5bf9\u8c61\u5b57\u6bb5\u4e2d\u5173\u8054\u8d77\u6765\u3002","title":"\u6709\u6548\u7684\u6570\u636e\u7c7b\u578b"},{"location":"storage/storage-overview/#_5","text":"\u5f53\u4e00\u4e2a Class \u521d\u6b21\u521b\u5efa\u7684\u65f6\u5019\uff0c\u5b83\u4e0d\u5305\u542b\u4efb\u4f55\u9884\u5148\u5b9a\u4e49\u5e76\u7ee7\u627f\u7684 schema\u3002\u4e5f\u5c31\u662f\u8bf4\u5bf9\u4e8e\u5b58\u50a8\u7684\u7b2c\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5b83\u7684\u5b57\u6bb5\u53ef\u4ee5\u5305\u542b\u4efb\u4f55\u6709\u6548\u7684\u7c7b\u578b\u3002 \u4f46\u662f\uff0c\u5f53\u4e00\u4e2a\u5b57\u6bb5\u88ab\u4fdd\u5b58\u81f3\u5c11\u4e00\u6b21\u4e4b\u540e\uff0c\u8fd9\u4e2a\u5b57\u6bb5\u5c06\u88ab\u9501\u5b9a\u4e3a\u4fdd\u5b58\u8fc7\u7684\u6570\u636e\u7c7b\u578b\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4e00\u4e2a User \u5bf9\u8c61\u4fdd\u5b58\u4e86\u4e00\u4e2a\u5b57\u6bb5 name\uff0c\u7c7b\u578b\u4e3a String\uff0c\u90a3\u4e48\u8fd9\u4e2a name \u5b57\u6bb5\u5c06\u88ab\u4e25\u683c\u9650\u5236\u4e3a\u53ea\u5141\u8bb8\u4fdd\u5b58 String \u7c7b\u578b\u3002\uff08\u5982\u679c\u4f60\u5c1d\u8bd5\u4fdd\u5b58\u5176\u4ed6\u7c7b\u578b\u5230\u8fd9\u4e2a\u5b57\u6bb5\uff0c\u6211\u4eec\u7684 SDK \u4f1a\u8fd4\u56de\u4e00\u4e2a\u9519\u8bef\uff09 \u4e00\u4e2a\u7279\u4f8b\u662f\u4efb\u4f55\u5b57\u6bb5\u90fd\u5141\u8bb8\u88ab\u8bbe\u7f6e\u4e3a null\uff0c\u65e0\u8bba\u5b83\u662f\u4ec0\u4e48\u7c7b\u578b\u3002","title":"\u6570\u636e\u7c7b\u578b\u9501\u5b9a"},{"location":"storage/storage-overview/#_6","text":"LeanCloud \u63a7\u5236\u53f0 \u5b58\u50a8 \u6570\u636e \u662f\u4e00\u4e2a\u5141\u8bb8\u5728\u4efb\u4f55\u5e94\u7528\u91cc\u66f4\u65b0\u6216\u8005\u521b\u5efa\u5bf9\u8c61\u7684 Web UI \u7ba1\u7406\u5e73\u53f0\u3002\u5728\u8fd9\u91cc\u4f60\u53ef\u4ee5\u770b\u5230\u4fdd\u5b58\u5728 Class \u91cc\u7684\u6bcf\u4e2a\u5bf9\u8c61\u7684\u539f\u751f JSON \u503c\u3002 \u5f53\u4f7f\u7528\u8fd9\u4e2a\u5e73\u53f0\u7684\u65f6\u5019\uff0c\u8bf7\u7262\u8bb0\uff1a \u8f93\u5165 \"null\" \u5c06\u4f1a\u8bbe\u7f6e\u503c\u4e3a\u7279\u6b8a\u7684\u7a7a\u503c null\uff0c\u800c\u975e\u5b57\u7b26\u4e32 \"null\"\u3002 objectId , createdAt \u548c updatedAt \u4e0d\u53ef\u7f16\u8f91\uff08\u5b83\u4eec\u90fd\u662f\u7cfb\u7edf\u81ea\u52a8\u8bbe\u7f6e\u7684\uff09\u3002 \u4e0b\u5212\u7ebf\u5f00\u59cb\u7684 class \u4e3a\u7cfb\u7edf\u5185\u7f6e class\uff0c\u4e0d\u53ef\u5220\u9664\uff0c\u5e76\u4e14\u8bf7\u8f7b\u6613\u4e0d\u8981\u4fee\u6539\u5b83\u7684\u9ed8\u8ba4\u5b57\u6bb5\uff0c\u53ef\u6dfb\u52a0\u5b57\u6bb5\u3002","title":"\u6570\u636e\u7ba1\u7406"},{"location":"storage/storage-overview/#_7","text":"\u6211\u4eec\u5e76\u4e0d\u9501\u5b9a\u7528\u6237\u548c\u6570\u636e\uff0c\u76f8\u53cd\uff0c\u6211\u4eec\u63d0\u4f9b API \u548c\u5de5\u5177\uff0c\u6765\u652f\u6301\u7528\u6237\u968f\u65f6\u968f\u5730\u5bfc\u51fa\u5b58\u653e\u5728\u6211\u4eec\u5e73\u53f0\u4e0a\u7684\u6570\u636e\uff0c\u540c\u6837\u5730\uff0c\u6570\u636e\u5bfc\u5165\u4e5f\u662f\u53ef\u4ee5\u6279\u91cf\u64cd\u4f5c\u7684\u3002\u9664\u4e86 REST API \u4e4b\u5916\uff0c\u6211\u4eec\u8fd8\u63d0\u4f9b\u901a\u8fc7 JSON \u6587\u4ef6\u548c CSV \u683c\u5f0f\u6587\u4ef6\u7684\u5bfc\u5165\u6570\u636e \u7684\u529f\u80fd\u3002","title":"\u6570\u636e\u5bfc\u5165\u548c\u5bfc\u51fa"},{"location":"storage/storage-overview/#_8","text":"\u4e0a\u9762\u8bb2\u8fc7\uff0cAVObject \u6a21\u578b\u4e0e\u4f20\u7edf\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93\u6709\u4e00\u4e2a\u5f88\u5927\u7684\u4e0d\u540c\uff0c\u5c31\u662f\u6ca1\u6709\u4e86\u4e3b\u952e\u3001\u5916\u952e\u7684\u6982\u5ff5\uff0c\u4f46\u662f\u5bf9\u8c61\u4e4b\u95f4\u603b\u4f1a\u5b58\u5728\u5173\u8054\uff0c\u8fd9\u65f6\u5019\u8be5\u5982\u4f55\u89e3\u51b3\u5462\uff1f LeanCloud \u4e2d\u6709 4 \u79cd\u65b9\u5f0f\u6765\u6784\u5efa\u5bf9\u8c61\u4e4b\u95f4\u7684\u5173\u7cfb\uff1a Pointer \u2014\u2014\u5c31\u662f\u5c06\u4e00\u4e2a\u5bf9\u8c61 A \u5b58\u4e3a\u53e6\u4e00\u4e2a\u5bf9\u8c61 B \u7684\u5c5e\u6027\u503c\uff0c\u8fd9\u9002\u5408\u7528\u6765\u5904\u7406\u4e00\u5bf9\u4e00\u6216\u8005\u4e00\u5bf9\u591a\u7684\u5173\u8054\u5173\u7cfb\u3002 Array \u2014\u2014\u5c31\u662f\u5c06\u591a\u4e2a\u5bf9\u8c61 A\u3001B\u3001C \u5b58\u4e3a\u53e6\u4e00\u4e2a\u5bf9\u8c61 D \u7684\u5c5e\u6027\u503c\uff0c\u8fd9\u9002\u5408\u7528\u6765\u5904\u7406\u4e00\u5bf9\u591a\u6216\u8005\u591a\u5bf9\u591a\u7684\u5173\u8054\u5173\u7cfb\u3002 AVRelation \u2014\u2014\u8fd9\u662f\u4e00\u4e2a\u4e13\u95e8\u7684\u5173\u8054\u7c7b\uff0c\u7528\u6765\u5efa\u7acb\u4e24\u79cd\u5bf9\u8c61\u4e4b\u95f4\u7684\u5173\u8054\u5173\u7cfb\uff0c\u9002\u5408\u591a\u5bf9\u591a\u7684\u573a\u666f\u3002 \u4e2d\u95f4\u8868 \u2014\u2014\u4f7f\u7528\u4e13\u95e8\u7684\u7c7b\uff0c\u6765\u4e3a\u4e24\u79cd\u5bf9\u8c61\u5efa\u7acb\u5173\u8054\u5173\u7cfb\uff0c\u4e0e AVRelation \u76f8\u6bd4\u5b83\u8fd8\u53ef\u4ee5\u6dfb\u52a0\u66f4\u591a\u7684\u9644\u52a0\u4fe1\u606f\u3002\u8b6c\u5982\u6211\u4eec\u4e3a\u7528\u6237\u4e4b\u95f4\u5173\u6ce8/\u88ab\u5173\u6ce8\u7684\u5173\u7cfb\u5efa\u6a21\uff0c\u5c31\u50cf\u6d41\u884c\u7684\u793e\u4ea4\u7f51\u7edc\u90a3\u6837\uff0c\u4e00\u4e2a\u7528\u6237\u53ef\u4ee5\u5173\u6ce8\u522b\u7684\u7528\u6237\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u4e0d\u4ec5\u60f3\u77e5\u9053\u7528\u6237 A \u662f\u5426\u5173\u6ce8\u4e86\u7528\u6237 B\uff0c\u6211\u4eec\u8fd8\u60f3\u77e5\u9053\u4ec0\u4e48\u65f6\u5019\u7528\u6237 A \u5f00\u59cb\u5173\u6ce8\u7684\u7528\u6237 B\uff0c\u8fd9\u65f6\u5019\u5c31\u9002\u5408\u5efa\u7acb\u4e13\u95e8\u7684\u4e2d\u95f4\u8868\u3002\u4e2d\u95f4\u8868\u9002\u5408\u591a\u5bf9\u591a\u7684\u5173\u8054\u5173\u7cfb\u3002 \u8be6\u7ec6\u5185\u5bb9\u8bf7\u53c2\u8003\u300a \u6570\u636e\u6a21\u578b\u8bbe\u8ba1\u6307\u5357 \u300b\u3002","title":"\u6570\u636e\u5173\u8054"},{"location":"storage/storage-overview/#avquery","text":"AVObject \u4fdd\u5b58\u5230 LeanCloud \u4e91\u7aef\u4e4b\u540e\uff0c\u5982\u4f55\u518d\u6b21\u83b7\u53d6\u5230\u5b83\u4eec\u5462\uff1f\u8fd9\u65f6\u5019\u9700\u8981\u7528\u5230\u6570\u636e\u67e5\u8be2\u529f\u80fd\u4e86\u3002\u524d\u9762\u6211\u4eec\u8bb2\u8fc7\uff0c\u67e5\u8be2\u8bed\u6cd5\u56e0\u4e3a\u9762\u5411\u5bf9\u8c61\u7684\u6a21\u578b\u4e0d\u540c\uff0c\u4e0e SQL \u8bed\u6cd5\u6709\u8f83\u5927\u5dee\u5f02\u3002\u8fd9\u65f6\u5019\u6211\u4eec\u80fd\u7528\u7684\u5c31\u662f AVQuery \u3002AVQuery \u7684\u529f\u80fd\u975e\u5e38\u5f3a\u5927\uff0c\u5b83\u53ef\u4ee5\uff1a \u68c0\u7d22\u5355\u4e00\u5bf9\u8c61\uff0c\u4e5f\u53ef\u4ee5\u4e00\u6b21\u68c0\u7d22\u8bb8\u591a\u5bf9\u8c61\uff1b \u652f\u6301\u5404\u79cd\u5404\u6837\u7684\u67e5\u8be2\u7ea6\u675f\uff1b \u652f\u6301\u5206\u9875\u67e5\u8be2\uff1b \u652f\u6301\u590d\u5408\u67e5\u8be2\uff1b \u652f\u6301\u81ea\u52a8\u7f13\u5b58\u67e5\u8be2\u7ed3\u679c\uff0c\u4fdd\u8bc1\u5728\u7f51\u7edc\u5f02\u5e38\u7684\u60c5\u51b5\u4e0b UI \u4e5f\u6709\u5386\u53f2\u6570\u636e\u53ef\u4f9b\u5c55\u73b0\u3002 \u9664\u4e86 AVQuery \u4e4b\u5916\uff0c\u6211\u4eec\u4e5f\u63d0\u4f9b\u7c7b SQL \u67e5\u8be2\u7684 Cloud Query Language \u67e5\u8be2\u8bed\u6cd5 \uff08\u7b80\u79f0\uff1aCQL\uff09\u3002\u8bf7\u6ce8\u610f\uff1aLeanCloud \u7684 CQL \u67e5\u8be2\u8bed\u6cd5\u662f SQL \u67e5\u8be2\u8bed\u6cd5\u7684\u5b50\u96c6\u548c\u53d8\u79cd\uff0c\u76ee\u7684\u662f\u964d\u4f4e\u5927\u5bb6\u5b66\u4e60 LeanCloud \u67e5\u8be2\u7684 API \u7684\u6210\u672c\uff0c\u5e76\u4e0d\u662f\u6240\u6709 SQL \u4e2d\u53ef\u4ee5\u6267\u884c\u7684\u67e5\u8be2\u90fd\u4f1a\u5728 CQL \u4e2d\u4ea7\u751f\u76f8\u540c\u7684\u7ed3\u679c\u3002","title":"\u6570\u636e\u67e5\u8be2 AVQuery"},{"location":"storage/storage-overview/#avfile","text":"\u9664\u4e86\u5e94\u7528\u5185\u6570\u636e\u5b58\u50a8\u4e4b\u5916\uff0cLeanCloud \u4e91\u7aef\u4e5f\u652f\u6301\u300c\u6587\u4ef6\u300d\u7c7b\u6570\u636e\u7684\u5b58\u50a8\u3002\u8fd9\u91cc\u7684\u300c\u6587\u4ef6\u300d\u6307\u7684\u662f\u56fe\u7247\u3001\u97f3\u4e50\u3001\u89c6\u9891\u7b49\u5e38\u89c1\u7684\u6587\u4ef6\u7c7b\u578b\uff0c\u4ee5\u53ca\u5176\u4ed6\u4efb\u4f55\u4e8c\u8fdb\u5236\u6570\u636e\u3002\u56e0\u4e3a AVObject \u6709\u5927\u5c0f\u9650\u5236\uff0c\u6240\u4ee5\u8d85\u8fc7 128 KB \u7684\u6570\u636e\u4e0d\u80fd\u76f4\u63a5\u5b58\u50a8\u5230 AVObject \u91cc\u9762\uff1b\u800c\u4e14\u66f4\u91cd\u8981\u7684\u662f\uff0c\u5bf9\u4e8e\u56fe\u7247\u3001\u97f3\u4e50\u3001\u89c6\u9891\u7c7b\u6570\u636e\uff0c\u56e0\u4e3a\u5b83\u4eec\u7684\u4f53\u79ef\u592a\u5927\uff0c\u4e3a\u4e86\u7ec8\u7aef\u7528\u6237\u6709\u5feb\u6377\u7684\u4e0b\u8f7d\u4f53\u9a8c\uff0c\u90fd\u9700\u8981\u989d\u5916\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u8fd9\u65f6\u5019\uff0c\u5c31\u9700\u8981\u4f7f\u7528\u7279\u522b\u7684\u7c7b\u578b\u300c\u6587\u4ef6\u300d\uff0c\u5373 AVFile \u6765\u5b58\u50a8\u3002\u4f60\u65e2\u53ef\u4ee5\u4f7f\u7528 LeanCloud \u9ed8\u8ba4\u63d0\u4f9b\u7684\u516c\u7528\u57df\u540d\u6765\u8bbf\u95ee\u8fd9\u4e9b\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u4e3a\u5b83\u4eec\u6307\u5b9a\u81ea\u5b9a\u4e49\u57df\u540d\uff08\u63a8\u8350\uff09\u3002\u6587\u4ef6\u57df\u540d\u652f\u6301 HTTP \u548c HTTPS\u3002","title":"\u6587\u4ef6\u5b58\u50a8 AVFile"},{"location":"storage/storage-overview/#avuser","text":"\u51e0\u4e4e\u6240\u6709\u7684\u5e94\u7528\u90fd\u4f1a\u7528\u6237\u7684\u6982\u5ff5\u3002\u4f8b\u5982\u624b\u673a\u53f7\u6ce8\u518c\u7528\u6237\u3001\u90ae\u7bb1\u6ce8\u518c\u3001\u624b\u673a\u9a8c\u8bc1\u7801\u767b\u5f55\u3001\u624b\u673a\u53f7\u4e00\u952e\u767b\u5f55\u7b49\u7b49\uff0c\u8fd9\u4e9b\u90fd\u662f\u4e0e\u7528\u6237\u76f8\u5173\u7684\u5e38\u89c1\u529f\u80fd\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7 AVUser \u5bf9\u8c61\u6765\u5feb\u901f\u5b9e\u73b0\u5b83\u4eec\u3002 \u6ce8\u518c\u548c\u767b\u5f55\u652f\u6301\u5982\u4e0b\u65b9\u5f0f\uff1a \u7528\u6237\u540d\uff08\u5b57\u6bcd\u6570\u5b57\uff09+ \u5bc6\u7801 \u90ae\u7bb1 + \u5bc6\u7801 \u624b\u673a\u53f7 + \u5bc6\u7801 \u624b\u673a\u53f7 + \u624b\u673a\u9a8c\u8bc1\u7801\uff08\u4e00\u952e\u767b\u5f55\uff0c\u5982\u679c\u4e4b\u524d\u7528\u6237\u6ce8\u518c\u8fc7\u5c31\u76f4\u63a5\u767b\u5f55\uff0c\u5982\u679c\u6ca1\u6709\u5c31\u521b\u5efa\u65b0\u7528\u6237\u518d\u76f4\u63a5\u767b\u5f55\uff09 \u793e\u4ea4\u8d26\u53f7 OAuth \u767b\u5f55\uff08QQ\u3001\u5fae\u535a\u3001Facebook\u3001Google \u7b49\uff09 \u8fd8\u652f\u6301\u90ae\u7bb1\u5bc6\u7801\u91cd\u7f6e\u3001\u624b\u673a\u5bc6\u7801\u91cd\u7f6e\u7b49\u8f85\u52a9\u529f\u80fd\uff0c\u8be6\u7ec6\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003\u5404 SDK \u5f00\u53d1\u6307\u5357\u3002","title":"\u7528\u6237\u5bf9\u8c61 AVUser"},{"location":"storage/storage-overview/#_9","text":"LeanCloud \u5e73\u53f0\u4fdd\u8bc1 99.9% \u7684\u9ad8\u53ef\u7528\u6027\uff0c\u5e76\u4e14\u6570\u636e\u8bbf\u95ee\u65b9\u9762\u4fdd\u8bc1\u4e86\u6781\u9ad8\u7684\u8bfb\u5199\u6027\u80fd\u548c\u6781\u5927\u7684\u6570\u636e\u652f\u6301\u89c4\u6a21\uff1a \u4e00\u822c\u6570\u636e\u8bbf\u95ee API \u7684\u5b8c\u6210\u65f6\u95f4\u90fd\u5728\u51e0\u5341\u4e2a\u6beb\u79d2\u5185\uff08\u5305\u62ec\u4e86\u7f51\u7edc roundtrip \u65f6\u95f4\u5728\u5185\uff09\u3002 API \u8bbf\u95ee\u7684\u5e76\u53d1\u5904\u7406\u80fd\u529b\u65e0\u4e0a\u9650\u3002 \u5e94\u7528\u5185\u6570\u636e\u652f\u6301\u9ad8\u8fbe PB \u7ea7\u522b\u7684\u89c4\u6a21\uff0c\u4f60\u5b8c\u5168\u65e0\u9700\u5173\u5fc3\u4f20\u7edf\u6570\u636e\u5e93\u4f7f\u7528\u65f6\u9047\u5230\u7684\u300c\u5206\u8868\u300d\u7b49\u5e73\u884c\u6269\u5c55\u95ee\u9898\uff1b \u6587\u4ef6\u5b58\u50a8\u7684\u7f51\u7edc\u6d41\u91cf\u548c\u5e26\u5bbd\u65e0\u9650\u5236\uff1b","title":"\u4e3b\u8981\u6027\u80fd\u6307\u6807"},{"location":"storage/storage-overview/#sdk","text":"\u5982\u679c\u4f60\u662f\u67d0\u4e2a\u7279\u5b9a\u5e73\u53f0\u7684\u5f00\u53d1\u8005\uff0c\u60f3\u67e5\u770b\u6211\u4eec\u539f\u751f\u7684 SDK \u5f00\u53d1\u6307\u5357\uff0c\u8bf7\u79fb\u6b65\u5230\u5177\u4f53\u9875\u9762\uff1a","title":"\u539f\u751f SDK"},{"location":"storage/storage-overview/#ios","text":"\u8be6\u7ec6\u8bf7\u53c2\u770b iOS \u6570\u636e\u5b58\u50a8\u5f00\u53d1\u6307\u5357 ;","title":"iOS \u5f00\u53d1\u6307\u5357"},{"location":"storage/storage-overview/#android","text":"\u8be6\u7ec6\u8bf7\u53c2\u770b Android \u6570\u636e\u5b58\u50a8\u5f00\u53d1\u6307\u5357 ;","title":"Android \u5f00\u53d1\u6307\u5357"},{"location":"storage/storage-overview/#javascript","text":"\u8be6\u7ec6\u8bf7\u53c2\u770b Javascript \u6570\u636e\u5b58\u50a8\u5f00\u53d1\u6307\u5357 ;","title":"Javascript \u5f00\u53d1\u6307\u5357"},{"location":"storage/storage-overview/#netunity3d","text":"\u8be6\u7ec6\u8bf7\u53c2\u770b .Net \u6570\u636e\u5b58\u50a8\u5f00\u53d1\u6307\u5357 ;","title":".Net/Unity3D \u5f00\u53d1\u6307\u5357"},{"location":"storage/storage-overview/#python","text":"\u8be6\u7ec6\u8bf7\u53c2\u770b Python \u6570\u636e\u5b58\u50a8\u5f00\u53d1\u6307\u5357 ;","title":"Python \u5f00\u53d1\u6307\u5357"},{"location":"storage/storage-overview/#rest-api","text":"\u8be6\u7ec6\u8bf7\u53c2\u770b REST API \u8be6\u7ec6\u8bf4\u660e ;","title":"REST API \u8bf4\u660e"},{"location":"storage/storage-overview/#_10","text":"","title":"\u5e38\u89c1\u95ee\u9898"},{"location":"storage/storage-overview/#_11","text":"\u56e0\u4e3a\u662f\u628a\u81ea\u5df1\u7684\u6838\u5fc3\u6570\u636e\u5b58\u653e\u5230\u5f00\u653e\u7684\u4e91\u7aef\uff0c\u6240\u6709\u7528\u6237\u6216\u591a\u6216\u5c11\u90fd\u4f1a\u6709\u8fd9\u65b9\u9762\u7684\u62c5\u5fc3\uff1a\u6211\u7684\u6570\u636e\u5b89\u5168\u5417\uff1f LeanCloud \u91cd\u89c6\u6570\u636e\u5b89\u5168\uff0c\u56e0\u6b64\u63d0\u4f9b\u5982\u4e0b\u6280\u672f\u624b\u6bb5\u6765\u4fdd\u8bc1\u7528\u6237\u7684\u6570\u636e\u5b89\u5168\u53ef\u9760\uff1a \u6240\u6709\u6570\u636e\u5728\u4e91\u7aef\u4f1a\u5b58\u653e 3 \u4efd\u62f7\u8d1d\uff0c\u4ee5\u4fdd\u8bc1\u51fa\u73b0\u5404\u79cd\u786c\u4ef6\u3001\u7f51\u7edc\u6545\u969c\u7684\u65f6\u5019\uff0c\u6570\u636e\u90fd\u662f\u53ef\u7528\u7684\u3002 \u6240\u6709\u7f51\u7edc\u8bf7\u6c42\u90fd\u662f\u57fa\u4e8e SSL \u5b89\u5168\u8fde\u63a5\uff08HTTPS\uff09\u7684\uff0c\u4fdd\u8bc1\u6570\u636e\u5185\u5bb9\u4e0d\u4f1a\u88ab\u8f7b\u6613\u622a\u83b7\u6216\u8005\u7aa5\u63a2\u5230\u3002 \u5e94\u7528\u4e4b\u95f4\u7684\u6570\u636e\u5b8c\u5168\u9694\u79bb\uff0c\u5e94\u7528 A \u6570\u636e\u51fa\u73b0\u95ee\u9898\u4e0d\u4f1a\u6ce2\u53ca\u5230\u5e94\u7528 B\uff0c\u4e5f\u4e0d\u4f1a\u51fa\u73b0\u5e94\u7528 A \u53ef\u4ee5\u8bbf\u95ee\u5230\u5e94\u7528 B \u7684\u6570\u636e\u7684\u60c5\u51b5\uff08\u5f53\u7136\u660e\u786e\u6388\u6743\u7684\u60c5\u51b5\u4f8b\u5916\uff09 \u6570\u636e\u8bbf\u95ee\u4f1a\u8fdb\u884c\u4e25\u683c\u7684\u8eab\u4efd\u8ba4\u8bc1\u3002\u6bcf\u4e2a\u5e94\u7528\u6211\u4eec\u90fd\u4f1a\u751f\u6210 appKey \u548c masterKey \u4e24\u5957\u5bc6\u94a5\uff0c\u5206\u522b\u5bf9\u5e94\u5f00\u653e\u73af\u5883\u548c\u6388\u4fe1\u73af\u5883\u7684\u4f7f\u7528\u573a\u666f\uff0c\u6240\u4ee5\u4f60\u53ef\u4ee5\u5c06\u67d0\u4e9b\u6838\u5fc3\u6570\u636e\u7684\u8bfb\u5199\u53ea\u6388\u6743\u7ed9 masterKey\u3002LeanCloud \u4e91\u7aef\u5bf9\u6240\u6709\u64cd\u4f5c\u90fd\u4f1a\u8fdb\u884c\u8bf7\u6c42\u53d1\u8d77\u8005\u8eab\u4efd\u8fdb\u884c\u8ba4\u8bc1\uff0c\u4ee5\u9632\u5fa1\u865a\u5047\u8bf7\u6c42\u7684\u5e72\u6270\u3001\u7834\u574f\u3002 \u5728\u5f00\u653e\u73af\u5883\uff0c\u8b6c\u5982 Web \u7aef\uff0c\u6211\u4eec\u8fd8\u652f\u6301\u901a\u8fc7 Web \u5b89\u5168\u57df\u540d \u6765\u5bf9\u8bf7\u6c42\u6765\u6e90\u505a\u9650\u5236\uff0c\u53ef\u4ee5\u7b80\u5355\u7684\u9632\u5fa1\u4f4f Web \u7684\u670d\u52a1\u5668\u8d44\u6e90\u76d7\u53d6\u3002 \u6570\u636e\u8868\u4e0a\u63d0\u4f9b\u300c\u884c\u300d\u7ea7\u522b\u7684\u8bbf\u95ee\u6743\u9650\u63a7\u5236\uff08ACL\uff09\uff0c\u4f60\u53ef\u4ee5\u5bf9\u6bcf\u4e00\u4e2a\u5bf9\u8c61\u8bbe\u7f6e\u4e0d\u540c\u7684\u8bfb\u5199\u8bbf\u95ee\u6743\u9650\uff08\u4e0e Linux \u6587\u4ef6\u7cfb\u7edf\u7684 ACL \u673a\u5236\u4e00\u6837\uff0c\u6211\u4eec\u4e5f\u63d0\u4f9b owner\u3001group\u3001public \u7684\u8bfb\u5199\u8bbf\u95ee\u63a7\u5236\uff09\u3002 \u5217\u7ea7\u522b\u7684\u8bbf\u95ee\u63a7\u5236\u6743\u9650\u3002\u4e0e\u4e0a\u9762\u300c\u884c\u300d\u7ea7\u522b\u7684\u8bbf\u95ee\u6743\u9650\u63a7\u5236\u7c7b\u4f3c\uff0c\u6211\u4eec\u8fd8\u5141\u8bb8\u4f60\u4e3a\u67d0\u5f20\u8868\u7684\u90e8\u5206\u300c\u5217\u300d\u8bbe\u5b9a\u5355\u72ec\u7684\u8bbf\u95ee\u63a7\u5236\u6743\u9650\u3002 Class \u7ea7\u522b\u7684\u8bbf\u95ee\u63a7\u5236\u6743\u9650\u3002\u5728\u4e00\u4e9b\u60c5\u51b5\u4e0b\uff0c\u8bbe\u7f6e\u6574\u4e2a Class \u5141\u8bb8\u7684\u6743\u9650\u662f\u4e00\u79cd\u66f4\u81ea\u7136\u7684\u65b9\u5f0f\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u80fd\u60f3\u8bbe\u7f6e\u6574\u4e2a Class \u53ea\u8bfb\uff0c\u6216\u8005\u53ea\u5199\u3002LeanCloud \u4e5f\u5141\u8bb8\u4f60\u8bbe\u7f6e\u6bcf\u4e2a Class \u5141\u8bb8\u7684\u64cd\u4f5c\u3002 \u5177\u4f53\u8bf7\u53c2\u8003\u6587\u6863 \u6570\u636e\u548c\u5b89\u5168 \u3002","title":"\u6570\u636e\u5b89\u5168\u6709\u4fdd\u969c\u5417"},{"location":"storage/storage-overview/#leancloud","text":"\u9664\u4e86\u5b89\u5168\u4e4b\u5916\uff0c\u5927\u5bb6\u62c5\u5fc3\u7684\u7b2c\u4e8c\u4e2a\u95ee\u9898\u5c31\u662f\u5f00\u653e\u3002\u6211\u4eec\u628a\u6570\u636e\u5b58\u653e\u5230\u8fd9\u4e2a\u5e73\u53f0\u4e4b\u540e\uff0c\u8fd8\u53ef\u4ee5\u81ea\u7531\u5bfc\u51fa\u5417\uff1f\u4ee5\u540e\u8981\u60f3\u642d\u5efa\u81ea\u5df1\u7684\u540e\u7aef\u4e13\u5c5e\u96c6\u7fa4\u4e86\uff0c\u53ef\u4ee5\u5feb\u901f\u5730\u8fc1\u51fa\u5417\uff1f \u653e\u5fc3\uff0cLeanCloud \u79c9\u627f\u300c\u5f00\u653e\u3001\u81ea\u7531\u300d\u7684\u7406\u5ff5\uff0c\u7edd\u4e0d\u4f1a\u6545\u610f\u5236\u9020\u969c\u788d\u6765\u300c\u7ed1\u67b6\u300d\u7528\u6237\u3002\u6211\u4eec\u63d0\u4f9b API\u3001\u5de5\u5177\u6765\u8ba9\u7528\u6237\u968f\u65f6\u5bfc\u51fa\u6216\u5bfc\u5165\u81ea\u5df1\u7684\u6570\u636e\uff0c\u6211\u4eec\u76f8\u4fe1\u53ea\u6709\u53ef\u9760\u7684\u6280\u672f\u548c\u597d\u7684\u670d\u52a1\u624d\u80fd\u5438\u5f15\u5e76\u7559\u4f4f\u7528\u6237\u3002","title":"\u6211\u4f1a\u88ab\u7ed1\u5b9a\u5728 LeanCloud \u5e73\u53f0\u5417"},{"location":"storage/storage-overview/#api","text":"LeanCloud \u6807\u51c6 API \u80fd\u6ee1\u8db3\u5f88\u591a\u901a\u7528\u7684\u9700\u6c42\uff0c\u4f46\u6709\u65f6\u5019\u6211\u6709\u4e00\u4e9b\u7279\u6b8a\u7684\u9700\u6c42\uff0c\u8b6c\u5982\uff1a \u6211\u8981\u5b9e\u65f6\u67e5\u770b\u793e\u4ea4\u5e73\u53f0\u5185\u5bb9\u7684\u70ed\u5ea6\u6392\u540d\uff0c\u70ed\u5ea6\u7b97\u6cd5\u662f\u9700\u8981\u878d\u5408\u591a\u79cd\u6570\u636e\u6765\u6e90\u8fdb\u884c\u8ba1\u7b97\u7684\uff0c\u600e\u4e48\u529e\uff1f \u5728\u53d1\u751f\u6570\u636e\u53d8\u5316\u7684\u65f6\u5019\uff0c\u8981\u4e3b\u52a8\u89e6\u53d1\u67d0\u4e00\u4e8b\u4ef6\u3002\u8b6c\u5982\u7528\u6237 A \u8bc4\u8bba\u4e86\u7528\u6237 B \u7684\u7167\u7247\uff0c\u8fd9\u65f6\u5019\u6211\u5e0c\u671b\u80fd\u591f\u5b9e\u65f6\u7ed9\u7528\u6237 B \u53d1\u9001\u4e00\u6761\u63a8\u9001\u4fe1\u606f\uff0c\u600e\u4e48\u529e\uff1f \u8fd9\u65f6\u5019\u4f60\u53ef\u4ee5\u4f7f\u7528\u6211\u4eec\u7684 LeanEngine \u670d\u52a1\uff0c\u6765\u6269\u5c55\u6807\u51c6 API \u7684\u529f\u80fd\uff0c\u5177\u4f53\u8bf7\u53c2\u8003\u6587\u6863 \u4e91\u5f15\u64ce\u5f00\u53d1\u6307\u5357 \u3002","title":"\u6807\u51c6 API \u6ee1\u8db3\u4e0d\u4e86\u4e1a\u52a1\u9700\u6c42\uff0c\u600e\u4e48\u529e"},{"location":"storage/storage-overview/#_12","text":"\u6211\u628a\u6570\u636e\u90fd\u653e\u5230\u4e86 LeanCloud \u4e0a\u9762\uff0c\u4e24\u4e2a\u6708\u540e\u4ea7\u54c1\u7ecf\u7406\u60f3\u770b\u770b\u67d0\u4e00\u529f\u80fd\u7684\u65e5\u5747\u4f7f\u7528\u60c5\u51b5\uff0c\u6216\u8005\u8fd0\u8425\u4eba\u5458\u8981\u5206\u6790\u7528\u6237\u4ece\u6ce8\u518c\u5230\u6d88\u8d39\u7684\u65f6\u95f4\u5468\u671f\uff0c\u8fd9\u65f6\u5019\u600e\u4e48\u529e\uff1f \u653e\u5fc3\uff0cLeanCloud \u63d0\u4f9b\u4e86 SQL-like \u7684\u79bb\u7ebf\u6570\u636e\u5206\u6790\u529f\u80fd\uff0c\u652f\u6301\u5bf9\u5e94\u7528\u5185\u6570\u636e\u8fdb\u884c\u4efb\u610f\u7684\u5904\u7406\uff0c\u6765\u5b8c\u6210\u6570\u636e\u6316\u6398\u548c\u5546\u4e1a\u667a\u80fd\u5206\u6790\u7684\u76ee\u7684\u3002\u5177\u4f53\u8bf7\u53c2\u8003\u6587\u6863 \u79bb\u7ebf\u6570\u636e\u5206\u6790\u6307\u5357 \u3002","title":"\u8981\u5bf9\u5b58\u50a8\u7684\u6570\u636e\u8fdb\u884c\u4e1a\u52a1\u5206\u6790\uff0c\u600e\u4e48\u529e"}]}