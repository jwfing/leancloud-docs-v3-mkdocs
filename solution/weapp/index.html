



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.5">
    
    
      
        <title>在微信小程序与小游戏中使用 LeanCloud - LeanCloud 文档</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../assets/stylesheets/mdc-web.css">
    
      <link rel="stylesheet" href="../../assets/stylesheets/bootstrap.min.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#leancloud" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="LeanCloud 文档" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                LeanCloud 文档
              </span>
              <span class="md-header-nav__topic">
                在微信小程序与小游戏中使用 LeanCloud
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." title="文档首页" class="md-tabs__link">
        文档首页
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../storage/storage-overview/" title="数据存储" class="md-tabs__link">
          数据存储
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../engine/engine-overview/" title="云引擎+云缓存" class="md-tabs__link">
          云引擎+云缓存
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../im/im-overview/" title="即时通讯" class="md-tabs__link">
          即时通讯
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../push/push-overview/" title="消息推送" class="md-tabs__link">
          消息推送
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../sms/sms-overview/" title="短信" class="md-tabs__link">
          短信
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../game/play/play-overview/" title="游戏+云端" class="md-tabs__link">
          游戏+云端
        </a>
      
    </li>
  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="./" title="微信小程序" class="md-tabs__link md-tabs__link--active">
          微信小程序
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="LeanCloud 文档" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    LeanCloud 文档
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="文档首页" class="md-nav__link">
      文档首页
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      数据存储
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        数据存储
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../storage/storage-overview/" title="服务总览" class="md-nav__link">
      服务总览
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../storage/object.md" title="对象存储与查询" class="md-nav__link">
      对象存储与查询
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../storage/user.md" title="用户管理" class="md-nav__link">
      用户管理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../storage/live-query.md" title="实时数据同步 LiveQuery" class="md-nav__link">
      实时数据同步 LiveQuery
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../storage/acl/" title="数据安全详解" class="md-nav__link">
      数据安全详解
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      云引擎+云缓存
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        云引擎+云缓存
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../engine/engine-overview/" title="服务总览" class="md-nav__link">
      服务总览
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../engine/start.md" title="快速入门" class="md-nav__link">
      快速入门
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3">
    
    <label class="md-nav__link" for="nav-3-3">
      网站托管
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        网站托管
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../engine/nodejs.md" title="NodeJS" class="md-nav__link">
      NodeJS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../engine/python.md" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../engine/php.md" title="PHP" class="md-nav__link">
      PHP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../engine/dotnet.md" title="C#" class="md-nav__link">
      C#
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4" type="checkbox" id="nav-3-4">
    
    <label class="md-nav__link" for="nav-3-4">
      云函数
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-4">
        云函数
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../engine/storage-hook.md" title="数据存储 Hook" class="md-nav__link">
      数据存储 Hook
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../engine/im-hook.md" title="即时通讯 Hook" class="md-nav__link">
      即时通讯 Hook
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../engine/leancache.md" title="云缓存 LeanCache 使用指南" class="md-nav__link">
      云缓存 LeanCache 使用指南
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../engine/faq.md" title="云引擎常见问题" class="md-nav__link">
      云引擎常见问题
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lean-cli.md" title="命令行工具 CLI 使用指南" class="md-nav__link">
      命令行工具 CLI 使用指南
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      即时通讯
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        即时通讯
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../im/im-overview/" title="服务总览" class="md-nav__link">
      服务总览
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      客户端开发指南
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        客户端开发指南
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../im/im-beginner/" title="基础入门" class="md-nav__link">
      基础入门
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../im/im-intermediate.md" title="进阶功能" class="md-nav__link">
      进阶功能
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../im/im-senior.md" title="高阶技巧" class="md-nav__link">
      高阶技巧
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      服务端开发指南
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        服务端开发指南
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-1" type="checkbox" id="nav-4-3-1">
    
    <label class="md-nav__link" for="nav-4-3-1">
      Hook
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-3-1">
        Hook
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../engine/hook-nodejs.md" title="NodeJS" class="md-nav__link">
      NodeJS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../engine/hook-python.md" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../engine/hook-php.md" title="PHP" class="md-nav__link">
      PHP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../engine/hook-dotnet.md" title="C#" class="md-nav__link">
      C#
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-2" type="checkbox" id="nav-4-3-2">
    
    <label class="md-nav__link" for="nav-4-3-2">
      管理开发指南
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-3-2">
        管理开发指南
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../engine/server-python.md" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      消息推送
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        消息推送
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../push/push-overview/" title="服务总览" class="md-nav__link">
      服务总览
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      开发指南
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        开发指南
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-1" type="checkbox" id="nav-5-2-1">
    
    <label class="md-nav__link" for="nav-5-2-1">
      iOS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-1">
        iOS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../push/apns-cert/" title="APNS 证书配置" class="md-nav__link">
      APNS 证书配置
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-2" type="checkbox" id="nav-5-2-2">
    
    <label class="md-nav__link" for="nav-5-2-2">
      Android
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-2">
        Android
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../push/android-mixpush/" title="Android 混合推送" class="md-nav__link">
      Android 混合推送
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      短信
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        短信
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../sms/sms-overview/" title="服务总览" class="md-nav__link">
      服务总览
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-2" type="checkbox" id="nav-6-2">
    
    <label class="md-nav__link" for="nav-6-2">
      开发指南
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-2">
        开发指南
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../sms/marketing/" title="营销短信" class="md-nav__link">
      营销短信
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sms/notice/" title="通知短信" class="md-nav__link">
      通知短信
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sms/user/" title="用户验证类短信" class="md-nav__link">
      用户验证类短信
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      游戏+云端
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        游戏+云端
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-1" type="checkbox" id="nav-7-1">
    
    <label class="md-nav__link" for="nav-7-1">
      多人实时对战
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-1">
        多人实时对战
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../game/play/play-overview/" title="服务总览" class="md-nav__link">
      服务总览
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../game/play/multiplayer/" title="开发指南" class="md-nav__link">
      开发指南
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2" type="checkbox" id="nav-7-2">
    
    <label class="md-nav__link" for="nav-7-2">
      排行榜
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-2">
        排行榜
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../game/leaderboard/leaderboard-overview.md" title="服务总览" class="md-nav__link">
      服务总览
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../game/leaderboard/leaderboard.md" title="开发指南" class="md-nav__link">
      开发指南
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    
    <label class="md-nav__link" for="nav-8">
      微信小程序
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        微信小程序
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        在微信小程序与小游戏中使用 LeanCloud
      </label>
    
    <a href="./" title="在微信小程序与小游戏中使用 LeanCloud" class="md-nav__link md-nav__link--active">
      在微信小程序与小游戏中使用 LeanCloud
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#demo" title="Demo" class="md-nav__link">
    Demo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" title="准备工作" class="md-nav__link">
    准备工作
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" title="创建应用" class="md-nav__link">
    创建应用
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" title="配置域名白名单" class="md-nav__link">
    配置域名白名单
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" title="存储" class="md-nav__link">
    存储
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" title="安装与初始化" class="md-nav__link">
    安装与初始化
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" title="对象存储" class="md-nav__link">
    对象存储
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" title="数据绑定" class="md-nav__link">
    数据绑定
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" title="文件存储" class="md-nav__link">
    文件存储
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" title="文件批量上传" class="md-nav__link">
    文件批量上传
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" title="用户系统" class="md-nav__link">
    用户系统
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" title="一键登录" class="md-nav__link">
    一键登录
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unionid" title="使用 unionid 登录" class="md-nav__link">
    使用 unionid 登录
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" title="启用其他登录方式" class="md-nav__link">
    启用其他登录方式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" title="绑定现有用户" class="md-nav__link">
    绑定现有用户
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" title="云引擎" class="md-nav__link">
    云引擎
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" title="即时通讯" class="md-nav__link">
    即时通讯
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" title="安装与初始化" class="md-nav__link">
    安装与初始化
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" title="富媒体消息" class="md-nav__link">
    富媒体消息
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_18" title="支付" class="md-nav__link">
    支付
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" title="配置" class="md-nav__link">
    配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" title="服务端开发" class="md-nav__link">
    服务端开发
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" title="客户端开发" class="md-nav__link">
    客户端开发
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faq" title="FAQ" class="md-nav__link">
    FAQ
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#download" title="配置 download 合法域名时显示「该域名因违规被禁止设置。」" class="md-nav__link">
    配置 download 合法域名时显示「该域名因违规被禁止设置。」
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-denied-by-api-domain-white-list" title="Access denied by api domain white list" class="md-nav__link">
    Access denied by api domain white list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class" title="小程序真机上传数据时，控制台存储中显示的 Class 表名被压缩为单个字母。" class="md-nav__link">
    小程序真机上传数据时，控制台存储中显示的 Class 表名被压缩为单个字母。
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_22" title="反馈" class="md-nav__link">
    反馈
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#demo" title="Demo" class="md-nav__link">
    Demo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" title="准备工作" class="md-nav__link">
    准备工作
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" title="创建应用" class="md-nav__link">
    创建应用
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" title="配置域名白名单" class="md-nav__link">
    配置域名白名单
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" title="存储" class="md-nav__link">
    存储
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" title="安装与初始化" class="md-nav__link">
    安装与初始化
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" title="对象存储" class="md-nav__link">
    对象存储
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" title="数据绑定" class="md-nav__link">
    数据绑定
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" title="文件存储" class="md-nav__link">
    文件存储
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" title="文件批量上传" class="md-nav__link">
    文件批量上传
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" title="用户系统" class="md-nav__link">
    用户系统
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" title="一键登录" class="md-nav__link">
    一键登录
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unionid" title="使用 unionid 登录" class="md-nav__link">
    使用 unionid 登录
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" title="启用其他登录方式" class="md-nav__link">
    启用其他登录方式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" title="绑定现有用户" class="md-nav__link">
    绑定现有用户
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" title="云引擎" class="md-nav__link">
    云引擎
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" title="即时通讯" class="md-nav__link">
    即时通讯
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" title="安装与初始化" class="md-nav__link">
    安装与初始化
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" title="富媒体消息" class="md-nav__link">
    富媒体消息
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_18" title="支付" class="md-nav__link">
    支付
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" title="配置" class="md-nav__link">
    配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" title="服务端开发" class="md-nav__link">
    服务端开发
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" title="客户端开发" class="md-nav__link">
    客户端开发
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faq" title="FAQ" class="md-nav__link">
    FAQ
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#download" title="配置 download 合法域名时显示「该域名因违规被禁止设置。」" class="md-nav__link">
    配置 download 合法域名时显示「该域名因违规被禁止设置。」
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-denied-by-api-domain-white-list" title="Access denied by api domain white list" class="md-nav__link">
    Access denied by api domain white list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class" title="小程序真机上传数据时，控制台存储中显示的 Class 表名被压缩为单个字母。" class="md-nav__link">
    小程序真机上传数据时，控制台存储中显示的 Class 表名被压缩为单个字母。
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_22" title="反馈" class="md-nav__link">
    反馈
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="leancloud">在微信小程序与小游戏中使用 LeanCloud<a class="headerlink" href="#leancloud" title="Permanent link">&para;</a></h1>
<p>微信小程序是一个全新的跨平台移动应用平台，小游戏是小程序的一个类目，在小程序的基础上开放了游戏相关的 API。LeanCloud 为小程序提供一站式后端云服务，为你免去服务器维护、证书配置等繁琐的工作，大幅降低你的开发和运维成本。本文说明了如何在微信小程序与小游戏中使用 LeanCloud 提供的各项服务。</p>
<h2 id="demo">Demo<a class="headerlink" href="#demo" title="Permanent link">&para;</a></h2>
<p>我们在小程序上实现了 LeanTodo 应用。在这个 Demo 中你可以看到：</p>
<ul>
<li>如何对云端数据进行查询、增加、修改与删除</li>
<li>如何将查询结果数组绑定到视图层进行展示，以及如何在点击事件中得到对应的数组项</li>
<li>如何使用 <a href="livequery-guide.html">LiveQuery</a> 实现对查询结果的实时更新和多端同步</li>
<li>如何自动登录 LeanCloud 用户系统，以及如何在登录后设置账号与密码以供用户在其他平台的 LeanTodo 应用上登录</li>
<li>如何集成微信支付</li>
<li>如何实现下拉刷新</li>
</ul>
<p>你可以通过微信扫描以下二维码进入 Demo。 Demo 的源码与运行说明请参考 <a href="https://github.com/leancloud/leantodo-weapp">https://github.com/leancloud/leantodo-weapp</a>。</p>
<p><img src="images/leantodo-weapp-qr.png" alt="LeanTodo Weapp QR" width="250"></p>
<h2 id="_1">准备工作<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<h3 id="_2">创建应用<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<ul>
<li>如果你还没有创建过 LeanCloud 应用，请登录 LeanCloud 控制台 <a href="/applist.html#/newapp">创建一个新应用</a>。</li>
<li>如果你还没有小程序帐号，请访问 <a href="https://mp.weixin.qq.com">微信公众平台</a> 注册一个小程序帐号。如果你不需要进行真机调试可以跳过这一步。</li>
<li>下载 <a href="https://mp.weixin.qq.com/debug/wxadoc/dev/devtools/download.html">小程序开发工具</a>，按照 <a href="https://mp.weixin.qq.com/debug/wxadoc/dev/">小程序开发教程</a> 创建一个项目。</li>
</ul>
<h3 id="_3">配置域名白名单<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>请按照 <a href="weapp-domains.html">小程序域名白名单配置</a> 的步骤配置。如果你不需要进行真机调试可以跳过这一步（可在开发者工具的 <strong>详情</strong> &gt; <strong>项目设置</strong> 中勾选<strong>不校验安全域名、TLS 版本以及 HTTPS 证书</strong>）。</p>
<h2 id="_4">存储<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<p>要使用 LeanCloud 的数据存储、用户系统、调用云引擎等功能，需要使用 LeanCloud 存储 SDK。</p>
<h3 id="_5">安装与初始化<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>请参阅《<a href="sdk_setup-js.html">JavaScript SDK 安装指南</a>》中对应平台的说明。</p>
<h3 id="_6">对象存储<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>所有的对象存储 API 都能正常使用，详细的用法请参考 <a href="leanstorage_guide-js.html">JavaScript 数据存储开发指南</a>。</p>
<h4 id="_7">数据绑定<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<p>直接使用 <code class="codehilite">this.setData()</code> 将 <code class="codehilite">AV.Object</code> 对象设置为当前页面的 data，即可在 WXML 中使用 Mustache 语法访问绑定的数据了。下面这个例子展示了如何将一个 Query 的查询结果显示在页面上：</p>
<p><div class="codehilite"><pre><span></span><span class="c1">// pages/todos/todos.js</span>
<span class="nx">Page</span><span class="p">({</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">todos</span><span class="o">:</span> <span class="p">[],</span>
  <span class="p">},</span>
  <span class="nx">onReady</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">new</span> <span class="nx">AV</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="s1">&#39;Todo&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">descending</span><span class="p">(</span><span class="s1">&#39;createdAt&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">find</span><span class="p">()</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">todos</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span> <span class="nx">todos</span> <span class="p">}))</span>
      <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">},</span>
<span class="p">});</span>
</pre></div>
<div class="codehilite"><pre><span></span><span class="c">&lt;!-- pages/todos/todos.wxml --&gt;</span>
<span class="p">&lt;</span><span class="nt">block</span> <span class="na">wx:for</span><span class="o">=</span><span class="s">&quot;{{mustache(&#39;todos&#39;)}}&quot;</span> <span class="na">wx:for-item</span><span class="o">=</span><span class="s">&quot;todo&quot;</span> <span class="na">wx:key</span><span class="o">=</span><span class="s">&quot;objectId&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">text</span> <span class="na">data-id</span><span class="o">=</span><span class="s">&quot;{{mustache(&#39;todo.objectId&#39;)}}&quot;</span><span class="p">&gt;</span>
    {{mustache(&#39;todo.content&#39;)}}
  <span class="p">&lt;/</span><span class="nt">text</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">block</span><span class="p">&gt;</span>
</pre></div></p>
<p>使用 <code class="codehilite">include</code> 得到的嵌套对象也可以直接在视图层通过 <code class="codehilite">.</code> 访问到：</p>
<p><div class="codehilite"><pre><span></span><span class="c1">// pages/student/student.js</span>
<span class="nx">Page</span><span class="p">({</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">student</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="nx">onReady</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">new</span> <span class="nx">AV</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="s1">&#39;Student&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="s1">&#39;avatar&#39;</span><span class="p">)</span> <span class="c1">// avatar is an AV.File</span>
      <span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;56a9803e1532bc005303650c&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">student</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span> <span class="nx">student</span> <span class="p">}))</span>
      <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">},</span>
<span class="p">});</span>
</pre></div>
<div class="codehilite"><pre><span></span><span class="c">&lt;!-- pages/student/student.wxml --&gt;</span>
<span class="p">&lt;</span><span class="nt">image</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;{{mustache(&#39;student.avatar.url&#39;)}}&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">image</span><span class="p">&gt;</span>
</pre></div></p>
<h3 id="_8">文件存储<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>在小程序中，可以将用户相册或拍照得到的图片上传到 LeanCloud 服务器进行保存。首先通过 <code class="codehilite">wx.chooseImage</code> 方法选择或拍摄照片，得到本地临时文件的路径，然后按照下面的方法构造一个 <code class="codehilite">AV.File</code> 将其上传到 LeanCloud：</p>
<div class="codehilite"><pre><span></span><span class="nx">wx</span><span class="p">.</span><span class="nx">chooseImage</span><span class="p">({</span>
  <span class="nx">count</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nx">sizeType</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;original&#39;</span><span class="p">,</span> <span class="s1">&#39;compressed&#39;</span><span class="p">],</span>
  <span class="nx">sourceType</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;album&#39;</span><span class="p">,</span> <span class="s1">&#39;camera&#39;</span><span class="p">],</span>
  <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">tempFilePath</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">tempFilePaths</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">new</span> <span class="nx">AV</span><span class="p">.</span><span class="nx">File</span><span class="p">(</span><span class="s1">&#39;file-name&#39;</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">blob</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">uri</span><span class="o">:</span> <span class="nx">tempFilePath</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">}).</span><span class="nx">save</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span>
      <span class="nx">file</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">url</span><span class="p">())</span>
    <span class="p">).</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p>上传成功后可以通过 <code class="codehilite">file.url()</code> 方法得到服务端的图片 url。</p>
<h4 id="_9">文件批量上传<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h4>
<p>目前在小程序 Android 上不支持文件并发上传，需要串行上传：</p>
<div class="codehilite"><pre><span></span><span class="nx">res</span><span class="p">.</span><span class="nx">tempFilePaths</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">tempFilePath</span> <span class="p">=&gt;</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="nx">AV</span><span class="p">.</span><span class="nx">File</span><span class="p">(</span><span class="s1">&#39;filename&#39;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">blob</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">uri</span><span class="o">:</span> <span class="nx">tempFilePath</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}).</span><span class="nx">save</span><span class="p">()).</span><span class="nx">reduce</span><span class="p">(</span>
  <span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">m</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">v</span> <span class="p">=&gt;</span> <span class="nx">AV</span><span class="p">.</span><span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">([...</span><span class="nx">v</span><span class="p">,</span> <span class="nx">p</span><span class="p">()])),</span>
  <span class="nx">AV</span><span class="p">.</span><span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">([])</span>
<span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">files</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">files</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">file</span> <span class="p">=&gt;</span> <span class="nx">file</span><span class="p">.</span><span class="nx">url</span><span class="p">()))).</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>

<h3 id="_10">用户系统<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p>小程序中提供了登录 API 来获取微信的用户登录状态，应用可以访问到用户的昵称、性别等基本信息，但是如果想要保存额外的用户信息，如用户的手机号码、收货地址等，则需要使用 LeanCloud 的用户系统。</p>
<h4 id="_11">一键登录<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h4>
<p>LeanCloud 的用户系统现已支持一键使用微信用户身份登录。要使用一键登录功能，需要先设置小程序的 AppID 与 AppSecret：</p>
<ol>
<li>登录 <a href="https://mp.weixin.qq.com">微信公众平台</a>，在 <strong>设置</strong> &gt; <strong>开发设置</strong> 中获得 AppID 与 AppSecret。</li>
<li>前往 LeanCloud 控制台 &gt; <strong>组件</strong> &gt; <strong>社交</strong>，保存「微信小程序」的 AppID 与 AppSecret。</li>
</ol>
<p>这样你就可以在应用中使用 <code class="codehilite">AV.User.loginWithWeapp()</code> 方法来使用当前用户身份登录了。</p>
<div class="codehilite"><pre><span></span><span class="nx">AV</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">loginWithWeapp</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">user</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">globalData</span><span class="p">.</span><span class="nx">user</span> <span class="o">=</span> <span class="nx">user</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">();</span>
<span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>

<p>如果该用户是第一次使用此应用，调用登录 API 会创建一个新的用户，你可以在 控制台 &gt; <strong>存储</strong> 中的 <code class="codehilite">_User</code> 表中看到该用户的信息，如果该用户曾经使用该方式登录过此应用，再次调用登录 API 会返回同一个用户。</p>
<p>用户的登录状态会保存在客户端中，可以使用 <code class="codehilite">AV.User.current()</code> 方法来获取当前登录的用户，下面的例子展示了如何同步登录用户的信息：</p>
<div class="codehilite"><pre><span></span><span class="c1">// 假设已经通过 AV.User.loginWithWeapp() 登录</span>
<span class="c1">// 获得当前登录用户</span>
<span class="kr">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">AV</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">();</span>
<span class="c1">// 调用小程序 API，得到用户信息</span>
<span class="nx">wx</span><span class="p">.</span><span class="nx">getUserInfo</span><span class="p">({</span>
  <span class="nx">success</span><span class="o">:</span> <span class="p">({</span><span class="nx">userInfo</span><span class="p">})</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="c1">// 更新当前用户的信息</span>
    <span class="nx">user</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">userInfo</span><span class="p">).</span><span class="nx">save</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">user</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="c1">// 成功，此时可在控制台中看到更新后的用户信息</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">globalData</span><span class="p">.</span><span class="nx">user</span> <span class="o">=</span> <span class="nx">user</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">();</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p>使用一键登录方式登录时，LeanCloud 会将该用户的小程序 openid 保存在对应的 <code class="codehilite">user.authData.lc_weapp</code> 属性中，你可以在控制台的 <code class="codehilite">_User</code> 表中看到。可以使用 masterKey 在云引擎中获取该用户的 openid 进行支付、推送等操作。详情请参考 <a href="#支付">支付</a>。</p>
<h4 id="unionid">使用 unionid 登录<a class="headerlink" href="#unionid" title="Permanent link">&para;</a></h4>
<p>微信开放平台使用 <a href="https://mp.weixin.qq.com/debug/wxadoc/dev/api/uinionID.html">unionid</a> 来区分用户的唯一性，也就是说同一个微信开放平台帐号下的移动应用、网站应用和公众帐号（包括小程序），用户的 unionid 都是同一个，而 openid 会是多个。</p>
<p>开发者需要自行获得用户的 unionid，然后调用 <code class="codehilite">AV.User.signUpOrlogInWithAuthDataAndUnionId()</code> 投入 unionid 完成登录授权（而不应该再使用 <code class="codehilite">AV.User.loginWithWeapp()</code>）：</p>
<p><code class="codehilite">javascriptAV.User.signUpOrlogInWithAuthDataAndUnionId({uid: openid,access_token: session_key,...其他可选属性}, &#39;weapp_union&#39;, unionid, {unionIdPlatform: &#39;weixin&#39;, // 指定为 weixin 即可通过 unionid 与其他 weixin 平台的帐号打通asMainAccount: true,}).then(console.log, console.error);</code></p>
<p>为确保同一个 uid 只存在一条记录，你还需要为 <code class="codehilite">authData.weapp_union.uid</code> 加上唯一索引。进入 <strong>控制台</strong> &gt; <strong>存储</strong> &gt; 选择 <code class="codehilite">_User</code> 表 &gt; <strong>其他</strong> &gt; <strong>索引</strong>，勾选 <strong>authData</strong> 然后在出现的输入框中键入 <code class="codehilite">authData.weapp_union.uid</code>，点击 <strong>创建</strong>。</p>
<p><div class="callout callout-info">
  <p>当一个数据表的记录数超过 1 万时，开发者将无法自行为其创建索引（此前已创建的索引仍然会对超过 1 万条的数据生效）。商用版用户需要通过 <a href="https://leanticket.cn/tickets">工单服务</a> 向我们提交创建申请（选择「建立索引」分类），开发版用户需要先升级到商用版才能提交创建申请。</p>
</div></p>
<h4 id="_12">启用其他登录方式<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h4>
<p>由于 <code class="codehilite">AV.User.loginWithWeapp()</code> 只能在小程序中使用，所以使用该 API 创建的用户无法直接在小程序之外的平台上登录。如果需要使用 LeanCloud 用户系统提供的其他登录方式，如用手机号验证码登录、邮箱密码登录等，在小程序一键登录后设置对应的用户属性即可：</p>
<div class="codehilite"><pre><span></span><span class="c1">// 小程序登录</span>
<span class="nx">AV</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">loginWithWeapp</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">user</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="c1">// 设置并保存手机号</span>
  <span class="nx">user</span><span class="p">.</span><span class="nx">setMobilePhoneNumber</span><span class="p">(</span><span class="s1">&#39;13000000000&#39;</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">user</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">user</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="c1">// 发送验证短信</span>
  <span class="k">return</span> <span class="nx">AV</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">requestMobilePhoneVerify</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">getMobilePhoneNumber</span><span class="p">());</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">({</span>
  <span class="c1">// 用户填写收到短信验证码后再调用 AV.User.verifyMobilePhone(code) 完成手机号的绑定</span>
  <span class="c1">// 成功后用户的 mobilePhoneVerified 字段会被置为 true</span>
  <span class="c1">// 此后用户便可以使用手机号加动态验证码登录了</span>
<span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>

<p><div class="callout callout-info">
  <p>验证手机号码功能要求在 <a href="/dashboard/storage.html?appid={{appid}}#/storage/conf">控制台 &gt; 存储 &gt; 设置 &gt; 用户账号</a> 启用「用户注册时，向注册手机号码发送验证短信」。</p>
</div></p>
<h4 id="_13">绑定现有用户<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<p>如果你的应用已经在使用 LeanCloud 的用户系统，或者用户已经通过其他方式注册了你的应用（比如在 Web 端通过用户名密码注册），可以通过在小程序中调用 <code class="codehilite">AV.User#linkWithWeapp()</code> 来关联已有的账户：</p>
<div class="codehilite"><pre><span></span><span class="c1">// 首先，使用用户名与密码登录一个已经存在的用户</span>
<span class="nx">AV</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">logIn</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">user</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="c1">// 将当前的微信用户与当前登录用户关联</span>
  <span class="k">return</span> <span class="nx">user</span><span class="p">.</span><span class="nx">linkWithWeapp</span><span class="p">();</span>
<span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>

<h3 id="_14">云引擎<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<p>使用云引擎可以方便地实现一些在服务器执行的逻辑，比如处理敏感信息、数据聚合、采集数据等，并且不需要准备额外的服务器。</p>
<p>SDK 所有的云引擎相关的 API 都能正常使用，详细的用法请参考 <a href="leanengine_cloudfunction_guide-node.html">云函数开发指南</a>。</p>
<p>使用云引擎实现小程序支付的方案参见 <a href="#支付">支付</a>。</p>
<h2 id="_15">即时通讯<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h2>
<p>要使用 LeanCloud 的聊天、实时消息功能，需要使用 LeanCloud 即时通讯 SDK。</p>
<h3 id="_16">安装与初始化<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<p>请参阅《<a href="sdk_setup-js.html">JavaScript SDK 安装指南</a>》中对应平台的说明。</p>
<p>在 <code class="codehilite">app.js</code> 中初始化应用：</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">Realtime</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./libs/realtime.weapp.min.js&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">realtime</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Realtime</span><span class="p">({</span>
  <span class="nx">appId</span><span class="o">:</span> <span class="s1">&#39;{{appid}}&#39;</span><span class="p">,</span>
  <span class="nx">appKey</span><span class="o">:</span> <span class="s1">&#39;{{appkey}}&#39;</span><span class="p">,</span>
<span class="p">});</span>
</pre></div>

<p>需要特别注意的是，由于小程序限制了同时只能有一个 WebSocket 连接，因此推荐的用法是初始化 Realtime 一次，挂载到全局的 App 实例上，然后在所有需要的时候都使用这个 realtime 实例。</p>
<p>即时通讯 SDK 的详细用法请参考 <a href="realtime_guide-js.html">即时通讯开发指南</a>。</p>
<h3 id="_17">富媒体消息<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<p>要在小程序中使用即时通讯 SDK 的富媒体消息插件，有一些额外的约束：</p>
<ol>
<li>安装存储 SDK 至 <code class="codehilite">libs</code> 目录，并将文件重命名为 <code class="codehilite">leancloud-storage.js</code>。</li>
<li>安装即时通讯 SDK 至 <code class="codehilite">libs</code> 目录，并将文件重命名为 <code class="codehilite">leancloud-realtime.js</code>。</li>
<li>下载 <a href="https://unpkg.com/leancloud-realtime-plugin-typed-messages@^3.0.0"><code class="codehilite">leancloud-realtime-plugin-typed-messages.js</code></a>，移动到 <code class="codehilite">libs</code> 目录。必须保证<u>三个文件在同一目录中</u>。</li>
<li>在 <code class="codehilite">app.js</code> 中<u>依次加载</u> <code class="codehilite">leancloud-storage.js</code>、<code class="codehilite">leancloud-realtime.js</code> 和 <code class="codehilite">leancloud-realtime-plugin-typed-messages.js</code>。
  <div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">AV</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./libs/leancloud-storage.js&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">Realtime</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./libs/leancloud-realtime.js&#39;</span><span class="p">).</span><span class="nx">Realtime</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">TypedMessagesPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./libs/leancloud-realtime-plugin-typed-messages.js&#39;</span><span class="p">).</span><span class="nx">TypedMessagesPlugin</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">ImageMessage</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./libs/leancloud-realtime-plugin-typed-messages.js&#39;</span><span class="p">).</span><span class="nx">ImageMessage</span><span class="p">;</span>
</pre></div></li>
<li>在 <code class="codehilite">app.js</code> 中初始化应用：
  <div class="codehilite"><pre><span></span><span class="c1">// 初始化存储 SDK</span>
<span class="nx">AV</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
  <span class="nx">appId</span><span class="o">:</span> <span class="s1">&#39;{{appid}}&#39;</span><span class="p">,</span>
  <span class="nx">appKey</span><span class="o">:</span> <span class="s1">&#39;{{appkey}}&#39;</span><span class="p">,</span>
<span class="p">});</span>
<span class="c1">// 初始化即时通讯 SDK</span>
<span class="kr">const</span> <span class="nx">realtime</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Realtime</span><span class="p">({</span>
  <span class="nx">appId</span><span class="o">:</span> <span class="s1">&#39;{{appid}}&#39;</span><span class="p">,</span>
  <span class="nx">appKey</span><span class="o">:</span> <span class="s1">&#39;{{appkey}}&#39;</span><span class="p">,</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="nx">TypedMessagesPlugin</span><span class="p">],</span> <span class="c1">// 注册富媒体消息插件</span>
<span class="p">});</span>
</pre></div></li>
</ol>
<p>富媒体消息的用法请参考 <a href="realtime_guide-js.html#富媒体消息">即时通讯开发指南 - 富媒体消息</a>。</p>
<h2 id="_18">支付<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h2>
<h3 id="_19">配置<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<p>在开始之前，请确保已经在微信小程序后台开启了「微信支付」功能，然后按照下面的步骤配置云引擎环境变量：</p>
<ol>
<li>进入应用控制台 - 云引擎 - 设置</li>
<li>设置应用的二级域名并保存</li>
<li>添加并保存以下环境变量</li>
<li><code class="codehilite">WEIXIN_APPID</code>：小程序 AppId</li>
<li><code class="codehilite">WEIXIN_MCHID</code>：微信支付商户号</li>
<li><code class="codehilite">WEIXIN_PAY_SECRET</code>：微信支付 API 密钥（<a href="https://pay.weixin.qq.com">微信商户平台</a> - 账户设置 - API安全 - 密钥设置）</li>
<li><code class="codehilite">WEIXIN_NOTIFY_URL</code>：<code class="codehilite">https://.leanapp.cn/weixin/pay-callback</code>，其中 <code class="codehilite">yourdomain</code> 是第二步中设置的二级域名</li>
</ol>
<details>
<summary>查看示例</summary>
<p>
![image](https://cloud.githubusercontent.com/assets/175227/22236906/7c651c80-e243-11e6-819b-007d5862bdbf.png)
</p>
</details>

<h3 id="_20">服务端开发<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<p>首先确认本机已经安装 <a href="http://nodejs.org/">Node.js</a> 运行环境和 <a href="leanengine_cli.html">LeanCloud 命令行工具</a>，然后执行下列指令下载示例项目：</p>
<div class="codehilite"><pre><span></span>$ git clone https://github.com/leancloud/weapp-pay-getting-started.git
$ <span class="nb">cd</span> weapp-pay-getting-started
</pre></div>

<p>安装依赖：</p>
<div class="codehilite"><pre><span></span>npm install
</pre></div>

<p>登录并关联应用：</p>
<div class="codehilite"><pre><span></span>lean login
lean switch
</pre></div>

<p>启动项目：</p>
<div class="codehilite"><pre><span></span>lean up
</pre></div>

<p>之后你就可以在 <a href="http://localhost:3001">localhost:3001</a> 调试云函数了。</p>
<p>示例项目中与支付直接相关代码有三部分：</p>
<ul>
<li><code class="codehilite">order.js</code>：对应 Order 表，定义了部分字段的 getter/setter，以及 <code class="codehilite">place</code> 方法用于向微信 API 提交订单。</li>
<li><code class="codehilite">cloud.js</code>：其中定义了名为 <code class="codehilite">order</code> 的云函数，这个云函数会获取当前用户的 <code class="codehilite">openid</code>，以其身份创建了一个 1 分钱的 order 并下单，最后返回签名过的订单信息。</li>
<li><code class="codehilite">routers/weixin.js</code>：其中定义了 <code class="codehilite">pay-callback</code> 的处理函数，当用户支付成功后微信调用这个 URL，这个函数将对应的订单状态更新为 <code class="codehilite">SUCCESS</code>。</li>
</ul>
<p>请根据你的业务需要修改代码。参考文档：</p>
<ul>
<li><a href="https://pay.weixin.qq.com/wiki/doc/api/wxa/wxa_api.php?chapter=9_1">微信支付统一下单 API 参数与错误码</a></li>
<li><a href="https://pay.weixin.qq.com/wiki/doc/api/wxa/wxa_api.php?chapter=9_7">微信支付结果通知参数</a></li>
</ul>
<p>完成开发后部署到预备环境（若无预备环境则直接部署到生产环境）：
<div class="codehilite"><pre><span></span>lean deploy
</pre></div></p>
<h3 id="_21">客户端开发<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h3>
<p>客户端完成一次支付需要分两步：</p>
<ol>
<li>用户登录后，调用名为 <code class="codehilite">order</code> 的云函数下单，返回签名过的订单信息。</li>
<li>调用支付 API（<code class="codehilite">wx.requestPayment</code>），传入上一步返回的订单信息，发起支付。</li>
</ol>
<div class="codehilite"><pre><span></span><span class="nx">AV</span><span class="p">.</span><span class="nx">Cloud</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="s1">&#39;order&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">data</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">data</span><span class="p">.</span><span class="nx">success</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="c1">// 支付成功</span>
  <span class="p">});</span>
  <span class="nx">data</span><span class="p">.</span><span class="nx">fail</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">errMsg</span> <span class="p">})</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="c1">// 错误处理</span>
  <span class="p">});</span>
  <span class="nx">wx</span><span class="p">.</span><span class="nx">requestPayment</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="c1">// 错误处理</span>
<span class="p">})</span>
</pre></div>

<p>客户端的示例代码参见 <a href="https://github.com/leancloud/leantodo-weapp">Demo</a> 打赏功能。参考文档：</p>
<ul>
<li><a href="https://mp.weixin.qq.com/debug/wxadoc/dev/api/api-pay.html">小程序客户端发起支付 API</a></li>
</ul>
<h2 id="faq">FAQ<a class="headerlink" href="#faq" title="Permanent link">&para;</a></h2>
<h3 id="download">配置 download 合法域名时显示「该域名因违规被禁止设置。」<a class="headerlink" href="#download" title="Permanent link">&para;</a></h3>
<p>请前往 <a href="/dashboard/storage.html?appid={{appid}}#/storage/conf">控制台 &gt; 存储 &gt; 设置 &gt; 文件</a> 配置你自己的文件域名。</p>
<h3 id="access-denied-by-api-domain-white-list">Access denied by api domain white list<a class="headerlink" href="#access-denied-by-api-domain-white-list" title="Permanent link">&para;</a></h3>
<p>如果你的应用启用并配置了 <a href="data_security.html#Web_应用安全设置">Web 安全域名</a>，你可能会 catch 到 <code class="codehilite">Access denied by api domain white list</code> 异常，请将提示的域名添加至应用的 Web 安全域名列表。</p>
<h3 id="class">小程序真机上传数据时，控制台存储中显示的 Class 表名被压缩为单个字母。<a class="headerlink" href="#class" title="Permanent link">&para;</a></h3>
<p>例如新建一个名为「Todo」的表，上传数据成功后进入控制台查看，其表名称显示为像 i、u 这样的单个字母。这是因为真机上代码会被压缩，解决办法是在创建 Class 后向 SDK 注册该 Class 的名字：<code class="codehilite">AV.Object.register(Todo, &#39;Todo&#39;);</code>。</p>
<h2 id="_22">反馈<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h2>
<p>如果在微信小程序中使用 LeanCloud 时遇到问题，欢迎通过我们的 <a href="https://forum.leancloud.cn/c/jing-xuan-faq/weapp">论坛</a> 进行反馈。</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../game/play/multiplayer/" title="开发指南" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                开发指南
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2014 - 2018 LeanCloud
          </div>
        
        powered by
        <a href="https://leancloud.cn">LeanCloud</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>